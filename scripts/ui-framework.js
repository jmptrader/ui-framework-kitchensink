!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function s(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function o(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function l(t){var e=new FileReader;return e.readAsText(t),a(e)}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(g.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob?(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=s(this);return t?t:Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}function u(t,e){e=e||{};var i=e.body;if(u.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new n(e.headers)),this.method=c(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function d(t){var e=new n,i=(t.getAllResponseHeaders()||"").trim().split("\n");return i.forEach(function(t){var i=t.trim().split(":"),r=i.shift().trim(),n=i.join(":").trim();e.append(r,n)}),e}function p(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var g={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};n.prototype.append=function(t,r){t=e(t),r=i(r);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(r)},n.prototype.delete=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var i=this.map[e(t)];return i?i[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(t,r){this.map[e(t)]=[i(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(i){this.map[i].forEach(function(r){t.call(e,r,i,this)},this)},this)},n.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),r(t)},n.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},n.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),r(t)},g.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.prototype.clone=function(){return new u(this)},h.call(u.prototype),h.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];p.redirect=function(t,e){if(v.indexOf(e)===-1)throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=n,t.Request=u,t.Response=p,t.fetch=function(t,e){return new Promise(function(i,r){function n(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var s;s=u.prototype.isPrototypeOf(t)&&!e?t:new u(t,e);var a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:d(a),url:n()},e="response"in a?a.response:a.responseText;i(new p(e,t))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(s.method,s.url,!0),"include"===s.credentials&&(a.withCredentials=!0),"responseType"in a&&g.blob&&(a.responseType="blob"),s.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);var fabric=fabric||{version:"1.6.3"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:fabric.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var r in e)t.call(this,r,e[r]);else t.call(this,e,i);return this}}function r(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var r=0,n=i.length;r<n;r++)i[r]&&i[r].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return t!==!1}),this}}}fabric.Observable={observe:e,stopObserving:i,fire:r,on:e,off:i,trigger:r}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var r=this.getObjects();return i?r[e]=t:r.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=0,r=arguments.length;i<r;i++)t=e.indexOf(arguments[i]),t!==-1&&(e.splice(t,1),this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),r=i.length;r--;)t.call(e,i[r],r,i);return this},getObjects:function(t){return"undefined"==typeof t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},function(t){var e=Math.sqrt,i=Math.atan2,r=Math.pow,n=Math.abs,s=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return i!==-1&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*s},radiansToDegrees:function(t){return t/s},rotatePoint:function(t,e,i){t.subtractEquals(e);var r=fabric.util.rotateVector(t,i);return new fabric.Point(r.x,r.y).addEquals(e)},rotateVector:function(t,e){var i=Math.sin(e),r=Math.cos(e),n=t.x*r-t.y*i,s=t.x*i+t.y*r;return{x:n,y:s}},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],i=fabric.util.array.min(e),r=fabric.util.array.max(e),n=Math.abs(i-r),s=[t[0].y,t[1].y,t[2].y,t[3].y],a=fabric.util.array.min(s),o=fabric.util.array.max(s),l=Math.abs(a-o);return{left:i,top:a,width:n,height:l}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],r=fabric.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-r.x,i[5]=-r.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return r*fabric.DPI/25.4;case"cm":return r*fabric.DPI/2.54;case"in":return r*fabric.DPI;case"pt":return r*fabric.DPI/72;case"pc":return r*fabric.DPI/72*12;case"em":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;for(var i=e.split("."),r=i.length,n=t||fabric.window,s=0;s<r;++s)n=n[i[s]];return n},loadImage:function(t,e,i,r){if(!t)return void(e&&e.call(i,t));var n=fabric.util.createImage();n.onload=function(){e&&e.call(i,n),n=n.onload=n.onerror=null},n.onerror=function(){fabric.log("Error loading "+n.src),e&&e.call(i,null,!0),n=n.onload=n.onerror=null},0!==t.indexOf("data")&&r&&(n.crossOrigin=r),n.src=t},enlivenObjects:function(t,e,i,r){function n(){++a===o&&e&&e(s)}t=t||[];var s=[],a=0,o=t.length;return o?void t.forEach(function(t,e){if(!t||!t.type)return void n();var a=fabric.util.getKlass(t.type,i);a.async?a.fromObject(t,function(i,a){a||(s[e]=i,r&&r(t,s[e])),n()}):(s[e]=a.fromObject(t),r&&r(t,s[e]),n())}):void(e&&e(s))},groupSVGElements:function(t,e,i){var r;return r=new fabric.PathGroup(t,e),"undefined"!=typeof i&&r.setSourcePath(i),r},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var r=0,n=i.length;r<n;r++)i[r]in t&&(e[i[r]]=t[i[r]])},drawDashedLine:function(t,r,n,s,a,o){var l=s-r,h=a-n,c=e(l*l+h*h),u=i(h,l),f=o.length,d=0,p=!0;for(t.save(),t.translate(r,n),t.moveTo(0,0),t.rotate(u),r=0;c>r;)r+=o[d++%f],r>c&&(r=c),t[p?"lineTo":"moveTo"](r,0),p=!p;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){for(var e=t.prototype,i=e.stateProperties.length;i--;){var r=e.stateProperties[i],n=r.charAt(0).toUpperCase()+r.slice(1),s="set"+n,a="get"+n;e[a]||(e[a]=function(t){return new Function('return this.get("'+t+'")')}(r)),e[s]||(e[s]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(r))}},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var n=i(t[1],t[0]),a=r(t[0],2)+r(t[1],2),o=e(a),l=(t[0]*t[3]-t[2]*t[1])/o,h=i(t[0]*t[2]+t[1]*t[3],a);return{angle:n/s,scaleX:o,scaleY:l,skewX:h/s,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var r=[1,0,n(Math.tan(i*s)),1],a=[n(t),0,0,n(e)];return fabric.util.multiplyTransformMatrices(a,r,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,r){r>0&&(e>r?e-=r:e=0,i>r?i-=r:i=0);for(var n=!0,s=t.getImageData(e,i,2*r||1,2*r||1),a=3,o=s.data.length;a<o;a+=4){var l=s.data[a];if(n=l<=0,n===!1)break}return s=null,n},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",r="Mid",n="Mid",s=t.split(" ");return s&&s.length&&(i=s.pop(),"meet"!==i&&"slice"!==i?(e=i,i="meet"):s.length&&(e=s.pop())),r="none"!==e?e.slice(1,4):"none",n="none"!==e?e.slice(5,8):"none",{meetOrSlice:i,alignX:r,alignY:n}},clearFabricFontCache:function(t){fabric.charWidthsCache[t]&&(fabric.charWidthsCache[t]={})}}}("undefined"!=typeof exports?exports:this),function(){function t(t,r,s,a,l,h,c){var u=o.call(arguments);if(n[u])return n[u];var f=Math.PI,d=c*f/180,p=Math.sin(d),g=Math.cos(d),m=0,v=0;s=Math.abs(s),a=Math.abs(a);var b=-g*t*.5-p*r*.5,y=-g*r*.5+p*t*.5,x=s*s,w=a*a,_=y*y,C=b*b,S=x*w-x*_-w*C,T=0;if(S<0){var k=Math.sqrt(1-S/(x*w));s*=k,a*=k}else T=(l===h?-1:1)*Math.sqrt(S/(x*_+w*C));var O=T*s*y/a,A=-T*a*b/s,M=g*O-p*A+.5*t,D=p*O+g*A+.5*r,N=i(1,0,(b-O)/s,(y-A)/a),L=i((b-O)/s,(y-A)/a,(-b-O)/s,(-y-A)/a);0===h&&L>0?L-=2*f:1===h&&L<0&&(L+=2*f);for(var F=Math.ceil(Math.abs(L/f*2)),I=[],E=L/F,P=8/3*Math.sin(E/4)*Math.sin(E/4)/Math.sin(E/2),j=N+E,B=0;B<F;B++)I[B]=e(N,j,g,p,s,a,M,D,P,m,v),m=I[B][4],v=I[B][5],N=j,j+=E;return n[u]=I,I}function e(t,e,i,r,n,a,l,h,c,u,f){var d=o.call(arguments);if(s[d])return s[d];var p=Math.cos(t),g=Math.sin(t),m=Math.cos(e),v=Math.sin(e),b=i*n*m-r*a*v+l,y=r*n*m+i*a*v+h,x=u+c*(-i*n*g-r*a*p),w=f+c*(-r*n*g+i*a*p),_=b+c*(i*n*v+r*a*m),C=y+c*(r*n*v-i*a*m);return s[d]=[x,w,_,C,b,y],s[d]}function i(t,e,i,r){var n=Math.atan2(e,t),s=Math.atan2(r,i);return s>=n?s-n:2*Math.PI-(n-s)}function r(t,e,i,r,n,s,l,h){var c=o.call(arguments);if(a[c])return a[c];var u,f,d,p,g,m,v,b,y=Math.sqrt,x=Math.min,w=Math.max,_=Math.abs,C=[],S=[[],[]];f=6*t-12*i+6*n,u=-3*t+9*i-9*n+3*l,d=3*i-3*t;for(var T=0;T<2;++T)if(T>0&&(f=6*e-12*r+6*s,u=-3*e+9*r-9*s+3*h,d=3*r-3*e),_(u)<1e-12){if(_(f)<1e-12)continue;p=-d/f,0<p&&p<1&&C.push(p)}else v=f*f-4*d*u,v<0||(b=y(v),g=(-f+b)/(2*u),0<g&&g<1&&C.push(g),m=(-f-b)/(2*u),0<m&&m<1&&C.push(m));for(var k,O,A,M=C.length,D=M;M--;)p=C[M],A=1-p,k=A*A*A*t+3*A*A*p*i+3*A*p*p*n+p*p*p*l,S[0][M]=k,O=A*A*A*e+3*A*A*p*r+3*A*p*p*s+p*p*p*h,S[1][M]=O;S[0][D]=t,S[1][D]=e,S[0][D+1]=l,S[1][D+1]=h;var N=[{x:x.apply(null,S[0]),y:x.apply(null,S[1])},{x:w.apply(null,S[0]),y:w.apply(null,S[1])}];return a[c]=N,N}var n={},s={},a={},o=Array.prototype.join;fabric.util.drawArc=function(e,i,r,n){for(var s=n[0],a=n[1],o=n[2],l=n[3],h=n[4],c=n[5],u=n[6],f=[[],[],[],[]],d=t(c-i,u-r,s,a,l,h,o),p=0,g=d.length;p<g;p++)f[p][0]=d[p][0]+i,f[p][1]=d[p][1]+r,f[p][2]=d[p][2]+i,f[p][3]=d[p][3]+r,f[p][4]=d[p][4]+i,f[p][5]=d[p][5]+r,e.bezierCurveTo.apply(e,f[p])},fabric.util.getBoundsOfArc=function(e,i,n,s,a,o,l,h,c){for(var u=0,f=0,d=[],p=[],g=t(h-e,c-i,n,s,o,l,a),m=[[],[]],v=0,b=g.length;v<b;v++)d=r(u,f,g[v][0],g[v][1],g[v][2],g[v][3],g[v][4],g[v][5]),m[0].x=d[0].x+e,m[0].y=d[0].y+i,m[1].x=d[1].x+e,m[1].y=d[1].y+i,p.push(m[0]),p.push(m[1]),u=g[v][4],f=g[v][5];return p},fabric.util.getBoundsOfCurve=r}(),function(){function t(t,e){for(var i=s.call(arguments,2),r=[],n=0,a=t.length;n<a;n++)r[n]=i.length?t[n][e].apply(t[n],i):t[n][e].call(t[n]);return r}function e(t,e){return n(t,e,function(t,e){return t>=e})}function i(t,e){return n(t,e,function(t,e){return t<e})}function r(t,e){for(var i=t.length;i--;)t[i]=e;return t}function n(t,e,i){if(t&&0!==t.length){var r=t.length-1,n=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],n)&&(n=t[r][e]);else for(;r--;)i(t[r],n)&&(n=t[r]);return n}}var s=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==Number.POSITIVE_INFINITY&&r!==Number.NEGATIVE_INFINITY&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=i)return-1;for(var n=r>=0?r:Math.max(i-Math.abs(r),0);n<i;n++)if(n in e&&e[n]===t)return n;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,r=this.length>>>0;i<r;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],r=0,n=this.length>>>0;r<n;r++)r in this&&(i[r]=t.call(e,this[r],r,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,r=this.length>>>0;i<r;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,r=this.length>>>0;i<r;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,r=[],n=0,s=this.length>>>0;n<s;n++)n in this&&(i=this[n],t.call(e,i,n,this)&&r.push(i));return r}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,r=0;if(arguments.length>1)e=arguments[1];else for(;;){if(r in this){e=this[r++];break}if(++r>=i)throw new TypeError}for(;r<i;r++)r in this&&(e=t.call(null,e,this[r],r,this));return e}),fabric.util.array={fill:r,invoke:t,min:i,max:e}}(),function(){function t(t,e){for(var i in e)t[i]=e[i];return t}function e(e){return t({},e)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(r){var n,s=this,a=t.call(arguments,1);return n=a.length?function(){return e.call(s,this instanceof i?this:r,a.concat(t.call(arguments)))}:function(){return e.call(s,this instanceof i?this:r,arguments)},i.prototype=this.prototype,n.prototype=new i,n})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,r.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var s=null,o=r.call(arguments,0);"function"==typeof o[0]&&(s=o.shift()),i.superclass=s,i.subclasses=[],s&&(t.prototype=s.prototype,i.prototype=new t,s.subclasses.push(i));for(var l=0,h=o.length;l<h;l++)a(i,o[l],s);return i.prototype.initialize||(i.prototype.initialize=n),i.prototype.constructor=i,i.prototype.callSuper=e,i}var r=Array.prototype.slice,n=function(){},s=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),a=function(t,e,i){for(var r in e)r in t.prototype&&"function"==typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var r=this.constructor.superclass;this.constructor.superclass=i;var n=e[t].apply(this,arguments);if(this.constructor.superclass=r,"initialize"!==t)return n}}(r):t.prototype[r]=e[r],s&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,r=Array.prototype.slice.call(arguments,1),n=r.length;for(i=0;i<n;i++)if(e=typeof t[r[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(a(t),i||fabric.window.event)}}function r(t,e){return function(i){if(g[t]&&g[t][e])for(var r=g[t][e],n=0,s=r.length;n<s;n++)r[n].call(this,i||fabric.window.event)}}function n(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==l?t.srcElement:null),i=fabric.util.getScrollLeftTop(e);return{x:m(t)+i.left,y:v(t)+i.top}}function s(t,e,i){var r="touchend"===t.type?"changedTouches":"touches";return t[r]&&t[r][0]?t[r][0][e]-(t[r][0][e]-t[r][0][i])||t[i]:t[i]}var a,o,l="unknown",h=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};a=function(e){return t[e]},o=function(e,i){t[e]=i}}();var c,u,f=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),d=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),p={},g={};f?(c=function(t,e,i){t.addEventListener(e,i,!1)},u=function(t,e,i){t.removeEventListener(e,i,!1)}):d?(c=function(t,i,r){var n=h(t);o(n,t),p[n]||(p[n]={}),p[n][i]||(p[n][i]=[]);var s=e(n,r);p[n][i].push(s),t.attachEvent("on"+i,s.wrappedHandler)},u=function(t,e,i){var r,n=h(t);if(p[n]&&p[n][e])for(var s=0,a=p[n][e].length;s<a;s++)r=p[n][e][s],r&&r.handler===i&&(t.detachEvent("on"+e,r.wrappedHandler),p[n][e][s]=null)}):(c=function(t,e,i){var n=h(t);if(g[n]||(g[n]={}),!g[n][e]){g[n][e]=[];var s=t["on"+e];s&&g[n][e].push(s),t["on"+e]=r(n,e)}g[n][e].push(i)},u=function(t,e,i){var r=h(t);if(g[r]&&g[r][e])for(var n=g[r][e],s=0,a=n.length;s<a;s++)n[s]===i&&n.splice(s,1)}),fabric.util.addListener=c,fabric.util.removeListener=u;var m=function(t){return typeof t.clientX!==l?t.clientX:0},v=function(t){return typeof t.clientY!==l?t.clientY:0};fabric.isTouchSupported&&(m=function(t){return s(t,"pageX","clientX")},v=function(t){return s(t,"pageY","clientY")}),fabric.util.getPointer=n,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?s(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in e)if("opacity"===r)s(t,e[r]);else{var n="float"===r||"cssFloat"===r?"undefined"==typeof i.styleFloat?"cssFloat":"styleFloat":r;i[n]=e[r]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,r="string"==typeof e.style.filter,n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(t){return t};i?s=function(t,e){return t.style.opacity=e,t}:r&&(s=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),n.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(n,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var r in e)"class"===r?i.className=e[r]:"for"===r?i.htmlFor=e[r]:i.setAttribute(r,e[r]);return i}function i(t,e){t&&(" "+t.className+" ").indexOf(" "+e+" ")===-1&&(t.className+=(t.className?" ":"")+e)}function r(t,i,r){return"string"==typeof i&&(i=e(i,r)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function n(t){for(var e=0,i=0,r=fabric.document.documentElement,n=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&(t=t.parentNode||t.host,t===fabric.document?(e=n.scrollLeft||r.scrollLeft||0,i=n.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:i}}function s(t){var e,i,r=t&&t.ownerDocument,s={left:0,top:0},a={left:0,top:0},o={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return a;for(var l in o)a[o[l]]+=parseInt(h(t,l),10)||0;return e=r.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(s=t.getBoundingClientRect()),i=n(t),{left:s.left+i.left-(e.clientLeft||0)+a.left,top:s.top+i.top-(e.clientTop||0)+a.top}}var a,o=Array.prototype.slice,l=function(t){return o.call(t,0)};try{a=l(fabric.document.childNodes)instanceof Array}catch(t){}a||(l=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var h;h=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){function t(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),r?t.style[r]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=null),r?t.style[r]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,r="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],r=fabric.document.createElement("script"),n=!0;r.onload=r.onreadystatechange=function(t){if(n){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;n=!1,e(t||fabric.window.event),r=r.onload=r.onreadystatechange=null}},r.src=t,i.appendChild(r)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=l,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=r,fabric.util.getScrollLeftTop=n,fabric.util.getElementOffset=s,fabric.util.getElementStyle=h}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,n){n||(n={});var s,a=n.method?n.method.toUpperCase():"GET",o=n.onComplete||function(){},l=r();return l.onreadystatechange=function(){4===l.readyState&&(o(l),l.onreadystatechange=e)},"GET"===a&&(s=null,"string"==typeof n.parameters&&(i=t(i,n.parameters))),l.open(a,i,!0),"POST"!==a&&"PUT"!==a||l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(s),l}var r=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{var i=t[e]();if(i)return t[e]}catch(t){}}();fabric.util.request=i}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){"undefined"!=typeof console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t){e(function(i){t||(t={});var r,n=i||+new Date,s=t.duration||500,a=n+s,o=t.onChange||function(){},l=t.abort||function(){return!1},h=t.easing||function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},c="startValue"in t?t.startValue:0,u="endValue"in t?t.endValue:100,f=t.byValue||u-c;t.onStart&&t.onStart(),function i(u){r=u||+new Date;var d=r>a?s:r-n;return l()?void(t.onComplete&&t.onComplete()):(o(h(d,c,f,s)),r>a?void(t.onComplete&&t.onComplete()):void e(i))}(n)})}function e(){return i.apply(fabric.window,arguments)}var i=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=t,fabric.util.requestAnimFrame=e}(),function(){function t(t,e,i,r){return t<Math.abs(e)?(t=e,r=i/4):r=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e}function r(t,e,i,r){return t/=r/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function n(t,e,i,r){return i*(t/=r)*t*t*t+e}function s(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e}function a(t,e,i,r){return t/=r/2,t<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function o(t,e,i,r){return i*(t/=r)*t*t*t*t+e}function l(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e}function h(t,e,i,r){return t/=r/2,t<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function c(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e}function u(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e}function f(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e}function d(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e}function p(t,e,i,r){return t===r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e}function g(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2,t<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e)}function m(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e}function v(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e}function b(t,e,i,r){return t/=r/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function y(i,r,n,s){var a=1.70158,o=0,l=n;if(0===i)return r;if(i/=s,1===i)return r+n;o||(o=.3*s);var h=t(l,n,o,a);return-e(h,i,s)+r}function x(e,i,r,n){var s=1.70158,a=0,o=r;if(0===e)return i;if(e/=n,1===e)return i+r;a||(a=.3*n);var l=t(o,r,a,s);return l.a*Math.pow(2,-10*e)*Math.sin((e*n-l.s)*(2*Math.PI)/l.p)+l.c+i}function w(i,r,n,s){var a=1.70158,o=0,l=n;if(0===i)return r;if(i/=s/2,2===i)return r+n;o||(o=s*(.3*1.5));var h=t(l,n,o,a);return i<1?-.5*e(h,i,s)+r:h.a*Math.pow(2,-10*(i-=1))*Math.sin((i*s-h.s)*(2*Math.PI)/h.p)*.5+h.c+r}function _(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e}function C(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e}function S(t,e,i,r,n){return void 0===n&&(n=1.70158),t/=r/2,t<1?i/2*(t*t*(((n*=1.525)+1)*t-n))+e:i/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+e}function T(t,e,i,r){return i-k(r-t,0,i,r)+e}function k(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function O(t,e,i,r){return t<r/2?.5*T(2*t,0,i,r)+e:.5*k(2*t-r,0,i,r)+.5*i+e}fabric.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return t/=r/2,t<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:i,easeInOutCubic:r,
easeInQuart:n,easeOutQuart:s,easeInOutQuart:a,easeInQuint:o,easeOutQuint:l,easeInOutQuint:h,easeInSine:c,easeOutSine:u,easeInOutSine:f,easeInExpo:d,easeOutExpo:p,easeInOutExpo:g,easeInCirc:m,easeOutCirc:v,easeInOutCirc:b,easeInElastic:y,easeOutElastic:x,easeInOutElastic:w,easeInBack:_,easeOutBack:C,easeInOutBack:S,easeInBounce:T,easeOutBounce:k,easeInOutBounce:O}}(),function(t){"use strict";function e(t){return t in k?k[t]:t}function i(t,e,i,r){var n,s="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?w(i.transformMatrix,g.parseTransformAttribute(e)):g.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,i&&i.visible===!1&&(e=!1)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":n=s?e.map(x):x(e,r):e="",!s&&isNaN(n)?e:n}function r(t){for(var e in O)if("undefined"!=typeof t[O[e]]&&""!==t[e]){if("undefined"==typeof t[e]){if(!g.Object.prototype[e])continue;t[e]=g.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var i=new g.Color(t[e]);t[e]=i.setAlpha(y(i.getAlpha()*t[O[e]],2)).toRgba()}}return t}function n(t,r){var n,s;t.replace(/;\s*$/,"").split(";").forEach(function(t){var a=t.split(":");n=e(a[0].trim().toLowerCase()),s=i(n,a[1].trim()),r[n]=s})}function s(t,r){var n,s;for(var a in t)"undefined"!=typeof t[a]&&(n=e(a.toLowerCase()),s=i(n,t[a]),r[n]=s)}function a(t,e){var i={};for(var r in g.cssRules[e])if(o(t,r.split(" ")))for(var n in g.cssRules[e][r])i[n]=g.cssRules[e][r][n];return i}function o(t,e){var i,r=!0;return i=h(t,e.pop()),i&&e.length&&(r=l(t,e)),i&&r&&0===e.length}function l(t,e){for(var i,r=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)r&&(i=e.pop()),t=t.parentNode,r=h(t,i);return 0===e.length}function h(t,e){var i,r=t.nodeName,n=t.getAttribute("class"),s=t.getAttribute("id");if(i=new RegExp("^"+r,"i"),e=e.replace(i,""),s&&e.length&&(i=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),n&&e.length){n=n.split(" ");for(var a=n.length;a--;)i=new RegExp("\\."+n[a]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")}return 0===e.length}function c(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var r,n,s=t.getElementsByTagName("*");for(n=0;n<s.length;n++)if(r=s[n],e===r.getAttribute("id"))return r}function u(t){for(var e=t.getElementsByTagName("use"),i=0;e.length&&i<e.length;){var r,n,s,a,o,l=e[i],h=l.getAttribute("xlink:href").substr(1),u=l.getAttribute("x")||0,d=l.getAttribute("y")||0,p=c(t,h).cloneNode(!0),g=(p.getAttribute("transform")||"")+" translate("+u+", "+d+")",m=e.length;if(f(p),/^svg$/i.test(p.nodeName)){var v=p.ownerDocument.createElement("g");for(s=0,a=p.attributes,o=a.length;s<o;s++)n=a.item(s),v.setAttribute(n.nodeName,n.nodeValue);for(;null!=p.firstChild;)v.appendChild(p.firstChild);p=v}for(s=0,a=l.attributes,o=a.length;s<o;s++)n=a.item(s),"x"!==n.nodeName&&"y"!==n.nodeName&&"xlink:href"!==n.nodeName&&("transform"===n.nodeName?g=n.nodeValue+" "+g:p.setAttribute(n.nodeName,n.nodeValue));p.setAttribute("transform",g),p.setAttribute("instantiated_by_use","1"),p.removeAttribute("id"),r=l.parentNode,r.replaceChild(p,l),e.length===m&&i++}}function f(t){var e,i,r,n,s=t.getAttribute("viewBox"),a=1,o=1,l=0,h=0,c=t.getAttribute("width"),u=t.getAttribute("height"),f=t.getAttribute("x")||0,d=t.getAttribute("y")||0,p=t.getAttribute("preserveAspectRatio")||"",m=!s||!C.test(t.tagName)||!(s=s.match(A)),v=!c||!u||"100%"===c||"100%"===u,b=m&&v,y={},w="";if(y.width=0,y.height=0,y.toBeParsed=b,b)return y;if(m)return y.width=x(c),y.height=x(u),y;if(l=-parseFloat(s[1]),h=-parseFloat(s[2]),e=parseFloat(s[3]),i=parseFloat(s[4]),v?(y.width=e,y.height=i):(y.width=x(c),y.height=x(u),a=y.width/e,o=y.height/i),p=g.util.parsePreserveAspectRatioAttribute(p),"none"!==p.alignX&&(o=a=a>o?o:a),1===a&&1===o&&0===l&&0===h&&0===f&&0===d)return y;if((f||d)&&(w=" translate("+x(f)+" "+x(d)+") "),r=w+" matrix("+a+" 0 0 "+o+" "+l*a+" "+h*o+") ","svg"===t.tagName){for(n=t.ownerDocument.createElement("g");null!=t.firstChild;)n.appendChild(t.firstChild);t.appendChild(n)}else n=t,r=n.getAttribute("transform")+r;return n.setAttribute("transform",r),y}function d(t){var e=t.objects,i=t.options;return e=e.map(function(t){return g[v(t.type)].fromObject(t)}),{objects:e,options:i}}function p(t,e,i){e[i]&&e[i].toSVG&&t.push('\t<pattern x="0" y="0" id="',i,'Pattern" ','width="',e[i].source.width,'" height="',e[i].source.height,'" patternUnits="userSpaceOnUse">\n','\t\t<image x="0" y="0" ','width="',e[i].source.width,'" height="',e[i].source.height,'" xlink:href="',e[i].source.src,'"></image>\n\t</pattern>\n')}var g=t.fabric||(t.fabric={}),m=g.util.object.extend,v=g.util.string.capitalize,b=g.util.object.clone,y=g.util.toFixed,x=g.util.parseUnit,w=g.util.multiplyTransformMatrices,_=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,C=/^(symbol|image|marker|pattern|view|svg)$/i,S=/^(?:pattern|defs|symbol|metadata)$/i,T=/^(symbol|g|a|svg)$/i,k={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},O={stroke:"strokeOpacity",fill:"fillOpacity"};g.cssRules={},g.gradientDefs={},g.parseTransformAttribute=function(){function t(t,e){var i=e[0],r=3===e.length?e[1]:0,n=3===e.length?e[2]:0;t[0]=Math.cos(i),t[1]=Math.sin(i),t[2]=-Math.sin(i),t[3]=Math.cos(i),t[4]=r-(t[0]*r+t[2]*n),t[5]=n-(t[1]*r+t[3]*n)}function e(t,e){var i=e[0],r=2===e.length?e[1]:e[0];t[0]=i,t[3]=r}function i(t,e){t[2]=Math.tan(g.util.degreesToRadians(e[0]))}function r(t,e){t[1]=Math.tan(g.util.degreesToRadians(e[0]))}function n(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var s=[1,0,0,1,0,0],a=g.reNum,o="(?:\\s+,?\\s*|,\\s*)",l="(?:(skewX)\\s*\\(\\s*("+a+")\\s*\\))",h="(?:(skewY)\\s*\\(\\s*("+a+")\\s*\\))",c="(?:(rotate)\\s*\\(\\s*("+a+")(?:"+o+"("+a+")"+o+"("+a+"))?\\s*\\))",u="(?:(scale)\\s*\\(\\s*("+a+")(?:"+o+"("+a+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+a+")(?:"+o+"("+a+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+a+")"+o+"("+a+")"+o+"("+a+")"+o+"("+a+")"+o+"("+a+")"+o+"("+a+")\\s*\\))",p="(?:"+d+"|"+f+"|"+u+"|"+c+"|"+l+"|"+h+")",m="(?:"+p+"(?:"+o+"*"+p+")*)",v="^\\s*(?:"+m+"?)\\s*$",b=new RegExp(v),y=new RegExp(p,"g");return function(a){var o=s.concat(),l=[];if(!a||a&&!b.test(a))return o;a.replace(y,function(a){var h=new RegExp(p).exec(a).filter(function(t){return""!==t&&null!=t}),c=h[1],u=h.slice(2).map(parseFloat);switch(c){case"translate":n(o,u);break;case"rotate":u[0]=g.util.degreesToRadians(u[0]),t(o,u);break;case"scale":e(o,u);break;case"skewX":i(o,u);break;case"skewY":r(o,u);break;case"matrix":o=u}l.push(o.concat()),o=s.concat()});for(var h=l[0];l.length>1;)l.shift(),h=g.util.multiplyTransformMatrices(h,l[0]);return h}}();var A=new RegExp("^\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*$");g.parseSVGDocument=function(){function t(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName)&&!t.getAttribute("instantiated_by_use"))return!0;return!1}return function(e,i,r){if(e){u(e);var n=new Date,s=g.Object.__uid++,a=f(e),o=g.util.toArray(e.getElementsByTagName("*"));if(a.svgUid=s,0===o.length&&g.isLikelyNode){o=e.selectNodes('//*[name(.)!="svg"]');for(var l=[],h=0,c=o.length;h<c;h++)l[h]=o[h];o=l}var d=o.filter(function(e){return f(e),_.test(e.tagName)&&!t(e,S)});if(!d||d&&!d.length)return void(i&&i([],{}));g.gradientDefs[s]=g.getGradientDefs(e),g.cssRules[s]=g.getCSSRules(e),g.parseElements(d,function(t){g.documentParsingTime=new Date-n,i&&i(t,a)},b(a),r)}}}();var M={has:function(t,e){e(!1)},get:function(){},set:function(){}},D=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+g.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+g.reNum+"))?\\s+(.*)");m(g,{parseFontDeclaration:function(t,e){var i=t.match(D);if(i){var r=i[1],n=i[3],s=i[4],a=i[5],o=i[6];r&&(e.fontStyle=r),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),s&&(e.fontSize=x(s)),o&&(e.fontFamily=o),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,i,r,n,s=t.getElementsByTagName("linearGradient"),a=t.getElementsByTagName("radialGradient"),o=0,l=[],h={},c={};for(l.length=s.length+a.length,i=s.length;i--;)l[o++]=s[i];for(i=a.length;i--;)l[o++]=a[i];for(;o--;)e=l[o],n=e.getAttribute("xlink:href"),r=e.getAttribute("id"),n&&(c[r]=n.substr(1)),h[r]=e;for(r in c){var u=h[c[r]].cloneNode(!0);for(e=h[r];u.firstChild;)e.appendChild(u.firstChild)}return h},parseAttributes:function(t,n,s){if(t){var o,l,h={};"undefined"==typeof s&&(s=t.getAttribute("svgUid")),t.parentNode&&T.test(t.parentNode.nodeName)&&(h=g.parseAttributes(t.parentNode,n,s)),l=h&&h.fontSize||t.getAttribute("font-size")||g.Text.DEFAULT_SVG_FONT_SIZE;var c=n.reduce(function(r,n){return o=t.getAttribute(n),o&&(n=e(n),o=i(n,o,h,l),r[n]=o),r},{});return c=m(c,m(a(t,s),g.parseStyleAttribute(t))),c.font&&g.parseFontDeclaration(c.font,c),r(m(h,c))}},parseElements:function(t,e,i,r){new g.ElementsParser(t,e,i,r).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?n(i,e):s(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,r=[];for(e=0,i=t.length;e<i;e+=2)r.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return r},getCSSRules:function(t){for(var r,n=t.getElementsByTagName("style"),s={},a=0,o=n.length;a<o;a++){var l=n[a].textContent||n[a].text;l=l.replace(/\/\*[\s\S]*?\*\//g,""),""!==l.trim()&&(r=l.match(/[^{]*\{[\s\S]*?\}/g),r=r.map(function(t){return t.trim()}),r.forEach(function(t){for(var r=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),n={},a=r[2].trim(),o=a.replace(/;$/,"").split(/\s*;\s*/),l=0,h=o.length;l<h;l++){var c=o[l].split(/\s*:\s*/),u=e(c[0]),f=i(u,c[1],c[0]);n[u]=f}t=r[1],t.split(",").forEach(function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(s[t]=g.util.object.clone(n))})}))}return s},loadSVGFromURL:function(t,e,i){function r(r){var n=r.responseXML;n&&!n.documentElement&&g.window.ActiveXObject&&r.responseText&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(r.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),n&&n.documentElement||e&&e(null),g.parseSVGDocument(n.documentElement,function(i,r){M.set(t,{objects:g.util.array.invoke(i,"toObject"),options:r}),e&&e(i,r)},i)}t=t.replace(/^\n\s*/,"").trim(),M.has(t,function(i){i?M.get(t,function(t){var i=d(t);e(i.objects,i.options)}):new g.util.request(t,{method:"get",onComplete:r})})},loadSVGFromString:function(t,e,i){t=t.trim();var r;if("undefined"!=typeof DOMParser){var n=new DOMParser;n&&n.parseFromString&&(r=n.parseFromString(t,"text/xml"))}else g.window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));g.parseSVGDocument(r.documentElement,function(t,i){e(t,i)},i)},createSVGFontFacesMarkup:function(t){for(var e,i,r,n,s,a,o,l="",h={},c=g.fontPaths,u=0,f=t.length;u<f;u++)if(e=t[u],i=e.fontFamily,e.type.indexOf("text")!==-1&&!h[i]&&c[i]&&(h[i]=!0,e.styles)){r=e.styles;for(s in r){n=r[s];for(o in n)a=n[o],i=a.fontFamily,!h[i]&&c[i]&&(h[i]=!0)}}for(var d in h)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",c[d],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},createSVGRefElementsMarkup:function(t){var e=[];return p(e,t,"backgroundColor"),p(e,t,"overlayColor"),e.join("")}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,r){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName)];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var r=t.fromElement(e,this.options);this.resolveGradient(r,"fill"),this.resolveGradient(r,"stroke"),this.reviver&&this.reviver(e,r),this.instances[i]=r,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(r){i.resolveGradient(r,"fill"),i.resolveGradient(r,"stroke"),i.reviver&&i.reviver(e,r),i.instances[t]=r,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var r=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][r]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][r],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});return i.Point?void i.warn("fabric.Point is already defined"):(i.Point=e,void(e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});return i.Intersection?void i.warn("fabric.Intersection is already defined"):(i.Intersection=e,i.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},i.Intersection.intersectLineLine=function(t,r,n,s){var a,o=(s.x-n.x)*(t.y-n.y)-(s.y-n.y)*(t.x-n.x),l=(r.x-t.x)*(t.y-n.y)-(r.y-t.y)*(t.x-n.x),h=(s.y-n.y)*(r.x-t.x)-(s.x-n.x)*(r.y-t.y);if(0!==h){var c=o/h,u=l/h;0<=c&&c<=1&&0<=u&&u<=1?(a=new e("Intersection"),a.points.push(new i.Point(t.x+c*(r.x-t.x),t.y+c*(r.y-t.y)))):a=new e}else a=new e(0===o||0===l?"Coincident":"Parallel");return a},i.Intersection.intersectLinePolygon=function(t,i,r){for(var n=new e,s=r.length,a=0;a<s;a++){var o=r[a],l=r[(a+1)%s],h=e.intersectLineLine(t,i,o,l);n.appendPoints(h.points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonPolygon=function(t,i){for(var r=new e,n=t.length,s=0;s<n;s++){var a=t[s],o=t[(s+1)%n],l=e.intersectLinePolygon(a,o,i);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},void(i.Intersection.intersectPolygonRectangle=function(t,r,n){var s=r.min(n),a=r.max(n),o=new i.Point(a.x,s.y),l=new i.Point(s.x,a.y),h=e.intersectLinePolygon(s,o,t),c=e.intersectLinePolygon(o,a,t),u=e.intersectLinePolygon(a,l,t),f=e.intersectLinePolygon(l,s,t),d=new e;return d.appendPoints(h.points),d.appendPoints(c.points),d.appendPoints(u.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var r=t.fabric||(t.fabric={});return r.Color?void r.warn("fabric.Color is already defined."):(r.Color=e,r.Color.prototype={_tryParsingColor:function(t){var i;t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t&&(i=[255,255,255,0]),i||(i=e.sourceFromHex(t)),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),i||(i=[0,0,0,1]),i&&this.setSource(i)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var n,s,a,o=r.util.array.max([t,e,i]),l=r.util.array.min([t,e,i]);if(a=(o+l)/2,o===l)n=s=0;else{var h=o-l;switch(s=a>.5?h/(2-o-l):h/(o+l),o){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return[Math.round(360*n),Math.round(100*s),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,r=this.getSource();return t=r[0].toString(16),t=1===t.length?"0"+t:t,e=r[1].toString(16),e=1===e.length?"0"+e:e,i=r[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),r=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,r]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],r=this.getAlpha(),n=.5,s=this.getSource(),a=t.getSource(),o=0;o<3;o++)i.push(Math.round(s[o]*(1-n)+a[o]*n));return i[3]=r,this.setSource(i),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,r.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},r.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},r.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var r=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),n=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),s=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(r,10),parseInt(n,10),parseInt(s,10),i[4]?parseFloat(i[4]):1]}},r.Color.fromRgba=e.fromRgb,r.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},r.Color.sourceFromHsl=function(t){var r=t.match(e.reHSLa);if(r){var n,s,a,o=(parseFloat(r[1])%360+360)%360/360,l=parseFloat(r[2])/(/%$/.test(r[2])?100:1),h=parseFloat(r[3])/(/%$/.test(r[3])?100:1);if(0===l)n=s=a=h;else{var c=h<=.5?h*(l+1):h+l-h*l,u=2*h-c;n=i(u,c,o+1/3),s=i(u,c,o),a=i(u,c,o-1/3)}return[Math.round(255*n),Math.round(255*s),Math.round(255*a),r[4]?parseFloat(r[4]):1]}},r.Color.fromHsla=e.fromHsl,r.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},r.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),r=3===i.length,n=r?i.charAt(0)+i.charAt(0):i.substring(0,2),s=r?i.charAt(1)+i.charAt(1):i.substring(2,4),a=r?i.charAt(2)+i.charAt(2):i.substring(4,6);return[parseInt(n,16),parseInt(s,16),parseInt(a,16),1]}},void(r.Color.fromSource=function(t){var i=new e;return i.setSource(t),i}))}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,i,r,n=t.getAttribute("style"),s=t.getAttribute("offset")||0;if(s=parseFloat(s)/(/%$/.test(s)?100:1),s=s<0?0:s>1?1:s,n){var a=n.split(/\s*;\s*/);""===a[a.length-1]&&a.pop();for(var o=a.length;o--;){var l=a[o].split(/\s*:\s*/),h=l[0].trim(),c=l[1].trim();"stop-color"===h?e=c:"stop-opacity"===h&&(r=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=i,{offset:s,color:e.toRgb(),opacity:r}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function r(t,e,i){var r,n=0,s=1,a="";for(var o in e)r=parseFloat(e[o],10),s="string"==typeof e[o]&&/^\d+%$/.test(e[o])?.01:1,"x1"===o||"x2"===o||"r2"===o?(s*="objectBoundingBox"===i?t.width:1,n="objectBoundingBox"===i?t.left||0:0):"y1"!==o&&"y2"!==o||(s*="objectBoundingBox"===i?t.height:1,n="objectBoundingBox"===i?t.top||0:0),e[o]=r*s+n;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var l=t.ry/t.rx;a=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return a}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform}},toSVG:function(t){var e,i,r=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var n in r)"x1"===n||"x2"===n||"r2"===n?r[n]+=this.offsetX-t.width/2:"y1"!==n&&"y2"!==n||(r[n]+=this.offsetY-t.height/2);i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',r.x2,'" cy="',r.y2,'" r="',r.r2,'" fx="',r.x1,'" fy="',r.y1,'">\n']);for(var s=0;s<this.colorStops.length;s++)e.push("<stop ",'offset="',100*this.colorStops[s].offset+"%",'" style="stop-color:',this.colorStops[s].color,null!=this.colorStops[s].opacity?";stop-opacity: "+this.colorStops[s].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,r,n=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(r in n)"x1"===r||"x2"===r?n[r]+=-this.offsetX+e.width/2:"y1"!==r&&"y2"!==r||(n[r]+=-this.offsetY+e.height/2);"linear"===this.type?i=t.createLinearGradient(n.x1,n.y1,n.x2,n.y2):"radial"===this.type&&(i=t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2));for(var s=0,a=this.colorStops.length;s<a;s++){var o=this.colorStops[s].color,l=this.colorStops[s].opacity,h=this.colorStops[s].offset;"undefined"!=typeof l&&(o=new fabric.Color(o).setAlpha(l).toRgba()),i.addColorStop(parseFloat(h),o)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(n,s){var a,o=n.getElementsByTagName("stop"),l="linearGradient"===n.nodeName?"linear":"radial",h=n.getAttribute("gradientUnits")||"objectBoundingBox",c=n.getAttribute("gradientTransform"),u=[],f={};"linear"===l?f=e(n):"radial"===l&&(f=i(n));for(var d=o.length;d--;)u.push(t(o[d]));a=r(s,f,h);var p=new fabric.Gradient({type:l,coords:f,colorStops:u,offsetX:-s.left,offsetY:-s.top});return(c||""!==a)&&(p.gradientTransform=fabric.parseTransformAttribute((c||"")+a)),p},forObject:function(t,e){return e||(e={}),r(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if("undefined"!=typeof fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src?t=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(t=this.source.toDataURL()),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.getWidth(),r=e.height/t.getHeight(),n=this.offsetX/t.getWidth(),s=this.offsetY/t.getHeight(),a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+s+'" width="'+i+'" height="'+r+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if("undefined"!=typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;return e.Shadow?void e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),r=e.Shadow.reOffsetsAndBlur.exec(i)||[],n=i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseInt(r[1],10)||0,offsetY:parseInt(r[2],10)||0,blur:parseInt(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var r=40,n=40,s=e.Object.NUM_FRACTION_DIGITS,a=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),o=20;return t.width&&t.height&&(r=100*i((Math.abs(a.x)+this.blur)/t.width,s)+o,n=100*i((Math.abs(a.y)+this.blur)/t.height,s)+o),t.flipX&&(a.x*=-1),t.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,s)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(a.x,s)+'" dy="'+i(a.y,s)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(e){this[e]!==i[e]&&(t[e]=this[e])},this),t}}),void(e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,r=fabric.util.toFixed,n=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,preserveObjectStacking:!1,viewportTransform:[1,0,0,1,0,0],backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),e.overlayColor&&this.setOverlayColor(e.overlayColor,this.renderAll.bind(this)),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,r){return"string"==typeof e?fabric.util.loadImage(e,function(e){e&&(this[t]=new fabric.Image(e,r)),
i&&i(e)},this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,i&&i(e)),this},__setBgOverlayColor:function(t,e,i){if(e&&e.source){var r=this;fabric.util.loadImage(e.source,function(n){r[t]=new fabric.Pattern({source:n,repeat:e.repeat,offsetX:e.offsetX,offsetY:e.offsetY}),i&&i()})}else this[t]=e,i&&i();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw n;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),"undefined"==typeof t.getContext)throw n},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var r in t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+="px"),e.backstoreOnly||this._setCssDimension(r,i);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(t){var e=this.getActiveGroup();this.viewportTransform=t,this.renderAll();for(var i=0,r=this._objects.length;i<r;i++)this._objects[i].setCoords();return e&&e.setCoords(),this},zoomToPoint:function(t,e){var i=t;t=fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=e,this.viewportTransform[3]=e;var r=fabric.util.transformPoint(t,this.viewportTransform);this.viewportTransform[4]+=i.x-r.x,this.viewportTransform[5]+=i.y-r.y,this.renderAll();for(var n=0,s=this._objects.length;n<s;n++)this._objects[n].setCoords();return this},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){this.viewportTransform[4]=-t.x,this.viewportTransform[5]=-t.y,this.renderAll();for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].setCoords();return this},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:t}),t.fire("removed")},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},_chooseObjectsToRender:function(){var t,e=this.getActiveGroup(),i=this.getActiveObject(),r=[],n=[];if(!e&&!i||this.preserveObjectStacking)r=this._objects;else{for(var s=0,a=this._objects.length;s<a;s++)t=this._objects[s],e&&e.contains(t)||t===i?n.push(t):r.push(t);e&&e._set("_objects",n)}return r},renderAll:function(){var t,e=this.contextContainer;return this.contextTop&&this.selection&&!this._groupSelector&&!this.isDrawingMode&&this.clearContext(this.contextTop),this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),e.save(),t=this._chooseObjectsToRender(),e.transform.apply(e,this.viewportTransform),this._renderObjects(e,t),this.preserveObjectStacking||(t=[this.getActiveGroup(),this.getActiveObject()],this._renderObjects(e,t)),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.clipTo&&e.restore(),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_renderObjects:function(t,e){for(var i=0,r=e.length;i<r;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"];i&&(t.fillStyle=i.toLive?i.toLive(t):i,t.fillRect(i.offsetX||0,i.offsetY||0,this.width,this.height)),i=this[e+"Image"],i&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),i.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},renderTop:function(){var t=this.contextTop||this.contextContainer;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=fabric.util.invertTransform(this.viewportTransform);return fabric.util.transformPoint({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var r={objects:this._toObjects(e,i)};return t(r,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,r,i),r},_toObjects:function(t,e){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var n=this._realizeGroupTransformOnObject(t),s=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=r),this._unwindGroupTransformOnObject(t,n),s},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},__serializeBgOverlay:function(){var t={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(t.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&&(t.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&&(t.overlayImage=this.overlayImage.toObject()),t},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,n=e.width||this.width,s=e.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',o=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?a='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,a='viewBox="'+r(-i[4]/i[0],o)+" "+r(-i[5]/i[3],o)+" "+r(this.width/i[0],o)+" "+r(this.height/i[3],o)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>\n")},_setSVGObjects:function(t,e){for(var i,r,n=0,s=this.getObjects(),a=s.length;n<a;n++)i=s[n],i.excludeFromExport||(r=this._realizeGroupTransformOnObject(i),t.push(i.toSVG(e)),this._unwindGroupTransformOnObject(i,r))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){this[e]&&this[e].source?t.push('<rect x="',this[e].offsetX,'" y="',this[e].offsetY,'" ','width="',"repeat-y"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.width:this.width,'" height="',"repeat-x"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.height:this.height,'" fill="url(#'+e+'Pattern)"',"></rect>\n"):this[e]&&"overlayColor"===e&&t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,r,n,s=this.getActiveGroup?this.getActiveGroup():null;if(t===s)for(n=s._objects,e=n.length;e--;)r=n[e],i(this._objects,r),this._objects.unshift(r);else i(this._objects,t),this._objects.unshift(t);return this.renderAll&&this.renderAll()},bringToFront:function(t){if(!t)return this;var e,r,n,s=this.getActiveGroup?this.getActiveGroup():null;if(t===s)for(n=s._objects,e=0;e<n.length;e++)r=n[e],i(this._objects,r),this._objects.push(r);else i(this._objects,t),this._objects.push(t);return this.renderAll&&this.renderAll()},sendBackwards:function(t,e){if(!t)return this;var r,n,s,a,o,l=this.getActiveGroup?this.getActiveGroup():null;if(t===l)for(o=l._objects,r=0;r<o.length;r++)n=o[r],s=this._objects.indexOf(n),0!==s&&(a=s-1,i(this._objects,n),this._objects.splice(a,0,n));else s=this._objects.indexOf(t),0!==s&&(a=this._findNewLowerIndex(t,s,e),i(this._objects,t),this._objects.splice(a,0,t));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(t,e,i){var r;if(i){r=e;for(var n=e-1;n>=0;--n){var s=t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t);if(s){r=n;break}}}else r=e-1;return r},bringForward:function(t,e){if(!t)return this;var r,n,s,a,o,l=this.getActiveGroup?this.getActiveGroup():null;if(t===l)for(o=l._objects,r=o.length;r--;)n=o[r],s=this._objects.indexOf(n),s!==this._objects.length-1&&(a=s+1,i(this._objects,n),this._objects.splice(a,0,n));else s=this._objects.indexOf(t),s!==this._objects.length-1&&(a=this._findNewUpperIndex(t,s,e),i(this._objects,t),this._objects.splice(a,0,t));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(t,e,i){var r;if(i){r=e;for(var n=e+1;n<this._objects.length;++n){var s=t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t);if(s){r=n;break}}}else r=e+1;return r},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return"undefined"!=typeof i.getImageData;case"setLineDash":return"undefined"!=typeof i.setLineDash;case"toDataURL":return"undefined"!=typeof e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],r=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===r.x&&i.y===r.y&&(i.x-=.5,r.x+=.5),t.moveTo(i.x,i.y);for(var n=1,s=this._points.length;n<s;n++){var a=i.midPointFrom(r);t.quadraticCurveTo(i.x,i.y,a.x,a.y),i=this._points[n],r=this._points[n+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),r=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var n=1,s=t.length;n<s;n++){var a=i.midPointFrom(r);e.push("Q ",i.x," ",i.y," ",a.x," ",a.y," "),i=new fabric.Point(t[n].x,t[n].y),n+1<t.length&&(r=new fabric.Point(t[n+1].x,t[n+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath();var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===e)return void this.canvas.renderAll();var i=this.createPath(e);this.canvas.add(i),i.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:i})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,r=this.canvas.viewportTransform;i.save(),i.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.points.length;i<r;i++){var n=this.points[i],s=new fabric.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&s.setShadow(this.shadow),e.push(s)}var a=new fabric.Group(e,{originX:"center",originY:"center"});a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=r,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.sprayChunks.length;i<r;i++)for(var n=this.sprayChunks[i],s=0,a=n.length;s<a;s++){var o=new fabric.Rect({width:n[s].width,height:n[s].width,left:n[s].x+1,top:n[s].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&o.setShadow(this.shadow),e.push(o)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},r=0,n=t.length;r<n;r++)e=t[r].left+""+t[r].top,i[e]||(i[e]=t[r]);var s=[];for(e in i)s.push(i[e]);return s},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,r=this.sprayChunkPoints.length;i<r;i++){var n=this.sprayChunkPoints[i];"undefined"!=typeof n.opacity&&(t.globalAlpha=n.opacity),t.fillRect(n.x,n.y,n.width,n.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,r,n=this.width/2,s=0;s<this.density;s++){e=fabric.util.getRandomInt(t.x-n,t.x+n),i=fabric.util.getRandomInt(t.y-n,t.y+n),r=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new fabric.Point(e,i);a.width=r,this.randomOpacity&&(a.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=20,e=5,i=fabric.document.createElement("canvas"),r=i.getContext("2d");return i.width=i.height=t+e,r.fillStyle=this.color,r.beginPath(),r.arc(t/2,t/2,t/2,0,2*Math.PI,!1),r.closePath(),r.fill(),i},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,r=Math.atan2,n=Math.abs,s=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",lastRenderedKey:"altKey",interactive:!0,selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var r=i||this.getPointer(t,!0),n=this._normalizePointer(e,r);return n=e.group&&e.group===this.getActiveGroup()?this._normalizePointer(e.group,r):{x:r.x,y:r.y},e.containsPoint(n)||e._findTargetCorner(r)},_normalizePointer:function(t,e){var i,r;return r=fabric.util.multiplyTransformMatrices(this.viewportTransform,t.calcTransformMatrix()),r=fabric.util.invertTransform(r),e=fabric.util.transformPoint(e,r,!1),i=fabric.util.transformPoint(t.getCenterPoint(),r,!1),e.x-=i.x,e.y-=i.y,{x:e.x,y:e.y}},isTargetTransparent:function(t,e,i){var r=t.hasBorders,n=t.transparentCorners,s=this.contextCache,a=t.group&&t.group===this.getActiveGroup();t.hasBorders=t.transparentCorners=!1,s.save(),s.transform.apply(s,this.viewportTransform),a&&s.transform.apply(s,t.group.calcTransformMatrix()),t.render(s),s.restore(),t.active&&t._renderControls(s),t.hasBorders=r,t.transparentCorners=n;var o=fabric.util.isTransparent(s,e,i,this.targetFindTolerance);return this.clearContext(s),o},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),r=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,i){if(i){var r=this.getPointer(t),n=i._findTargetCorner(this.getPointer(t,!0)),s=this._getActionFromCorner(i,n,t),a=this._getOriginFromCorner(i,n);this._currentTransform={target:i,action:s,corner:n,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:r.x-i.left,offsetY:r.y-i.top,originX:a.x,originY:a.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,originX:a.x,originY:a.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var i=this._currentTransform,r=i.target,n=t-i.offsetX,s=e-i.offsetY,a=!r.get("lockMovementX")&&r.left!==n,o=!r.get("lockMovementY")&&r.top!==s;return a&&r.set("left",n),o&&r.set("top",s),a||o},_changeSkewTransformOrigin:function(t,e,i){var r="originX",n={0:"center"},s=e.target.skewX,a="left",o="right",l="mt"===e.corner||"ml"===e.corner?1:-1,h=1;t=t>0?1:-1,"y"===i&&(s=e.target.skewY,a="top",o="bottom",r="originY"),n[-1]=a,n[1]=o,e.target.flipX&&(h*=-1),e.target.flipY&&(h*=-1),0===s?(e.skewSign=-l*t*h,e[r]=n[-t]):(s=s>0?1:-1,e.skewSign=s,e[r]=n[s*l*h])},_skewObject:function(t,e,i){var r=this._currentTransform,n=r.target,s=!1,a=n.get("lockSkewingX"),o=n.get("lockSkewingY");if(a&&"x"===i||o&&"y"===i)return!1;var l,h,c=n.getCenterPoint(),u=n.toLocalPoint(new fabric.Point(t,e),"center","center")[i],f=n.toLocalPoint(new fabric.Point(r.lastX,r.lastY),"center","center")[i],d=n._getTransformedDimensions();return this._changeSkewTransformOrigin(u-f,r,i),l=n.toLocalPoint(new fabric.Point(t,e),r.originX,r.originY)[i],h=n.translateToOriginPoint(c,r.originX,r.originY),s=this._setObjectSkew(l,r,i,d),r.lastX=t,r.lastY=e,n.setPositionByOrigin(h,r.originX,r.originY),s},_setObjectSkew:function(t,e,i,r){var n,s,a,o,l,h,c,u,f,d=e.target,p=!1,g=e.skewSign;return"x"===i?(o="y",l="Y",h="X",u=0,f=d.skewY):(o="x",l="X",h="Y",u=d.skewX,f=0),a=d._getTransformedDimensions(u,f),c=2*Math.abs(t)-a[i],c<=2?n=0:(n=g*Math.atan(c/d["scale"+h]/(a[o]/d["scale"+l])),n=fabric.util.radiansToDegrees(n)),p=d["skew"+h]!==n,d.set("skew"+h,n),0!==d["skew"+l]&&(s=d._getTransformedDimensions(),n=r[o]/s[o]*d["scale"+l],d.set("scale"+l,n)),p},_scaleObject:function(t,e,i){var r=this._currentTransform,n=r.target,s=n.get("lockScalingX"),a=n.get("lockScalingY"),o=n.get("lockScalingFlip");if(s&&a)return!1;var l=n.translateToOriginPoint(n.getCenterPoint(),r.originX,r.originY),h=n.toLocalPoint(new fabric.Point(t,e),r.originX,r.originY),c=n._getTransformedDimensions(),u=!1;return this._setLocalMouse(h,r),u=this._setObjectScale(h,r,s,a,i,o,c),n.setPositionByOrigin(l,r.originX,r.originY),u},_setObjectScale:function(t,e,i,r,n,s,a){var o,l,h,c,u=e.target,f=!1,d=!1,p=!1;return h=t.x*u.scaleX/a.x,c=t.y*u.scaleY/a.y,o=u.scaleX!==h,l=u.scaleY!==c,s&&h<=0&&h<u.scaleX&&(f=!0),s&&c<=0&&c<u.scaleY&&(d=!0),"equally"!==n||i||r?n?"x"!==n||u.get("lockUniScaling")?"y"!==n||u.get("lockUniScaling")||d||r||u.set("scaleY",c)&&(p=p||l):f||i||u.set("scaleX",h)&&(p=p||o):(f||i||u.set("scaleX",h)&&(p=p||o),d||r||u.set("scaleY",c)&&(p=p||l)):f||d||(p=this._scaleObjectEqually(t,u,e,a)),e.newScaleX=h,e.newScaleY=c,f||d||this._flipObject(e,n),p},_scaleObjectEqually:function(t,e,i,r){var n,s=t.y+t.x,a=r.y*i.original.scaleY/e.scaleY+r.x*i.original.scaleX/e.scaleX;return i.newScaleX=i.original.scaleX*s/a,i.newScaleY=i.original.scaleY*s/a,n=i.newScaleX!==e.scaleX||i.newScaleY!==e.scaleY,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY),n},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),n(t.x)>i.padding?t.x<0?t.x+=i.padding:t.x-=i.padding:t.x=0,n(t.y)>i.padding?t.y<0?t.y+=i.padding:t.y-=i.padding:t.y=0},_rotateObject:function(t,e){var n=this._currentTransform;if(n.target.get("lockRotation"))return!1;var s=r(n.ey-n.top,n.ex-n.left),a=r(e-n.top,t-n.left),o=i(a-s+n.theta);return o<0&&(o=360+o),n.target.angle=o%360,!0},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,i=e.left,r=e.top,a=n(i),o=n(r);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(r>0?0:-r),a,o),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var l=e.ex+s-(i>0?0:a),h=e.ey+s-(r>0?0:o);t.beginPath(),fabric.util.drawDashedLine(t,l,h,l+a,h,this.selectionDashArray),fabric.util.drawDashedLine(t,l,h+o-1,l+a,h+o-1,this.selectionDashArray),fabric.util.drawDashedLine(t,l,h,l,h+o,this.selectionDashArray),fabric.util.drawDashedLine(t,l+a-1,h,l+a-1,h+o,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+s-(i>0?0:a),e.ey+s-(r>0?0:o),a,o)},_isLastRenderedObject:function(t,e){var i=this.lastRenderedWithControls;return(this.preserveObjectStacking||e[this.lastRenderedKey])&&i&&i.visible&&(this.containsPoint(null,i,t)||i._findTargetCorner(t))},findTarget:function(t,e){if(!this.skipTargetFind){var i=this.getPointer(t,!0),r=this.getActiveGroup();if(r&&!e&&this._checkTarget(i,r))return r;var n=this._objects;this.targets=[],this._isLastRenderedObject(i,t)&&(n=[this.lastRenderedWithControls]);var s=this._searchPossibleTargets(n,i);return this._fireOverOutEvents(s,t),s}},_fireOverOutEvents:function(t,e){t?this._hoveredTarget!==t&&(this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout")),this.fire("mouse:over",{target:t,e:e}),t.fire("mouseover"),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var i=this.isTargetTransparent(e,t.x,t.y);if(!i)return!0}},_searchPossibleTargets:function(t,e){for(var i,r,n,s=t.length;s--;)if(this._checkTarget(e,t[s])){i=t[s],"group"===i.type&&i.subTargetCheck&&(r=this._normalizePointer(i,e),n=this._searchPossibleTargets(i._objects,r),n&&this.targets.push(n));break}return i},getPointer:function(e,i,r){r||(r=this.upperCanvasEl);var n,s=t(e),a=r.getBoundingClientRect(),o=a.width||0,l=a.height||0;return o&&l||("top"in a&&"bottom"in a&&(l=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(o=Math.abs(a.right-a.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,i||(s=fabric.util.transformPoint(s,fabric.util.invertTransform(this.viewportTransform))),n=0===o||0===l?{width:1,height:1}:{width:r.width/o,height:r.height/l
},{x:s.x*n.width,y:s.y*n.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){return this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(t){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:t}),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){return this._discardActiveGroup(),this.fire("selection:cleared",{e:t}),this},deactivateAll:function(){for(var t=this.getObjects(),e=0,i=t.length;e<i;e++)t[e].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){var e=this.getActiveGroup()||this.getActiveObject();return e&&this.fire("before:selection:cleared",{target:e,e:t}),this.deactivateAll(),e&&this.fire("selection:cleared",{e:t}),this},dispose:function(){this.callSuper("dispose");var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},drawControls:function(t){var e=this.getActiveGroup();e?e._renderControls(t):this._drawObjectsControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;e<i;++e)this._objects[e]&&this._objects[e].active&&(this._objects[e]._renderControls(t),this.lastRenderedWithControls=this._objects[e])},_onObjectRemoved:function(t){t===this.lastRenderedWithControls&&delete this.lastRenderedWithControls,this.callSuper("_onObjectRemoved",t)},clear:function(){return delete this.lastRenderedWithControls,this.callSuper("clear")}});for(var a in fabric.StaticCanvas)"prototype"!==a&&(fabric.Canvas[a]=fabric.StaticCanvas[a]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mousewheel",this._onMouseWheel),e(this.upperCanvasEl,"mouseout",this._onMouseOut),e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mousewheel",this._onMouseWheel),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t,e){this.__onMouseWheel&&this.__onMouseWheel(t,e)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t})},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp),e(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===t.type){var r=this;setTimeout(function(){e(r.upperCanvasEl,"mousedown",r._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e,i=!0,r=this._currentTransform,n=this._groupSelector,s=!n||0===n.left&&0===n.top;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);r&&(this._finalizeCurrentTransform(),i=!r.actionPerformed),e=i?this.findTarget(t,!0):r.target;var a=this._shouldRender(e,this.getPointer(t));e||!s?this._maybeGroupObjects(t):(this._groupSelector=null,this._currentTransform=null),e&&(e.isMoving=!1),this._handleCursorAndEvent(t,e,"up"),a&&this.renderAll()},_handleCursorAndEvent:function(t,e,i){this._setCursorFromEvent(t,e),this._handleEvent(t,i,e?e:null)},_handleEvent:function(t,e,i){var r=void 0===typeof i?this.findTarget(t):i,n=this.targets||[],s={e:t,target:r,subTargets:n};this.fire("mouse:"+e,s),r&&r.fire("mouse"+e,s);for(var a=0;a<n.length;a++)n[a].fire("mouse"+e,s)},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this._restoreOriginXY(e),(t.actionPerformed||this.stateful&&e.hasStateChanged())&&(this.fire("object:modified",{target:e}),e.fire("modified"))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseDown(i),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseMove(i)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(t){var e="which"in t?1===t.which:0===t.button;if(e||fabric.isTouchSupported){if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var i=this.findTarget(t),r=this.getPointer(t,!0);this._previousPointer=r;var n=this._shouldRender(i,r),s=this._shouldGroup(t,i);this._shouldClearSelection(t,i)?this._clearSelection(t,i,r):s&&(this._handleGrouping(t,i),i=this.getActiveGroup()),i&&(!i.selectable||!i.__corner&&s||(this._beforeTransform(t,i),this._setupCurrentTransform(t,i)),i!==this.getActiveGroup()&&i!==this.getActiveObject()&&(this.deactivateAll(),i.selectable&&this.setActiveObject(i,t))),this._handleEvent(t,"down",i?i:null),n&&this.renderAll()}}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_clearSelection:function(t,e,i){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!("undefined"!=typeof t.touches&&t.touches.length>1)){var r=this._groupSelector;r?(i=this.getPointer(t,!0),r.left=i.x-r.ex,r.top=i.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e?e:null)}},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),this.renderAll()},_performTransformAction:function(t,e,i){var r=i.x,n=i.y,s=e.target,a=e.action,o=!1;"rotate"===a?(o=this._rotateObject(r,n))&&this._fire("rotating",s,t):"scale"===a?(o=this._onScale(t,e,r,n))&&this._fire("scaling",s,t):"scaleX"===a?(o=this._scaleObject(r,n,"x"))&&this._fire("scaling",s,t):"scaleY"===a?(o=this._scaleObject(r,n,"y"))&&this._fire("scaling",s,t):"skewX"===a?(o=this._skewObject(r,n,"x"))&&this._fire("skewing",s,t):"skewY"===a?(o=this._skewObject(r,n,"y"))&&this._fire("skewing",s,t):(o=this._translateObject(r,n),o&&(this._fire("moving",s,t),this.setCursor(s.moveCursor||this.moveCursor))),e.actionPerformed=o},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,i,r){return!t[this.uniScaleKey]&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,r,"equally")):(e.currentAction="scale",this._scaleObject(i,r))},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor;if(e.selectable){var r=this.getActiveGroup(),n=e._findTargetCorner&&(!r||!r.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));n?this._setCornerCursor(n,e,t):this.setCursor(i)}else this.setCursor(i);return!0},_setCornerCursor:function(e,i,r){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,i,r));else{if("mtr"!==e||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,i,r){var n=Math.round(i.getAngle()%360/45);return n<0&&(n+=8),n+=t[e],r[this.altActionKey]&&t[e]%2===0&&(n+=2),n%=8,this.cursorMap[n]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t[this.selectionKey]&&e&&e.selectable&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){var i=this.getActiveGroup();(e!==i||(e=this.findTarget(t,!0)))&&(i?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0))}else i.addWithUpdate(t);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t),r=i?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(r,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var i,r=[],n=this._groupSelector.ex,s=this._groupSelector.ey,a=n+this._groupSelector.left,o=s+this._groupSelector.top,l=new fabric.Point(t(n,a),t(s,o)),h=new fabric.Point(e(n,a),e(s,o)),c=n===a&&s===o,u=this._objects.length;u--&&(i=this._objects[u],!(i&&i.selectable&&i.visible&&(i.intersectsWithRect(l,h)||i.isContainedWithinRect(l,h)||i.containsPoint(l)||i.containsPoint(h))&&(i.set("active",!0),r.push(i),c))););return r},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,r=t.multiplier||1,n={left:t.left,top:t.top,width:t.width,height:t.height};return this._isRetinaScaling()&&(r*=fabric.devicePixelRatio),1!==r?this.__toDataURLWithMultiplier(e,i,n,r):this.__toDataURL(e,i,n)},__toDataURL:function(t,e,i){this.renderAll();var r=this.contextContainer.canvas,n=this.__getCroppedCanvas(r,i);"jpg"===t&&(t="jpeg");var s=fabric.StaticCanvas.supports("toDataURLWithQuality")?(n||r).toDataURL("image/"+t,e):(n||r).toDataURL("image/"+t);return n&&(n=null),s},__getCroppedCanvas:function(t,e){var i,r,n="left"in e||"top"in e||"width"in e||"height"in e;return n&&(i=fabric.util.createCanvasElement(),r=i.getContext("2d"),i.width=e.width||this.width,i.height=e.height||this.height,r.drawImage(t,-e.left||0,-e.top||0)),i},__toDataURLWithMultiplier:function(t,e,i,r){var n=this.getWidth(),s=this.getHeight(),a=n*r,o=s*r,l=this.getActiveObject(),h=this.getActiveGroup(),c=this.getZoom(),u=c*r/fabric.devicePixelRatio;r>1&&this.setDimensions({width:a,height:o}),this.setZoom(u),i.left&&(i.left*=r),i.top&&(i.top*=r),i.width?i.width*=r:r<1&&(i.width=a),i.height?i.height*=r:r<1&&(i.height=o),h?this._tempRemoveBordersControlsFromGroup(h):l&&this.deactivateAll&&this.deactivateAll();var f=this.__toDataURL(t,e,i);return h?this._restoreBordersControlsOnGroup(h):l&&this.setActiveObject&&this.setActiveObject(l),this.setZoom(c),this.setDimensions({width:n,height:s}),f},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var r="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t);this.clear();var n=this;return this._enlivenObjects(r.objects,function(){n._setBgOverlay(r,function(){delete r.objects,delete r.backgroundImage,delete r.overlayImage,delete r.background,delete r.overlay;for(var t in r)n[t]=r[t];e&&e()})},i),this}},_setBgOverlay:function(t,e){var i=this,r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var n=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&(i.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,r,n),this.__setBgOverlay("overlayImage",t.overlayImage,r,n),this.__setBgOverlay("backgroundColor",t.background,r,n),this.__setBgOverlay("overlayColor",t.overlay,r,n),n()},__setBgOverlay:function(t,e,i,r){var n=this;return e?void("backgroundImage"===t||"overlayImage"===t?fabric.Image.fromObject(e,function(e){n[t]=e,i[t]=!0,r&&r()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,r&&r()})):void(i[t]=!0)},_enlivenObjects:function(t,e,i){var r=this;if(!t||0===t.length)return void(e&&e());var n=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){r.insertAt(t,e,!0)}),r.renderOnAddRemove=n,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(r){i(r.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.toFixed,n=e.util.string.capitalize,s=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor alignX alignY meetOrSlice skewX skewY".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill)),!t.stroke||!t.stroke.colorStops||t.stroke instanceof e.Gradient||this.set("stroke",new e.Gradient(t.stroke))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var i=e.util.getFunctionBody(t.clipTo);"undefined"!=typeof i&&(this.clipTo=new Function("ctx",i))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){this.group&&this.canvas.preserveObjectStacking&&this.group===this.canvas._activeGroup&&this.group.transform(t);var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),t.rotate(s(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),t.transform(1,0,Math.tan(s(this.skewX)),1,0,0),t.transform(1,Math.tan(s(this.skewY)),0,1,0,0)},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,originX:this.originX,originY:this.originY,left:r(this.left,i),top:r(this.top,i),width:r(this.width,i),height:r(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:r(this.strokeMiterLimit,i),scaleX:r(this.scaleX,i),scaleY:r(this.scaleY,i),angle:r(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():this.transformMatrix,skewX:r(this.skewX,i),skewY:r(this.skewY,i)};return this.includeDefaultValues||(n=this._removeDefaultValues(n)),e.util.populateWithProperties(this,n,t),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype,r=i.stateProperties;return r.forEach(function(e){t[e]===i[e]&&delete t[e];var r="[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e]);r&&0===t[e].length&&0===i[e].length&&delete t[e]}),t},toString:function(){return"#<fabric."+n(this.type)+">"},get:function(t){return this[t]},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,i){var r="scaleX"===t||"scaleY"===t;return r&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow||(i=new e.Shadow(i)),this[t]=i,"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(t,i){0===this.width&&0===this.height||!this.visible||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),i||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._setOpacity(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,i),this.clipTo&&t.restore(),t.restore())},_setOpacity:function(t){this.group&&this.group._setOpacity(t),t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):i&&i(t))},_renderControls:function(t,i){if(!(!this.active||i||this.group&&this.group!==this.canvas.getActiveGroup())){var r,n=this.getViewportTransform(),a=this.calcTransformMatrix();a=e.util.multiplyTransformMatrices(n,a),r=e.util.qrDecompose(a),t.save(),t.translate(r.translateX,r.translateY),t.lineWidth=1/this.borderScaleFactor,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.group&&this.group===this.canvas.getActiveGroup()?(t.rotate(s(r.angle)),this.drawBordersInGroup(t,r)):(t.rotate(s(this.angle)),this.drawBorders(t)),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var i=this.canvas&&this.canvas.viewportTransform[0]||1,r=this.canvas&&this.canvas.viewportTransform[3]||1;this.canvas&&this.canvas._isRetinaScaling()&&(i*=e.devicePixelRatio,r*=e.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(i+r)*(this.scaleX+this.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*i*this.scaleX,t.shadowOffsetY=this.shadow.offsetY*r*this.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_renderFill:function(t){if(this.fill){if(t.save(),this.fill.gradientTransform){var e=this.fill.gradientTransform;t.transform.apply(t,e)}this.fill.toLive&&t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore()}},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this.stroke.gradientTransform){var e=this.stroke.gradientTransform;t.transform.apply(t,e)}this.stroke.toLive&&t.translate(-this.width/2+this.stroke.offsetX||0,-this.height/2+this.stroke.offsetY||0),t.stroke(),t.restore()}},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t){var i=this.toDataURL();return e.util.loadImage(i,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),r=this.getBoundingRect();i.width=r.width,i.height=r.height,e.util.wrapElement(i,"div");var n=new e.StaticCanvas(i);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(n.backgroundColor="#fff");var s={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(n.getWidth()/2,n.getHeight()/2),"center","center");var a=this.canvas;n.add(this);var o=n.toDataURL(t);return this.set(s).setCoords(),this.canvas=a,n.dispose(),n=null,o},isType:function(t){return this.type===t},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var r={colorStops:[]};r.type=i.type||(i.r1||i.r2?"radial":"linear"),r.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(r.coords.r1=i.r1,r.coords.r2=i.r2),i.gradientTransform&&(r.gradientTransform=i.gradientTransform);for(var n in i.colorStops){var s=new e.Color(i.colorStops[n]);r.colorStops.push({offset:n,color:s.toRgb(),opacity:s.getAlpha()})}return this.set(t,e.Gradient.forObject(this,r))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&this.canvas.remove(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var r=new e.Point(i.x,i.y),n=this._getLeftTopCoords();return this.angle&&(r=e.util.rotatePoint(r,n,e.util.degreesToRadians(-this.angle))),{x:r.x-n.x,y:r.y-n.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians,e={
left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,r,n,s,a){var o,l=t.x,h=t.y,c=e[s]-e[r],u=i[a]-i[n];return(c||u)&&(o=this._getTransformedDimensions(),l=t.x+c*o.x,h=t.y+u*o.y),new fabric.Point(l,h)},translateToCenterPoint:function(e,i,r){var n=this.translateToGivenOrigin(e,i,r,"center","center");return this.angle?fabric.util.rotatePoint(n,e,t(this.angle)):n},translateToOriginPoint:function(e,i,r){var n=this.translateToGivenOrigin(e,"center","center",i,r);return this.angle?fabric.util.rotatePoint(n,e,t(this.angle)):n},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,r){var n,s,a=this.getCenterPoint();return n=i&&r?this.translateToGivenOrigin(a,"center","center",i,r):new fabric.Point(this.left,this.top),s=new fabric.Point(e.x,e.y),this.angle&&(s=fabric.util.rotatePoint(s,a,-t(this.angle))),s.subtractEquals(n)},setPositionByOrigin:function(t,e,i){var r=this.translateToCenterPoint(t,e,i),n=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(i){var r=t(this.angle),n=this.getWidth(),s=Math.cos(r)*n,a=Math.sin(r)*n;this.left+=s*(e[i]-e[this.originX]),this.top+=a*(e[i]-e[this.originX]),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]}var e=fabric.util.degreesToRadians,i=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(e,i){var r=t(this.oCoords),n=fabric.Intersection.intersectPolygonRectangle(r,e,i);return"Intersection"===n.status},intersectsWithObject:function(e){var i=fabric.Intersection.intersectPolygonPolygon(t(this.oCoords),t(e.oCoords));return"Intersection"===i.status},isContainedWithinObject:function(t){var e=t.getBoundingRect(),i=new fabric.Point(e.left,e.top),r=new fabric.Point(e.left+e.width,e.top+e.height);return this.isContainedWithinRect(i,r)},isContainedWithinRect:function(t,e){var i=this.getBoundingRect();return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y},containsPoint:function(t){this.oCoords||this.setCoords();var e=this._getImageLines(this.oCoords),i=this._findCrossPoints(t,e);return 0!==i&&i%2===1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,n,s,a,o,l,h=0;for(var c in e)if(l=e[c],!(l.o.y<t.y&&l.d.y<t.y||l.o.y>=t.y&&l.d.y>=t.y||(l.o.x===l.d.x&&l.o.x>=t.x?(a=l.o.x,o=t.y):(i=0,r=(l.d.y-l.o.y)/(l.d.x-l.o.x),n=t.y-i*t.x,s=l.o.y-r*l.o.x,a=-(n-s)/(i-r),o=n+i*a),a>=t.x&&(h+=1),2!==h)))break;return h},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){return this.oCoords||this.setCoords(),fabric.util.makeBoundingBoxFromPoints([this.oCoords.tl,this.oCoords.tr,this.oCoords.br,this.oCoords.bl])},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),t<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var t=e(this.angle),i=this.getViewportTransform(),r=this._calculateCurrentDimensions(),n=r.x,s=r.y;n<0&&(n=Math.abs(n));var a=Math.sin(t),o=Math.cos(t),l=n>0?Math.atan(s/n):0,h=n/Math.cos(l)/2,c=Math.cos(l+t)*h,u=Math.sin(l+t)*h,f=fabric.util.transformPoint(this.getCenterPoint(),i),d=new fabric.Point(f.x-c,f.y-u),p=new fabric.Point(d.x+n*o,d.y+n*a),g=new fabric.Point(d.x-s*a,d.y+s*o),m=new fabric.Point(f.x+c,f.y+u),v=new fabric.Point((d.x+g.x)/2,(d.y+g.y)/2),b=new fabric.Point((p.x+d.x)/2,(p.y+d.y)/2),y=new fabric.Point((m.x+p.x)/2,(m.y+p.y)/2),x=new fabric.Point((m.x+g.x)/2,(m.y+g.y)/2),w=new fabric.Point(b.x+a*this.rotatingPointOffset,b.y-o*this.rotatingPointOffset);return this.oCoords={tl:d,tr:p,br:m,bl:g,ml:v,mt:b,mr:y,mb:x,mtr:w},this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=e(this.angle),i=Math.cos(t),r=Math.sin(t);return[i,r,-r,i,0,0]}return[1,0,0,1,0,0]},calcTransformMatrix:function(){var t=this.getCenterPoint(),e=[1,0,0,1,t.x,t.y],r=this._calcRotateMatrix(),n=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0),s=this.group?this.group.calcTransformMatrix():[1,0,0,1,0,0];return s=i(s,e),s=i(s,r),s=i(s,n)},_calcDimensionsTransformMatrix:function(t,r,n){var s=[1,0,Math.tan(e(t)),1],a=[1,Math.tan(e(r)),0,1],o=this.scaleX*(n&&this.flipX?-1:1),l=this.scaleY*(n&&this.flipY?-1:1),h=[o,0,0,l],c=i(h,s,!0);return i(c,a,!0)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new fabric.Color(e),r=t+": "+i.toRgb()+"; ",n=i.getAlpha();return 1!==n&&(r+=t+"-opacity: "+n.toString()+"; "),r}return t+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule,r=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",l="undefined"!=typeof this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;",c=e?"":this.getSvgFilter(),u=t("fill",this.fill),f=t("stroke",this.stroke);return[f,"stroke-width: ",r,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",o,"; ",u,"fill-rule: ",i,"; ","opacity: ",l,";",c,h].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=this.getSkewX()%360,r=this.getSkewY()%360,n=this.getCenterPoint(),s=fabric.Object.NUM_FRACTION_DIGITS,a="path-group"===this.type?"":"translate("+t(n.x,s)+" "+t(n.y,s)+")",o=0!==e?" rotate("+t(e,s)+")":"",l=1===this.scaleX&&1===this.scaleY?"":" scale("+t(this.scaleX,s)+" "+t(this.scaleY,s)+")",h=0!==i?" skewX("+t(i,s)+")":"",c=0!==r?" skewY("+t(r,s)+")":"",u="path-group"===this.type?this.width:0,f=this.flipX?" matrix(-1 0 0 1 "+u+" 0) ":"",d="path-group"===this.type?this.height:0,p=this.flipY?" matrix(1 0 0 -1 0 "+d+")":"";return[a,o,l,f,p,h,c].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,r=t.x,n=t.y;this.__corner=0;for(var s in this.oCoords)if(this.isControlVisible(s)&&("mtr"!==s||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==s&&"mr"!==s&&"mb"!==s&&"ml"!==s)&&(i=this._getImageLines(this.oCoords[s].corner),e=this._findCrossPoints({x:r,y:n},i),0!==e&&e%2===1))return this.__corner=s,s;return!1},_setCornerCoords:function(){var e,i,r=this.oCoords,n=t(45-this.angle),s=.707106*this.cornerSize,a=s*Math.cos(n),o=s*Math.sin(n);for(var l in r)e=r[l].x,i=r[l].y,r[l].corner={tl:{x:e-o,y:i-a},tr:{x:e+a,y:i-o},bl:{x:e-a,y:i+o},br:{x:e+o,y:i+a}}},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width,i=this.height,r=!0,n=!0;return"line"===this.type&&"butt"===this.strokeLineCap&&(n=e,r=i),n&&(i+=i<0?-t:t),r&&(e+=e<0?-t:t),{x:e,y:i}},_getTransformedDimensions:function(t,e){"undefined"==typeof t&&(t=this.skewX),"undefined"==typeof e&&(e=this.skewY);var i,r,n=this._getNonTransformedDimensions(),s=n.x/2,a=n.y/2,o=[{x:-s,y:-a},{x:s,y:-a},{x:-s,y:a},{x:s,y:a}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(i=0;i<o.length;i++)o[i]=fabric.util.transformPoint(o[i],l);return r=fabric.util.makeBoundingBoxFromPoints(o),{x:r.width,y:r.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),i=e.x,r=e.y,n=fabric.util.transformPoint(new fabric.Point(i,r),t,!0);return n.scalarAdd(2*this.padding)},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.group||this!==this.canvas.getActiveObject())return this;e.save();var i=this.getCenterPoint(),r=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/n[0],1/n[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore(),this},drawBorders:function(t){if(!this.hasBorders)return this;var e=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,r=e.x+i,n=e.y+i;if(t.save(),t.strokeStyle=this.borderColor,this._setLineDash(t,this.borderDashArray,null),t.strokeRect(-r/2,-n/2,r,n),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var s=-n/2;t.beginPath(),t.moveTo(0,s),t.lineTo(0,s-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e){if(!this.hasBorders)return this;var i=this._getNonTransformedDimensions(),r=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),n=fabric.util.transformPoint(i,r),s=1/this.borderScaleFactor,a=n.x+s+2*this.padding,o=n.y+s+2*this.padding;return t.save(),this._setLineDash(t,this.borderDashArray,null),t.strokeStyle=this.borderColor,t.strokeRect(-a/2,-o/2,a,o),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(),i=e.x,r=e.y,n=this.cornerSize,s=-(i+n)/2,a=-(r+n)/2,o=this.transparentCorners?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,o,s,a),this._drawControl("tr",t,o,s+i,a),this._drawControl("bl",t,o,s,a+r),this._drawControl("br",t,o,s+i,a+r),this.get("lockUniScaling")||(this._drawControl("mt",t,o,s+i/2,a),this._drawControl("mb",t,o,s+i/2,a+r),this._drawControl("mr",t,o,s+i,a+r/2),this._drawControl("ml",t,o,s,a+r/2)),this.hasRotatingPoint&&this._drawControl("mtr",t,o,s+i/2,a-this.rotatingPointOffset),t.restore(),this},_drawControl:function(t,i,r,n,s){if(this.isControlVisible(t)){var a=this.cornerSize,o=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":i.beginPath(),i.arc(n+a/2,s+a/2,a/2,0,2*Math.PI,!1),i[r](),o&&i.stroke();break;default:e()||this.transparentCorners||i.clearRect(n,s,a,a),i[r+"Rect"](n,s,a,a),o&&i.strokeRect(n,s,a,a)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,n=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),s.renderAll(),n()},onComplete:function(){t.setCoords(),r()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,n=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),s.renderAll(),n()},onComplete:function(){t.setCoords(),r()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,n=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),s.renderAll(),n()},onComplete:function(){s.remove(t),r()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var r=0,n=i.length;r<n;r++)t=i[r],e=r!==n-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,r){var n,s=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(n=t.split("."));var a=n?this.get(n[0])[n[1]]:this.get(t);"from"in i||(i.from=a),e=~e.indexOf("=")?a+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(s)},onChange:function(e){n?s[n[0]][n[1]]=e:s.set(t,e),r||i.onChange&&i.onChange()},onComplete:function(){r||(s.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";function e(t,e){var i=t.origin,r=t.axis1,n=t.axis2,s=t.dimension,a=e.nearest,o=e.center,l=e.farthest;return function(){switch(this.get(i)){case a:return Math.min(this.get(r),this.get(n));case o:return Math.min(this.get(r),this.get(n))+.5*this.get(s);case l:return Math.max(this.get(r),this.get(n))}}}var i=t.fabric||(t.fabric={}),r=i.util.object.extend,n={x1:1,x2:1,y1:1,y2:1},s=i.StaticCanvas.supports("setLineDash");return i.Line?void i.warn("fabric.Line is already defined"):(i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!=typeof n[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint();t.translate(i.x-this.strokeWidth/2,i.y-this.strokeWidth/2)}if(!this.strokeDashArray||this.strokeDashArray&&s){var r=this.calcLinePoints();t.moveTo(r.x1,r.y1),t.lineTo(r.x2,r.y2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return r(this.callSuper("toObject",t),this.calcLinePoints())},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,r=e*this.height*.5,n=t*this.width*-.5,s=e*this.height*-.5;return{x1:i,x2:n,y1:r,y2:s}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",this.getSvgId(),'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){var n=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),s=[n.x1||0,n.y1||0,n.x2||0,n.y2||0];return new i.Line(s,r(n,e))},void(i.Line.fromObject=function(t){var e=[t.x1,t.y1,t.x2,t.y2];return new i.Line(e,t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),r=Math.PI,n=i.util.object.extend;return i.Circle?void i.warn("fabric.Circle is already defined."):(i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*r,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("radius",t.radius||0),this.startAngle=t.startAngle||this.startAngle,this.endAngle=t.endAngle||this.endAngle},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return n(this.callSuper("toObject",t),{radius:this.get("radius"),startAngle:this.startAngle,endAngle:this.endAngle})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0,s=(this.endAngle-this.startAngle)%(2*r);if(0===s)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,n=this.top+this.radius),e.push("<circle ",this.getSvgId(),'cx="'+i+'" cy="'+n+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var a=Math.cos(this.startAngle)*this.radius,o=Math.sin(this.startAngle)*this.radius,l=Math.cos(this.endAngle)*this.radius,h=Math.sin(this.endAngle)*this.radius,c=s>r?"1":"0";e.push('<path d="M '+a+" "+o," A "+this.radius+" "+this.radius," 0 ",+c+" 1"," "+l+" "+h,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,r){r||(r={});var s=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=s.left||0,s.top=s.top||0;var a=new i.Circle(n(s,r));return a.left-=a.radius,a.top-=a.radius,a},void(i.Circle.fromObject=function(t){return new i.Circle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Triangle?void e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,r=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,r,0,-r,this.strokeDashArray),e.util.drawDashedLine(t,0,-r,i,r,this.strokeDashArray),e.util.drawDashedLine(t,i,r,-i,r,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,r=this.height/2,n=[-i+" "+r,"0 "+-r,i+" "+r].join(",");return e.push("<polygon ",this.getSvgId(),'points="',n,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),void(e.Triangle.fromObject=function(t){return new e.Triangle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,r=e.util.object.extend;return e.Ellipse?void e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return r(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,r=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,r=this.top+this.ry),e.push("<ellipse ",this.getSvgId(),'cx="',i,'" cy="',r,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var n=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0;var s=new e.Ellipse(r(n,i));return s.top-=s.ry,s.left-=s.rx,s},void(e.Ellipse.fromObject=function(t){return new e.Ellipse(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)return void e.warn("fabric.Rect is already defined");var r=e.Object.prototype.stateProperties.concat();r.push("rx","ry","x","y"),e.Rect=e.util.createClass(e.Object,{stateProperties:r,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(-.5,-.5,1,1);var i=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,s=this.height,a=e?this.left:-this.width/2,o=e?this.top:-this.height/2,l=0!==i||0!==r,h=.4477152502;t.beginPath(),t.moveTo(a+i,o),t.lineTo(a+n-i,o),l&&t.bezierCurveTo(a+n-h*i,o,a+n,o+h*r,a+n,o+r),t.lineTo(a+n,o+s-r),l&&t.bezierCurveTo(a+n,o+s-h*r,a+n-h*i,o+s,a+n-i,o+s),t.lineTo(a+i,o+s),l&&t.bezierCurveTo(a+h*i,o+s,a,o+s-h*r,a,o+s-r),t.lineTo(a,o+r),l&&t.bezierCurveTo(a,o+h*r,a+h*i,o,a+i,o),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=-this.width/2,r=-this.height/2,n=this.width,s=this.height;t.beginPath(),e.util.drawDashedLine(t,i,r,i+n,r,this.strokeDashArray),e.util.drawDashedLine(t,i+n,r,i+n,r+s,this.strokeDashArray),e.util.drawDashedLine(t,i+n,r+s,i,r+s,this.strokeDashArray),e.util.drawDashedLine(t,i,r+s,i,r,this.strokeDashArray),t.closePath()},toObject:function(t){var e=i(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,r=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,r=-this.height/2),e.push("<rect ",this.getSvgId(),'x="',i,'" y="',r,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,r){if(!t)return null;r=r||{};var n=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0;var s=new e.Rect(i(r?e.util.object.clone(r):{},n));return s.visible=s.width>0&&s.height>0,s},e.Rect.fromObject=function(t){return new e.Rect(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Polyline?void e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,initialize:function(t,i){return e.Polygon.prototype.initialize.call(this,t,i)},_calcDimensions:function(){return e.Polygon.prototype._calcDimensions.call(this)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(t){return e.Polygon.prototype.toSVG.call(this,t)},_render:function(t,i){e.Polygon.prototype.commonRender.call(this,t,i)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,r;t.beginPath();for(var n=0,s=this.points.length;n<s;n++)i=this.points[n],r=this.points[n+1]||i,e.util.drawDashedLine(t,i.x,i.y,r.x,r.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var r=e.parsePointsAttribute(t.getAttribute("points")),n=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(r,e.util.object.extend(n,i))},void(e.Polyline.fromObject=function(t){var i=t.points;return new e.Polyline(i,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,n=e.util.array.max,s=e.util.toFixed;return e.Polygon?void e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Object,{type:"polygon",points:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=r(t,"x"),i=r(t,"y"),s=n(t,"x"),a=n(t,"y");this.width=s-e||0,this.height=a-i||0,this.minX=e||0,this.minY=i||0},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e,i=[],r=this._createBaseSVGMarkup(),n=0,a=this.points.length;n<a;n++)i.push(s(this.points[n].x,2),",",s(this.points[n].y,2)," ");return this.group&&"path-group"===this.group.type||(e=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),r.push("<",this.type," ",this.getSvgId(),'points="',i.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),e," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(r.join("")):r.join("")},_render:function(t,e){this.commonRender(t,e)&&(this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t)))},commonRender:function(t,e){var i,r=this.points.length;if(!r||isNaN(this.points[r-1].y))return!1;e||t.translate(-this.pathOffset.x,-this.pathOffset.y),t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var n=0;n<r;n++)i=this.points[n],t.lineTo(i.x,i.y);return!0},_renderDashedStroke:function(t){e.Polyline.prototype._renderDashedStroke.call(this,t),t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,r){if(!t)return null;r||(r={});var n=e.parsePointsAttribute(t.getAttribute("points")),s=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(n,i(s,r))},void(e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,r=e.util.array.max,n=e.util.object.extend,s=Object.prototype.toString,a=e.util.drawArc,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};return e.Path?void e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.setOptions(e),t||(t=[]);var i="[object Array]"===s.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e),e.sourcePath&&this.setSourcePath(e.sourcePath))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,"undefined"==typeof t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),"undefined"==typeof t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_render:function(t){var e,i,r,n=null,s=0,o=0,l=0,h=0,c=0,u=0,f=-this.pathOffset.x,d=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=0,d=0),t.beginPath();for(var p=0,g=this.path.length;p<g;++p){switch(e=this.path[p],e[0]){case"l":l+=e[1],h+=e[2],t.lineTo(l+f,h+d);break;case"L":l=e[1],h=e[2],t.lineTo(l+f,h+d);break;case"h":l+=e[1],t.lineTo(l+f,h+d);break;case"H":l=e[1],t.lineTo(l+f,h+d);break;case"v":h+=e[1],t.lineTo(l+f,h+d);break;case"V":h=e[1],t.lineTo(l+f,h+d);break;case"m":l+=e[1],h+=e[2],s=l,o=h,t.moveTo(l+f,h+d);break;case"M":l=e[1],h=e[2],s=l,o=h,t.moveTo(l+f,h+d);break;case"c":i=l+e[5],r=h+e[6],c=l+e[3],u=h+e[4],t.bezierCurveTo(l+e[1]+f,h+e[2]+d,c+f,u+d,i+f,r+d),l=i,h=r;break;case"C":l=e[5],h=e[6],c=e[3],u=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,c+f,u+d,l+f,h+d);break;case"s":i=l+e[3],r=h+e[4],null===n[0].match(/[CcSs]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.bezierCurveTo(c+f,u+d,l+e[1]+f,h+e[2]+d,i+f,r+d),
c=l+e[1],u=h+e[2],l=i,h=r;break;case"S":i=e[3],r=e[4],null===n[0].match(/[CcSs]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.bezierCurveTo(c+f,u+d,e[1]+f,e[2]+d,i+f,r+d),l=i,h=r,c=e[1],u=e[2];break;case"q":i=l+e[3],r=h+e[4],c=l+e[1],u=h+e[2],t.quadraticCurveTo(c+f,u+d,i+f,r+d),l=i,h=r;break;case"Q":i=e[3],r=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,i+f,r+d),l=i,h=r,c=e[1],u=e[2];break;case"t":i=l+e[1],r=h+e[2],null===n[0].match(/[QqTt]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.quadraticCurveTo(c+f,u+d,i+f,r+d),l=i,h=r;break;case"T":i=e[1],r=e[2],null===n[0].match(/[QqTt]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.quadraticCurveTo(c+f,u+d,i+f,r+d),l=i,h=r;break;case"a":a(t,l+f,h+d,[e[1],e[2],e[3],e[4],e[5],e[6]+l+f,e[7]+h+d]),l+=e[6],h+=e[7];break;case"A":a(t,l+f,h+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),l=e[6],h=e[7];break;case"z":case"Z":l=s,h=o,t.closePath()}n=e}this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=n(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),r="",n=0,s=this.path.length;n<s;n++)e.push(this.path[n].join(" "));var a=e.join(" ");return this.group&&"path-group"===this.group.type||(r=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",this.getSvgId(),'d="',a,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),r,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,r,n,s=[],a=[],h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,c=0,u=this.path.length;c<u;c++){for(t=this.path[c],r=t.slice(1).trim(),a.length=0;i=h.exec(r);)a.push(i[0]);n=[t.charAt(0)];for(var f=0,d=a.length;f<d;f++)e=parseFloat(a[f]),isNaN(e)||n.push(e);var p=n[0],g=o[p.toLowerCase()],m=l[p]||p;if(n.length-1>g)for(var v=1,b=n.length;v<b;v+=g)s.push([p].concat(n.slice(v,v+g))),p=m;else s.push(n)}return s},_parseDimensions:function(){for(var t,n,s,a,o=[],l=[],h=null,c=0,u=0,f=0,d=0,p=0,g=0,m=0,v=this.path.length;m<v;++m){switch(t=this.path[m],t[0]){case"l":f+=t[1],d+=t[2],a=[];break;case"L":f=t[1],d=t[2],a=[];break;case"h":f+=t[1],a=[];break;case"H":f=t[1],a=[];break;case"v":d+=t[1],a=[];break;case"V":d=t[1],a=[];break;case"m":f+=t[1],d+=t[2],c=f,u=d,a=[];break;case"M":f=t[1],d=t[2],c=f,u=d,a=[];break;case"c":n=f+t[5],s=d+t[6],p=f+t[3],g=d+t[4],a=e.util.getBoundsOfCurve(f,d,f+t[1],d+t[2],p,g,n,s),f=n,d=s;break;case"C":f=t[5],d=t[6],p=t[3],g=t[4],a=e.util.getBoundsOfCurve(f,d,t[1],t[2],p,g,f,d);break;case"s":n=f+t[3],s=d+t[4],null===h[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,f+t[1],d+t[2],n,s),p=f+t[1],g=d+t[2],f=n,d=s;break;case"S":n=t[3],s=t[4],null===h[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,t[1],t[2],n,s),f=n,d=s,p=t[1],g=t[2];break;case"q":n=f+t[3],s=d+t[4],p=f+t[1],g=d+t[2],a=e.util.getBoundsOfCurve(f,d,p,g,p,g,n,s),f=n,d=s;break;case"Q":p=t[1],g=t[2],a=e.util.getBoundsOfCurve(f,d,p,g,p,g,t[3],t[4]),f=t[3],d=t[4];break;case"t":n=f+t[1],s=d+t[2],null===h[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,p,g,n,s),f=n,d=s;break;case"T":n=t[1],s=t[2],null===h[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,p,g,n,s),f=n,d=s;break;case"a":a=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6]+f,t[7]+d),f+=t[6],d+=t[7];break;case"A":a=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),f=t[6],d=t[7];break;case"z":case"Z":f=c,d=u}h=t,a.forEach(function(t){o.push(t.x),l.push(t.y)}),o.push(f),l.push(d)}var b=i(o)||0,y=i(l)||0,x=r(o)||0,w=r(l)||0,_=x-b,C=w-y,S={left:b,top:y,width:_,height:C};return S}}),e.Path.fromObject=function(t,i){"string"==typeof t.path?e.loadSVGFromURL(t.path,function(r){var n=r[0],s=t.path;delete t.path,e.util.object.extend(n,t),n.setSourcePath(s),i(n)}):i(new e.Path(t.path,t))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,r){var s=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(s.d,n(s,r)))},void(e.Path.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.invoke,n=e.Object.prototype.toObject;return e.PathGroup?void e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},parseDimensionsFromPaths:function(t){for(var i,r,n,s,a,o,l=[],h=[],c=this.paths.length;c--;){n=this.paths[c],s=n.height+n.strokeWidth,a=n.width+n.strokeWidth,i=[{x:n.left,y:n.top},{x:n.left+a,y:n.top},{x:n.left,y:n.top+s},{x:n.left+a,y:n.top+s}],o=this.paths[c].transformMatrix;for(var u=0;u<i.length;u++)r=i[u],o&&(r=e.util.transformPoint(r,o,!1)),l.push(r.x),h.push(r.y)}t.width=Math.max.apply(null,l),t.height=Math.max.apply(null,h)},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),t.translate(-this.width/2,-this.height/2);for(var i=0,r=this.paths.length;i<r;++i)this.paths[i].render(t,!0);this.clipTo&&t.restore(),t.restore()}},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=i(n.call(this,t),{paths:r(this.getObjects(),"toObject",t)});return this.sourcePath&&(e.sourcePath=this.sourcePath),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){var e=this.getObjects(),i=this.getPointByOrigin("left","top"),r="translate("+i.x+" "+i.y+")",n=this._createBaseSVGMarkup();n.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),r,this.getSvgTransform(),'" ',">\n");for(var s=0,a=e.length;s<a;s++)n.push("\t",e[s].toSVG(t));return n.push("</g>\n"),t?t(n.join("")):n.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=this.getObjects()[0].get("fill")||"";return"string"==typeof t&&(t=t.toLowerCase(),this.getObjects().every(function(e){var i=e.get("fill")||"";return"string"==typeof i&&i.toLowerCase()===t}))},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(r){var n=t.paths;delete t.paths;var s=e.util.groupSVGElements(r,t,n);i(s)}):e.util.enlivenObjects(t.paths,function(r){delete t.paths,i(new e.PathGroup(r,t))})},void(e.PathGroup.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,n=e.util.array.max,s=e.util.array.invoke;if(!e.Group){var a={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;this.originalState={},e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),i?this._updateObjectsCoords(!0):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e)),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(t){for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){if(t.__origHasControls=t.hasControls,t.hasControls=!1,!e){var i=t.getLeft(),r=t.getTop(),n=this.getCenterPoint();t.set({originalLeft:i,originalTop:r,left:i-n.x,top:r-n.y}),t.setCoords()}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){var i=this._objects.length;if(this.delegatedProperties[t]||"canvas"===t)for(;i--;)this._objects[i].set(t,e);else for(;i--;)this._objects[i].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(t){return i(this.callSuper("toObject",t),{objects:s(this._objects,"toObject",t)})},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t);for(var i=0,r=this._objects.length;i<r;i++)this._renderObject(this._objects[i],t);this.clipTo&&t.restore(),t.restore()}},_renderControls:function(t,e){this.callSuper("_renderControls",t,e);for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t)},_renderObject:function(t,e){if(t.visible){var i=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var i=t.calcTransformMatrix(),r=e.util.qrDecompose(i),n=new e.Point(r.translateX,r.translateY);return t.scaleX=r.scaleX,t.scaleY=r.scaleY,t.skewX=r.skewX,t.skewY=r.skewY,t.angle=r.angle,t.flipX=!1,t.flipY=!1,t.setPositionByOrigin(n,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),delete t.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_calcBounds:function(t){for(var e,i,r,n=[],s=[],a=["tr","br","bl","tl"],o=0,l=this._objects.length,h=a.length;o<l;++o)for(e=this._objects[o],e.setCoords(),r=0;r<h;r++)i=a[r],n.push(e.oCoords[i].x),s.push(e.oCoords[i].y);this.set(this._getBounds(n,s,t))},_getBounds:function(t,i,s){var a=e.util.invertTransform(this.getViewportTransform()),o=e.util.transformPoint(new e.Point(r(t),r(i)),a),l=e.util.transformPoint(new e.Point(n(t),n(i)),a),h={width:l.x-o.x||0,height:l.y-o.y||0};return s||(h.left=o.x||0,h.top=o.y||0,"center"===this.originX&&(h.left+=h.width/2),"right"===this.originX&&(h.left+=h.width),"center"===this.originY&&(h.top+=h.height/2),"bottom"===this.originY&&(h.top+=h.height)),h},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var i=0,r=this._objects.length;i<r;i++)e.push("\t",this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in a){if(this[t])return this[t];for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(r){delete t.objects,i&&i(new e.Group(r,t,!0))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;return t.fabric||(t.fabric={}),t.fabric.Image?void fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,initialize:function(t,e){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element},setElement:function(t,e,i){return this._element=t,this._originalElement=t,this._initConfig(i),0!==this.filters.length?this.applyFilters(e):e&&e(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,r=this.width,n=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+r,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i,e+r,i+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i+n,e,i+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+n,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var i=[],r=[],n=this._originalElement,s=1,a=1;this.filters.forEach(function(t){t&&("Resize"===t.type&&(s*=t.scaleX,a*=t.scaleY),i.push(t.toObject()))}),this.resizeFilters.forEach(function(t){t&&r.push(t.toObject())});var o=e(this.callSuper("toObject",t),{src:n?n.src||n._src:"",filters:i,resizeFilters:r,crossOrigin:this.crossOrigin,alignX:this.alignX,alignY:this.alignY,meetOrSlice:this.meetOrSlice});return o.width/=s,o.height/=a,this.includeDefaultValues||this._removeDefaultValues(o),o},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,r=-this.height/2,n="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,r=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(n="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(),'" x="',i,'" y="',r,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',n,'"',"></image>\n"),this.stroke||this.strokeDashArray){var s=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',r,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=s}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(){if(this.getElement())return this.getElement().src||this.getElement()._src},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t,e,i,r){if(e=e||this.filters,i=i||this._originalElement){var n=i,s=fabric.util.createCanvasElement(),a=fabric.util.createImage(),o=this;return s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0,n.width,n.height),0===e.length?(this._element=i,t&&t(),s):(e.forEach(function(t){t&&t.applyTo(s,t.scaleX||o.scaleX,t.scaleY||o.scaleY),!r&&t&&"Resize"===t.type&&(o.width*=t.scaleX,o.height*=t.scaleY)}),a.width=s.width,a.height=s.height,fabric.isLikelyNode?(a.src=s.toBuffer(void 0,fabric.Image.pngCompression),o._element=a,!r&&(o._filteredEl=a),t&&t()):(a.onload=function(){o._element=a,!r&&(o._filteredEl=a),t&&t(),a.onload=s=n=null},a.src=s.toDataURL("image/png")),s)}},_render:function(t,e){var i,r,n,s=this._findMargins();i=e?this.left:-this.width/2,r=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,r,this.width,this.height),t.clip()),this.isMoving===!1&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,n=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):n=this._element,n&&t.drawImage(n,i+s.marginX,r+s.marginY,s.width,s.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,r=this.height,n=0,s=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,r=this._element.height*e,"Mid"===this.alignX&&(n=(this.width-i)/2),"Max"===this.alignX&&(n=this.width-i),"Mid"===this.alignY&&(s=(this.height-r)/2),"Max"===this.alignY&&(s=this.height-r)),{width:i,height:r,marginX:n,marginY:s}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e){this.setElement(fabric.util.getById(t),null,e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){fabric.Image.prototype._initFilters.call(t,t.filters,function(r){t.filters=r||[],fabric.Image.prototype._initFilters.call(t,t.resizeFilters,function(r){t.resizeFilters=r||[];var n=new fabric.Image(i,t);e&&e(n)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(t,i,r){var n,s=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);s.preserveAspectRatio&&(n=fabric.util.parsePreserveAspectRatioAttribute(s.preserveAspectRatio),e(s,n)),fabric.Image.fromURL(s["xlink:href"],i,e(r?fabric.util.object.clone(r):{},s))},fabric.Image.async=!0,void(fabric.Image.pngCompression=1))}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,r=t.onChange||e,n=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){n.setAngle(t),r()},onComplete:function(){n.setCoords(),i()},onStart:function(){n.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),r=i.data,n=this.brightness,s=0,a=r.length;s<a;s+=4)r[s]+=n,r[s+1]+=n,r[s+2]+=n;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(t){for(var e,i,r,n,s,a,o,l,h,c=this.matrix,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=Math.round(Math.sqrt(c.length)),p=Math.floor(d/2),g=f.data,m=f.width,v=f.height,b=u.createImageData(m,v),y=b.data,x=this.opaque?1:0,w=0;w<v;w++)for(var _=0;_<m;_++){s=4*(w*m+_),e=0,i=0,r=0,n=0;for(var C=0;C<d;C++)for(var S=0;S<d;S++)o=w+C-p,a=_+S-p,o<0||o>v||a<0||a>m||(l=4*(o*m+a),h=c[C*d+S],e+=g[l]*h,i+=g[l+1]*h,r+=g[l+2]*h,n+=g[l+3]*h);y[s]=e,y[s+1]=i,y[s+2]=r,y[s+3]=n+x*(255-n)}u.putImageData(b,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),r=i.data,n=this.threshold,s=r.length,a=0,o=r.length;a<o;a+=4)r[a+3]=n+255*(s-a)/s;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),n=r.data,s=r.width*r.height*4,a=0;a<s;)e=(n[a]+n[a+1]+n[a+2])/3,n[a]=e,n[a+1]=e,n[a+2]=e,a+=4;i.putImageData(r,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),n=r.data,s=n.length;for(e=0;e<s;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2];i.putImageData(r,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),s=n.data,a=this.mask.getElement(),o=e.util.createCanvasElement(),l=this.channel,h=n.width*n.height*4;o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(a,0,0,t.width,t.height);var c=o.getContext("2d").getImageData(0,0,t.width,t.height),u=c.data;for(i=0;i<h;i+=4)s[i+3]=u[i+l];r.putImageData(n,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(r){t.mask=new e.Image(r,t.mask),i&&i(new e.Image.filters.Mask(t))})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),n=r.data,s=this.noise,a=0,o=n.length;a<o;a+=4)e=(.5-Math.random())*s,n[a]+=e,n[a+1]+=e,n[a+2]+=e;i.putImageData(r,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,r,n,s,a,o,l=t.getContext("2d"),h=l.getImageData(0,0,t.width,t.height),c=h.data,u=h.height,f=h.width;for(i=0;i<u;i+=this.blocksize)for(r=0;r<f;r+=this.blocksize){e=4*i*f+4*r,n=c[e],s=c[e+1],a=c[e+2],o=c[e+3];for(var d=i,p=i+this.blocksize;d<p;d++)for(var g=r,m=r+this.blocksize;g<m;g++)e=4*d*f+4*g,c[e]=n,c[e+1]=s,c[e+2]=a,c[e+3]=o}l.putImageData(h,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,r,n=t.getContext("2d"),s=n.getImageData(0,0,t.width,t.height),a=s.data,o=this.threshold,l=this.distance,h=255-o,c=Math.abs,u=0,f=a.length;u<f;u+=4)e=a[u],i=a[u+1],r=a[u+2],e>h&&i>h&&r>h&&c(e-i)<l&&c(e-r)<l&&c(i-r)<l&&(a[u+3]=0);n.putImageData(s,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),s=n.data,a=s.length;for(e=0;e<a;e+=4)i=.3*s[e]+.59*s[e+1]+.11*s[e+2],s[e]=i+100,s[e+1]=i+50,s[e+2]=i+255;r.putImageData(n,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,r,n,s=t.getContext("2d"),a=s.getImageData(0,0,t.width,t.height),o=a.data,l=o.length;for(e=0;e<l;e+=4)i=o[e],r=o[e+1],n=o[e+2],o[e]=(.393*i+.769*r+.189*n)/1.351,o[e+1]=(.349*i+.686*r+.168*n)/1.203,o[e+2]=(.272*i+.534*r+.131*n)/2.14;s.putImageData(a,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity="undefined"!=typeof t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,r,n,s,a,o,l,h,c,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=f.data,p=d.length;for(c=new e.Color(this.color).getSource(),r=c[0]*this.opacity,n=c[1]*this.opacity,s=c[2]*this.opacity,h=1-this.opacity,i=0;i<p;i+=4)a=d[i],o=d[i+1],l=d[i+2],d[i]=r+a*h,d[i+1]=n+o*h,d[i+2]=s+l*h;u.putImageData(f,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Multiply=e.util.createClass(e.Image.filters.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,r,n=t.getContext("2d"),s=n.getImageData(0,0,t.width,t.height),a=s.data,o=a.length;for(r=new e.Color(this.color).getSource(),i=0;i<o;i+=4)a[i]*=r[0]/255,a[i+1]*=r[1]/255,a[i+2]*=r[2]/255;n.putImageData(s,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=function(t){return new e.Image.filters.Multiply(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric;e.Image.filters.Blend=e.util.createClass(e.Image.filters.BaseFilter,{type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,r,n,s,a,o,l,h,c,u,f=t.getContext("2d"),d=f.getImageData(0,0,t.width,t.height),p=d.data,g=!1;if(this.image){g=!0;var m=e.util.createCanvasElement();m.width=this.image.width,m.height=this.image.height;var v=new e.StaticCanvas(m);v.add(this.image);var b=v.getContext("2d");u=b.getImageData(0,0,v.width,v.height).data}else u=new e.Color(this.color).getSource(),i=u[0]*this.alpha,r=u[1]*this.alpha,n=u[2]*this.alpha;for(var y=0,x=p.length;y<x;y+=4)switch(s=p[y],a=p[y+1],o=p[y+2],g&&(i=u[y]*this.alpha,r=u[y+1]*this.alpha,n=u[y+2]*this.alpha),this.mode){case"multiply":p[y]=s*i/255,p[y+1]=a*r/255,p[y+2]=o*n/255;break;case"screen":p[y]=1-(1-s)*(1-i),p[y+1]=1-(1-a)*(1-r),p[y+2]=1-(1-o)*(1-n);break;case"add":p[y]=Math.min(255,s+i),p[y+1]=Math.min(255,a+r),p[y+2]=Math.min(255,o+n);break;case"diff":case"difference":p[y]=Math.abs(s-i),p[y+1]=Math.abs(a-r),p[y+2]=Math.abs(o-n);break;case"subtract":l=s-i,h=a-r,c=o-n,p[y]=l<0?0:l,p[y+1]=h<0?0:h,p[y+2]=c<0?0:c;break;case"darken":p[y]=Math.min(s,i),p[y+1]=Math.min(a,r),p[y+2]=Math.min(o,n);break;case"lighten":p[y]=Math.max(s,i),p[y+1]=Math.max(a,r),p[y+2]=Math.max(o,n)}f.putImageData(d,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=function(t){return new e.Image.filters.Blend(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,r=Math.floor,n=Math.sqrt,s=Math.abs,a=Math.max,o=Math.round,l=Math.sin,h=Math.ceil;e.Image.filters.Resize=e.util.createClass(e.Image.filters.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var r,n=t.width,s=t.height,a=o(n*e),l=o(s*i);"sliceHack"===this.resizeType&&(r=this.sliceByTwo(t,n,s,a,l)),"hermite"===this.resizeType&&(r=this.hermiteFastResize(t,n,s,a,l)),"bilinear"===this.resizeType&&(r=this.bilinearFiltering(t,n,s,a,l)),"lanczos"===this.resizeType&&(r=this.lanczosResize(t,n,s,a,l)),
t.width=a,t.height=l,t.getContext("2d").putImageData(r,0,0)},sliceByTwo:function(t,i,n,s,o){var l,h=t.getContext("2d"),c=.5,u=.5,f=1,d=1,p=!1,g=!1,m=i,v=n,b=e.util.createCanvasElement(),y=b.getContext("2d");for(s=r(s),o=r(o),b.width=a(s,i),b.height=a(o,n),s>i&&(c=2,f=-1),o>n&&(u=2,d=-1),l=h.getImageData(0,0,i,n),t.width=a(s,i),t.height=a(o,n),h.putImageData(l,0,0);!p||!g;)i=m,n=v,s*f<r(m*c*f)?m=r(m*c):(m=s,p=!0),o*d<r(v*u*d)?v=r(v*u):(v=o,g=!0),l=h.getImageData(0,0,i,n),y.putImageData(l,0,0),h.clearRect(0,0,m,v),h.drawImage(b,0,0,i,n,0,0,m,v);return h.getImageData(0,0,s,o)},lanczosResize:function(t,e,a,o,c){function u(t){return function(e){if(e>t)return 0;if(e*=Math.PI,s(e)<1e-16)return 1;var i=e/t;return l(e)*l(i)/e/i}}function f(t){var l,h,u,d,p,A,M,D,N,L,F;for(k.x=(t+.5)*y,O.x=r(k.x),l=0;l<c;l++){for(k.y=(l+.5)*x,O.y=r(k.y),p=0,A=0,M=0,D=0,N=0,h=O.x-C;h<=O.x+C;h++)if(!(h<0||h>=e)){L=r(1e3*s(h-k.x)),T[L]||(T[L]={});for(var I=O.y-S;I<=O.y+S;I++)I<0||I>=a||(F=r(1e3*s(I-k.y)),T[L][F]||(T[L][F]=b(n(i(L*w,2)+i(F*_,2))/1e3)),u=T[L][F],u>0&&(d=4*(I*e+h),p+=u,A+=u*m[d],M+=u*m[d+1],D+=u*m[d+2],N+=u*m[d+3]))}d=4*(l*o+t),v[d]=A/p,v[d+1]=M/p,v[d+2]=D/p,v[d+3]=N/p}return++t<o?f(t):g}var d=t.getContext("2d"),p=d.getImageData(0,0,e,a),g=d.getImageData(0,0,o,c),m=p.data,v=g.data,b=u(this.lanczosLobes),y=this.rcpScaleX,x=this.rcpScaleY,w=2/this.rcpScaleX,_=2/this.rcpScaleY,C=h(y*this.lanczosLobes/2),S=h(x*this.lanczosLobes/2),T={},k={},O={};return f(0)},bilinearFiltering:function(t,e,i,n,s){var a,o,l,h,c,u,f,d,p,g,m,v,b,y=0,x=this.rcpScaleX,w=this.rcpScaleY,_=t.getContext("2d"),C=4*(e-1),S=_.getImageData(0,0,e,i),T=S.data,k=_.getImageData(0,0,n,s),O=k.data;for(f=0;f<s;f++)for(d=0;d<n;d++)for(c=r(x*d),u=r(w*f),p=x*d-c,g=w*f-u,b=4*(u*e+c),m=0;m<4;m++)a=T[b+m],o=T[b+4+m],l=T[b+C+m],h=T[b+C+4+m],v=a*(1-p)*(1-g)+o*p*(1-g)+l*g*(1-p)+h*p*g,O[y++]=v;return k},hermiteFastResize:function(t,e,i,a,o){for(var l=this.rcpScaleX,c=this.rcpScaleY,u=h(l/2),f=h(c/2),d=t.getContext("2d"),p=d.getImageData(0,0,e,i),g=p.data,m=d.getImageData(0,0,a,o),v=m.data,b=0;b<o;b++)for(var y=0;y<a;y++){for(var x=4*(y+b*a),w=0,_=0,C=0,S=0,T=0,k=0,O=0,A=(b+.5)*c,M=r(b*c);M<(b+1)*c;M++)for(var D=s(A-(M+.5))/f,N=(y+.5)*l,L=D*D,F=r(y*l);F<(y+1)*l;F++){var I=s(N-(F+.5))/u,E=n(L+I*I);E>1&&E<-1||(w=2*E*E*E-3*E*E+1,w>0&&(I=4*(F+M*e),O+=w*g[I+3],C+=w,g[I+3]<255&&(w=w*g[I+3]/250),S+=w*g[I],T+=w*g[I+1],k+=w*g[I+2],_+=w))}v[x]=S/_,v[x+1]=T/_,v[x+2]=k/_,v[x+3]=O/C}return m},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=function(t){return new e.Image.filters.Resize(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,n=e.util.toFixed,s=e.StaticCanvas.supports("setLineDash"),a=e.Object.NUM_FRACTION_DIGITS;if(e.Text)return void e.warn("fabric.Text is already defined");var o=e.Object.prototype.stateProperties.concat();o.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0,textAlign:!0},_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:o,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(t),this.height=this._getTextHeight(t))},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){this.clipTo&&e.util.clipContext(this,t),this._setOpacity(t),this._setShadow(t),this._setupCompositeOperation(t),this._renderTextBackground(t),this._setStrokeStyles(t),this._setFillStyles(t),this._renderText(t),this._renderTextDecoration(t),this.clipTo&&t.restore()},_renderText:function(t){this._translateForTextAlign(t),this._renderTextFill(t),this._renderTextStroke(t),this._translateForTextAlign(t,!0)},_translateForTextAlign:function(t,e){if("left"!==this.textAlign&&"justify"!==this.textAlign){var i=e?-1:1;t.translate("center"===this.textAlign?i*this.width/2:i*this.width,0)}},_setTextStyles:function(t){t.textBaseline="alphabetic",this.skipTextAlign||(t.textAlign=this.textAlign),t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,r=this._textLines.length;i<r;i++){var n=this._getLineWidth(t,i);n>e&&(e=n)}return e},_getNonTransformedDimensions:function(){return{x:this.width,y:this.height}},_renderChars:function(t,e,i,r,n){var s=t.slice(0,-4);if(this[s].toLive){var a=-this.width/2+this[s].offsetX||0,o=-this.height/2+this[s].offsetY||0;e.save(),e.translate(a,o),r-=a,n-=o}e[t](i,r,n),this[s].toLive&&e.restore()},_renderTextLine:function(t,e,i,r,n,s){n-=this.fontSize*this._fontSizeFraction;var a=this._getLineWidth(e,s);if("justify"!==this.textAlign||this.width<a)return void this._renderChars(t,e,i,r,n,s);for(var o,l=i.split(/\s+/),h=0,c=this._getWidthOfWords(e,i,s,0),u=this.width-c,f=l.length-1,d=f>0?u/f:0,p=0,g=0,m=l.length;g<m;g++){for(;" "===i[h]&&h<i.length;)h++;o=l[g],this._renderChars(t,e,o,r+p,n,s,h),p+=this._getWidthOfWords(e,o,s,h)+d,h+=o.length}},_getWidthOfWords:function(t,e){return t.measureText(e.replace(/\s+/g,"")).width},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextFill:function(t){if(this.fill||!this.isEmptyStyles())for(var e=0,i=0,r=this._textLines.length;i<r;i++){var n=this._getHeightOfLine(t,i),s=n/this.lineHeight;this._renderTextLine("fillText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+s,i),e+=n}},_renderTextStroke:function(t){if(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles()){var e=0;this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),s&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var i=0,r=this._textLines.length;i<r;i++){var n=this._getHeightOfLine(t,i),a=n/this.lineHeight;this._renderTextLine("strokeText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+a,i),e+=n}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextBackground:function(t){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),this._removeShadow(t))},_renderTextLinesBackground:function(t){if(this.textBackgroundColor){var e,i,r,n=0;t.fillStyle=this.textBackgroundColor;for(var s=0,a=this._textLines.length;s<a;s++)e=this._getHeightOfLine(t,s),i=this._getLineWidth(t,s),i>0&&(r=this._getLineLeftOffset(i),t.fillRect(this._getLeftOffset()+r,this._getTopOffset()+n,i,e/this.lineHeight)),n+=e;this._removeShadow(t)}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearCache:function(){var t=!1;if(this._forceClearCache)return this._forceClearCache=!1,!0;for(var e in this._dimensionAffectingProps)this["__"+e]!==this[e]&&(this["__"+e]=this[e],t=!0);return t},_getLineWidth:function(t,e){if(this.__lineWidths[e])return this.__lineWidths[e]===-1?this.width:this.__lineWidths[e];var i,r,n=this._textLines[e];return i=""===n?0:this._measureLine(t,e),this.__lineWidths[e]=i,i&&"justify"===this.textAlign&&(r=n.split(/\s+/),r.length>1&&(this.__lineWidths[e]=-1)),i},_measureLine:function(t,e){return t.measureText(this._textLines[e]).width},_renderTextDecoration:function(t){function e(e){var n,s,a,o,l,h,c,u=0;for(n=0,s=r._textLines.length;n<s;n++){for(l=r._getLineWidth(t,n),h=r._getLineLeftOffset(l),c=r._getHeightOfLine(t,n),a=0,o=e.length;a<o;a++)t.fillRect(r._getLeftOffset()+h,u+(r._fontSizeMult-1+e[a])*r.fontSize-i,l,r.fontSize/15);u+=c}}if(this.textDecoration){var i=this.height/2,r=this,n=[];this.textDecoration.indexOf("underline")>-1&&n.push(.85),this.textDecoration.indexOf("line-through")>-1&&n.push(.43),this.textDecoration.indexOf("overline")>-1&&n.push(-.12),n.length>0&&e(n)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._setTextStyles(t),this._shouldClearCache()&&this._initDimensions(t),this.drawSelectionBackground(t),e||this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._render(t),t.restore())},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(t){var e=i(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,textBackgroundColor:this.textBackgroundColor});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this._getSVGLeftTopOffsets(this.ctx),r=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(e,r),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0),i=-this.width/2,r=0;return{textLeft:i+(this.group&&"path-group"===this.group.type?this.left:0),textTop:r+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){var i=!0,r=this.getSvgFilter(),n=""===r?"":' style="'+r+'"';t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',n,">\n",e.textBgRects.join(""),"\t\t<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(i),'" >\n',e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],r=[],n=0;this._setSVGBg(r);for(var s=0,a=this._textLines.length;s<a;s++)this.textBackgroundColor&&this._setSVGTextLineBg(r,s,e,t,n),this._setSVGTextLineText(s,i,n,e,t,r),n+=this._getHeightOfLine(this.ctx,s);return{textSpans:i,textBgRects:r}},_setSVGTextLineText:function(t,i,r,s,o){var l=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-o+r-this.height/2;return"justify"===this.textAlign?void this._setSVGTextLineJustifed(t,i,l,s):void i.push('\t\t\t<tspan x="',n(s+this._getLineLeftOffset(this._getLineWidth(this.ctx,t)),a),'" ','y="',n(l,a),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>\n")},_setSVGTextLineJustifed:function(t,i,r,s){var o=e.util.createCanvasElement().getContext("2d");this._setTextStyles(o);var l,h,c=this._textLines[t],u=c.split(/\s+/),f=this._getWidthOfWords(o,c),d=this.width-f,p=u.length-1,g=p>0?d/p:0,m=this._getFillAttributes(this.fill);for(s+=this._getLineLeftOffset(this._getLineWidth(o,t)),t=0,h=u.length;t<h;t++)l=u[t],i.push('\t\t\t<tspan x="',n(s,a),'" ','y="',n(r,a),'" ',m,">",e.util.string.escapeXml(l),"</tspan>\n"),s+=this._getWidthOfWords(o,l)+g},_setSVGTextLineBg:function(t,e,i,r,s){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',n(i+this._getLineLeftOffset(this._getLineWidth(this.ctx,e)),a),'" y="',n(s-this.height/2,a),'" width="',n(this._getLineWidth(this.ctx,e),a),'" height="',n(this._getHeightOfLine(this.ctx,e)/this.lineHeight,a),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,a),'" y="',n(-this.height/2,a),'" width="',n(this.width,a),'" height="',n(this.height,a),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var r=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},r),i.top=i.top||0,i.left=i.left||0,"dx"in r&&(i.left+=r.dx),"dy"in r&&(i.top+=r.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var n="";"textContent"in t?n=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(n=t.firstChild.data),n=n.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var s=new e.Text(n,i),a=s.getHeight()/s.height,o=(s.height+s.strokeWidth)*s.lineHeight-s.height,l=o*a,h=s.getHeight()+l,c=0;return"left"===s.originX&&(c=s.getWidth()/2),"right"===s.originX&&(c=-s.getWidth()/2),s.set({left:s.getLeft()+c,top:s.getTop()-h/2+s.fontSize*(.18+s._fontSizeFraction)/s.lineHeight}),s},e.Text.fromObject=function(t){return new e.Text(t.text,r(t))},e.util.createAccessors(e.Text)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var r in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this.selectionStart!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionStart=t),this._updateTextarea()},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this.selectionEnd!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionEnd=t),this._updateTextarea()},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],r=t;r<e;r++)i.push(this.getSelectionStyles(r));return i}var n=this.get2DCursorLocation(t),s=this._getStyleDeclaration(n.lineIndex,n.charIndex);return s||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},_render:function(t){this.oldWidth=this.width,this.oldHeight=this.height,this.callSuper("_render",t),this.ctx=t,this.isEditing&&this.renderCursorOrSelection()},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t,e,i=this.text.split("");this.canvas.contextTop?(e=this.canvas.contextTop,e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),e.restore()}},_clearTextArea:function(t){var e=this.oldWidth+4,i=this.oldHeight+4;t.clearRect(-e/2,-i/2,e,i)},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0;i<e;i++){if(t<=this._textLines[i].length)return{lineIndex:i,charIndex:t};t-=this._textLines[i].length+1}return{lineIndex:i-1,charIndex:this._textLines[i-1].length<t?this._textLines[i-1].length:t}},getCurrentCharStyle:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fontSize?i.fontSize:this.fontSize},getCurrentCharColor:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fill?i.fill:this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),r=this._getTopOffset(),n=this._getCursorBoundariesOffsets(t,e);return{left:i,top:r,leftOffset:n.left+n.lineLeft,topOffset:n.top}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,r=0,n=0,s=0,a=0,o=0;o<this.selectionStart;o++)"\n"===t[o]?(a=0,s+=this._getHeightOfLine(this.ctx,r),r++,n=0):(a+=this._getWidthOfChar(this.ctx,t[o],r,n),n++),i=this._getLineLeftOffset(this._getLineWidth(this.ctx,r));return"cursor"===e&&(s+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,r)/this.lineHeight-this.getCurrentCharFontSize(r,n)*(1-this._fontSizeFraction)),{top:s,left:a,lineLeft:i}},renderCursor:function(t,e){var i=this.get2DCursorLocation(),r=i.lineIndex,n=i.charIndex,s=this.getCurrentCharFontSize(r,n),a=0===r&&0===n?this._getLineLeftOffset(this._getLineWidth(e,r)):t.leftOffset,o=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/o;e.fillStyle=this.getCurrentCharColor(r,n),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+a-l/2,t.top+t.topOffset,l,s)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var r=this.get2DCursorLocation(this.selectionStart),n=this.get2DCursorLocation(this.selectionEnd),s=r.lineIndex,a=n.lineIndex,o=s;o<=a;o++){var l=this._getLineLeftOffset(this._getLineWidth(i,o))||0,h=this._getHeightOfLine(this.ctx,o),c=0,u=this._textLines[o];if(o===s)for(var f=0,d=u.length;f<d;f++)f>=r.charIndex&&(o!==a||f<n.charIndex)&&(c+=this._getWidthOfChar(i,u[f],o,f)),f<r.charIndex&&(l+=this._getWidthOfChar(i,u[f],o,f));else if(o>s&&o<a)c+=this._getLineWidth(i,o)||5;else if(o===a)for(var p=0,g=n.charIndex;p<g;p++)c+=this._getWidthOfChar(i,u[p],o,p);i.fillRect(e.left+l,e.top+e.topOffset,c,h),e.topOffset+=h}},_renderChars:function(t,e,i,r,n,s,a){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,r,n);a=a||0,this.skipTextAlign=!0,r-="center"===this.textAlign?this.width/2:"right"===this.textAlign?this.width:0;var o,l,h=this._getHeightOfLine(e,s),c=this._getLineLeftOffset(this._getLineWidth(e,s)),u="";r+=c||0,e.save(),n-=h/this.lineHeight*this._fontSizeFraction;for(var f=a,d=i.length+a;f<=d;f++)o=o||this.getCurrentCharStyle(s,f),l=this.getCurrentCharStyle(s,f+1),(this._hasStyleChanged(o,l)||f===d)&&(this._renderChar(t,e,s,f-1,u,r,n,h),u="",o=l),u+=i[f-a];e.restore()},_renderCharsFast:function(t,e,i,r,n){this.skipTextAlign=!1,"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,r,n),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,r,n)},_renderChar:function(t,e,i,r,n,s,a,o){var l,h,c,u,f,d,p=this._getStyleDeclaration(i,r);p?(h=this._getHeightOfChar(e,n,i,r),u=p.stroke,c=p.fill,d=p.textDecoration):h=this.fontSize,u=(u||this.stroke)&&"strokeText"===t,c=(c||this.fill)&&"fillText"===t,p&&e.save(),l=this._applyCharStylesGetWidth(e,n,i,r,p||{}),d=d||this.textDecoration,p&&p.textBackgroundColor&&this._removeShadow(e),c&&e.fillText(n,s,a),u&&e.strokeText(n,s,a),(d||""!==d)&&(f=this._fontSizeFraction*o/this.lineHeight,this._renderCharDecoration(e,d,s,a,f,l,h)),p&&e.restore(),e.translate(l,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,r,n,s,a){if(e){var o,l,h=a/15,c={underline:r+a/10,"line-through":r-a*(this._fontSizeFraction+this._fontSizeMult-1)+h,overline:r-(this._fontSizeMult-this._fontSizeFraction)*a},u=["underline","line-through","overline"];for(o=0;o<u.length;o++)l=u[o],e.indexOf(l)>-1&&t.fillRect(i,c[l],s,h)}},_renderTextLine:function(t,e,i,r,n,s){this.isEmptyStyles()||(n+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,r,n,s)},_renderTextDecoration:function(t){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",t)},_renderTextLinesBackground:function(t){this.callSuper("_renderTextLinesBackground",t);for(var e,i,r,n,s,a,o=0,l=this._getLeftOffset(),h=this._getTopOffset(),c=0,u=this._textLines.length;c<u;c++)if(e=this._getHeightOfLine(t,c),n=this._textLines[c],""!==n&&this.styles&&this._getLineStyle(c)){i=this._getLineWidth(t,c),r=this._getLineLeftOffset(i);for(var f=0,d=n.length;f<d;f++)a=this._getStyleDeclaration(c,f),a&&a.textBackgroundColor&&(s=n[f],t.fillStyle=a.textBackgroundColor,t.fillRect(l+r+this._getWidthOfCharsAt(t,c,f),h+o,this._getWidthOfChar(t,s,c,f)+1,e/this.lineHeight));o+=e}else o+=e},_getCacheProp:function(t,e){return t+e.fontSize+e.fontWeight+e.fontStyle},_getFontCache:function(t){return fabric.charWidthsCache[t]||(fabric.charWidthsCache[t]={}),fabric.charWidthsCache[t]},_applyCharStylesGetWidth:function(e,i,r,n,s){var a,o,l,h=this._getStyleDeclaration(r,n),c=s&&t(s)||t(h);if(this._applyFontStyles(c),l=this._getFontCache(c.fontFamily),o=this._getCacheProp(i,c),!h&&l[o]&&this.caching)return l[o];"string"==typeof c.shadow&&(c.shadow=new fabric.Shadow(c.shadow));var u=c.fill||this.fill;return e.fillStyle=u.toLive?u.toLive(e,this):u,c.stroke&&(e.strokeStyle=c.stroke&&c.stroke.toLive?c.stroke.toLive(e,this):c.stroke),e.lineWidth=c.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(c),c.shadow&&(c.scaleX=this.scaleX,c.scaleY=this.scaleY,c.canvas=this.canvas,this._setShadow.call(c,e)),this.caching&&l[o]?l[o]:(a=e.measureText(i).width,this.caching&&(l[o]=a),a)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,i,r){return r?this.styles[e]&&this.styles[e][i]?t(this.styles[e][i]):{}:this.styles[e]&&this.styles[e][i]?this.styles[e][i]:null},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_getWidthOfChar:function(t,e,i,r){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(e))return this._getWidthOfSpace(t,i);var n,s,a=this._getStyleDeclaration(i,r,!0);if(this._applyFontStyles(a),n=this._getFontCache(a.fontFamily),s=this._getCacheProp(e,a),n[s]&&this.caching)return n[s];if(t){t.save();var o=this._applyCharStylesGetWidth(t,e,i,r);return t.restore(),o}},_getHeightOfChar:function(t,e,i){var r=this._getStyleDeclaration(e,i);return r&&r.fontSize?r.fontSize:this.fontSize},_getWidthOfCharsAt:function(t,e,i){var r,n,s=0;for(r=0;r<i;r++)n=this._textLines[e][r],s+=this._getWidthOfChar(t,n,e,r);return s},_measureLine:function(t,e){this._isMeasuring=!0;var i=this._getWidthOfCharsAt(t,e,this._textLines[e].length);return this._isMeasuring=!1,i},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],r=this._getWidthOfWords(t,i,e,0),n=this.width-r,s=i.length-i.replace(this._reSpacesAndTabs,"").length,a=Math.max(n/s,t.measureText(" ").width);return this.__widthOfSpace[e]=a,a},_getWidthOfWords:function(t,e,i,r){for(var n=0,s=0;s<e.length;s++){var a=e[s];a.match(/\s/)||(n+=this._getWidthOfChar(t,a,i,s+r))}return n},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],r=this._getHeightOfChar(t,e,0),n=1,s=i.length;n<s;n++){var a=this._getHeightOfChar(t,e,n);a>r&&(r=a)}return this.__lineHeights[e]=r*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e=this._getHeightOfLine(t,0)/this.lineHeight,i=1,r=this._textLines.length;i<r;i++)e+=this._getHeightOfLine(t,i);return e},toObject:function(e){var i,r,n,s={};for(i in this.styles){n=this.styles[i],s[i]={};for(r in n)s[i][r]=t(n[r])}return fabric.util.object.extend(this.callSuper("toObject",e),{styles:s})}}),fabric.IText.fromObject=function(e){return new fabric.IText(e.text,t(e))}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation()},initSelectedHandler:function(){this.on("selected",function(){var t=this;setTimeout(function(){t.selected=!0},100)})},initAddedHandler:function(){var t=this;this.on("added",function(){this.canvas&&!this.canvas._hasITextHandlers&&(this.canvas._hasITextHandlers=!0,this._initCanvasHandlers()),t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],t.canvas._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],fabric.util.removeFromArray(t.canvas._iTextInstances,t))})},_initCanvasHandlers:function(){var t=this;this.canvas.on("selection:cleared",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)}),this.canvas.on("mouse:up",function(){t.canvas._iTextInstances&&t.canvas._iTextInstances.forEach(function(t){t.__isMousedown=!1})}),this.canvas.on("object:selected",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)})},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,r){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){n.isAborted||t[r]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.setSelectionStart(0),this.setSelectionEnd(this.text.length)},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,r=t.length;i<r;i++)"\n"===t[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,r=this.text.charAt(i),n=/[ \n\.,;!\?\-]/;!n.test(r)&&i>0&&i<this.text.length;)i+=e,r=this.text.charAt(i);return n.test(r)&&"\n"!==r&&(i+=1===e?0:1),i},selectWord:function(t){var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.setSelectionStart(e),this.setSelectionEnd(i)},selectLine:function(t){var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.setSelectionStart(e),this.setSelectionEnd(i)},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this.canvas?(this.canvas.renderAll(),this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler.bind(this))},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e);e!==this.__selectionStartOnMouseDown&&(e>this.__selectionStartOnMouseDown?(this.setSelectionStart(this.__selectionStartOnMouseDown),this.setSelectionEnd(e)):(this.setSelectionStart(e),this.setSelectionEnd(this.__selectionStartOnMouseDown)),this.renderCursorOrSelection())}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top,this.hiddenTextarea.style.fontSize=t.fontSize;
}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.text.split(""),e=this._getCursorBoundaries(t,"cursor"),i=this.get2DCursorLocation(),r=i.lineIndex,n=i.charIndex,s=this.getCurrentCharFontSize(r,n),a=0===r&&0===n?this._getLineLeftOffset(this._getLineWidth(this.ctx,r)):e.leftOffset,o=this.calcTransformMatrix(),l={x:e.left+a,y:e.top+e.topOffset+s},h=this.canvas.upperCanvasEl,c=h.width-s,u=h.height-s;return l=fabric.util.transformPoint(l,o),l=fabric.util.transformPoint(l,this.canvas.viewportTransform),l.x<0&&(l.x=0),l.x>c&&(l.x=c),l.y<0&&(l.y=0),l.y>u&&(l.y=u),{left:l.x+"px",top:l.y+"px",fontSize:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.setSelectionStart(t)},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],i=e?t:t-1;this.removeStyleObject(e,i),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this._splitTextIntoLines()},insertChars:function(t,e){var i;if(this.selectionEnd-this.selectionStart>1&&(this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart)),!e&&this.isEmptyStyles())return void this.insertChar(t,!1);for(var r=0,n=t.length;r<n;r++)e&&(i=fabric.copiedTextStyle[r]),this.insertChar(t[r],r<n-1,i)},insertChar:function(t,e,i){var r="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,r,i),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart,e||(this._updateTextarea(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this}))},insertNewlineStyleObject:function(e,i,r){this.shiftLineStyles(e,1),this.styles[e+1]||(this.styles[e+1]={});var n={},s={};if(this.styles[e]&&this.styles[e][i-1]&&(n=this.styles[e][i-1]),r)s[0]=t(n),this.styles[e+1]=s;else{for(var a in this.styles[e])parseInt(a,10)>=i&&(s[parseInt(a,10)-i]=this.styles[e][a],delete this.styles[e][a]);this.styles[e+1]=s}this._forceClearCache=!0},insertCharStyleObject:function(e,i,r){var n=this.styles[e],s=t(n);0!==i||r||(i=1);for(var a in s){var o=parseInt(a,10);o>=i&&(n[o+1]=s[o],s[o-1]||delete n[o])}this.styles[e][i]=r||t(n[i-1]),this._forceClearCache=!0},insertStyleObjects:function(t,e,i){var r=this.get2DCursorLocation(),n=r.lineIndex,s=r.charIndex;this._getLineStyle(n)||this._setLineStyle(n,{}),"\n"===t?this.insertNewlineStyleObject(n,s,e):this.insertCharStyleObject(n,s,i)},shiftLineStyles:function(e,i){var r=t(this.styles);for(var n in this.styles){var s=parseInt(n,10);s>e&&(this.styles[s+i]=r[s],r[s-i]||delete this.styles[s])}},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),r=i.lineIndex,n=i.charIndex;this._removeStyleObject(t,i,r,n)},_getTextOnPreviousLine:function(t){return this._textLines[t-1]},_removeStyleObject:function(e,i,r,n){if(e){var s=this._getTextOnPreviousLine(i.lineIndex),a=s?s.length:0;this.styles[r-1]||(this.styles[r-1]={});for(n in this.styles[r])this.styles[r-1][parseInt(n,10)+a]=this.styles[r][n];this.shiftLineStyles(i.lineIndex,-1)}else{var o=this.styles[r];o&&delete o[n];var l=t(o);for(var h in l){var c=parseInt(h,10);c>=n&&0!==c&&(o[c-1]=l[c],delete o[c])}}},insertNewline:function(){this.insertChars("\n")}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.hiddenTextarea&&this.canvas&&this.canvas.wrapperEl.appendChild(this.hiddenTextarea),this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.initDelayedCursor(!0))}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this.editable&&!this._isObjectMoved(t.e)&&(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.initDelayedCursor(!0)),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?e<this.selectionStart?(this.setSelectionEnd(this.selectionStart),this.setSelectionStart(e)):this.setSelectionEnd(e):(this.setSelectionStart(e),this.setSelectionEnd(e))},getSelectionStartFromPointer:function(t){for(var e,i,r=this.getLocalPointer(t),n=0,s=0,a=0,o=0,l=0,h=this._textLines.length;l<h;l++){i=this._textLines[l],a+=this._getHeightOfLine(this.ctx,l)*this.scaleY;var c=this._getLineWidth(this.ctx,l),u=this._getLineLeftOffset(c);s=u*this.scaleX;for(var f=0,d=i.length;f<d;f++){if(n=s,s+=this._getWidthOfChar(this.ctx,i[f],l,this.flipX?d-f:f)*this.scaleX,!(a<=r.y||s<=r.x))return this._getNewSelectionStartFromOffset(r,n,s,o+l,d);o++}if(r.y<a)return this._getNewSelectionStartFromOffset(r,n,s,o+l-1,d)}if("undefined"==typeof e)return this.text.length},_getNewSelectionStartFromOffset:function(t,e,i,r,n){var s=t.x-e,a=i-t.x,o=a>s?0:1,l=r+o;return this.flipX&&(l=n-l),l>this.text.length&&(l=this.text.length),l}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; opacity: 0; width: 0px; height: 0px; z-index: -999;",this.canvas?this.canvas.lowerCanvasEl.parentNode.appendChild(this.hiddenTextarea):fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMapUp:{67:"copy",88:"cut"},_ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()}},onKeyUp:function(t){return!this.isEditing||this._copyDone?void(this._copyDone=!1):void(t.keyCode in this._ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this._ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()))},onInput:function(t){if(this.isEditing&&!this.inCompositionMode){var e,i,r,n=this.selectionStart||0,s=this.selectionEnd||0,a=this.text.length,o=this.hiddenTextarea.value.length;o>a?(r="left"===this._selectionDirection?s:n,e=o-a,i=this.hiddenTextarea.value.slice(r,r+e)):(e=o-a+s-n,i=this.hiddenTextarea.value.slice(n,n+e)),this.insertChars(i),t.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){var e=t.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(e,!1),this.prevCompositionLength=e.length},forwardDelete:function(t){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(t)}this.removeChars(t)},copy:function(t){if(this.selectionStart!==this.selectionEnd){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),fabric.copiedText=e,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),t.stopImmediatePropagation(),t.preventDefault(),this._copyDone=!0}},paste:function(t){var e=null,i=this._getClipboardData(t),r=!0;i?(e=i.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===e||(r=!1)):e=fabric.copiedText,e&&this.insertChars(e,r),t.stopImmediatePropagation(),t.preventDefault()},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(t),this.removeChars(t))},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},getDownCursorOffset:function(t,e){var i,r,n=e?this.selectionEnd:this.selectionStart,s=this.get2DCursorLocation(n),a=s.lineIndex,o=this._textLines[a].slice(0,s.charIndex),l=this._textLines[a].slice(s.charIndex),h=this._textLines[a+1]||"";if(a===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-n;var c=this._getLineWidth(this.ctx,a);r=this._getLineLeftOffset(c);for(var u=r,f=0,d=o.length;f<d;f++)i=o[f],u+=this._getWidthOfChar(this.ctx,i,a,f);var p=this._getIndexOnNextLine(s,h,u);return l.length+1+p},_getIndexOnNextLine:function(t,e,i){for(var r,n=t.lineIndex+1,s=this._getLineWidth(this.ctx,n),a=this._getLineLeftOffset(s),o=a,l=0,h=0,c=e.length;h<c;h++){var u=e[h],f=this._getWidthOfChar(this.ctx,u,n,h);if(o+=f,o>i){r=!0;var d=o-f,p=o,g=Math.abs(d-i),m=Math.abs(p-i);l=m<g?h+1:h;break}}return r||(l=e.length),l},moveCursorDown:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getDownCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorDownWithShift(e):this.moveCursorDownWithoutShift(e),this.initDelayedCursor()},moveCursorDownWithoutShift:function(t){this._selectionDirection="right",this.setSelectionStart(this.selectionStart+t),this.setSelectionEnd(this.selectionStart)},swapSelectionPoints:function(){var t=this.selectionEnd;this.setSelectionEnd(this.selectionStart),this.setSelectionStart(t)},moveCursorDownWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="right"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd+t):this.setSelectionStart(this.selectionStart+t),this.selectionEnd<this.selectionStart&&"left"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="right"),this.selectionEnd>this.text.length&&this.setSelectionEnd(this.text.length)},getUpCursorOffset:function(t,e){var i=e?this.selectionEnd:this.selectionStart,r=this.get2DCursorLocation(i),n=r.lineIndex;if(0===n||t.metaKey||33===t.keyCode)return i;for(var s,a=this._textLines[n].slice(0,r.charIndex),o=this._textLines[n-1]||"",l=this._getLineWidth(this.ctx,r.lineIndex),h=this._getLineLeftOffset(l),c=h,u=0,f=a.length;u<f;u++)s=a[u],c+=this._getWidthOfChar(this.ctx,s,n,u);var d=this._getIndexOnPrevLine(r,o,c);return o.length-d+a.length},_getIndexOnPrevLine:function(t,e,i){for(var r,n=t.lineIndex-1,s=this._getLineWidth(this.ctx,n),a=this._getLineLeftOffset(s),o=a,l=0,h=0,c=e.length;h<c;h++){var u=e[h],f=this._getWidthOfChar(this.ctx,u,n,h);if(o+=f,o>i){r=!0;var d=o-f,p=o,g=Math.abs(d-i),m=Math.abs(p-i);l=m<g?h:h-1;break}}return r||(l=e.length-1),l},moveCursorUp:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getUpCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorUpWithShift(e):this.moveCursorUpWithoutShift(e),this.initDelayedCursor()},moveCursorUpWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="left"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd-t):this.setSelectionStart(this.selectionStart-t),this.selectionEnd<this.selectionStart&&"right"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="left")},moveCursorUpWithoutShift:function(t){this.selectionStart===this.selectionEnd&&this.setSelectionStart(this.selectionStart-t),this.setSelectionEnd(this.selectionStart),this._selectionDirection="left"},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorLeftWithShift(t):this.moveCursorLeftWithoutShift(t),this.initDelayedCursor())},_move:function(t,e,i){var r="selectionStart"===e?"setSelectionStart":"setSelectionEnd";t.altKey?this[r](this["findWordBoundary"+i](this[e])):t.metaKey||35===t.keyCode||36===t.keyCode?this[r](this["findLineBoundary"+i](this[e])):this[r](this[e]+("Left"===i?-1:1))},_moveLeft:function(t,e){this._move(t,e,"Left")},_moveRight:function(t,e){this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this._moveLeft(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)},moveCursorLeftWithShift:function(t){"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):(this._selectionDirection="left",this._moveLeft(t,"selectionStart"))},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorRightWithShift(t):this.moveCursorRightWithoutShift(t),this.initDelayedCursor())},moveCursorRightWithShift:function(t){"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):(this._selectionDirection="right",this._moveRight(t,"selectionEnd"))},moveCursorRightWithoutShift:function(t){this._selectionDirection="right",this.selectionStart===this.selectionEnd?(this._moveRight(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)):(this.setSelectionEnd(this.selectionEnd+this.getNumNewLinesInSelectedText()),this.setSelectionStart(this.selectionEnd))},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,r,n,s){this._getLineStyle(t)?this._setSVGTextLineChars(t,e,i,r,s):fabric.Text.prototype._setSVGTextLineText.call(this,t,e,i,r,n)},_setSVGTextLineChars:function(t,e,i,r,n){for(var s=this._textLines[t],a=0,o=this._getLineLeftOffset(this._getLineWidth(this.ctx,t))-this.width/2,l=this._getSVGLineTopOffset(t),h=this._getHeightOfLine(this.ctx,t),c=0,u=s.length;c<u;c++){var f=this._getStyleDeclaration(t,c)||{};e.push(this._createTextCharSpan(s[c],f,o,l.lineTop+l.offset,a));var d=this._getWidthOfChar(this.ctx,s[c],t,c);f.textBackgroundColor&&n.push(this._createTextCharBg(f,o,l.lineTop,h,d,a)),a+=d}},_getSVGLineTopOffset:function(t){for(var e=0,i=0,r=0;r<t;r++)e+=this._getHeightOfLine(this.ctx,r);return i=this._getHeightOfLine(this.ctx,r),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(i,r,n,s,a,o){return['\t\t<rect fill="',i.textBackgroundColor,'" x="',t(r+o,e),'" y="',t(n-this.height/2,e),'" width="',t(a,e),'" height="',t(s/this.lineHeight,e),'"></rect>\n'].join("")},_createTextCharSpan:function(i,r,n,s,a){var o=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},r));return['\t\t\t<tspan x="',t(n+a,e),'" y="',t(s-this.height/2,e),'" ',r.fontFamily?'font-family="'+r.fontFamily.replace(/"/g,"'")+'" ':"",r.fontSize?'font-size="'+r.fontSize+'" ':"",r.fontStyle?'font-style="'+r.fontStyle+'" ':"",r.fontWeight?'font-weight="'+r.fontWeight+'" ':"",r.textDecoration?'text-decoration="'+r.textDecoration+'" ':"",'style="',o,'">',fabric.util.string.escapeXml(i),"</tspan>\n"].join("")}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.clone;e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:0,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,initialize:function(t,i){this.ctx=e.util.createCanvasElement().getContext("2d"),this.callSuper("initialize",t,i),this.setControlsVisibility(e.Textbox.getTextboxControlVisibility()),this._dimensionAffectingProps.width=!0},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(t))},_generateStyleMap:function(){for(var t=0,e=0,i=0,r={},n=0;n<this._textLines.length;n++)"\n"===this.text[i]?(e=0,i++,t++):" "===this.text[i]&&(e++,i++),r[n]={line:t,offset:e},i+=this._textLines[n].length,e+=this._textLines[n].length;return r},_getStyleDeclaration:function(t,e,i){if(this._styleMap){var r=this._styleMap[t];if(!r)return i?{}:null;t=r.line,e=r.offset+e}return this.callSuper("_getStyleDeclaration",t,e,i)},_setStyleDeclaration:function(t,e,i){var r=this._styleMap[t];t=r.line,e=r.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var i=this._styleMap[t];this.styles[i.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var i,r=e.split(this._reNewline),n=[];for(i=0;i<r.length;i++)n=n.concat(this._wrapLine(t,r[i],i));return n},_measureText:function(t,e,i,r){var n=0;r=r||0;for(var s=0,a=e.length;s<a;s++)n+=this._getWidthOfChar(t,e[s],i,s+r);return n},_wrapLine:function(t,e,i){for(var r=0,n=[],s="",a=e.split(" "),o="",l=0,h=" ",c=0,u=0,f=0,d=!0,p=0;p<a.length;p++)o=a[p],c=this._measureText(t,o,i,l),l+=o.length,r+=u+c,r>=this.width&&!d&&(n.push(s),s="",r=c,d=!0),d||(s+=h),s+=o,u=this._measureText(t,h,i,l),l++,d=!1,c>f&&(f=c);return p&&n.push(s),f>this.dynamicMinWidth&&(this.dynamicMinWidth=f),n},_splitTextIntoLines:function(){var t=this.textAlign;this.ctx.save(),this._setTextStyles(this.ctx),this.textAlign="left";var e=this._wrapText(this.ctx,this.text);return this.textAlign=t,this.ctx.restore(),this._textLines=e,this._styleMap=this._generateStyleMap(),e},setOnGroup:function(t,e){"scaleX"===t&&(this.set("scaleX",Math.abs(1/e)),this.set("width",this.get("width")*e/("undefined"==typeof this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=e)},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0,r=0;r<e;r++){var n=this._textLines[r],s=n.length;if(t<=i+s)return{lineIndex:r,charIndex:t-i};i+=s,"\n"!==this.text[i]&&" "!==this.text[i]||i++}return{lineIndex:e-1,charIndex:this._textLines[e-1].length}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,r=0,n=this.get2DCursorLocation(),s=this._textLines[n.lineIndex].split(""),a=this._getLineLeftOffset(this._getLineWidth(this.ctx,n.lineIndex)),o=0;o<n.charIndex;o++)r+=this._getWidthOfChar(this.ctx,s[o],n.lineIndex,o);for(o=0;o<n.lineIndex;o++)i+=this._getHeightOfLine(this.ctx,o);return"cursor"===e&&(i+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,n.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(n.lineIndex,n.charIndex)*(1-this._fontSizeFraction)),{top:i,left:r,lineLeft:a}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t),{minWidth:this.minWidth})}}),e.Textbox.fromObject=function(t){return new e.Textbox(t.text,i(t))},e.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}("undefined"!=typeof exports?exports:this),function(){var t=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(e,i,r,n,s,a,o){var l=i.target;if(!(l instanceof fabric.Textbox))return t.call(fabric.Canvas.prototype,e,i,r,n,s,a,o);var h=l.width*(e.x/i.scaleX/(l.width+l.strokeWidth));return h>=l.getMinWidth()?(l.set("width",h),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if("undefined"!=typeof fabric.Textbox)for(var t=this._objects.length;t--;)if(this._objects[t]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())};var e=fabric.util.object.clone;fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]},insertCharStyleObject:function(t,e,i){var r=this._styleMap[t];t=r.line,e=r.offset+e,fabric.IText.prototype.insertCharStyleObject.apply(this,[t,e,i])},insertNewlineStyleObject:function(t,e,i){var r=this._styleMap[t];t=r.line,e=r.offset+e,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[t,e,i])},shiftLineStyles:function(t,i){var r=e(this.styles),n=this._styleMap[t];t=n.line;for(var s in this.styles){var a=parseInt(s,10);a>t&&(this.styles[a+i]=r[a],r[a-i]||delete this.styles[a])}},_getTextOnPreviousLine:function(t){for(var e=this._textLines[t-1];this._styleMap[t-2]&&this._styleMap[t-2].line===this._styleMap[t-1].line;)e=this._textLines[t-2]+e,t--;return e},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),r=this._styleMap[i.lineIndex],n=r.line,s=r.offset+i.charIndex;this._removeStyleObject(t,i,n,s)}})}(),function(){var t=fabric.IText.prototype._getNewSelectionStartFromOffset;fabric.IText.prototype._getNewSelectionStartFromOffset=function(e,i,r,n,s){n=t.call(this,e,i,r,n,s);for(var a=0,o=0,l=0;l<this._textLines.length&&(a+=this._textLines[l].length,!(a+o>=n));l++)"\n"!==this.text[a+o]&&" "!==this.text[a+o]||o++;return n-l+o}}(),function(){function request(t,e,i){var r=URL.parse(t);r.port||(r.port=0===r.protocol.indexOf("https:")?443:80);var n=0===r.protocol.indexOf("https:")?HTTPS:HTTP,s=n.request({hostname:r.hostname,port:r.port,path:r.path,method:"GET"},function(t){var r="";e&&t.setEncoding(e),t.on("end",function(){i(r)}),t.on("data",function(e){200===t.statusCode&&(r+=e)})});s.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+r.hostname+":"+r.port):fabric.log(t.message),i(null)}),s.end()}function requestFs(t,e){var i=require("fs");i.readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){function r(r){r?(n.src=new Buffer(r,"binary"),n._src=t,e&&e.call(i,n)):(n=null,e&&e.call(i,null,!0))}var n=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(n.src=n._src=t,e&&e.call(i,n)):t&&0!==t.indexOf("http")?requestFs(t,r):t?request(t,"binary",r):e&&e.call(i,t)},fabric.loadSVGFromURL=function(t,e,i){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var r=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(r.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){var r=new fabric.Image(i);r._initConfig(t),r._initFilters(t.filters,function(i){r.filters=i||[],r._initFilters(t.resizeFilters,function(t){r.resizeFilters=t||[],e&&e(r)})})})},fabric.createCanvasForNode=function(t,e,i,r){r=r||i;var n=fabric.document.createElement("canvas"),s=new Canvas(t||600,e||600,r);n.style={},n.width=s.width,n.height=s.height;var a=fabric.Canvas||fabric.StaticCanvas,o=new a(n,i);return o.contextContainer=s.getContext("2d"),o.nodeCanvas=s,o.Font=Canvas.Font,o},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t,e){return origSetWidth.call(this,t,e),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t,e){return origSetHeight.call(this,t,e),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}}(),function(){var t;window.AmCharts?t=window.AmCharts:(t={},window.AmCharts=t,t.themes={},t.maps={},t.inheriting={},t.charts=[],t.onReadyArray=[],t.useUTC=!1,t.updateRate=30,t.uid=0,t.lang={},t.translations={},t.mapTranslations={},t.windows={},t.initHandlers=[]),t.Class=function(e){var i=function(){arguments[0]!==t.inheriting&&(this.events={},this.construct.apply(this,arguments))};e.inherits?(i.prototype=new e.inherits(t.inheriting),i.base=e.inherits.prototype,delete e.inherits):(i.prototype.createEvents=function(){for(var t=0,e=arguments.length;t<e;t++)this.events[arguments[t]]=[]},i.prototype.listenTo=function(t,e,i){this.removeListener(t,e,i),t.events[e].push({handler:i,scope:this})},i.prototype.addListener=function(t,e,i){this.removeListener(this,t,e),this.events[t].push({handler:e,scope:i})},i.prototype.removeListener=function(t,e,i){if(t&&t.events)for(t=t.events[e],e=t.length-1;0<=e;e--)t[e].handler===i&&t.splice(e,1)},i.prototype.fire=function(t,e){for(var i=this.events[t],r=0,n=i.length;r<n;r++){var s=i[r];s.handler.call(s.scope,e)}});for(var r in e)i.prototype[r]=e[r];return i},t.addChart=function(e){t.updateInt||(t.updateInt=setInterval(function(){t.update()},Math.round(1e3/t.updateRate))),t.charts.push(e)},t.removeChart=function(e){for(var i=t.charts,r=i.length-1;0<=r;r--)i[r]==e&&i.splice(r,1);0===i.length&&t.updateInt&&(clearInterval(t.updateInt),t.updateInt=NaN)},t.isModern=!0,t.getIEVersion=function(){var t,e,i=0;return"Microsoft Internet Explorer"==navigator.appName&&(t=navigator.userAgent,e=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!==e.exec(t)&&(i=parseFloat(RegExp.$1))),i},t.applyLang=function(e,i){var r=t.translations;i.dayNames=t.extend({},t.dayNames),i.shortDayNames=t.extend({},t.shortDayNames),i.monthNames=t.extend({},t.monthNames),i.shortMonthNames=t.extend({},t.shortMonthNames),r&&(r=r[e])&&(t.lang=r,r.monthNames&&(i.dayNames=t.extend({},r.dayNames),i.shortDayNames=t.extend({},r.shortDayNames),i.monthNames=t.extend({},r.monthNames),i.shortMonthNames=t.extend({},r.shortMonthNames)))},t.IEversion=t.getIEVersion(),9>t.IEversion&&0<t.IEversion&&(t.isModern=!1,t.isIE=!0),t.dx=0,t.dy=0,(document.addEventListener||window.opera)&&(t.isNN=!0,t.isIE=!1,t.dx=.5,t.dy=.5),document.attachEvent&&(t.isNN=!1,t.isIE=!0,t.isModern||(t.dx=0,t.dy=0)),window.chrome&&(t.chrome=!0),t.handleMouseUp=function(e){for(var i=t.charts,r=0;r<i.length;r++){var n=i[r];n&&n.handleReleaseOutside&&n.handleReleaseOutside(e)}},t.handleMouseMove=function(e){for(var i=t.charts,r=0;r<i.length;r++){var n=i[r];n&&n.handleMouseMove&&n.handleMouseMove(e)}},t.handleWheel=function(e){for(var i=t.charts,r=0;r<i.length;r++){var n=i[r];if(n&&n.mouseIsOver){n.mouseWheelScrollEnabled||n.mouseWheelZoomEnabled?n.handleWheel&&n.handleWheel(e):e.stopPropagation&&e.stopPropagation();break}}},t.resetMouseOver=function(){for(var e=t.charts,i=0;i<e.length;i++){var r=e[i];r&&(r.mouseIsOver=!1)}},t.ready=function(e){t.onReadyArray.push(e)},t.handleLoad=function(){t.isReady=!0;for(var e=t.onReadyArray,i=0;i<e.length;i++){var r=e[i];isNaN(t.processDelay)?r():setTimeout(r,t.processDelay*i);
}},t.addInitHandler=function(e,i){t.initHandlers.push({method:e,types:i})},t.callInitHandler=function(e){var i=t.initHandlers;if(t.initHandlers)for(var r=0;r<i.length;r++){var n=i[r];n.types?t.isInArray(n.types,e.type)&&n.method(e):n.method(e)}},t.getUniqueId=function(){return t.uid++,"AmChartsEl-"+t.uid},t.isNN&&(document.addEventListener("mousemove",t.handleMouseMove,!0),document.addEventListener("mouseup",t.handleMouseUp,!0),window.addEventListener("load",t.handleLoad,!0),window.addEventListener("DOMMouseScroll",t.handleWheel,!0),document.addEventListener("mousewheel",t.handleWheel,!0)),t.isIE&&(document.attachEvent("onmousemove",t.handleMouseMove),document.attachEvent("onmouseup",t.handleMouseUp),window.attachEvent("onload",t.handleLoad)),t.clear=function(){var e=t.charts;if(e)for(var i=e.length-1;0<=i;i--)e[i].clear();t.updateInt&&clearInterval(t.updateInt),t.charts=[],t.isNN&&(document.removeEventListener("mousemove",t.handleMouseMove,!0),document.removeEventListener("mouseup",t.handleMouseUp,!0),window.removeEventListener("load",t.handleLoad,!0),window.removeEventListener("DOMMouseScroll",t.handleWheel,!0),document.removeEventListener("mousewheel",t.handleWheel,!0)),t.isIE&&(document.detachEvent("onmousemove",t.handleMouseMove),document.detachEvent("onmouseup",t.handleMouseUp),window.detachEvent("onload",t.handleLoad))},t.makeChart=function(e,i,r){var n=i.type,s=i.theme;t.isString(s)&&(s=t.themes[s],i.theme=s);var a;switch(n){case"serial":a=new t.AmSerialChart(s);break;case"xy":a=new t.AmXYChart(s);break;case"pie":a=new t.AmPieChart(s);break;case"radar":a=new t.AmRadarChart(s);break;case"gauge":a=new t.AmAngularGauge(s);break;case"funnel":a=new t.AmFunnelChart(s);break;case"map":a=new t.AmMap(s);break;case"stock":a=new t.AmStockChart(s);break;case"gantt":a=new t.AmGanttChart(s)}return t.extend(a,i),t.isReady?isNaN(r)?a.write(e):setTimeout(function(){t.realWrite(a,e)},r):t.ready(function(){isNaN(r)?a.write(e):setTimeout(function(){t.realWrite(a,e)},r)}),a},t.realWrite=function(t,e){t.write(e)},t.updateCount=0,t.validateAt=Math.round(t.updateRate/5),t.update=function(){var e=t.charts;t.updateCount++;var i=!1;if(t.updateCount==t.validateAt&&(i=!0,t.updateCount=0),e)for(var r=0;r<e.length;r++)e[r].update&&e[r].update(),i&&e[r].autoResize&&e[r].validateSize&&e[r].validateSize()},t.bezierX=3,t.bezierY=6}(),function(){var t=window.AmCharts;t.toBoolean=function(t,e){if(void 0===t)return e;switch(String(t).toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}},t.removeFromArray=function(t,e){var i;if(void 0!==e&&void 0!==t)for(i=t.length-1;0<=i;i--)t[i]==e&&t.splice(i,1)},t.getPath=function(){var t=document.getElementsByTagName("script");if(t)for(var e=0;e<t.length;e++){var i=t[e].src;if(-1!==i.search(/\/(amcharts|ammap)\.js/))return i.replace(/\/(amcharts|ammap)\.js.*/,"/")}},t.normalizeUrl=function(t){return""!==t&&-1===t.search(/\/$/)?t+"/":t},t.isAbsolute=function(t){return 0===t.search(/^http[s]?:|^\//)},t.isInArray=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},t.getDecimals=function(t){var e=0;return isNaN(t)||(t=String(t),-1!=t.indexOf("e-")?e=Number(t.split("-")[1]):-1!=t.indexOf(".")&&(e=t.split(".")[1].length)),e},t.wrappedText=function(e,i,r,n,s,a,o,l,h){var c=t.text(e,i,r,n,s,a,o),u="\n";if(t.isModern||(u="<br>"),10<h)return c;if(c){var f=c.getBBox();if(f.width>l){f=Math.ceil(f.width/l),c.remove();for(var c=[],d=0;-1<(d=i.indexOf(" ",d));)c.push(d),d+=1;for(var p,d=0;d<c.length;d+=Math.ceil(c.length/f))p=c[d],i=i.substr(0,p)+u+i.substr(p+1);if(isNaN(p)){if(0===h)for(d=1;d<f;d++)p=Math.round(i.length/f*d),i=i.substr(0,p)+u+i.substr(p);return t.text(e,i,r,n,s,a,o)}return t.wrappedText(e,i,r,n,s,a,o,l,h+1)}return c}},t.getStyle=function(t,e){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(e=e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),i=t.currentStyle[e]),i},t.removePx=function(t){if(void 0!==t)return Number(t.substring(0,t.length-2))},t.getURL=function(e,i){if(e)if("_self"!=i&&i)if("_top"==i&&window.top)window.top.location.href=e;else if("_parent"==i&&window.parent)window.parent.location.href=e;else if("_blank"==i)window.open(e);else{var r=document.getElementsByName(i)[0];r?r.src=e:(r=t.windows[i])&&r.opener&&!r.opener.closed?r.location.href=e:t.windows[i]=window.open(e)}else window.location.href=e},t.ifArray=function(t){return!!(t&&0<t.length)},t.callMethod=function(t,e){var i;for(i=0;i<e.length;i++){var r=e[i];if(r){r[t]&&r[t]();var n=r.length;if(0<n){var s;for(s=0;s<n;s++){var a=r[s];a&&a[t]&&a[t]()}}}}},t.toNumber=function(t){return"number"==typeof t?t:Number(String(t).replace(/[^0-9\-.]+/g,""))},t.toColor=function(t){if(""!==t&&void 0!==t)if(-1!=t.indexOf(",")){t=t.split(",");var e;for(e=0;e<t.length;e++){var i=t[e].substring(t[e].length-6,t[e].length);t[e]="#"+i}}else t=t.substring(t.length-6,t.length),t="#"+t;return t},t.toCoordinate=function(t,e,i){var r;return void 0!==t&&(t=String(t),i&&i<e&&(e=i),r=Number(t),-1!=t.indexOf("!")&&(r=e-Number(t.substr(1))),-1!=t.indexOf("%")&&(r=e*Number(t.substr(0,t.length-1))/100)),r},t.fitToBounds=function(t,e,i){return t<e&&(t=e),t>i&&(t=i),t},t.isDefined=function(t){return void 0!==t},t.stripNumbers=function(t){return t.replace(/[0-9]+/g,"")},t.roundTo=function(t,e){if(0>e)return t;var i=Math.pow(10,e);return Math.round(t*i)/i},t.toFixed=function(t,e){var i=String(Math.round(t*Math.pow(10,e)));if(0<e){var r=i.length;if(r<e){var n;for(n=0;n<e-r;n++)i="0"+i}return r=i.substring(0,i.length-e),""===r&&(r=0),r+"."+i.substring(i.length-e,i.length)}return String(i)},t.formatDuration=function(e,i,r,n,s,a){var o=t.intervals,l=a.decimalSeparator;if(e>=o[i].contains){var h=e-Math.floor(e/o[i].contains)*o[i].contains;return"ss"==i&&(h=t.formatNumber(h,a),1==h.split(l)[0].length&&(h="0"+h)),("mm"==i||"hh"==i)&&10>h&&(h="0"+h),r=h+""+n[i]+r,e=Math.floor(e/o[i].contains),i=o[i].nextInterval,t.formatDuration(e,i,r,n,s,a)}if("ss"==i&&(e=t.formatNumber(e,a),1==e.split(l)[0].length&&(e="0"+e)),("mm"==i||"hh"==i)&&10>e&&(e="0"+e),r=e+""+n[i]+r,o[s].count>o[i].count)for(e=o[i].count;e<o[s].count;e++)i=o[i].nextInterval,"ss"==i||"mm"==i||"hh"==i?r="00"+n[i]+r:"DD"==i&&(r="0"+n[i]+r);return":"==r.charAt(r.length-1)&&(r=r.substring(0,r.length-1)),r},t.formatNumber=function(e,i,r,n,s){e=t.roundTo(e,i.precision),isNaN(r)&&(r=i.precision);var a=i.decimalSeparator;i=i.thousandsSeparator;var o;o=0>e?"-":"",e=Math.abs(e);var l=String(e),h=!1;-1!=l.indexOf("e")&&(h=!0),0<=r&&!h&&(l=t.toFixed(e,r));var c="";if(h)c=l;else{var u,l=l.split("."),h=String(l[0]);for(u=h.length;0<=u;u-=3)c=u!=h.length?0!==u?h.substring(u-3,u)+i+c:h.substring(u-3,u)+c:h.substring(u-3,u);void 0!==l[1]&&(c=c+a+l[1]),void 0!==r&&0<r&&"0"!=c&&(c=t.addZeroes(c,a,r))}return c=o+c,""===o&&!0===n&&0!==e&&(c="+"+c),!0===s&&(c+="%"),c},t.addZeroes=function(e,i,r){return e=e.split(i),void 0===e[1]&&0<r&&(e[1]="0"),e[1].length<r?(e[1]+="0",t.addZeroes(e[0]+i+e[1],i,r)):void 0!==e[1]?e[0]+i+e[1]:e[0]},t.scientificToNormal=function(t){var e;t=String(t).split("e");var i;if("-"==t[1].substr(0,1)){for(e="0.",i=0;i<Math.abs(Number(t[1]))-1;i++)e+="0";e+=t[0].split(".").join("")}else{var r=0;for(e=t[0].split("."),e[1]&&(r=e[1].length),e=t[0].split(".").join(""),i=0;i<Math.abs(Number(t[1]))-r;i++)e+="0"}return e},t.toScientific=function(t,e){if(0===t)return"0";var i=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r=String(r).split(".").join(e);return String(r)+"e"+i},t.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},t.hitTest=function(e,i,r){var n=!1,s=e.x,a=e.x+e.width,o=e.y,l=e.y+e.height,h=t.isInRectangle;return n||(n=h(s,o,i)),n||(n=h(s,l,i)),n||(n=h(a,o,i)),n||(n=h(a,l,i)),n||!0===r||(n=t.hitTest(i,e,!0)),n},t.isInRectangle=function(t,e,i){return t>=i.x-5&&t<=i.x+i.width+5&&e>=i.y-5&&e<=i.y+i.height+5},t.isPercents=function(t){if(-1!=String(t).indexOf("%"))return!0},t.findPosX=function(t){var e=t,i=t.offsetLeft;if(t.offsetParent){for(;t=t.offsetParent;)i+=t.offsetLeft;for(;(e=e.parentNode)&&e!=document.body;)i-=e.scrollLeft||0}return i},t.findPosY=function(t){var e=t,i=t.offsetTop;if(t.offsetParent){for(;t=t.offsetParent;)i+=t.offsetTop;for(;(e=e.parentNode)&&e!=document.body;)i-=e.scrollTop||0}return i},t.findIfFixed=function(e){if(e.offsetParent)for(;e=e.offsetParent;)if("fixed"==t.getStyle(e,"position"))return!0;return!1},t.findIfAuto=function(e){return!(!e.style||"auto"!=t.getStyle(e,"overflow"))||!!e.parentNode&&t.findIfAuto(e.parentNode)},t.findScrollLeft=function(e,i){return e.scrollLeft&&(i+=e.scrollLeft),e.parentNode?t.findScrollLeft(e.parentNode,i):i},t.findScrollTop=function(e,i){return e.scrollTop&&(i+=e.scrollTop),e.parentNode?t.findScrollTop(e.parentNode,i):i},t.formatValue=function(e,i,r,n,s,a,o,l){if(i){void 0===s&&(s="");var h;for(h=0;h<r.length;h++){var c=r[h],u=i[c];void 0!==u&&(u=a?t.addPrefix(u,l,o,n):t.formatNumber(u,n),e=e.replace(new RegExp("\\[\\["+s+c+"\\]\\]","g"),u))}}return e},t.formatDataContextValue=function(t,e){if(t){var i,r=t.match(/\[\[.*?\]\]/g);for(i=0;i<r.length;i++){var n=r[i],n=n.substr(2,n.length-4);void 0!==e[n]&&(t=t.replace(new RegExp("\\[\\["+n+"\\]\\]","g"),e[n]))}}return t},t.massReplace=function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];void 0===r&&(r=""),t=t.replace(i,r)}return t},t.cleanFromEmpty=function(t){return t.replace(/\[\[[^\]]*\]\]/g,"")},t.addPrefix=function(e,i,r,n,s){var a,o,l,h=t.formatNumber(e,n),c="";if(0===e)return"0";if(0>e&&(c="-"),e=Math.abs(e),1<e){for(a=i.length-1;-1<a;a--)if(e>=i[a].number&&(o=e/i[a].number,l=Number(n.precision),1>l&&(l=1),r=t.roundTo(o,l),l=t.formatNumber(r,{precision:-1,decimalSeparator:n.decimalSeparator,thousandsSeparator:n.thousandsSeparator}),!s||o==r)){h=c+""+l+i[a].prefix;break}}else for(a=0;a<r.length;a++)if(e<=r[a].number){o=e/r[a].number,l=Math.abs(Math.round(Math.log(o)*Math.LOG10E)),o=t.roundTo(o,l),h=c+""+o+r[a].prefix;break}return h},t.remove=function(t){t&&t.remove()},t.getEffect=function(t){return">"==t&&(t="easeOutSine"),"<"==t&&(t="easeInSine"),"elastic"==t&&(t="easeOutElastic"),t},t.getObjById=function(t,e){var i,r;for(r=0;r<t.length;r++){var n=t[r];n.id==e&&(i=n)}return i},t.applyTheme=function(e,i,r){i||(i=t.theme),i&&i[r]&&t.extend(e,i[r])},t.isString=function(t){return"string"==typeof t},t.extend=function(t,e,i){var r;t||(t={});for(r in e)i?t.hasOwnProperty(r)||(t[r]=e[r]):t[r]=e[r];return t},t.copyProperties=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"events"!=i&&void 0!==t[i]&&"function"!=typeof t[i]&&"cname"!=i&&(e[i]=t[i])},t.processObject=function(e,i,r,n){return!1==e instanceof i&&(e=n?t.extend(new i(r),e):t.extend(e,new i(r),!0)),e},t.fixNewLines=function(t){var e=RegExp("\\n","g");return t&&(t=t.replace(e,"<br />")),t},t.fixBrakes=function(e){if(t.isModern){var i=RegExp("<br>","g");e&&(e=e.replace(i,"\n"))}else e=t.fixNewLines(e);return e},t.deleteObject=function(e,i){if(e&&(void 0!==i&&null!==i||(i=20),0!==i))if("[object Array]"===Object.prototype.toString.call(e))for(var r=0;r<e.length;r++)t.deleteObject(e[r],i-1),e[r]=null;else if(e&&!e.tagName)try{for(r in e)e[r]&&("object"==typeof e[r]&&t.deleteObject(e[r],i-1),"function"!=typeof e[r]&&(e[r]=null))}catch(t){}},t.bounce=function(t,e,i,r,n){return(e/=n)<1/2.75?7.5625*r*e*e+i:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+i:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+i:r*(7.5625*(e-=2.625/2.75)*e+.984375)+i},t.easeInSine=function(t,e,i,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+i},t.easeOutSine=function(t,e,i,r,n){return r*Math.sin(e/n*(Math.PI/2))+i},t.easeOutElastic=function(t,e,i,r,n){t=1.70158;var s=0,a=r;return 0===e?i:1==(e/=n)?i+r:(s||(s=.3*n),a<Math.abs(r)?(a=r,t=s/4):t=s/(2*Math.PI)*Math.asin(r/a),a*Math.pow(2,-10*e)*Math.sin(2*(e*n-t)*Math.PI/s)+r+i)},t.fixStepE=function(e){e=e.toExponential(0).split("e");var i=Number(e[1]);return 9==Number(e[0])&&i++,t.generateNumber(1,i)},t.generateNumber=function(t,e){var i,r="";i=0>e?Math.abs(e)-1:Math.abs(e);var n;for(n=0;n<i;n++)r+="0";return 0>e?Number("0."+r+String(t)):Number(String(t)+r)},t.setCN=function(t,e,i,r){if(t.addClassNames&&e&&(e=e.node)&&i){var n=e.getAttribute("class");t=t.classNamePrefix+"-",r&&(t=""),n?e.setAttribute("class",n+" "+t+i):e.setAttribute("class",t+i)}},t.parseDefs=function(e,i){for(var r in e){var n=typeof e[r];if(0<e[r].length&&"object"==n)for(var s=0;s<e[r].length;s++)n=document.createElementNS(t.SVG_NS,r),i.appendChild(n),t.parseDefs(e[r][s],n);else"object"==n?(n=document.createElementNS(t.SVG_NS,r),i.appendChild(n),t.parseDefs(e[r],n)):i.setAttribute(r,e[r])}}}(),function(){var t=window.AmCharts;t.AxisBase=t.Class({construct:function(e){this.createEvents("clickItem","rollOverItem","rollOutItem"),this.viY=this.viX=this.y=this.x=this.dy=this.dx=0,this.axisThickness=1,this.axisColor="#000000",this.axisAlpha=1,this.gridCount=this.tickLength=5,this.gridAlpha=.15,this.gridThickness=1,this.gridColor="#000000",this.dashLength=0,this.labelFrequency=1,this.showLastLabel=this.showFirstLabel=!0,this.fillColor="#FFFFFF",this.fillAlpha=0,this.labelsEnabled=!0,this.labelRotation=0,this.autoGridCount=!0,this.offset=0,this.guides=[],this.visible=!0,this.counter=0,this.guides=[],this.ignoreAxisWidth=this.inside=!1,this.minHorizontalGap=75,this.minVerticalGap=35,this.titleBold=!0,this.minorGridEnabled=!1,this.minorGridAlpha=.07,this.autoWrap=!1,this.titleAlign="middle",this.labelOffset=0,this.bcn="axis-",this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}],this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}],this.nextPeriod={fff:"ss",ss:"mm",mm:"hh",hh:"DD",DD:"MM",MM:"YYYY"},t.applyTheme(this,e,"AxisBase")},zoom:function(t,e){this.start=t,this.end=e,this.dataChanged=!0,this.draw()},fixAxisPosition:function(){var t=this.position;"H"==this.orientation?("left"==t&&(t="bottom"),"right"==t&&(t="top")):("bottom"==t&&(t="left"),"top"==t&&(t="right")),this.position=t},draw:function(){var t=this.chart;this.allLabels=[],this.counter=0,this.destroy(),this.fixAxisPosition(),this.labels=[];var e=t.container,i=e.set();t.gridSet.push(i),this.set=i,e=e.set(),t.axesLabelsSet.push(e),this.labelsSet=e,this.axisLine=new this.axisRenderer(this),this.autoGridCount?("V"==this.orientation?(t=this.height/this.minVerticalGap,3>t&&(t=3)):t=this.width/this.minHorizontalGap,this.gridCountR=Math.max(t,1)):this.gridCountR=this.gridCount,this.axisWidth=this.axisLine.axisWidth,this.addTitle()},setOrientation:function(t){this.orientation=t?"H":"V"},addTitle:function(){var e=this.title;if(this.titleLabel=null,e){var i=this.chart,r=this.titleColor;void 0===r&&(r=i.color);var n=this.titleFontSize;isNaN(n)&&(n=i.fontSize+1),e=t.text(i.container,e,r,i.fontFamily,n,this.titleAlign,this.titleBold),t.setCN(i,e,this.bcn+"title"),this.titleLabel=e}},positionTitle:function(){var e=this.titleLabel;if(e){var i,r,n=this.labelsSet,s={};0<n.length()?s=n.getBBox():(s.x=0,s.y=0,s.width=this.viW,s.height=this.viH,t.VML&&(s.y+=this.y,s.x+=this.x)),n.push(e);var n=s.x,a=s.y;t.VML&&(this.rotate?n-=this.x:a-=this.y);var o=s.width,s=s.height,l=this.viW,h=this.viH,c=0,u=e.getBBox().height/2,f=this.inside,d=this.titleAlign;switch(this.position){case"top":i="left"==d?-1:"right"==d?l:l/2,r=a-10-u;break;case"bottom":i="left"==d?-1:"right"==d?l:l/2,r=a+s+10+u;break;case"left":i=n-10-u,f&&(i-=5),r="left"==d?h+1:"right"==d?-1:h/2,c=-90;break;case"right":i=n+o+10+u-3,f&&(i+=7),r="left"==d?h+2:"right"==d?-2:h/2,c=-90}this.marginsChanged?(e.translate(i,r),this.tx=i,this.ty=r):e.translate(this.tx,this.ty),this.marginsChanged=!1,0!==c&&e.rotate(c)}},pushAxisItem:function(t,e){var i=this,r=t.graphics();0<r.length()&&(e?i.labelsSet.push(r):i.set.push(r)),(r=t.getLabel())&&(this.labelsSet.push(r),r.click(function(e){i.handleMouse(e,t,"clickItem")}).mouseover(function(e){i.handleMouse(e,t,"rollOverItem")}).mouseout(function(e){i.handleMouse(e,t,"rollOutItem")}))},handleMouse:function(t,e,i){this.fire(i,{type:i,value:e.value,serialDataItem:e.serialDataItem,axis:this,target:e.label,chart:this.chart,event:t})},addGuide:function(e){for(var i=this.guides,r=!1,n=i.length,s=0;s<i.length;s++)i[s]==e&&(r=!0,n=s);e=t.processObject(e,t.Guide,this.theme),e.id||(e.id="guideAuto"+n+"_"+(new Date).getTime()),r||i.push(e)},removeGuide:function(t){var e,i=this.guides;for(e=0;e<i.length;e++)i[e]==t&&i.splice(e,1)},handleGuideOver:function(t){clearTimeout(this.chart.hoverInt);var e=t.graphics.getBBox(),i=e.x+e.width/2,e=e.y+e.height/2,r=t.fillColor;void 0===r&&(r=t.lineColor),this.chart.showBalloon(t.balloonText,r,!0,i,e)},handleGuideOut:function(){this.chart.hideBalloon()},addEventListeners:function(t,e){var i=this;t.mouseover(function(){i.handleGuideOver(e)}),t.touchstart(function(){i.handleGuideOver(e)}),t.mouseout(function(){i.handleGuideOut(e)})},getBBox:function(){var e=this.labelsSet.getBBox();return t.VML||(e={x:e.x+this.x,y:e.y+this.y,width:e.width,height:e.height}),e},destroy:function(){t.remove(this.set),t.remove(this.labelsSet);var e=this.axisLine;e&&t.remove(e.set),t.remove(this.grid0)},chooseMinorFrequency:function(t){for(var e=10;0<e;e--)if(t/e==Math.round(t/e))return t/e},parseDatesDraw:function(){var e,i,r,n,s,a,o,l=this.chart,h=this.showFirstLabel,c=this.showLastLabel,u="",f=t.extractPeriod(this.minPeriod),d=t.getPeriodDuration(f.period,f.count),p=this.firstDayOfWeek,g=this.boldPeriodBeginning;e=this.minorGridEnabled;var m,v,b=this.gridAlpha,y=this.choosePeriod(0),x=y.period,y=y.count,w=t.getPeriodDuration(x,y);w<d&&(x=f.period,y=f.count,w=d),f=x,"WW"==f&&(f="DD"),this.stepWidth=this.getStepWidth(this.timeDifference);var _=Math.ceil(this.timeDifference/w)+5,C=r=t.resetDateToMin(new Date(this.startTime-w),x,y,p).getTime();f==x&&1==y&&this.centerLabelOnFullPeriod&&(s=w*this.stepWidth),this.cellWidth=d*this.stepWidth,a=Math.round(r/w),d=-1,a/2==Math.round(a/2)&&(d=-2,r-=w),a=this.firstTime;var S=0;if(e&&1<y&&(m=this.chooseMinorFrequency(y),v=t.getPeriodDuration(x,m)),0<this.gridCountR)for(e=d;e<=_;e++){if(o=a+w*(e+Math.floor((C-a)/w))-S,"DD"==x&&(o+=36e5),o=t.resetDateToMin(new Date(o),x,y,p).getTime(),"MM"==x&&(i=(o-r)/w,1.5<=(o-r)/w&&(o=o-(i-1)*w+t.getPeriodDuration("DD",3),o=t.resetDateToMin(new Date(o),x,1).getTime(),S+=w)),i=(o-this.startTime)*this.stepWidth,i=this.rotate?i+(this.x-this.viX):"date"==this.type?this.axisWidth-i+(this.y-this.viY):i+(this.y-this.viY),u=!1,this.nextPeriod[f]&&(u=this.checkPeriodChange(this.nextPeriod[f],1,o,r,f)),r=!1,u&&this.markPeriodChange?(u=this.dateFormatsObject[this.nextPeriod[f]],this.twoLineMode&&(u=this.dateFormatsObject[f]+"\n"+u,u=t.fixBrakes(u)),r=!0):u=this.dateFormatsObject[f],g||(r=!1),this.currentDateFormat=u,u=t.formatDate(new Date(o),u,l),(e==d&&!h||e==_&&!c)&&(u=" "),this.labelFunction&&(u=this.labelFunction(u,new Date(o),this,x,y,n).toString()),this.boldLabels&&(r=!0),n=new this.axisItemRenderer(this,i,u,!1,s,0,!1,r),this.pushAxisItem(n),n=r=o,!isNaN(m))for(i=1;i<y;i+=m)this.gridAlpha=this.minorGridAlpha,u=o+v*i,u=t.resetDateToMin(new Date(u),x,m,p).getTime(),u=new this.axisItemRenderer(this,(u-this.startTime)*this.stepWidth,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.pushAxisItem(u);this.gridAlpha=b}},choosePeriod:function(e){var i=t.getPeriodDuration(this.periods[e].period,this.periods[e].count),r=Math.ceil(this.timeDifference/i),n=this.periods;return this.timeDifference<i&&0<e?n[e-1]:r<=this.gridCountR?n[e]:e+1<n.length?this.choosePeriod(e+1):n[e]},getStepWidth:function(t){var e;return this.startOnAxis?(e=this.axisWidth/(t-1),1==t&&(e=this.axisWidth)):e=this.axisWidth/t,e},timeZoom:function(t,e){this.startTime=t,this.endTime=e},minDuration:function(){var e=t.extractPeriod(this.minPeriod);return t.getPeriodDuration(e.period,e.count)},checkPeriodChange:function(e,i,r,n,s){r=new Date(r);var a=new Date(n),o=this.firstDayOfWeek;return n=i,"DD"==e&&(i=1),r=t.resetDateToMin(r,e,i,o).getTime(),i=t.resetDateToMin(a,e,i,o).getTime(),!("DD"==e&&"hh"!=s&&r-i<=t.getPeriodDuration(e,n))&&r!=i},generateDFObject:function(){this.dateFormatsObject={};var t;for(t=0;t<this.dateFormats.length;t++){var e=this.dateFormats[t];this.dateFormatsObject[e.period]=e.format}}})}(),function(){var t=window.AmCharts;t.ValueAxis=t.Class({inherits:t.AxisBase,construct:function(e){this.cname="ValueAxis",this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed","axisZoomed"),t.ValueAxis.base.construct.call(this,e),this.dataChanged=!0,this.stackType="none",this.position="left",this.unitPosition="right",this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1,this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""},this.scrollbar=!1,this.baseValue=0,this.radarCategoriesEnabled=!0,this.gridType="polygons",this.useScientificNotation=!1,this.axisTitleOffset=10,this.minMaxMultiplier=1,this.logGridLimit=2,this.totalTextOffset=this.treatZeroAs=0,this.minPeriod="ss",t.applyTheme(this,e,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1),this.totals=[],this.data=this.chart.chartData;var e=this.chart;"xy"!=e.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step")),this.recalculateToPercents&&this.recalculate(),this.synchronizationMultiplier&&this.synchronizeWith?(t.isString(this.synchronizeWith)&&(this.synchronizeWith=e.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax())},draw:function(){t.ValueAxis.base.draw.call(this);var e=this.chart,i=this.set;t.setCN(e,this.set,"value-axis value-axis-"+this.id),t.setCN(e,this.labelsSet,"value-axis value-axis-"+this.id),t.setCN(e,this.axisLine.axisSet,"value-axis value-axis-"+this.id);var r=this.type;if("duration"==r&&(this.duration="ss"),!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1),"date"==r&&(this.logarithmic=!1,this.min=this.minRR,this.max=this.maxRR,this.minimumDate&&(this.min=this.minimumDate.getTime()),this.maximumDate&&(this.max=this.maximumDate.getTime())),this.logarithmic){var n=this.treatZeroAs,s=this.getMin(0,this.data.length-1);if(this.minReal<s&&(this.minReal=s),isNaN(this.minReal)&&(this.minReal=s),0<n&&0===s&&(this.minReal=s=n),0>=s||0>=this.minimum)return void this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:e})}this.grid0=null;var a,o,l=e.dx,h=e.dy,n=!1,s=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||1/0==this.min||-(1/0)==this.max)n=!0;else{var c=this.labelFrequency,u=this.showFirstLabel,f=this.showLastLabel,d=1;a=0,this.minCalc=this.min,this.maxCalc=this.max,this.strictMinMax&&(isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum)),isNaN(this.minZoom)||(this.min=this.minZoom),isNaN(this.maxZoom)||(this.max=this.maxZoom);var p,g=Math.round((this.maxCalc-this.minCalc)/this.step)+1;!0===s?(p=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/p,p>this.logGridLimit&&(g=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,a=Math.round(Math.log(this.minReal)*Math.LOG10E),g>this.gridCountR&&(d=Math.ceil(g/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min);var m=0;1>this.step&&-1<this.step&&(m=t.getDecimals(this.step)),this.integersOnly&&(m=0),m>this.maxDecCount&&(m=this.maxDecCount);var v=this.precision;isNaN(v)||(m=v),this.max=t.roundTo(this.max,this.maxDecCount),this.min=t.roundTo(this.min,this.maxDecCount),o={},o.precision=m,o.decimalSeparator=e.nf.decimalSeparator,o.thousandsSeparator=e.nf.thousandsSeparator,this.numberFormatter=o;var b,y=this.guides,x=y.length;if(0<x){var w=this.fillAlpha;for(o=this.fillAlpha=0;o<x;o++){var _=y[o],C=NaN,S=_.above;isNaN(_.toValue)||(C=this.getCoordinate(_.toValue),b=new this.axisItemRenderer(this,C,"",!0,NaN,NaN,_),this.pushAxisItem(b,S));var T=NaN;isNaN(_.value)||(T=this.getCoordinate(_.value),b=new this.axisItemRenderer(this,T,_.label,!0,NaN,(C-T)/2,_),this.pushAxisItem(b,S)),isNaN(C-T)||(b=new this.guideFillRenderer(this,T,C,_),this.pushAxisItem(b,S),b=b.graphics(),_.graphics=b,_.balloonText&&this.addEventListeners(b,_))}this.fillAlpha=w}for(this.exponential=!1,o=a;o<g;o+=d)y=t.roundTo(this.step*o+this.min,m),-1!=String(y).indexOf("e")&&(this.exponential=!0);this.duration&&(this.maxInterval=t.getMaxInterval(this.max,this.duration));var k,m=this.step,y=this.minorGridAlpha;if(this.minorGridEnabled&&(k=this.getMinorGridStep(m,this.stepWidth*m)),"date"==r)this.generateDFObject(),this.timeDifference=this.max-this.min,this.maxTime=this.lastTime=this.max,this.startTime=this.firstTime=this.min,this.parseDatesDraw();else for(o=a;o<g;o+=d)if(r=m*o+this.minCalc,s&&this.max-this.min>10*this.min&&(r-=this.min),r=t.roundTo(r,this.maxDecCount+1),(!this.integersOnly||Math.round(r)==r)&&(isNaN(v)||Number(t.toFixed(r,v))==r)){if(!0===s&&(0===r&&(r=this.minReal),p>this.logGridLimit&&(r=Math.pow(10,o))),b=this.formatValue(r,!1,o),Math.round(o/c)!=o/c&&(b=void 0),(0===o&&!u||o==g-1&&!f)&&(b=" "),a=this.getCoordinate(r),b=new this.axisItemRenderer(this,a,b,void 0,void 0,void 0,void 0,this.boldLabels),this.pushAxisItem(b),r==this.baseValue&&"radar"!=e.type){var O,A,w=this.viW,_=this.viH;b=this.viX,x=this.viY,"H"==this.orientation?0<=a&&a<=w+1&&(O=[a,a,a+l],A=[_,0,h]):0<=a&&a<=_+1&&(O=[0,w,w+l],A=[a,a,a+h]),O&&(a=t.fitToBounds(2*this.gridAlpha,0,1),a=t.line(e.container,O,A,this.gridColor,a,1,this.dashLength),a.translate(b,x),this.grid0=a,e.axesSet.push(a),a.toBack(),t.setCN(e,a,this.bcn+"zero-grid-"+this.id),t.setCN(e,a,this.bcn+"zero-grid"))}if(!isNaN(k)&&0<y&&o<g-1){for(a=this.gridAlpha,this.gridAlpha=this.minorGridAlpha,b=1;b<m/k;b++)x=this.getCoordinate(r+k*b),x=new this.axisItemRenderer(this,x,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(x);this.gridAlpha=a}}p=this.baseValue,this.min>this.baseValue&&this.max>this.baseValue&&(p=this.min),this.min<this.baseValue&&this.max<this.baseValue&&(p=this.max),s&&p<this.minReal&&(p=this.minReal),this.baseCoord=this.getCoordinate(p),p={type:"axisChanged",target:this,chart:e},p.min=s?this.minReal:this.min,p.max=this.max,this.fire("axisChanged",p),this.axisCreated=!0}s=this.axisLine.set,p=this.labelsSet,this.positionTitle(),"radar"!=e.type?(e=this.viX,k=this.viY,i.translate(e,k),p.translate(e,k)):s.toFront(),!this.visible||n?(i.hide(),s.hide(),p.hide()):(i.show(),s.show(),p.show()),this.axisY=this.y-this.viY,this.axisX=this.x-this.viX},formatValue:function(e,i,r){var n=this.exponential,s=this.logarithmic,a=this.numberFormatter,o=this.chart;return!0===this.logarithmic&&(n=-1!=String(e).indexOf("e")),this.useScientificNotation&&(n=!0),this.usePrefixes&&(n=!1),n?(i=-1==String(e).indexOf("e")?e.toExponential(15):String(e),r=i.split("e"),i=Number(r[0]),r=Number(r[1]),i=t.roundTo(i,14),10==i&&(i=1,r+=1),i=i+"e"+r,0===e&&(i="0"),1==e&&(i="1")):(s&&(n=String(e).split("."),n[1]?(a.precision=n[1].length,0>r&&(a.precision=Math.abs(r)),i&&1<e&&(a.precision=0)):a.precision=-1),i=this.usePrefixes?t.addPrefix(e,o.prefixesOfBigNumbers,o.prefixesOfSmallNumbers,a,!i):t.formatNumber(e,a,a.precision)),this.duration&&(i=t.formatDuration(e,this.duration,"",this.durationUnits,this.maxInterval,a)),"date"==this.type&&(i=t.formatDate(new Date(e),this.currentDateFormat,o)),this.recalculateToPercents?i+="%":(a=this.unit)&&(i="left"==this.unitPosition?a+i:i+a),this.labelFunction&&(i=this.labelFunction(e,i,this).toString()),i},getMinorGridStep:function(t,e){var i=[5,4,2];60>e&&i.shift();for(var r=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n=0;n<i.length;n++){var s=t/i[n],a=Math.floor(Math.log(Math.abs(s))*Math.LOG10E);if(!(0<Math.abs(r-a)))if(1>t){if(a=Math.pow(10,-a)*s,a==Math.round(a))return s}else if(s==Math.round(s))return s}},stackGraphs:function(e){var i=this.stackType;"stacked"==i&&(i="regular"),"line"==i&&(i="none"),"100% stacked"==i&&(i="100%"),this.stackType=i;var r,n,s,a,o,l=[],h=[],c=[],u=[],f=this.chart.graphs,d=this.baseValue,p=!1;if("line"!=e&&"step"!=e&&"smoothedLine"!=e||(p=!0),p&&("regular"==i||"100%"==i))for(o=0;o<f.length;o++)a=f[o],a.hidden||(s=a.type,a.chart==this.chart&&a.valueAxis==this&&e==s&&a.stackable&&(n&&(a.stackGraph=n),n=a));for(n=this.start;n<=this.end;n++){var g=0;for(o=0;o<f.length;o++)if(a=f[o],a.hidden)a.newStack&&(c[n]=NaN,h[n]=NaN);else if(s=a.type,a.chart==this.chart&&a.valueAxis==this&&e==s&&a.stackable)if(s=this.data[n].axes[this.id].graphs[a.id],r=s.values.value,isNaN(r))a.newStack&&(c[n]=NaN,h[n]=NaN);else{var m=t.getDecimals(r);g<m&&(g=m),isNaN(u[n])?u[n]=Math.abs(r):u[n]+=Math.abs(r),u[n]=t.roundTo(u[n],g),m=a.fillToGraph,p&&m&&(m=this.data[n].axes[this.id].graphs[m.id])&&(s.values.open=m.values.value),"regular"==i&&(p&&(isNaN(l[n])?(l[n]=r,s.values.close=r,s.values.open=this.baseValue):(isNaN(r)?s.values.close=l[n]:s.values.close=r+l[n],s.values.open=l[n],l[n]=s.values.close)),"column"==e&&(a.newStack&&(c[n]=NaN,h[n]=NaN),s.values.close=r,0>r?(s.values.close=r,isNaN(h[n])?s.values.open=d:(s.values.close+=h[n],s.values.open=h[n]),h[n]=s.values.close):(s.values.close=r,isNaN(c[n])?s.values.open=d:(s.values.close+=c[n],s.values.open=c[n]),c[n]=s.values.close)))}}for(n=this.start;n<=this.end;n++)for(o=0;o<f.length;o++)a=f[o],a.hidden?a.newStack&&(c[n]=NaN,h[n]=NaN):(s=a.type,a.chart==this.chart&&a.valueAxis==this&&e==s&&a.stackable&&(s=this.data[n].axes[this.id].graphs[a.id],r=s.values.value,isNaN(r)||(l=r/u[n]*100,s.values.percents=l,s.values.total=u[n],a.newStack&&(c[n]=NaN,h[n]=NaN),"100%"==i&&(isNaN(h[n])&&(h[n]=0),isNaN(c[n])&&(c[n]=0),0>l?(s.values.close=t.fitToBounds(l+h[n],-100,100),s.values.open=h[n],h[n]=s.values.close):(s.values.close=t.fitToBounds(l+c[n],-100,100),s.values.open=c[n],c[n]=s.values.close)))))},recalculate:function(){var e,i=this.chart,r=i.graphs;for(e=0;e<r.length;e++){var n=r[e];if(n.valueAxis==this){var s="value";"candlestick"!=n.type&&"ohlc"!=n.type||(s="open");var a,o,l=this.end+2,l=t.fitToBounds(this.end+1,0,this.data.length-1),h=this.start;0<h&&h--;var c;if(o=this.start,n.compareFromStart&&(o=0),!isNaN(i.startTime)&&(c=i.categoryAxis)){var u=c.minDuration(),u=new Date(i.startTime+u/2),f=t.resetDateToMin(new Date(i.startTime),c.minPeriod).getTime();t.resetDateToMin(new Date(u),c.minPeriod).getTime()>f&&o++}for((c=i.recalculateFromDate)&&(c=t.getDate(c,i.dataDateFormat,"fff"),o=i.getClosestIndex(i.chartData,"time",c.getTime(),!0,0,i.chartData.length),l=i.chartData.length-1),c=o;c<=l&&(o=this.data[c].axes[this.id].graphs[n.id],a=o.values[s],isNaN(a));c++);for(this.recBaseValue=a,s=h;s<=l;s++){o=this.data[s].axes[this.id].graphs[n.id],o.percents={};var d,h=o.values;for(d in h)o.percents[d]="percents"!=d?h[d]/a*100-100:h[d]}}}},getMinMax:function(){var e,i=!1,r=this.chart,n=r.graphs;for(e=0;e<n.length;e++){var s=n[e].type;("line"==s||"step"==s||"smoothedLine"==s)&&this.expandMinMax&&(i=!0)}if(i&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++),"serial"==r.type&&(!0!==r.categoryAxis.parseDates||i||this.end<this.data.length-1&&this.end++),i=this.minMaxMultiplier,this.min=this.getMin(this.start,this.end),this.max=this.getMax(),this.minRR=this.min,this.maxRR=this.max,i=(this.max-this.min)*(i-1),
this.min-=i,this.max+=i,i=this.guides.length,this.includeGuidesInMinMax&&0<i)for(r=0;r<i;r++)n=this.guides[r],n.toValue<this.min&&(this.min=n.toValue),n.value<this.min&&(this.min=n.value),n.toValue>this.max&&(this.max=n.toValue),n.value>this.max&&(this.max=n.value);isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum),this.minimumDate&&(this.min=this.minimumDate.getTime()),this.maximumDate&&(this.max=this.maximumDate.getTime()),this.min>this.max&&(i=this.max,this.max=this.min,this.min=i),isNaN(this.minTemp)||(this.min=this.minTemp),isNaN(this.maxTemp)||(this.max=this.maxTemp),this.minReal=this.min,this.maxReal=this.max,0===this.min&&0===this.max&&(this.max=9),this.min>this.max&&(this.min=this.max-1),i=this.min,r=this.max,n=this.max-this.min,e=0===n?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E))/10,isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=Math.ceil(this.max/e)*e+e),isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/e)*e-e),0>this.min&&0<=i&&(this.min=0),0<this.max&&0>=r&&(this.max=0),"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100),n=this.max-this.min,e=Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E))/10,this.step=Math.ceil(n/this.gridCountR/e)*e,n=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),n=t.fixStepE(n),e=Math.ceil(this.step/n),5<e&&(e=10),5>=e&&2<e&&(e=5),this.step=Math.ceil(this.step/(n*e))*n*e,1>n?(this.maxDecCount=Math.abs(Math.log(Math.abs(n))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=t.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0,this.min=this.step*Math.floor(this.min/this.step),this.max=this.step*Math.ceil(this.max/this.step),0>this.min&&0<=i&&(this.min=0),0<this.max&&0>=r&&(this.max=0),1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal)),n=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E)),0===this.min&&(this.minReal=n),0===this.min&&1<this.minReal&&(this.minReal=1),0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min),this.logarithmic&&(2<Math.log(r)*Math.LOG10E-Math.log(i)*Math.LOG10E?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(r))*Math.LOG10E))):(r=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,i=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E))/10,r<i&&(this.minReal=this.min=10*i)))},getMin:function(t,e){var i,r;for(r=t;r<=e;r++){var n,s=this.data[r].axes[this.id].graphs;for(n in s)if(s.hasOwnProperty(n)){var a=this.chart.getGraphById(n);if(a.includeInMinMax&&(!a.hidden||this.includeHidden)){isNaN(i)&&(i=1/0),this.foundGraphs=!0,a=s[n].values,this.recalculateToPercents&&(a=s[n].percents);var o;if(this.minMaxField)o=a[this.minMaxField],o<i&&(i=o);else for(var l in a)a.hasOwnProperty(l)&&"percents"!=l&&"total"!=l&&(o=a[l],o<i&&(i=o))}}}return i},getMax:function(){var t,e;for(e=this.start;e<=this.end;e++){var i,r=this.data[e].axes[this.id].graphs;for(i in r)if(r.hasOwnProperty(i)){var n=this.chart.getGraphById(i);if(n.includeInMinMax&&(!n.hidden||this.includeHidden)){isNaN(t)&&(t=-(1/0)),this.foundGraphs=!0,n=r[i].values,this.recalculateToPercents&&(n=r[i].percents);var s;if(this.minMaxField)s=n[this.minMaxField],s>t&&(t=s);else for(var a in n)n.hasOwnProperty(a)&&"percents"!=a&&"total"!=a&&(s=n[a],s>t&&(t=s))}}}return t},dispatchZoomEvent:function(t,e){var i={type:"axisZoomed",startValue:t,endValue:e,target:this,chart:this.chart};this.fire(i.type,i)},zoomOut:function(){var t=this.chart;"xy"!=t.type&&(this.maxZoom=this.minZoom=void 0,t.updateAfterValueZoom())},zoomToValues:function(t,e){var i=this.chart;"xy"==i.type?(e<t&&(i=e,e=t,t=i),t<this.min&&(t=this.min),e>this.max&&(e=this.max),i={type:"axisSelfZoomed"},i.chart=this.chart,i.valueAxis=this,i.multiplier=this.axisWidth/Math.abs(this.getCoordinate(e)-this.getCoordinate(t)),i.startValue=t,i.endValue=e,i.position="V"==this.orientation?this.reversed?this.getCoordinate(t):this.getCoordinate(e):this.reversed?this.getCoordinate(e):this.getCoordinate(t),this.fire(i.type,i)):(this.minZoom=t,this.maxZoom=e,i.updateAfterValueZoom())},coordinateToValue:function(t){if(isNaN(t))return NaN;var e=this.axisWidth,i=this.stepWidth,r=this.reversed,n=this.rotate,s=this.min,a=this.minReal;return!0===this.logarithmic?Math.pow(10,(n?!0===r?(e-t)/i:t/i:!0===r?t/i:(e-t)/i)+Math.log(a)*Math.LOG10E):!0===r?n?s-(t-e)/i:t/i+s:n?t/i+s:s-(t-e)/i},getCoordinate:function(t){if(isNaN(t))return NaN;var e=this.rotate,i=this.reversed,r=this.axisWidth,n=this.stepWidth,s=this.min,a=this.minReal;return!0===this.logarithmic?(0===t&&(t=this.treatZeroAs),t=Math.log(t)*Math.LOG10E-Math.log(a)*Math.LOG10E,e=e?!0===i?r-n*t:n*t:!0===i?n*t:r-n*t):e=!0===i?e?r-n*(t-s):n*(t-s):e?n*(t-s):r-n*(t-s),e=this.rotate?e+(this.x-this.viX):e+(this.y-this.viY),1e7<Math.abs(e)&&(e=1e7*(e/Math.abs(e))),Math.round(e)},synchronizeWithAxis:function(t){this.synchronizeWith=t,this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(){if(this.synchronizeWith){t.isString(this.synchronizeWith)&&(this.synchronizeWith=this.chart.getValueAxisById(this.synchronizeWith));var e=this.synchronizeWith,i=e.min,r=e.max,e=e.step,n=this.synchronizationMultiplier;n&&(this.min=i*n,this.max=r*n,this.step=e*n,i=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),i=Math.abs(Math.log(Math.abs(i))*Math.LOG10E),this.maxDecCount=i=Math.round(i),this.draw())}}})}(),function(){var t=window.AmCharts;t.RecAxis=t.Class({construct:function(e){var i=e.chart,r=e.axisThickness,n=e.axisColor,s=e.axisAlpha,a=e.offset,o=e.dx,l=e.dy,h=e.viX,c=e.viY,u=e.viH,f=e.viW,d=i.container;"H"==e.orientation?(n=t.line(d,[0,f],[0,0],n,s,r),this.axisWidth=e.width,"bottom"==e.position?(l=r/2+a+u+c-1,r=h):(l=-r/2-a+c+l,r=o+h)):(this.axisWidth=e.height,"right"==e.position?(n=t.line(d,[0,0,-o],[0,u,u-l],n,s,r),l=c+l,r=r/2+a+o+f+h-1):(n=t.line(d,[0,0],[0,u],n,s,r),l=c,r=-r/2-a+h)),n.translate(r,l),r=i.container.set(),r.push(n),i.axesSet.push(r),t.setCN(i,n,e.bcn+"line"),this.axisSet=r,this.set=n}})}(),function(){var t=window.AmCharts;t.RecItem=t.Class({construct:function(e,i,r,n,s,a,o,l,h,c,u,f){i=Math.round(i);var d=e.chart;this.value=r,void 0==r&&(r=""),h||(h=0),void 0==n&&(n=!0);var p=d.fontFamily,g=e.fontSize;void 0==g&&(g=d.fontSize);var m=e.color;void 0==m&&(m=d.color),void 0!==u&&(m=u);var v=e.chart.container,b=v.set();this.set=b;var y=e.axisThickness,x=e.axisColor,w=e.axisAlpha,_=e.tickLength,C=e.gridAlpha,S=e.gridThickness,T=e.gridColor,k=e.dashLength,O=e.fillColor,A=e.fillAlpha,M=e.labelsEnabled;u=e.labelRotation;var D,N,L=e.counter,F=e.inside,I=e.labelOffset,E=e.dx,P=e.dy,j=e.orientation,B=e.position,R=e.previousCoord,z=e.viH,W=e.viW,G=e.offset;o?(void 0!==o.id&&(f=d.classNamePrefix+"-guide-"+o.id),M=!0,isNaN(o.tickLength)||(_=o.tickLength),void 0!=o.lineColor&&(T=o.lineColor),void 0!=o.color&&(m=o.color),isNaN(o.lineAlpha)||(C=o.lineAlpha),isNaN(o.dashLength)||(k=o.dashLength),isNaN(o.lineThickness)||(S=o.lineThickness),!0===o.inside&&(F=!0),isNaN(o.labelRotation)||(u=o.labelRotation),isNaN(o.fontSize)||(g=o.fontSize),o.position&&(B=o.position),void 0!==o.boldLabel&&(l=o.boldLabel),isNaN(o.labelOffset)||(I=o.labelOffset)):""===r&&(_=0),c&&!isNaN(e.minorTickLength)&&(_=e.minorTickLength);var Y="start";s&&(Y="middle");var H,V,X=u*Math.PI/180,U=0,q=0,Z=0,$=H=0,K=0;"V"==j&&(u=0);var J;M&&""!==r&&(J=e.autoWrap&&0===u?t.wrappedText(v,r,m,p,g,Y,l,s,0):t.text(v,r,m,p,g,Y,l),Y=J.getBBox(),$=Y.width,K=Y.height),"H"==j?(0<=i&&i<=W+1&&(0<_&&0<w&&i+h<=W+1&&(D=t.line(v,[i+h,i+h],[0,_],x,w,S),b.push(D)),0<C&&(N=t.line(v,[i,i+E,i+E],[z,z+P,P],T,C,S,k),b.push(N))),q=0,U=i,o&&90==u&&F&&(U-=g),!1===n?(Y="start",q="bottom"==B?F?q+_:q-_:F?q-_:q+_,U+=3,s&&(U+=s/2-3,Y="middle"),0<u&&(Y="middle")):Y="middle",1==L&&0<A&&!o&&!c&&R<W&&(n=t.fitToBounds(i,0,W),R=t.fitToBounds(R,0,W),H=n-R,0<H&&(V=t.rect(v,H,e.height,O,A),V.translate(n-H+E,P),b.push(V))),"bottom"==B?(q+=z+g/2+G,F?(0<u?(q=z-$/2*Math.sin(X)-_-3,U+=$/2*Math.cos(X)-4+2):0>u?(q=z+$*Math.sin(X)-_-3+2,U+=-$*Math.cos(X)-K*Math.sin(X)-4):q-=_+g+3+3,q-=I):(0<u?(q=z+$/2*Math.sin(X)+_+3,U-=$/2*Math.cos(X)):0>u?(q=z+_+3-$/2*Math.sin(X)+2,U+=$/2*Math.cos(X)):q+=_+y+3+3,q+=I)):(q+=P+g/2-G,U+=E,F?(0<u?(q=$/2*Math.sin(X)+_+3,U-=$/2*Math.cos(X)):q+=_+3,q+=I):(0<u?(q=-($/2)*Math.sin(X)-_-6,U+=$/2*Math.cos(X)):q-=_+g+3+y+3,q-=I)),"bottom"==B?H=(F?z-_-1:z+y-1)+G:(Z=E,H=(F?P:P-_-y+1)-G),a&&(U+=a),a=U,0<u&&(a+=$/2*Math.cos(X)),J&&(g=0,F&&(g=$/2*Math.cos(X)),a+g>W+2||0>a)&&(J.remove(),J=null)):(0<=i&&i<=z+1&&(0<_&&0<w&&i+h<=z+1&&(D=t.line(v,[0,_],[i+h,i+h],x,w,S),b.push(D)),0<C&&(N=t.line(v,[0,E,W+E],[i,i+P,i+P],T,C,S,k),b.push(N))),Y="end",(!0===F&&"left"==B||!1===F&&"right"==B)&&(Y="start"),q=i-g/2,1==L&&0<A&&!o&&!c&&(n=t.fitToBounds(i,0,z),R=t.fitToBounds(R,0,z),X=n-R,V=t.polygon(v,[0,e.width,e.width,0],[0,0,X,X],O,A),V.translate(E,n-X+P),b.push(V)),q+=g/2,"right"==B?(U+=E+W+G,q+=P,F?(a||(q-=g/2+3),U=U-(_+4)-I):(U+=_+4+y,q-=2,U+=I)):F?(U+=_+4-G,a||(q-=g/2+3),o&&(U+=E,q+=P),U+=I):(U+=-_-y-4-2-G,q-=2,U-=I),D&&("right"==B?(Z+=E+G+W,H+=P,Z=F?Z-y:Z+y):(Z-=G,F||(Z-=_+y))),a&&(q+=a),F=-3,"right"==B&&(F+=P),J&&(q>z+1||q<F)&&(J.remove(),J=null)),D&&(D.translate(Z,H),t.setCN(d,D,e.bcn+"tick"),t.setCN(d,D,f,!0),o&&t.setCN(d,D,"guide")),!1===e.visible&&(D&&D.remove(),J&&(J.remove(),J=null)),J&&(J.attr({"text-anchor":Y}),J.translate(U,q),0!==u&&J.rotate(-u,e.chart.backgroundColor),e.allLabels.push(J),this.label=J,t.setCN(d,J,e.bcn+"label"),t.setCN(d,J,f,!0),o&&t.setCN(d,J,"guide")),N&&(t.setCN(d,N,e.bcn+"grid"),t.setCN(d,N,f,!0),o&&t.setCN(d,N,"guide")),V&&(t.setCN(d,V,e.bcn+"fill"),t.setCN(d,V,f,!0)),c?N&&t.setCN(d,N,e.bcn+"grid-minor"):(e.counter=0===L?1:0,e.previousCoord=i),0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}})}(),function(){var t=window.AmCharts;t.RecFill=t.Class({construct:function(e,i,r,n){var s=e.dx,a=e.dy,o=e.orientation,l=0;if(r<i){var h=i;i=r,r=h}var c=n.fillAlpha;isNaN(c)&&(c=0);var h=e.chart.container,u=n.fillColor;"V"==o?(i=t.fitToBounds(i,0,e.viH),r=t.fitToBounds(r,0,e.viH)):(i=t.fitToBounds(i,0,e.viW),r=t.fitToBounds(r,0,e.viW)),r-=i,isNaN(r)&&(r=4,l=2,c=0),0>r&&"object"==typeof u&&(u=u.join(",").split(",").reverse()),"V"==o?(o=t.rect(h,e.viW,r,u,c),o.translate(s,i-l+a)):(o=t.rect(h,r,e.viH,u,c),o.translate(i-l+s,a)),t.setCN(e.chart,o,"guide-fill"),n.id&&t.setCN(e.chart,o,"guide-fill-"+n.id),this.set=h.set([o])},graphics:function(){return this.set},getLabel:function(){}})}(),function(){var t=window.AmCharts;t.AmChart=t.Class({construct:function(e){this.theme=e,this.classNamePrefix="amcharts",this.addClassNames=!1,this.version="3.14.5",t.addChart(this),this.createEvents("dataUpdated","init","rendered","drawn","failed","resized"),this.height=this.width="100%",this.dataChanged=!0,this.chartCreated=!1,this.previousWidth=this.previousHeight=0,this.backgroundColor="#FFFFFF",this.borderAlpha=this.backgroundAlpha=0,this.color=this.borderColor="#000000",this.fontFamily="Verdana",this.fontSize=11,this.usePrefixes=!1,this.addCodeCredits=this.autoResize=!0,this.precision=-1,this.percentPrecision=2,this.decimalSeparator=".",this.thousandsSeparator=",",this.labels=[],this.allLabels=[],this.titles=[],this.marginRight=this.marginLeft=this.autoMarginOffset=0,this.timeOuts=[],this.creditsPosition="top-left";var i=document.createElement("div"),r=i.style;r.overflow="hidden",r.position="relative",r.textAlign="left",this.chartDiv=i,i=document.createElement("div"),r=i.style,r.overflow="hidden",r.position="relative",r.textAlign="left",this.legendDiv=i,this.titleHeight=0,this.hideBalloonTime=150,this.handDrawScatter=2,this.handDrawThickness=1,this.prefixesOfBigNumbers=[{number:1e3,prefix:"k"},{number:1e6,prefix:"M"},{number:1e9,prefix:"G"},{number:1e12,prefix:"T"},{number:1e15,prefix:"P"},{number:1e18,prefix:"E"},{number:1e21,prefix:"Z"},{number:1e24,prefix:"Y"}],this.prefixesOfSmallNumbers=[{number:1e-24,prefix:"y"},{number:1e-21,prefix:"z"},{number:1e-18,prefix:"a"},{number:1e-15,prefix:"f"},{number:1e-12,prefix:"p"},{number:1e-9,prefix:"n"},{number:1e-6,prefix:"μ"},{number:.001,prefix:"m"}],this.panEventsEnabled=!0,this.product="amcharts",this.animations=[],this.balloon=new t.AmBalloon(this.theme),this.balloon.chart=this,t.applyTheme(this,e,"AmChart")},drawChart:function(){this.drawBackground(),this.redrawLabels(),this.drawTitles(),this.brr()},drawBackground:function(){t.remove(this.background);var e=this.container,i=this.backgroundColor,r=this.backgroundAlpha,n=this.set;t.isModern||0!==r||(r=.001);var s=this.updateWidth();this.realWidth=s;var a=this.updateHeight();this.realHeight=a,i=t.polygon(e,[0,s-1,s-1,0],[0,0,a-1,a-1],i,r,1,this.borderColor,this.borderAlpha),t.setCN(this,i,"bg"),this.background=i,n.push(i),(i=this.backgroundImage)&&(e=e.image(i,0,0,s,a),t.setCN(this,i,"bg-image"),this.bgImg=e,n.push(e))},drawTitles:function(){var e=this.titles;if(t.ifArray(e)){var i,r=20;for(i=0;i<e.length;i++){var n=e[i],n=t.processObject(n,t.Title,this.theme);if(!1!==n.enabled){var s=n.color;void 0===s&&(s=this.color);var a=n.size;isNaN(a)&&(a=this.fontSize+2),isNaN(n.alpha);var o=this.marginLeft,s=t.text(this.container,n.text,s,this.fontFamily,a);s.translate(o+(this.realWidth-this.marginRight-o)/2,r),s.node.style.pointerEvents="none",t.setCN(this,s,"title"),n.id&&t.setCN(this,s,"title-"+n.id),o=!0,void 0!==n.bold&&(o=n.bold),o&&s.attr({"font-weight":"bold"}),s.attr({opacity:n.alpha}),r+=a+6,this.freeLabelsSet.push(s)}}}},write:function(e){if(e="object"!=typeof e?document.getElementById(e):e){for(;e.firstChild;)e.removeChild(e.firstChild);this.div=e,e.style.overflow="hidden",e.style.textAlign="left";var i=this.chartDiv,r=this.legendDiv,n=this.legend,s=r.style,a=i.style;this.measure(),this.previousHeight=this.divRealHeight,this.previousWidth=this.divRealWidth;var o,l=document.createElement("div");o=l.style,o.position="relative",this.containerDiv=l,l.className=this.classNamePrefix+"-main-div",i.className=this.classNamePrefix+"-chart-div",e.appendChild(l);var h=this.exportConfig;if(h&&t.AmExport&&!this.AmExport&&(this.AmExport=new t.AmExport(this,h)),this.amExport&&t.AmExport&&(this.AmExport=t.extend(this.amExport,new t.AmExport(this),!0)),this.AmExport&&this.AmExport.init&&this.AmExport.init(),n)if(n=this.addLegend(n,n.divId),n.enabled)switch(n.position){case"bottom":l.appendChild(i),l.appendChild(r);break;case"top":l.appendChild(r),l.appendChild(i);break;case"absolute":o.width=e.style.width,o.height=e.style.height,s.position="absolute",a.position="absolute",void 0!==n.left&&(s.left=n.left+"px"),void 0!==n.right&&(s.right=n.right+"px"),void 0!==n.top&&(s.top=n.top+"px"),void 0!==n.bottom&&(s.bottom=n.bottom+"px"),n.marginLeft=0,n.marginRight=0,l.appendChild(i),l.appendChild(r);break;case"right":o.width=e.style.width,o.height=e.style.height,s.position="relative",a.position="absolute",l.appendChild(i),l.appendChild(r);break;case"left":o.width=e.style.width,o.height=e.style.height,s.position="absolute",a.position="relative",l.appendChild(i),l.appendChild(r);break;case"outside":l.appendChild(i)}else l.appendChild(i);else l.appendChild(i);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0),this.initChart()}},createLabelsSet:function(){t.remove(this.labelsSet),this.labelsSet=this.container.set(),this.freeLabelsSet.push(this.labelsSet)},initChart:function(){window.AmCharts_path&&(this.path=window.AmCharts_path),void 0===this.path&&(this.path=t.getPath()),void 0===this.path&&(this.path="amcharts/"),this.path=t.normalizeUrl(this.path),void 0===this.pathToImages&&(this.pathToImages=this.path+"images/"),this.initHC||(t.callInitHandler(this),this.initHC=!0),this.renderFix(),t.applyLang(this.language,this);var e=this.numberFormatter;e&&(isNaN(e.precision)||(this.precision=e.precision),void 0!==e.thousandsSeparator&&(this.thousandsSeparator=e.thousandsSeparator),void 0!==e.decimalSeparator&&(this.decimalSeparator=e.decimalSeparator)),(e=this.percentFormatter)&&!isNaN(e.precision)&&(this.percentPrecision=e.precision),this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.divIsFixed=t.findIfFixed(this.chartDiv),this.destroy(),e=0,document.attachEvent&&!window.opera&&(e=1),this.dmouseX=this.dmouseY=0;var i=document.getElementsByTagName("html")[0];i&&window.getComputedStyle&&(i=window.getComputedStyle(i,null))&&(this.dmouseY=t.removePx(i.getPropertyValue("margin-top")),this.dmouseX=t.removePx(i.getPropertyValue("margin-left"))),this.mouseMode=e,(e=this.container)?(e.container.innerHTML="",e.width=this.realWidth,e.height=this.realHeight,e.addDefs(this),this.chartDiv.appendChild(e.container)):e=new t.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this),e.chart=this,t.VML||t.SVG?(e.handDrawn=this.handDrawn,e.handDrawScatter=this.handDrawScatter,e.handDrawThickness=this.handDrawThickness,this.container=e,this.set&&this.set.remove(),this.set=e.set(),this.gridSet&&this.gridSet.remove(),this.gridSet=e.set(),this.cursorLineSet&&this.cursorLineSet.remove(),this.cursorLineSet=e.set(),this.graphsBehindSet&&this.graphsBehindSet.remove(),this.graphsBehindSet=e.set(),this.bulletBehindSet&&this.bulletBehindSet.remove(),this.bulletBehindSet=e.set(),this.columnSet&&this.columnSet.remove(),this.columnSet=e.set(),this.graphsSet&&this.graphsSet.remove(),this.graphsSet=e.set(),this.trendLinesSet&&this.trendLinesSet.remove(),this.trendLinesSet=e.set(),this.axesSet&&this.axesSet.remove(),this.axesSet=e.set(),this.cursorSet&&this.cursorSet.remove(),this.cursorSet=e.set(),this.scrollbarsSet&&this.scrollbarsSet.remove(),this.scrollbarsSet=e.set(),this.bulletSet&&this.bulletSet.remove(),this.bulletSet=e.set(),this.freeLabelsSet&&this.freeLabelsSet.remove(),this.axesLabelsSet&&this.axesLabelsSet.remove(),this.axesLabelsSet=e.set(),this.freeLabelsSet=e.set(),this.balloonsSet&&this.balloonsSet.remove(),this.balloonsSet=e.set(),this.zoomButtonSet&&this.zoomButtonSet.remove(),this.zbSet&&(this.zbSet.remove(),this.zbSet=null),this.zoomButtonSet=e.set(),this.linkSet&&this.linkSet.remove(),this.linkSet=e.set()):this.fire("failed",{type:"failed",chart:this})},premeasure:function(){var t=this.div;if(t){var e=t.offsetWidth,i=t.offsetHeight;t.clientHeight&&(e=t.clientWidth,i=t.clientHeight),e==this.mw&&i==this.mh||(this.mw=e,this.mh=i,this.measure())}},measure:function(){var e=this.div;if(e){var i=this.chartDiv,r=e.offsetWidth,n=e.offsetHeight,s=this.container;e.clientHeight&&(r=e.clientWidth,n=e.clientHeight);var a=t.removePx(t.getStyle(e,"padding-left")),o=t.removePx(t.getStyle(e,"padding-right")),l=t.removePx(t.getStyle(e,"padding-top")),h=t.removePx(t.getStyle(e,"padding-bottom"));isNaN(a)||(r-=a),isNaN(o)||(r-=o),isNaN(l)||(n-=l),isNaN(h)||(n-=h),a=e.style,e=a.width,a=a.height,-1!=e.indexOf("px")&&(r=t.removePx(e)),-1!=a.indexOf("px")&&(n=t.removePx(a)),n=Math.round(n),r=Math.round(r),e=Math.round(t.toCoordinate(this.width,r)),a=Math.round(t.toCoordinate(this.height,n)),(r!=this.previousWidth||n!=this.previousHeight)&&0<e&&0<a&&(i.style.width=e+"px",i.style.height=a+"px",s&&s.setSize(e,a),this.balloon=t.processObject(this.balloon,t.AmBalloon,this.theme),this.balloon.setBounds(2,2,e-2,a)),this.balloon.chart=this,this.realWidth=e,this.realHeight=a,this.divRealWidth=r,this.divRealHeight=n}},destroy:function(){this.chartDiv.innerHTML="",this.clearTimeOuts(),this.legend&&this.legend.destroy()},clearTimeOuts:function(){var t=this.timeOuts;if(t){var e;for(e=0;e<t.length;e++)clearTimeout(t[e])}this.timeOuts=[]},clear:function(e){if(t.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]),this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null,this.clearTimeOuts(),this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv)),e||t.removeChart(this),e=this.div)for(;e.firstChild;)e.removeChild(e.firstChild);this.legend&&this.legend.destroy()},setMouseCursor:function(e){"auto"==e&&t.isNN&&(e="default"),this.chartDiv.style.cursor=e,this.legendDiv.style.cursor=e},redrawLabels:function(){this.labels=[];var t=this.allLabels;this.createLabelsSet();var e;for(e=0;e<t.length;e++)this.drawLabel(t[e])},drawLabel:function(e){if(this.container&&!1!==e.enabled){e=t.processObject(e,t.Label,this.theme);var i=e.y,r=e.text,n=e.align,s=e.size,a=e.color,o=e.rotation,l=e.alpha,h=e.bold,c=t.toCoordinate(e.x,this.realWidth),i=t.toCoordinate(i,this.realHeight);c||(c=0),i||(i=0),void 0===a&&(a=this.color),isNaN(s)&&(s=this.fontSize),n||(n="start"),"left"==n&&(n="start"),"right"==n&&(n="end"),"center"==n&&(n="middle",o?i=this.realHeight-i+i/2:c=this.realWidth/2-c),void 0===l&&(l=1),void 0===o&&(o=0),i+=s/2,r=t.text(this.container,r,a,this.fontFamily,s,n,h,l),r.translate(c,i),t.setCN(this,r,"label"),e.id&&t.setCN(this,r,"label-"+e.id),0!==o&&r.rotate(o),e.url?(r.setAttr("cursor","pointer"),r.click(function(){t.getURL(e.url)})):r.node.style.pointerEvents="none",this.labelsSet.push(r),this.labels.push(r)}},addLabel:function(t,e,i,r,n,s,a,o,l,h){t={x:t,y:e,text:i,align:r,size:n,color:s,alpha:o,rotation:a,bold:l,url:h,enabled:!0},this.container&&this.drawLabel(t),this.allLabels.push(t)},clearLabels:function(){var t,e=this.labels;for(t=e.length-1;0<=t;t--)e[t].remove();this.labels=[],this.allLabels=[]},updateHeight:function(){var t=this.divRealHeight,e=this.legend;if(e){var i=this.legendDiv.offsetHeight,e=e.position;"top"!=e&&"bottom"!=e||(t-=i,(0>t||isNaN(t))&&(t=0),this.chartDiv.style.height=t+"px")}return t},updateWidth:function(){var t=this.divRealWidth,e=this.divRealHeight,i=this.legend;if(i){var r=this.legendDiv,n=r.offsetWidth;isNaN(i.width)||(n=i.width),i.ieW&&(n=i.ieW);var s=r.offsetHeight,r=r.style,a=this.chartDiv.style,i=i.position;"right"!=i&&"left"!=i||(t-=n,(0>t||isNaN(t))&&(t=0),a.width=t+"px","left"==i?(a.left=n+"px",r.left="0px"):(a.left="0px",r.left=t+"px"),e>s&&(r.top=(e-s)/2+"px"))}return t},getTitleHeight:function(){var t=0,e=this.titles,i=!0;if(0<e.length){var r,t=20;for(r=0;r<e.length;r++){var n=e[r];!1!==n.enabled&&(i=!1,n=n.size,isNaN(n)&&(n=this.fontSize+2),t+=n+6)}i&&(t=0)}return t},addTitle:function(t,e,i,r,n){return isNaN(e)&&(e=this.fontSize+2),t={text:t,size:e,color:i,alpha:r,bold:n,enabled:!0},this.titles.push(t),t},handleWheel:function(t){var e=0;t||(t=window.event),t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e&&this.handleWheelReal(e,t.shiftKey),t.preventDefault&&t.preventDefault()},handleWheelReal:function(){},addListeners:function(){var t=this,e=t.chartDiv;document.addEventListener?(t.panEventsEnabled&&(e.style.msTouchAction="none"),"ontouchstart"in document.documentElement&&(e.addEventListener("touchstart",function(e){t.handleTouchMove.call(t,e),t.handleTouchStart.call(t,e)},!0),e.addEventListener("touchmove",function(e){t.handleTouchMove.call(t,e)},!0),e.addEventListener("touchend",function(e){t.handleTouchEnd.call(t,e)},!0)),e.addEventListener("mousedown",function(e){t.mouseIsOver=!0,t.handleMouseMove.call(t,e),t.handleMouseDown.call(t,e)},!0),e.addEventListener("mouseover",function(e){t.handleMouseOver.call(t,e)},!0),e.addEventListener("mouseout",function(e){t.handleMouseOut.call(t,e)},!0)):(e.attachEvent("onmousedown",function(e){t.handleMouseDown.call(t,e)}),e.attachEvent("onmouseover",function(e){t.handleMouseOver.call(t,e)}),e.attachEvent("onmouseout",function(e){t.handleMouseOut.call(t,e)}))},dispDUpd:function(){if(!this.skipEvents){var t;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,t="dataUpdated",this.fire(t,{type:t,chart:this})),this.chartCreated||(t="init",this.fire(t,{type:t,chart:this})),this.chartRendered||(t="rendered",this.fire(t,{type:t,chart:this}),this.chartRendered=!0),t="drawn",this.fire(t,{type:t,chart:this})}this.skipEvents=!1},validateSize:function(){var t=this;if(t.premeasure(),t.divRealWidth!=t.previousWidth||t.divRealHeight!=t.previousHeight){var e=t.legend;if(0<t.realWidth&&0<t.realHeight){if(t.sizeChanged=!0,e){t.legendInitTO&&clearTimeout(t.legendInitTO);var i=setTimeout(function(){e.invalidateSize()},10);t.timeOuts.push(i),t.legendInitTO=i}"xy"!=t.type?t.marginsUpdated=!1:(t.marginsUpdated=!0,t.selfZoom=!0),clearTimeout(t.initTO),i=setTimeout(function(){t.initChart()},10),t.timeOuts.push(i),t.initTO=i}t.fire("resized",{type:"resized",chart:t}),t.renderFix(),e&&e.renderFix&&e.renderFix(),t.previousHeight=t.divRealHeight,t.previousWidth=t.divRealWidth}},invalidateSize:function(){this.previousHeight=this.previousWidth=NaN,this.invalidateSizeReal()},invalidateSizeReal:function(){var t=this;t.marginsUpdated=!1,clearTimeout(t.validateTO);var e=setTimeout(function(){t.validateSize()},5);t.timeOuts.push(e),t.validateTO=e},validateData:function(t){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated=!1,this.initChart(t))},validateNow:function(t,e){this.initTO&&clearTimeout(this.initTO),t&&(this.dataChanged=!0),this.skipEvents=e,this.chartRendered=!1,this.write(this.div)},showItem:function(t){t.hidden=!1,this.initChart()},hideItem:function(t){t.hidden=!0,this.initChart()},hideBalloon:function(){var t=this;clearTimeout(t.hoverInt),clearTimeout(t.balloonTO),t.hoverInt=setTimeout(function(){t.hideBalloonReal.call(t)},t.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var t=this.balloon;t&&t.hide()},showBalloon:function(t,e,i,r,n){var s=this;clearTimeout(s.balloonTO),clearTimeout(s.hoverInt),s.balloonTO=setTimeout(function(){s.showBalloonReal.call(s,t,e,i,r,n)},1)},showBalloonReal:function(t,e,i,r,n){this.handleMouseMove();var s=this.balloon;s.enabled&&(s.followCursor(!1),s.changeColor(e),!i||s.fixedPosition?(s.setPosition(r,n),s.followCursor(!1)):s.followCursor(!0),t&&s.showBalloon(t))},handleTouchMove:function(e){this.hideBalloon();var i=this.chartDiv;e.touches&&(e=e.touches.item(0),this.mouseX=e.pageX-t.findPosX(i),this.mouseY=e.pageY-t.findPosY(i))},handleMouseOver:function(){this.outTO&&clearTimeout(this.outTO),t.resetMouseOver(),this.mouseIsOver=!0},handleMouseOut:function(){var t=this;t.outTO&&clearTimeout(t.outTO),t.outTO=setTimeout(function(){t.handleMouseOutReal()},10)},handleMouseOutReal:function(){t.resetMouseOver(),this.mouseIsOver=!1},handleMouseMove:function(e){if(this.mouseIsOver){var i=this.chartDiv;e||(e=window.event);var r,n;if(e){switch(this.posX=t.findPosX(i),this.posY=t.findPosY(i),this.mouseMode){case 1:if(r=e.clientX-this.posX,n=e.clientY-this.posY,!this.divIsFixed){var s,a,o,l,i=document.body;i&&(s=i.scrollLeft,o=i.scrollTop),(i=document.documentElement)&&(a=i.scrollLeft,l=i.scrollTop),s=Math.max(s,a),o=Math.max(o,l),r+=s,n+=o}break;case 0:this.divIsFixed?(r=e.clientX-this.posX,n=e.clientY-this.posY):(r=e.pageX-this.posX,n=e.pageY-this.posY)}e.touches&&(e=e.touches.item(0),r=e.pageX-this.posX,n=e.pageY-this.posY),this.mouseX=r-this.dmouseX,this.mouseY=n-this.dmouseY}}},handleTouchStart:function(t){this.handleMouseDown(t)},handleTouchEnd:function(e){t.resetMouseOver(),this.handleReleaseOutside(e)},handleReleaseOutside:function(){},handleMouseDown:function(e){t.resetMouseOver(),this.mouseIsOver=!0,e&&e.preventDefault&&(this.panEventsEnabled?e.preventDefault():e.touches||e.preventDefault())},addLegend:function(e,i){e=t.processObject(e,t.AmLegend,this.theme),e.divId=i,e.ieW=0;var r;return r="object"!=typeof i&&i?document.getElementById(i):i,this.legend=e,e.chart=this,r?(e.div=r,e.position="outside",e.autoMargins=!1):e.div=this.legendDiv,r=this.handleLegendEvent,this.listenTo(e,"showItem",r),this.listenTo(e,"hideItem",r),this.listenTo(e,"clickMarker",r),this.listenTo(e,"rollOverItem",r),this.listenTo(e,"rollOutItem",r),this.listenTo(e,"rollOverMarker",r),this.listenTo(e,"rollOutMarker",r),this.listenTo(e,"clickLabel",r),e},removeLegend:function(){this.legend=void 0,this.legendDiv.innerHTML=""},handleResize:function(){(t.isPercents(this.width)||t.isPercents(this.height))&&this.invalidateSizeReal(),this.renderFix()},renderFix:function(){if(!t.VML){var e=this.container;e&&e.renderFix()}},getSVG:function(){if(t.hasSVG)return this.container},animate:function(e,i,r,n,s,a,o){return e["an_"+i]&&t.removeFromArray(this.animations,e["an_"+i]),r={obj:e,frame:0,attribute:i,from:r,to:n,time:s,effect:a,suffix:o},e["an_"+i]=r,this.animations.push(r),r},setLegendData:function(t){var e=this.legend;e&&e.setData(t)},stopAnim:function(e){t.removeFromArray(this.animations,e)},updateAnimations:function(){var e;if(this.container&&this.container.update(),this.animations)for(e=this.animations.length-1;0<=e;e--){var i=this.animations[e],r=1e3*i.time/t.updateRate,n=i.frame+1,s=i.obj,a=i.attribute;if(n<=r){i.frame++;var o=Number(i.from),l=Number(i.to)-o,r=t[i.effect](0,n,o,l,r);0===l?(this.animations.splice(e,1),s.node.style[a]=Number(i.to)+i.suffix):s.node.style[a]=r+i.suffix}else s.node.style[a]=Number(i.to)+i.suffix,this.animations.splice(e,1)}},update:function(){this.updateAnimations()},inIframe:function(){try{return window.self!==window.top}catch(t){return!0}},brr:function(){var t,e=window.location.hostname.split(".");if(2<=e.length&&(t=e[e.length-2]+"."+e[e.length-1]),this.amLink&&(e=this.amLink.parentNode)&&e.removeChild(this.amLink),e=this.creditsPosition,"amcharts.com"!=t||!0===this.inIframe()){var i=t=0,r=this.realWidth,n=this.realHeight,s=this.type;"serial"!=s&&"xy"!=s&&"gantt"!=s||(t=this.marginLeftReal,i=this.marginTopReal,r=t+this.plotAreaWidth,n=i+this.plotAreaHeight);var a="http://www.amcharts.com/javascript-charts/",o="JavaScript charts",l="JS chart by amCharts";"ammap"==this.product&&(a="http://www.ammap.com/javascript-maps/",o="Interactive JavaScript maps",l="JS map by amCharts"),s=document.createElement("a"),l=document.createTextNode(l),s.setAttribute("href",a),s.setAttribute("title",o),s.appendChild(l),this.chartDiv.appendChild(s),this.amLink=s,a=s.style,a.position="absolute",a.textDecoration="none",a.color=this.color,a.fontFamily=this.fontFamily,a.fontSize=this.fontSize+"px",a.opacity=.7,a.display="block";var o=s.offsetWidth,s=s.offsetHeight,l=5+t,h=i+5;"bottom-left"==e&&(l=5+t,h=n-s-3),"bottom-right"==e&&(l=r-o-5,h=n-s-3),"top-right"==e&&(l=r-o-5,h=i+5),a.left=l+"px",a.top=h+"px"}}}),t.Slice=t.Class({construct:function(){}}),t.SerialDataItem=t.Class({construct:function(){}}),t.GraphDataItem=t.Class({construct:function(){}}),t.Guide=t.Class({construct:function(e){this.cname="Guide",t.applyTheme(this,e,this.cname)}}),t.Title=t.Class({construct:function(e){this.cname="Title",t.applyTheme(this,e,this.cname)}}),t.Label=t.Class({construct:function(e){this.cname="Label",t.applyTheme(this,e,this.cname)}})}(),function(){var t=window.AmCharts;t.AmGraph=t.Class({construct:function(e){this.cname="AmGraph",this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.type="line",this.stackable=!0,this.columnCount=1,this.columnIndex=0,this.centerCustomBullets=this.showBalloon=!0,this.maxBulletSize=50,this.minBulletSize=4,this.balloonText="[[value]]",this.hidden=this.scrollbar=this.animationPlayed=!1,this.pointPosition="middle",this.depthCount=1,this.includeInMinMax=!0,this.negativeBase=0,this.visibleInLegend=!0,this.showAllValueLabels=!1,this.showBulletsAt=this.showBalloonAt="close",this.lineThickness=1,this.dashLength=0,this.connect=!0,this.lineAlpha=1,this.bullet="none",this.bulletBorderThickness=2,this.bulletBorderAlpha=0,this.bulletAlpha=1,this.bulletSize=8,this.cornerRadiusTop=this.hideBulletsCount=this.bulletOffset=0,this.cursorBulletAlpha=1,this.gradientOrientation="vertical",this.dy=this.dx=0,this.periodValue="",this.clustered=!0,this.periodSpan=1,this.y=this.x=0,this.switchable=!0,this.tcc=this.minDistance=1,
this.labelRotation=0,this.labelAnchor="auto",this.labelOffset=3,this.bcn="graph-",this.dateFormat="MMM DD, YYYY",t.applyTheme(this,e,this.cname)},draw:function(){var e=this.chart,i=e.type;isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:e.decimalSeparator,thousandsSeparator:e.thousandsSeparator});var r=e.container;this.container=r,this.destroy();var n=r.set(),s=r.set();this.behindColumns?(e.graphsBehindSet.push(n),e.bulletBehindSet.push(s)):(e.graphsSet.push(n),e.bulletSet.push(s));var a=this.bulletAxis;if(t.isString(a)&&(this.bulletAxis=e.getValueAxisById(a)),this.bulletSet=s,!this.scrollbar){var a=e.marginLeftReal,o=e.marginTopReal;n.translate(a,o),s.translate(a,o)}r=r.set(),t.remove(this.columnsSet),n.push(r),this.set=n,t.setCN(e,n,"graph-"+this.type),t.setCN(e,n,"graph-"+this.id),t.setCN(e,s,"graph-"+this.type),t.setCN(e,s,"graph-"+this.id),this.columnsSet=r,this.columnsArray=[],this.ownColumns=[],this.allBullets=[],this.animationArray=[],n=this.labelPosition,n||(s=this.valueAxis.stackType,n="top","column"==this.type&&(e.rotate&&(n="right"),"100%"==s||"regular"==s)&&(n="middle"),this.labelPosition=n),t.ifArray(this.data)&&(e=!1,"xy"==i?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(e=!0):this.valueAxis.axisCreated&&(e=!0),!this.hidden&&e&&this.createGraph())},createGraph:function(){var t=this,e=t.chart;if(t.startAlpha=e.startAlpha,t.seqAn=e.sequencedAnimation,t.baseCoord=t.valueAxis.baseCoord,void 0===t.fillAlphas&&(t.fillAlphas=0),t.bulletColorR=t.bulletColor,void 0===t.bulletColorR&&(t.bulletColorR=t.lineColorR,t.bulletColorNegative=t.negativeLineColor),void 0===t.bulletAlpha&&(t.bulletAlpha=t.lineAlpha),e=e.type,"gantt"==e&&(e="serial"),clearTimeout(t.playedTO),!isNaN(t.valueAxis.min)&&!isNaN(t.valueAxis.max)){switch(e){case"serial":t.categoryAxis&&(t.createSerialGraph(),"candlestick"==t.type&&1>t.valueAxis.minMaxMultiplier&&t.positiveClip(t.set));break;case"radar":t.createRadarGraph();break;case"xy":t.createXYGraph(),t.positiveClip(t.set)}t.playedTO=setTimeout(function(){t.setAnimationPlayed.call(t)},500*t.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var t=[],e=[],i=this.xAxis,r=this.yAxis;this.pmh=r.viH+1,this.pmw=i.viW+1,this.pmy=this.pmx=0;var n;for(n=this.start;n<=this.end;n++){var s=this.data[n].axes[i.id].graphs[this.id],a=s.values,o=a.x,l=a.y,a=i.getCoordinate(o),h=r.getCoordinate(l);!isNaN(o)&&!isNaN(l)&&(t.push(a),e.push(h),s.x=a,s.y=h,o=this.createBullet(s,a,h,n),l=this.labelText)&&(s=this.createLabel(s,a,h,l),this.positionLabel(a,h,s,o),this.allBullets.push(s))}this.drawLineGraph(t,e),this.launchAnimation()},createRadarGraph:function(){var t,e,i,r=this.valueAxis.stackType,n=[],s=[];for(i=this.start;i<=this.end;i++){var a,o=this.data[i].axes[this.valueAxis.id].graphs[this.id];if(a="none"==r||"3d"==r?o.values.value:o.values.close,isNaN(a))this.drawLineGraph(n,s),n=[],s=[];else{var l=this.y-(this.valueAxis.getCoordinate(a)-this.height),h=180-360/(this.end-this.start+1)*i;a=l*Math.sin(h/180*Math.PI),l*=Math.cos(h/180*Math.PI),n.push(a),s.push(l);var h=this.createBullet(o,a,l,i),c=this.labelText;c&&(o=this.createLabel(o,a,l,c),this.positionLabel(a,l,o,h),this.allBullets.push(o)),isNaN(t)&&(t=a),isNaN(e)&&(e=l)}}n.push(t),s.push(e),this.drawLineGraph(n,s),this.launchAnimation()},positionLabel:function(t,e,i,r){var n="middle",s=!1,a=this.labelPosition,o=i.getBBox();if(r){var l=r.graphDataItem,h=this.chart.rotate,c=l.isNegative,u=this.chart;switch(e-=o.height/4/2,a){case"top":a=h?"top":c?"bottom":"top";break;case"right":a=h&&c?"left":"right";break;case"bottom":a=h?"bottom":c?"top":"bottom";break;case"left":a=h&&c?"right":"left"}var f=l.columnGraphics,d=0,p=0;f&&(d=f.x,p=f.y);var g=this.labelOffset;switch(a){case"top":e-=r.size/2+o.height/2+g;break;case"right":n="start",t+=r.size/2+g;break;case"bottom":e+=r.size/2+o.height/2+g;break;case"left":n="end",t-=r.size/2+g;break;case"inside":"column"==this.type&&(s=!0,h?c?(n="end",t=d-3-g):(n="start",t=d+3+g):e=c?p+7+g:p-10-g);break;case"middle":"column"==this.type&&(s=!0,h?t-=(t-d)/2+g-3:e-=(e-p)/2+g-3)}return"auto"!=this.labelAnchor&&(n=this.labelAnchor),i.attr({"text-anchor":n}),this.labelRotation&&i.rotate(this.labelRotation),i.translate(t,e),o=i.getBBox(),!this.showAllValueLabels&&f&&s&&(o.height>l.columnHeight||o.width>l.columnWidth)&&(i.remove(),i=!1),!i||"serial"!=u.type&&"gantt"!=u.type||(h?(0>e||e>this.height)&&(i.remove(),i=!1):(0>t||t>this.width)&&(i.remove(),i=!1)),i}},getGradRotation:function(){var t=270;return"horizontal"==this.gradientOrientation&&(t=0),this.gradientRotation=t},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var e=this.chart,i=this.id,r=this.index,n=this.data,s=this.chart.container,a=this.valueAxis,o=this.type,l=this.columnWidthReal,h=this.showBulletsAt;isNaN(this.columnWidth)||(l=this.columnWidth),isNaN(l)&&(l=.8);var c,u,f,d,p,g=this.useNegativeColorIfDown,m=this.width,v=this.height,b=this.y,y=this.rotate,x=this.columnCount,w=t.toCoordinate(this.cornerRadiusTop,l/2),_=this.connect,C=[],S=[],T=this.chart.graphs.length,k=this.dx/this.tcc,O=this.dy/this.tcc,A=a.stackType,M=this.start,D=this.end,N=this.scrollbar,L="graph-column-";N&&(L="scrollbar-graph-column-");var F,I=this.categoryAxis,E=this.baseCoord,P=this.negativeBase,j=this.columnIndex,B=this.lineThickness,R=this.lineAlpha,z=this.lineColorR,W=this.dashLength,G=this.set,Y=this.getGradRotation(),H=this.chart.columnSpacing,V=I.cellWidth,X=(V*l-x)/x;H>X&&(H=X);var U,q,Z,$,K,J,Q,tt=v+1,et=m+1,it=0,rt=0,nt=this.fillColorsR,st=this.negativeFillColors,at=this.negativeLineColor,ot=this.fillAlphas,lt=this.negativeFillAlphas;"object"==typeof ot&&(ot=ot[0]),"object"==typeof lt&&(lt=lt[0]);var ht=a.getCoordinate(a.min);if(a.logarithmic&&(ht=a.getCoordinate(a.minReal)),this.minCoord=ht,this.resetBullet&&(this.bullet="none"),!(N||"line"!=o&&"smoothedLine"!=o&&"step"!=o||(1==n.length&&"step"!=o&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!st&&void 0==at||g))){var ct=P;ct>a.max&&(ct=a.max),ct<a.min&&(ct=a.min),a.logarithmic&&(ct=a.minReal);var ut=a.getCoordinate(ct),ft=a.getCoordinate(a.max);y?(tt=v,et=Math.abs(ft-ut)+1,$=v,K=Math.abs(ht-ut)+1,Q=rt=0,a.reversed?(it=0,J=ut):(it=ut,J=0)):(et=m,tt=Math.abs(ft-ut)+1,K=m,$=Math.abs(ht-ut)+1,J=it=0,a.reversed?(Q=b,rt=ut):Q=ut+1)}var dt=Math.round;this.pmx=dt(it),this.pmy=dt(rt),this.pmh=dt(tt),this.pmw=dt(et),this.nmx=dt(J),this.nmy=dt(Q),this.nmh=dt($),this.nmw=dt(K),t.isModern||(this.nmy=this.nmx=0,this.nmh=this.height),this.clustered||(x=1),l="column"==o?(V*l-H*(x-1))/x:V*l,1>l&&(l=1);var pt=this.fixedColumnWidth;isNaN(pt)||(l=pt);var gt;if("line"==o||"step"==o||"smoothedLine"==o){if(0<M){for(gt=M-1;-1<gt;gt--)if(U=n[gt],q=U.axes[a.id].graphs[i],Z=q.values.value,!isNaN(Z)){M=gt;break}if(this.lineColorField)for(gt=M;-1<gt;gt--)if(U=n[gt],q=U.axes[a.id].graphs[i],q.lineColor){this.bulletColorSwitched=this.lineColorSwitched=q.lineColor;break}if(this.fillColorsField)for(gt=M;-1<gt;gt--)if(U=n[gt],q=U.axes[a.id].graphs[i],q.fillColors){this.fillColorsSwitched=q.fillColors;break}if(this.dashLengthField)for(gt=M;-1<gt;gt--)if(U=n[gt],q=U.axes[a.id].graphs[i],!isNaN(q.dashLength)){this.dashLengthSwitched=q.dashLength;break}}if(D<n.length-1)for(gt=D+1;gt<n.length;gt++)if(U=n[gt],q=U.axes[a.id].graphs[i],Z=q.values.value,!isNaN(Z)){D=gt;break}}D<n.length-1&&D++;var mt=[],vt=[],bt=!1;"line"!=o&&"step"!=o&&"smoothedLine"!=o||(this.stackable&&"regular"==A||"100%"==A||this.fillToGraph)&&(bt=!0);var yt=this.noStepRisers,xt=-1e3,wt=-1e3,_t=this.minDistance,Ct=!0,St=!1;for(gt=M;gt<=D;gt++){U=n[gt],q=U.axes[a.id].graphs[i],q.index=gt;var Tt,kt=NaN;if(g&&void 0==this.openField)for(var Ot=gt+1;Ot<n.length&&(!n[Ot]||!(Tt=n[gt+1].axes[a.id].graphs[i])||!Tt.values||(kt=Tt.values.value,isNaN(kt)));Ot++);var At,Mt,Dt,Nt,Lt,Ft,It=NaN,Et=NaN,Pt=NaN,jt=NaN,Bt=NaN,Rt=NaN,zt=NaN,Wt=NaN,Gt=NaN,Yt=NaN,Ht=NaN,Vt=NaN,Xt=NaN,Ut=NaN,qt=NaN,Zt=NaN,$t=NaN,Kt=void 0,Jt=nt,Qt=ot,te=z,ee=this.proCandlesticks,ie=this.topRadius,re=this.pattern;void 0!=q.pattern&&(re=q.pattern),isNaN(q.alpha)||(Qt=q.alpha),isNaN(q.dashLength)||(W=q.dashLength);var ne=q.values;if(a.recalculateToPercents&&(ne=q.percents),ne){if(Ut=this.stackable&&"none"!=A&&"3d"!=A?ne.close:ne.value,"candlestick"!=o&&"ohlc"!=o||(Ut=ne.close,Zt=ne.low,zt=a.getCoordinate(Zt),qt=ne.high,Gt=a.getCoordinate(qt)),$t=ne.open,Pt=a.getCoordinate(Ut),isNaN($t)||(Bt=a.getCoordinate($t),g&&(kt=$t,$t=Bt=NaN)),g&&(void 0==this.openField?Tt&&(Tt.isNegative=kt<Ut,isNaN(kt)&&(q.isNegative=!Ct)):q.isNegative=kt>Ut),!N)switch(this.showBalloonAt){case"close":q.y=Pt;break;case"open":q.y=Bt;break;case"high":q.y=Gt;break;case"low":q.y=zt}var It=U.x[I.id],se=this.periodSpan-1,ae=Math.floor(V/2)+Math.floor(se*V/2),oe=ae,le=0;if("left"==this.stepDirection&&(le=(2*V+se*V)/2,It-=le),"center"==this.stepDirection&&(le=V/2,It-=le),"start"==this.pointPosition&&(It-=V/2+Math.floor(se*V/2),ae=0,oe=Math.floor(V)+Math.floor(se*V)),"end"==this.pointPosition&&(It+=V/2+Math.floor(se*V/2),ae=Math.floor(V)+Math.floor(se*V),oe=0),yt){var he=this.columnWidth;isNaN(he)||(ae*=he,oe*=he)}N||(q.x=It),-1e5>It&&(It=-1e5),It>m+1e5&&(It=m+1e5),y?(Et=Pt,jt=Bt,Bt=Pt=It,isNaN($t)&&!this.fillToGraph&&(jt=E),Rt=zt,Wt=Gt):(jt=Et=It,isNaN($t)&&!this.fillToGraph&&(Bt=E)),(!ee&&Ut<$t||ee&&Ut<F)&&(q.isNegative=!0,st&&(Jt=st),lt&&(Qt=lt),void 0!=at&&(te=at)),St=!1,isNaN(Ut)||(g?Ut>kt?(Ct&&(St=!0),Ct=!1):(Ct||(St=!0),Ct=!0):q.isNegative=Ut<P,F=Ut);var ce=!1;switch(N&&e.chartScrollbar.ignoreCustomColors&&(ce=!0),ce||(void 0!=q.color&&(Jt=q.color),q.fillColors&&(Jt=q.fillColors)),o){case"line":isNaN(Ut)?_||(this.drawLineGraph(C,S,mt,vt),C=[],S=[],mt=[],vt=[]):((Math.abs(Et-xt)>=_t||Math.abs(Pt-wt)>=_t)&&(C.push(Et),S.push(Pt),xt=Et,wt=Pt),Yt=Et,Ht=Pt,Vt=Et,Xt=Pt,!bt||isNaN(Bt)||isNaN(jt)||(mt.push(jt),vt.push(Bt)),!St&&void 0==q.lineColor&&void 0==q.fillColors&&isNaN(q.dashLength)||(this.drawLineGraph(C,S,mt,vt),C=[Et],S=[Pt],mt=[],vt=[],!bt||isNaN(Bt)||isNaN(jt)||(mt.push(jt),vt.push(Bt)),g?Ct?(this.lineColorSwitched=z,this.fillColorsSwitched=nt):(this.lineColorSwitched=at,this.fillColorsSwitched=st):(this.lineColorSwitched=q.lineColor,this.fillColorsSwitched=q.fillColors),this.dashLengthSwitched=q.dashLength),q.gap&&(this.drawLineGraph(C,S,mt,vt),C=[],S=[],mt=[],vt=[]));break;case"smoothedLine":isNaN(Ut)?_||(this.drawSmoothedGraph(C,S,mt,vt),C=[],S=[],mt=[],vt=[]):((Math.abs(Et-xt)>=_t||Math.abs(Pt-wt)>=_t)&&(C.push(Et),S.push(Pt),xt=Et,wt=Pt),Yt=Et,Ht=Pt,Vt=Et,Xt=Pt,!bt||isNaN(Bt)||isNaN(jt)||(mt.push(jt),vt.push(Bt)),void 0==q.lineColor&&void 0==q.fillColors&&isNaN(q.dashLength)||(this.drawSmoothedGraph(C,S,mt,vt),C=[Et],S=[Pt],mt=[],vt=[],!bt||isNaN(Bt)||isNaN(jt)||(mt.push(jt),vt.push(Bt)),this.lineColorSwitched=q.lineColor,this.fillColorsSwitched=q.fillColors,this.dashLengthSwitched=q.dashLength),q.gap&&(this.drawSmoothedGraph(C,S,mt,vt),C=[],S=[],mt=[],vt=[]));break;case"step":if(isNaN(Ut))_||((1>=this.periodSpan||1<this.periodSpan&&Et-c>ae+oe)&&(c=u=NaN),this.drawLineGraph(C,S,mt,vt),C=[],S=[],mt=[],vt=[]);else{if(y?(isNaN(c)||(C.push(c),S.push(Pt-ae)),S.push(Pt-ae),C.push(Et),S.push(Pt+oe),C.push(Et),!bt||isNaN(Bt)||isNaN(jt)||(isNaN(f)||(mt.push(f),vt.push(Bt-ae)),mt.push(jt),vt.push(Bt-ae),mt.push(jt),vt.push(Bt+oe))):(isNaN(u)||(S.push(u),C.push(Et-ae)),C.push(Et-ae),S.push(Pt),C.push(Et+oe),S.push(Pt),!bt||isNaN(Bt)||isNaN(jt)||(isNaN(d)||(mt.push(jt-ae),vt.push(d)),mt.push(jt-ae),vt.push(Bt),mt.push(jt+oe),vt.push(Bt))),c=Et,u=Pt,f=jt,d=Bt,Yt=Et,Ht=Pt,Vt=Et,Xt=Pt,St||void 0!=q.lineColor||void 0!=q.fillColors||!isNaN(q.dashLength)){var ue=C[C.length-2],fe=S[S.length-2];C.pop(),S.pop(),this.drawLineGraph(C,S,mt,vt),C=[ue],S=[fe],y?(S.push(Pt+oe),C.push(Et)):(C.push(Et+oe),S.push(Pt)),mt=[],vt=[],this.lineColorSwitched=q.lineColor,this.fillColorsSwitched=q.fillColors,this.dashLengthSwitched=q.dashLength,g&&(Ct?(this.lineColorSwitched=z,this.fillColorsSwitched=nt):(this.lineColorSwitched=at,this.fillColorsSwitched=st))}(yt||q.gap)&&(c=u=NaN,this.drawLineGraph(C,S,mt,vt),C=[],S=[],mt=[],vt=[])}break;case"column":if(Lt=te,void 0!=q.lineColor&&(Lt=q.lineColor),!isNaN(Ut)){g||(q.isNegative=Ut<P),q.isNegative&&(st&&(Jt=st),void 0!=at&&(Lt=at));var de=a.min,pe=a.max;if(!(Ut<de&&$t<de||Ut>pe&&$t>pe)){var ge;if(y){"3d"==A?(Mt=Pt-(x/2-this.depthCount+1)*(l+H)+H/2+O*j,At=jt+k*j,ge=j):(Mt=Math.floor(Pt-(x/2-j)*(l+H)+H/2),At=jt,ge=0),Dt=l,Yt=Et,Ht=Mt+l/2,isNaN(jt)||jt>Et&&!q.isNegative&&(Yt=jt),Vt=Et,Xt=Mt+l/2,Mt+Dt>v+ge*O&&(Dt=v-Mt+ge*O),Mt<ge*O&&(Dt+=Mt,Mt=ge*O),Nt=Et-jt;var me=At;At=t.fitToBounds(At,0,m),Nt+=me-At,Nt=t.fitToBounds(Nt,-At,m-At+k*j),Mt<v&&0<Dt&&(Kt=new t.Cuboid(s,Nt,Dt,k-e.d3x,O-e.d3y,Jt,Qt,B,Lt,R,Y,w,y,W,re,ie,L),q.columnWidth=Math.abs(Nt),q.columnHeight=Math.abs(Dt))}else{"3d"==A?(At=Et-(x/2-this.depthCount+1)*(l+H)+H/2+k*j,Mt=Bt+O*j,ge=j):(At=Et-(x/2-j)*(l+H)+H/2,Mt=Bt,ge=0),Dt=l,Yt=At+l/2,Ht=Pt,isNaN(Bt)||Bt<Pt&&!q.isNegative&&(Ht=Bt),Vt=At+l/2,Xt=Pt,At+Dt>m+ge*k&&(Dt=m-At+ge*k),At<ge*k&&(Dt+=At-ge*k,At=ge*k),Nt=Pt-Bt;var ve=Mt;Mt=t.fitToBounds(Mt,this.dy,v),Nt+=ve-Mt,Nt=t.fitToBounds(Nt,-Mt+O*j,v-Mt),At<m+j*k&&0<Dt&&(this.showOnAxis&&(Mt-=O/2),Kt=new t.Cuboid(s,Dt,Nt,k-e.d3x,O-e.d3y,Jt,Qt,B,Lt,this.lineAlpha,Y,w,y,W,re,ie,L),q.columnHeight=Math.abs(Nt),q.columnWidth=Math.abs(Dt))}}Kt&&(Ft=Kt.set,t.setCN(e,Kt.set,"graph-"+this.type),t.setCN(e,Kt.set,"graph-"+this.id),q.className&&t.setCN(e,Kt.set,q.className,!0),q.columnGraphics=Ft,Ft.translate(At,Mt),this.columnsSet.push(Ft),(q.url||this.showHandOnHover)&&Ft.setAttr("cursor","pointer"),!N)&&("none"==A&&(p=y?(this.end+1-gt)*T-r:T*gt+r),"3d"==A&&(y?(p=(this.end+1-gt)*T-r-1e3*this.depthCount,Yt+=k*this.columnIndex,Vt+=k*this.columnIndex,q.y+=k*this.columnIndex):(p=(T-r)*(gt+1)+1e3*this.depthCount,Ht+=O*this.columnIndex,Xt+=O*this.columnIndex,q.y+=O*this.columnIndex)),"regular"!=A&&"100%"!=A||(p=y?0<ne.value?(this.end+1-gt)*T+r:(this.end+1-gt)*T-r:0<ne.value?T*gt+r:T*gt-r),this.columnsArray.push({column:Kt,depth:p}),q.x=y?Mt+Dt/2:At+Dt/2,this.ownColumns.push(Kt),this.animateColumns(Kt,gt,Et,jt,Pt,Bt),this.addListeners(Ft,q))}break;case"candlestick":if(!isNaN($t)&&!isNaN(Ut)){var be,ye;if(Lt=te,void 0!=q.lineColor&&(Lt=q.lineColor),y){if(Mt=Pt-l/2,At=jt,Dt=l,Mt+Dt>v&&(Dt=v-Mt),0>Mt&&(Dt+=Mt,Mt=0),Mt<v&&0<Dt){var xe,we;Ut>$t?(xe=[Et,Wt],we=[jt,Rt]):(xe=[jt,Wt],we=[Et,Rt]),!isNaN(Wt)&&!isNaN(Rt)&&Pt<v&&0<Pt&&(be=t.line(s,xe,[Pt,Pt],Lt,R,B),ye=t.line(s,we,[Pt,Pt],Lt,R,B)),Nt=Et-jt,Kt=new t.Cuboid(s,Nt,Dt,k,O,Jt,ot,B,Lt,R,Y,w,y,W,re,ie,L)}}else if(At=Et-l/2,Mt=Bt+B/2,Dt=l,At+Dt>m&&(Dt=m-At),0>At&&(Dt+=At,At=0),Nt=Pt-Bt,At<m&&0<Dt){ee&&Ut>=$t&&(Qt=0);var _e,Ce,Kt=new t.Cuboid(s,Dt,Nt,k,O,Jt,Qt,B,Lt,R,Y,w,y,W,re,ie,L);Ut>$t?(_e=[Pt,Gt],Ce=[Bt,zt]):(_e=[Bt,Gt],Ce=[Pt,zt]),!isNaN(Gt)&&!isNaN(zt)&&Et<m&&0<Et&&(be=t.line(s,[Et,Et],_e,Lt,R,B),ye=t.line(s,[Et,Et],Ce,Lt,R,B),t.setCN(e,be,this.bcn+"line-high"),q.className&&t.setCN(e,be,q.className,!0),t.setCN(e,ye,this.bcn+"line-low"),q.className&&t.setCN(e,ye,q.className,!0))}Kt&&(Ft=Kt.set,q.columnGraphics=Ft,G.push(Ft),Ft.translate(At,Mt-B/2),(q.url||this.showHandOnHover)&&Ft.setAttr("cursor","pointer"),be&&(G.push(be),G.push(ye)),Yt=Et,Ht=Pt,y?(Xt=Pt,Vt=Et,"open"==h&&(Vt=jt),"high"==h&&(Vt=Wt),"low"==h&&(Vt=Rt)):(Xt=Pt,"open"==h&&(Xt=Bt),"high"==h&&(Xt=Gt),"low"==h&&(Xt=zt),Vt=Et),N||(q.x=y?Mt+Dt/2:At+Dt/2,this.animateColumns(Kt,gt,Et,jt,Pt,Bt),this.addListeners(Ft,q)))}break;case"ohlc":if(!(isNaN($t)||isNaN(qt)||isNaN(Zt)||isNaN(Ut))){var Se=s.set();G.push(Se),Ut<$t&&(q.isNegative=!0,void 0!=at&&(te=at));var Te,ke,Oe;if(y){var Ae=Pt-l/2,Ae=t.fitToBounds(Ae,0,v),Me=t.fitToBounds(Pt,0,v),De=Pt+l/2,De=t.fitToBounds(De,0,v);ke=t.line(s,[jt,jt],[Ae,Me],te,R,B,W),0<Pt&&Pt<v&&(Te=t.line(s,[Rt,Wt],[Pt,Pt],te,R,B,W)),Oe=t.line(s,[Et,Et],[Me,De],te,R,B,W),Xt=Pt,Vt=Et,"open"==h&&(Vt=jt),"high"==h&&(Vt=Wt),"low"==h&&(Vt=Rt)}else{var Ne=Et-l/2,Ne=t.fitToBounds(Ne,0,m),Le=t.fitToBounds(Et,0,m),Fe=Et+l/2,Fe=t.fitToBounds(Fe,0,m);ke=t.line(s,[Ne,Le],[Bt,Bt],te,R,B,W),0<Et&&Et<m&&(Te=t.line(s,[Et,Et],[zt,Gt],te,R,B,W)),Oe=t.line(s,[Le,Fe],[Pt,Pt],te,R,B,W),Xt=Pt,"open"==h&&(Xt=Bt),"high"==h&&(Xt=Gt),"low"==h&&(Xt=zt),Vt=Et}G.push(ke),G.push(Te),G.push(Oe),t.setCN(e,ke,this.bcn+"stroke-open"),t.setCN(e,Oe,this.bcn+"stroke-close"),t.setCN(e,Te,this.bcn+"stroke"),q.className&&t.setCN(e,Se,q.className,!0),Yt=Et,Ht=Pt}}if(!N&&!isNaN(Ut)){var Ie=this.hideBulletsCount;if(this.end-this.start<=Ie||0===Ie){var Ee=this.createBullet(q,Vt,Xt,gt),Pe=this.labelText;if(Pe&&Ee){var je=this.createLabel(q,Vt,Xt,Pe);(je=this.positionLabel(Yt,Ht,je,Ee,Dt,Nt))&&this.allBullets.push(je)}if("regular"==A||"100%"==A){var Be=a.totalText;if(Be){var Re=this.createLabel(q,0,0,Be,a.totalTextColor);this.allBullets.push(Re);var ze,We,Ge=Re.getBBox(),Ye=Ge.width,He=Ge.height,Ve=a.totalTextOffset,Xe=a.totals[gt];Xe&&Xe.remove();var Ue=0;"column"!=o&&(Ue=this.bulletSize),y?(We=Pt,ze=0>Ut?Et-Ye/2-2-Ue-Ve:Et+Ye/2+3+Ue+Ve):(ze=Et,We=0>Ut?Pt+He/2+Ue+Ve:Pt-He/2-3-Ue-Ve),Re.translate(ze,We),a.totals[gt]=Re,y?(0>We||We>v)&&Re.remove():(0>ze||ze>m)&&Re.remove()}}}}}}"line"!=o&&"step"!=o&&"smoothedLine"!=o||("smoothedLine"==o?this.drawSmoothedGraph(C,S,mt,vt):this.drawLineGraph(C,S,mt,vt),N||this.launchAnimation()),this.bulletsHidden&&this.hideBullets(),this.customBulletsHidden&&this.hideCustomBullets()},animateColumns:function(t,e){var i=this,r=i.chart.startDuration;0<r&&!i.animationPlayed&&(i.seqAn?(t.set.hide(),i.animationArray.push(t),r=setTimeout(function(){i.animate.call(i)},r/(i.end-i.start+1)*(e-i.start)*1e3),i.timeOuts.push(r)):i.animate(t))},createLabel:function(e,i,r,n,s){var a=this.chart,o=e.labelColor;o||(o=this.color),o||(o=a.color),s&&(o=s),s=this.fontSize,void 0===s&&(this.fontSize=s=a.fontSize);var l=this.labelFunction;return n=a.formatString(n,e),n=t.cleanFromEmpty(n),l&&(n=l(e,n)),e=t.text(this.container,n,o,a.fontFamily,s),e.node.style.pointerEvents="none",e.translate(i,r),this.bulletSet.push(e),e},positiveClip:function(t){t.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(t){t.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(e,i,r,n){var s=this;if(1<e.length){var a=s.set,o=s.chart,l=s.container,h=l.set(),c=l.set();a.push(c),a.push(h);var u=s.lineAlpha,f=s.lineThickness,a=s.fillAlphas,d=s.lineColorR,p=s.negativeLineAlpha;isNaN(p)&&(p=u);var g=s.lineColorSwitched;g&&(d=g);var g=s.fillColorsR,m=s.fillColorsSwitched;m&&(g=m);var v=s.dashLength;(m=s.dashLengthSwitched)&&(v=m);var m=s.negativeLineColor,b=s.negativeFillColors,y=s.negativeFillAlphas,x=s.baseCoord;0!==s.negativeBase&&(x=s.valueAxis.getCoordinate(s.negativeBase),x>s.height&&(x=s.height),0>x&&(x=0)),u=t.line(l,e,i,d,u,f,v,!1,!0),t.setCN(o,u,s.bcn+"stroke"),h.push(u),h.click(function(t){s.handleGraphEvent(t,"clickGraph")}).mouseover(function(t){s.handleGraphEvent(t,"rollOverGraph")}).mouseout(function(t){s.handleGraphEvent(t,"rollOutGraph")}),void 0===m||s.useNegativeColorIfDown||(f=t.line(l,e,i,m,p,f,v,!1,!0),t.setCN(o,f,s.bcn+"stroke"),t.setCN(o,f,s.bcn+"stroke-negative"),c.push(f)),(0<a||0<y)&&(f=e.join(";").split(";"),p=i.join(";").split(";"),u=o.type,"serial"==u?0<r.length?(r.reverse(),n.reverse(),f=e.concat(r),p=i.concat(n)):s.rotate?(p.push(p[p.length-1]),f.push(x),p.push(p[0]),f.push(x),p.push(p[0]),f.push(f[0])):(f.push(f[f.length-1]),p.push(x),f.push(f[0]),p.push(x),f.push(e[0]),p.push(p[0])):"xy"==u&&(i=s.fillToAxis)&&(t.isString(i)&&(i=o.getValueAxisById(i)),"H"==i.orientation?(x="top"==i.position?0:i.viH,f.push(f[f.length-1]),p.push(x),f.push(f[0]),p.push(x),f.push(e[0]),p.push(p[0])):(x="left"==i.position?0:i.viW,p.push(p[p.length-1]),f.push(x),p.push(p[0]),f.push(x),p.push(p[0]),f.push(f[0]))),e=s.gradientRotation,0<a&&(i=t.polygon(l,f,p,g,a,1,"#000",0,e),i.pattern(s.pattern,NaN,o.path),t.setCN(o,i,s.bcn+"fill"),h.push(i)),(b||void 0!==m)&&(isNaN(y)&&(y=a),b||(b=m),l=t.polygon(l,f,p,b,y,1,"#000",0,e),t.setCN(o,l,s.bcn+"fill"),t.setCN(o,l,s.bcn+"fill-negative"),l.pattern(s.pattern,NaN,o.path),c.push(l),c.click(function(t){s.handleGraphEvent(t,"clickGraph")}).mouseover(function(t){s.handleGraphEvent(t,"rollOverGraph")}).mouseout(function(t){s.handleGraphEvent(t,"rollOutGraph")}))),s.applyMask(c,h)}},applyMask:function(t,e){var i=t.length();"serial"!=this.chart.type||this.scrollbar||(this.positiveClip(e),0<i&&this.negativeClip(t))},drawSmoothedGraph:function(e,i,r,n){if(1<e.length){var s=this.set,a=this.chart,o=this.container,l=o.set(),h=o.set();s.push(h),s.push(l);var c=this.lineAlpha,u=this.lineThickness,s=this.dashLength,f=this.fillAlphas,d=this.lineColorR,p=this.fillColorsR,g=this.negativeLineColor,m=this.negativeFillColors,v=this.negativeFillAlphas,b=this.baseCoord,y=this.lineColorSwitched;y&&(d=y),(y=this.fillColorsSwitched)&&(p=y),y=this.negativeLineAlpha,isNaN(y)&&(y=c),c=new t.Bezier(o,e,i,d,c,u,p,0,s),t.setCN(a,c,this.bcn+"stroke"),l.push(c.path),void 0!==g&&(u=new t.Bezier(o,e,i,g,y,u,p,0,s),t.setCN(a,u,this.bcn+"stroke"),t.setCN(a,u,this.bcn+"stroke-negative"),h.push(u.path)),0<f&&(c=e.join(";").split(";"),d=i.join(";").split(";"),u="",0<r.length?(r.push("M"),n.push("M"),r.reverse(),n.reverse(),c=e.concat(r),d=i.concat(n)):(this.rotate?(u+=" L"+b+","+i[i.length-1],u+=" L"+b+","+i[0]):(u+=" L"+e[e.length-1]+","+b,u+=" L"+e[0]+","+b),u+=" L"+e[0]+","+i[0]),r=new t.Bezier(o,c,d,NaN,0,0,p,f,s,u),t.setCN(a,r,this.bcn+"fill"),r.path.pattern(this.pattern,NaN,a.path),l.push(r.path),m||void 0!==g)&&(v||(v=f),m||(m=g),e=new t.Bezier(o,e,i,NaN,0,0,m,v,s,u),e.path.pattern(this.pattern,NaN,a.path),t.setCN(a,e,this.bcn+"fill"),t.setCN(a,e,this.bcn+"fill-negative"),h.push(e.path)),this.applyMask(h,l)}},launchAnimation:function(){var e=this,i=e.chart.startDuration;if(0<i&&!e.animationPlayed){var r=e.set,n=e.bulletSet;t.VML||(r.attr({opacity:e.startAlpha}),n.attr({opacity:e.startAlpha})),r.hide(),n.hide(),e.seqAn?(i=setTimeout(function(){e.animateGraphs.call(e)},e.index*i*1e3),e.timeOuts.push(i)):e.animateGraphs()}},animateGraphs:function(){var t=this.chart,e=this.set,i=this.bulletSet,r=this.x,n=this.y;e.show(),i.show();var s=t.startDuration,t=t.startEffect;e&&(this.rotate?(e.translate(-1e3,n),i.translate(-1e3,n)):(e.translate(r,-1e3),i.translate(r,-1e3)),e.animate({opacity:1,translate:r+","+n},s,t),i.animate({opacity:1,translate:r+","+n},s,t))},animate:function(e){var i=this.chart,r=this.animationArray;!e&&0<r.length&&(e=r[0],r.shift()),r=t[t.getEffect(i.startEffect)],i=i.startDuration,e&&(this.rotate?e.animateWidth(i,r):e.animateHeight(i,r),e.set.show())},legendKeyColor:function(){var t=this.legendColor,e=this.lineAlpha;return void 0===t&&(t=this.lineColorR,0===e&&(e=this.fillColorsR)&&(t="object"==typeof e?e[0]:e)),t},legendKeyAlpha:function(){var t=this.legendAlpha;return void 0===t&&(t=this.lineAlpha,this.fillAlphas>t&&(t=this.fillAlphas),0===t&&(t=this.bulletAlpha),0===t&&(t=1)),t},createBullet:function(e,i,r){if(!isNaN(i)&&!isNaN(r)){var n=this.chart,s=this.container,a=this.bulletOffset,o=this.bulletSize;isNaN(e.bulletSize)||(o=e.bulletSize);var l=e.values.value,h=this.maxValue,c=this.minValue,u=this.maxBulletSize,f=this.minBulletSize;isNaN(h)||(isNaN(l)||(o=(l-c)/(h-c)*(u-f)+f),c==h&&(o=u)),h=o,this.bulletAxis&&(o=e.values.error,isNaN(o)||(l=o),o=this.bulletAxis.stepWidth*l),o<this.minBulletSize&&(o=this.minBulletSize),this.rotate?i=e.isNegative?i-a:i+a:r=e.isNegative?r+a:r-a;var d,f=this.bulletColorR;e.lineColor&&(this.bulletColorSwitched=e.lineColor),this.bulletColorSwitched&&(f=this.bulletColorSwitched),e.isNegative&&void 0!==this.bulletColorNegative&&(f=this.bulletColorNegative),void 0!==e.color&&(f=e.color);var p;"xy"==n.type&&this.valueField&&(p=this.pattern,e.pattern&&(p=e.pattern)),a=this.bullet,e.bullet&&(a=e.bullet);var l=this.bulletBorderThickness,c=this.bulletBorderColorR,u=this.bulletBorderAlpha,g=this.bulletAlpha;c||(c=f),this.useLineColorForBulletBorder&&(c=this.lineColorR);var m=e.alpha;return isNaN(m)||(g=m),("none"!=this.bullet||e.bullet)&&(d=t.bullet(s,a,o,f,g,l,c,u,h,0,p,n.path)),(this.customBullet||e.customBullet)&&(p=this.customBullet,e.customBullet&&(p=e.customBullet),p&&(d&&d.remove(),"function"==typeof p?(d=new p,d.chart=n,e.bulletConfig&&(d.availableSpace=r,d.graph=this,d.graphDataItem=e,d.bulletY=r,e.bulletConfig.minCoord=this.minCoord-r,d.bulletConfig=e.bulletConfig),d.write(s),d=d.set):(d=s.set(),s=s.image(p,0,0,o,o),d.push(s),this.centerCustomBullets&&s.translate(-o/2,-o/2)))),d&&((e.url||this.showHandOnHover)&&d.setAttr("cursor","pointer"),"serial"!=n.type&&"gantt"!=n.type||(-.5>i-0||i-0>this.width||r<-o/2||r-0>this.height)&&(d.remove(),d=null),d&&(this.bulletSet.push(d),d.translate(i,r),this.addListeners(d,e),this.allBullets.push(d)),e.bx=i,e.by=r,t.setCN(n,d,this.bcn+"bullet"),e.className&&t.setCN(n,d,e.className,!0)),d?(d.size=o||0,e.bulletGraphics=d):d={size:0},d.graphDataItem=e,d}},showBullets:function(){var t,e=this.allBullets;for(this.bulletsHidden=!1,t=0;t<e.length;t++)e[t].show()},hideBullets:function(){var t,e=this.allBullets;for(this.bulletsHidden=!0,t=0;t<e.length;t++)e[t].hide()},showCustomBullets:function(){var t,e=this.allBullets;for(this.customBulletsHidden=!1,t=0;t<e.length;t++)e[t].graphDataItem.customBullet&&e[t].show()},hideCustomBullets:function(){var t,e=this.allBullets;for(this.customBulletsHidden=!0,t=0;t<e.length;t++)e[t].graphDataItem.customBullet&&e[t].hide()},addListeners:function(t,e){var i=this;t.mouseover(function(t){i.handleRollOver(e,t)}).mouseout(function(t){i.handleRollOut(e,t)}).touchend(function(t){i.handleRollOver(e,t),i.chart.panEventsEnabled&&i.handleClick(e,t)}).touchstart(function(t){i.handleRollOver(e,t)}).click(function(t){i.handleClick(e,t)}).dblclick(function(t){i.handleDoubleClick(e,t)}).contextmenu(function(t){i.handleRightClick(e,t)})},handleRollOver:function(e,i){if(e){var r=this.chart,n={type:"rollOverGraphItem",item:e,index:e.index,graph:this,target:this,chart:this.chart,event:i};if(this.fire("rollOverGraphItem",n),r.fire("rollOverGraphItem",n),clearTimeout(r.hoverInt),n=this.showBalloon,!r.chartCursor||"serial"!=r.type&&"gantt"!=r.type||(n=!1,!r.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(n=!0)),n){var n=r.formatString(this.balloonText,e,!0),s=this.balloonFunction;s&&(n=s(e,e.graph)),n=t.cleanFromEmpty(n),s=r.getBalloonColor(this,e),r.balloon.showBullet=!1,r.balloon.pointerOrientation="V";var a=e.x,o=e.y;r.rotate&&(a=e.y,o=e.x),""!==n?r.showBalloon(n,s,!0,a+r.marginLeftReal,o+r.marginTopReal):this.chart.hideBalloonReal()}else this.chart.hideBalloonReal()}this.handleGraphEvent(i,"rollOverGraph")},handleRollOut:function(t,e){if(this.chart.hideBalloon(),t){var i={type:"rollOutGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("rollOutGraphItem",i),this.chart.fire("rollOutGraphItem",i)}this.handleGraphEvent(e,"rollOutGraph")},handleClick:function(e,i){if(e){var r={type:"clickGraphItem",item:e,index:e.index,graph:this,target:this,chart:this.chart,event:i};this.fire("clickGraphItem",r),this.chart.fire("clickGraphItem",r),t.getURL(e.url,this.urlTarget)}this.handleGraphEvent(i,"clickGraph")},handleGraphEvent:function(t,e){var i={type:e,graph:this,target:this,chart:this.chart,event:t};this.fire(e,i),this.chart.fire(e,i)},handleRightClick:function(t,e){if(t){var i={type:"rightClickGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("rightClickGraphItem",i),this.chart.fire("rightClickGraphItem",i)}},handleDoubleClick:function(t,e){if(t){var i={type:"doubleClickGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("doubleClickGraphItem",i),this.chart.fire("doubleClickGraphItem",i)}},zoom:function(t,e){this.start=t,this.end=e,this.draw()},changeOpacity:function(t){var e=this.set;if(e&&e.setAttr("opacity",t),e=this.ownColumns){var i;for(i=0;i<e.length;i++){var r=e[i].set;r&&r.setAttr("opacity",t)}}(e=this.bulletSet)&&e.setAttr("opacity",t)},destroy:function(){t.remove(this.set),t.remove(this.bulletSet);var e=this.timeOuts;if(e){var i;for(i=0;i<e.length;i++)clearTimeout(e[i])}this.timeOuts=[]}})}(),function(){var t=window.AmCharts;t.ChartCursor=t.Class({construct:function(e){this.cname="ChartCursor",this.createEvents("changed","zoomed","onHideCursor","draw","selected","moved"),this.enabled=!0,this.cursorAlpha=1,this.selectionAlpha=.2,this.cursorColor="#CC0000",this.categoryBalloonAlpha=1,this.color="#FFFFFF",this.type="cursor",this.zoomed=!1,this.zoomable=!0,this.pan=!1,this.categoryBalloonDateFormat="MMM DD, YYYY",this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0,this.rolledOver=!1,this.cursorPosition="middle",this.bulletsEnabled=this.skipZoomDispatch=!1,this.bulletSize=8,this.selectWithoutZooming=this.oneBalloonOnly=!1,this.graphBulletSize=1.7,this.animationDuration=.3,this.zooming=!1,this.adjustment=0,this.avoidBalloonOverlapping=!0,this.leaveCursor=!1,t.applyTheme(this,e,this.cname)},draw:function(){this.destroy();var e=this.chart,i=e.container;this.rotate=e.rotate,this.container=i,i=i.set(),i.translate(this.x,this.y),this.set=i,e.cursorSet.push(i),i=new t.AmBalloon,i.className="category",i.chart=e,this.categoryBalloon=i,t.copyProperties(e.balloon,i),i.cornerRadius=0,i.shadowAlpha=0,i.borderThickness=1,i.borderAlpha=1,i.showBullet=!1;var r=this.categoryBalloonColor;if(void 0===r&&(r=this.cursorColor),i.fillColor=r,i.balloonColor=r,i.fillAlpha=this.categoryBalloonAlpha,i.borderColor=r,i.color=this.color,r=this.valueLineAxis,t.isString(r)&&(r=e.getValueAxisById(r)),r||(r=e.valueAxes[0]),this.valueLineAxis=r,this.valueLineBalloonEnabled&&(this.vaBalloon=r=new t.AmBalloon,t.copyProperties(i,r),r.animationDuration=0,this.rotate||(r.pointerOrientation="H")),this.rotate&&(i.pointerOrientation="H"),this.extraWidth=0,this.prevX=[],this.prevY=[],this.prevTX=[],this.prevTY=[],this.valueBalloonsEnabled)for(i=0;i<e.graphs.length;i++)r=new t.AmBalloon,r.className=e.graphs[i].id,r.chart=e,t.copyProperties(e.balloon,r),e.graphs[i].valueBalloon=r;"cursor"==this.type?this.createCursor():this.createCrosshair()},updateData:function(){var t=this.chart;this.data=t.chartData,this.firstTime=t.firstTime,this.lastTime=t.lastTime},createCursor:function(){var e,i,r,n,s=this.chart,a=this.cursorAlpha,o=s.categoryAxis,l=this.categoryBalloon;r=s.dx,n=s.dy;var h=this.width,c=this.height,u=s.rotate;l.pointerWidth=o.tickLength,u?(e=[0,h,h+r],i=[0,0,n],r=[r,0,0],n=[n,0,c]):(e=[r,0,0],i=[n,0,c],r=[0,h,h+r],n=[0,0,n]),e=t.line(this.container,e,i,this.cursorColor,a,1),t.setCN(s,e,"cursor-line"),this.line=e,e.node.style.pointerEvents="none",(i=this.fullRectSet)?(i.push(e),i.translate(this.x,this.y)):this.set.push(e),this.valueLineEnabled&&(e=this.valueLineAlpha,isNaN(e)||(a=e),a=t.line(this.container,r,n,this.cursorColor,a,1),a.node.style.pointerEvents="none",t.setCN(s,a,"cursor-value-line"),this.vLine=a,this.set.push(a)),this.setBalloonBounds(l,o,u),(s=this.vaBalloon)&&this.setBalloonBounds(s,this.valueLineAxis,!u),this.hideCursor()},createCrosshair:function(){var e=this.cursorAlpha,i=this.container,r=t.line(i,[0,0],[0,this.height],this.cursorColor,e,1),e=t.line(i,[0,this.width],[0,0],this.cursorColor,e,1);t.setCN(this.chart,r,"cursor-line"),t.setCN(this.chart,e,"cursor-line"),this.set.push(r),this.set.push(e),this.vLine=r,this.hLine=e,this.hideCursor()},update:function(){var t=this.chart;if(t.mouseIsOver){var e=t.mouseX-this.x,i=t.mouseY-this.y;-.5<e&&e<this.width+1&&0<i&&i<this.height?(this.drawing?this.rolledOver||t.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||t.setMouseCursor("move")),this.rolledOver=!0,(this.valueLineEnabled||this.valueLineBalloonEnabled)&&this.updateVLine(e,i),this.setPosition()):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}else this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)},updateVLine:function(t,e){var i=this.vLine,r=this.vaBalloon;if((i||r)&&!this.panning&&!this.drawing){i&&i.show();var n,s=this.valueLineAxis,a=this.rotate;
if(a?(i&&i.translate(t,0),s&&(n=s.coordinateToValue(t)),i=t):(i&&i.translate(0,e),s&&(n=s.coordinateToValue(e)),i=e-1),r&&!isNaN(n)&&this.prevLineValue!=n){var o=s.formatValue(n,!0);this.setBalloonPosition(r,s,i,!a),r.showBalloon(o)}this.prevLineValue=n}},getMousePosition:function(){var t,e=this.width,i=this.height;return t=this.chart,this.rotate?(t=t.mouseY-this.y,0>t&&(t=0),t>i&&(t=i)):(t=t.mouseX-this.x-1,0>t&&(t=0),t>e&&(t=e)),t},updateCrosshair:function(){var e=this.chart,i=e.mouseX-this.x,r=e.mouseY-this.y,n=this.vLine,s=this.hLine,i=t.fitToBounds(i,0,this.width),r=t.fitToBounds(r,0,this.height);n&&0<this.cursorAlpha&&(n.show(),s.show(),n.translate(i,0),s.translate(0,r)),this.zooming&&(e.hideXScrollbar&&(i=NaN),e.hideYScrollbar&&(r=NaN),this.updateSelectionSize(i,r)),this.fireMoved(),e.mouseIsOver||this.zooming||this.hideCursor()},fireMoved:function(){var t=this.chart,e={type:"moved",target:this};e.chart=t,e.zooming=this.zooming,e.x=t.mouseX-this.x,e.y=t.mouseY-this.y,this.fire("moved",e)},updateSelectionSize:function(e,i){t.remove(this.selection);var r=this.selectionPosX,n=this.selectionPosY,s=0,a=0,o=this.width,l=this.height;isNaN(e)||(r>e&&(s=e,o=r-e),r<e&&(s=r,o=e-r),r==e&&(s=e,o=0),o+=this.extraWidth,s-=this.extraWidth/2),isNaN(i)||(n>i&&(a=i,l=n-i),n<i&&(a=n,l=i-n),n==i&&(a=i,l=0),l+=this.extraWidth,a-=this.extraWidth/2),0<o&&0<l&&(r=t.rect(this.container,o,l,this.cursorColor,this.selectionAlpha),t.setCN(this.chart,r,"cursor-selection"),r.translate(s+this.x,a+this.y),this.selection=r)},arrangeBalloons:function(){var t=this.valueBalloons,e=this.x,i=this.y,r=this.height+i;t.sort(this.compareY);var n;for(n=0;n<t.length;n++){var s=t[n].balloon;s.setBounds(e,i,e+this.width,r),s.prevX=this.prevX[n],s.prevY=this.prevY[n],s.prevTX=this.prevTX[n],s.prevTY=this.prevTY[n],s.draw(),r=s.yPos-3}this.arrangeBalloons2()},compareY:function(t,e){return t.yy<e.yy?1:-1},arrangeBalloons2:function(){var t=this.valueBalloons;t.reverse();var e,i,r,n=this.x,s=t.length;for(r=0;r<s;r++){var a=t[r].balloon;e=a.bottom;var o=a.bottom-a.yPos,l=s-r-1;0<r&&e-o<i+3&&(a.setBounds(n,i+3,n+this.width,i+o+3),a.prevX=this.prevX[l],a.prevY=this.prevY[l],a.prevTX=this.prevTX[l],a.prevTY=this.prevTY[l],a.draw()),a.set&&a.set.show(),this.prevX[l]=a.prevX,this.prevY[l]=a.prevY,this.prevTX[l]=a.prevTX,this.prevTY[l]=a.prevTY,i=a.bottom}},showBullets:function(){t.remove(this.allBullets);var e=this.container,i=e.set();this.set.push(i),this.set.show(),this.allBullets=i;var r,i=this.chart.graphs;for(r=0;r<i.length;r++){var n=i[r];if(!n.hidden&&n.balloonText){var s=this.data[this.index].axes[n.valueAxis.id].graphs[n.id],a=s.y;if(!isNaN(a)){var o,l;o=s.x,this.rotate?(l=a,a=o):l=o,n=t.circle(e,this.bulletSize/2,this.chart.getBalloonColor(n,s,!0),n.cursorBulletAlpha),n.translate(l,a),this.allBullets.push(n)}}}},destroy:function(){this.clear(),t.remove(this.selection),this.selection=null;var e=this.categoryBalloon;e&&e.destroy(),(e=this.vaBalloon)&&e.destroy(),this.destroyValueBalloons(),t.remove(this.set)},clear:function(){},destroyValueBalloons:function(){var t=this.valueBalloons;if(t){var e;for(e=0;e<t.length;e++)t[e].balloon.hide()}},zoom:function(e,i,r,n){var s=this.chart;this.destroyValueBalloons(),this.zooming=!1;var a;if(this.rotate?this.selectionPosY=a=s.mouseY:this.selectionPosX=a=s.mouseX,this.start=e,this.end=i,this.startTime=r,this.endTime=n,this.zoomed=!0,n=s.categoryAxis,a=this.rotate,i=this.width,r=this.height,e=n.stepWidth,this.fullWidth){var o=1;n.parseDates&&!n.equalSpacing&&(o=n.minDuration()),a?this.extraWidth=r=e*o:(this.extraWidth=i=e*o,this.categoryBalloon.minWidth=i),this.line&&this.line.remove(),this.line=t.rect(this.container,i,r,this.cursorColor,this.cursorAlpha,0),this.line.node.style.pointerEvents="none",t.setCN(s,this.line,"cursor-fill"),this.fullRectSet&&this.fullRectSet.push(this.line)}this.stepWidth=e,this.tempVal=this.valueBalloonsEnabled,this.valueBalloonsEnabled=!1,this.setPosition(),this.valueBalloonsEnabled=this.tempVal,this.hideCursor()},hideObj:function(t){t&&t.hide()},hideCursor:function(e){void 0===e&&(e=!0),this.leaveCursor||(this.hideObj(this.set),this.hideObj(this.categoryBalloon),this.hideObj(this.line),this.hideObj(this.vLine),this.hideObj(this.hLine),this.hideObj(this.vaBalloon),this.hideObj(this.allBullets),this.destroyValueBalloons(),this.selectWithoutZooming||t.remove(this.selection),this.previousIndex=NaN,e&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this}),this.drawing||this.chart.setMouseCursor("auto"),this.normalizeBulletSize())},setPosition:function(e,i,r){void 0===i&&(i=!0),"cursor"==this.type?(this.tempPosition=NaN,t.ifArray(this.data)&&(isNaN(e)&&(e=this.getMousePosition()),(e!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(e)&&("mouse"==this.cursorPosition&&(this.tempPosition=e),isNaN(r)&&(r=this.chart.categoryAxis.xToIndex(e)),r!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(r,i),this.zoomed=!1),this.previousMousePosition=e)):this.updateCrosshair()},normalizeBulletSize:function(){var t=this.resizedBullets;if(t)for(var e=0;e<t.length;e++){var i=t[e],r=i.bulletGraphics;r&&(r.translate(i.bx,i.by,1),i=i.graph,isNaN(this.graphBulletAlpha)||(r.setAttr("fill-opacity",i.bulletAlpha),r.setAttr("stroke-opacity",i.bulletBorderAlpha)))}},updateCursor:function(e,i){var r=this.chart,n=this.fullWidth,s=r.mouseX-this.x,a=r.mouseY-this.y;if(this.drawingNow&&(t.remove(this.drawingLine),this.drawingLine=t.line(this.container,[this.x+this.drawStartX,this.x+s],[this.y+this.drawStartY,this.y+a],this.cursorColor,1,1)),this.enabled){void 0===i&&(i=!0),this.index=e+=this.adjustment;var o=r.categoryAxis,l=r.dx,h=r.dy,c=this.x+1,u=this.y+1,f=this.width,d=this.height,p=this.data[e];if(this.fireMoved(),p){var g=p.x[o.id],m=r.rotate,v=this.stepWidth,b=this.categoryBalloon,y=this.firstTime,x=this.lastTime,w=this.cursorPosition,_=this.zooming,C=this.panning,S=r.graphs;if(r.mouseIsOver||_||C||this.forceShow)if(this.forceShow=!1,C){var l=this.panClickPos,r=this.panClickEndTime,_=this.panClickStartTime,T=this.panClickEnd,c=this.panClickStart,s=(m?l-a:l-s)/v;o.parseDates&&!o.equalSpacing||(s=Math.round(s)),0!==s&&(l={type:"zoomed",target:this},l.chart=this.chart,o.parseDates&&!o.equalSpacing?(r+s>x&&(s=x-r),_+s<y&&(s=y-_),l.start=Math.round(_+s),l.end=Math.round(r+s),this.fire(l.type,l)):T+s>=this.data.length||0>c+s||(l.start=c+s,l.end=T+s,this.fire(l.type,l)))}else{if("start"==w?g-=o.cellWidth/2:"mouse"==w&&(r.mouseIsOver?g=m?a-2:s-2:isNaN(this.tempPosition)||(g=this.tempPosition-2)),m){if(0>g){if(!_)return void this.hideCursor();g=0}if(g>d+1){if(!_)return void this.hideCursor();g=d+1}}else{if(0>g){if(!_)return void this.hideCursor();g=0}if(g>f){if(!_)return void this.hideCursor();g=f}}if(y=this.line,0<this.cursorAlpha&&(m?(x=0,v=g+h,n&&(v-=o.cellWidth/2)):(x=g,v=0,n&&(x-=o.cellWidth/2)),w=this.animationDuration,0<w&&!this.zooming?isNaN(this.previousX)?y.translate(x,v):(y.translate(this.previousX,this.previousY),y.animate({translate:x+","+v},w,"easeOutSine")):y.translate(x,v),this.previousX=x,this.previousY=v,y.show()),this.linePos=m?g+h:g,_&&(n&&y.hide(),m?this.updateSelectionSize(NaN,g):this.updateSelectionSize(g,NaN)),v=!0,_&&(v=!1),this.categoryBalloonEnabled&&v?(this.setBalloonPosition(b,o,g,m),(y=this.categoryBalloonFunction)?b.showBalloon(y(p.category)):o.parseDates?(o=t.formatDate(p.category,this.categoryBalloonDateFormat,r),-1!=o.indexOf("fff")&&(o=t.formatMilliseconds(o,p.category)),b.showBalloon(o)):b.showBalloon(t.fixNewLines(p.category))):b.hide(),S&&this.bulletsEnabled&&this.showBullets(),this.oneBalloonOnly){for(g=1/0,o=0;o<S.length;o++)b=S[o],b.showBalloon&&!b.hidden&&b.balloonText&&(y=p.axes[b.valueAxis.id].graphs[b.id],x=y.y,isNaN(x)||(m?Math.abs(s-x)<g&&(g=Math.abs(s-x),T=b):Math.abs(a-x)<g&&(g=Math.abs(a-x),T=b)));this.mostCloseGraph&&(T=this.mostCloseGraph)}if((e!=this.previousIndex||T!=this.previousMostCloseGraph)&&(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],S&&this.valueBalloonsEnabled&&v&&r.balloon.enabled)){for(this.valueBalloons=g=[],o=0;o<S.length;o++)if(b=S[o],x=NaN,(!this.oneBalloonOnly||b==T)&&b.showBalloon&&!b.hidden&&b.balloonText&&("step"==b.type&&"left"==b.stepDirection&&(p=this.data[e+1]),p)){if((y=p.axes[b.valueAxis.id].graphs[b.id])&&(x=y.y),this.showNextAvailable&&isNaN(x)&&e+1<this.data.length)for(v=e+1;v<this.data.length&&(!(n=this.data[v])||(y=n.axes[b.valueAxis.id].graphs[b.id],x=y.y,isNaN(x)));v++);isNaN(x)||(n=y.x,h=!0,m?(v=x,(0>n||n>d)&&(h=!1)):(v=n,n=x,(0>v||v>f+l+1)&&(h=!1)),h&&(h=this.graphBulletSize,w=this.graphBulletAlpha,1==h&&isNaN(w)||!t.isModern||!(C=y.bulletGraphics)||(C.translate(y.bx,y.by,h),this.resizedBullets.push(y),isNaN(w)||(C.setAttr("fill-opacity",w),C.setAttr("stroke-opacity",w))),h=b.valueBalloon,w=r.getBalloonColor(b,y),h.setBounds(c,u,c+f,u+d),h.pointerOrientation="H",C=this.balloonPointerOrientation,"vertical"==C&&(h.pointerOrientation="V"),"horizontal"==C&&(h.pointerOrientation="H"),h.changeColor(w),void 0!==b.balloonAlpha&&(h.fillAlpha=b.balloonAlpha),void 0!==b.balloonTextColor&&(h.color=b.balloonTextColor),h.setPosition(v+c,n+u),v=r.formatString(b.balloonText,y,!0),(n=b.balloonFunction)&&(v=n(y,b).toString()),""!==v&&(m?h.showBalloon(v):(h.text=v,h.show=!0),g.push({yy:x,balloon:h})),!m&&h.set&&(h.set.hide(),b=h.textDiv)&&(b.style.visibility="hidden")))}this.avoidBalloonOverlapping&&this.arrangeBalloons()}i?(l={type:"changed"},l.index=e,l.chart=this.chart,l.zooming=_,l.mostCloseGraph=T,l.position=m?a:s,l.target=this,r.fire("changed",l),this.fire("changed",l),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,r.updateLegendValues(e)),this.previousIndex=e,this.previousMostCloseGraph=T}}}else this.hideCursor()},setBalloonPosition:function(t,e,i,r){var n=e.position,s=e.inside;e=e.axisThickness;var a=this.chart,o=a.dx,a=a.dy,l=this.x,h=this.y,c=this.width,u=this.height;r?(s&&("right"==n?t.setBounds(l,h+a,l+c+o,h+i+a):t.setBounds(l,h+a,l+c+o,h+i)),"right"==n?s?t.setPosition(l+c+o,h+i+a):t.setPosition(l+c+o+e,h+i+a):s?t.setPosition(l,h+i):t.setPosition(l-e,h+i)):"top"==n?s?t.setPosition(l+i+o,h+a):t.setPosition(l+i+o,h+a-e+1):s?t.setPosition(l+i,h+u):t.setPosition(l+i,h+u+e-1)},setBalloonBounds:function(t,e,i){var r=e.position,n=e.inside,s=e.axisThickness,a=e.tickLength,o=this.chart,l=o.dx,o=o.dy,h=this.x,c=this.y,u=this.width,f=this.height;i?(n&&(t.pointerWidth=0),"right"==r?n?t.setBounds(h,c+o,h+u+l,c+f+o):t.setBounds(h+u+l+s,c+o,h+u+1e3,c+f+o):n?t.setBounds(h,c,u+h,f+c):t.setBounds(-1e3,-1e3,h-a-s,c+f+15)):(t.maxWidth=u,e.parseDates&&(a=0,t.pointerWidth=0),"top"==r?n?t.setBounds(h+l,c+o,u+l+h,f+c):t.setBounds(h+l,-1e3,u+l+h,c+o-a-s):n?t.setBounds(h,c,u+h,f+c-a):t.setBounds(h,c+f+a+s-1,h+u,c+f+a+s))},enableDrawing:function(t){this.enabled=!t,this.hideCursor(),this.rolledOver=!1,this.drawing=t},isZooming:function(t){t&&t!=this.zooming&&this.handleMouseDown("fake"),t||t==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled)if(this.zooming)this.setPosition();else{this.index=void 0;var t={type:"changed",index:void 0,target:this};t.chart=this.chart,this.fire("changed",t),this.hideCursor()}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var e,i=this.chart,r=this.data;if(i){var n=i.mouseX-this.x,s=i.mouseY-this.y;if(this.drawingNow){this.drawingNow=!1,t.remove(this.drawingLine),e=this.drawStartX;var a=this.drawStartY;(2<Math.abs(e-n)||2<Math.abs(a-s))&&(e={type:"draw",target:this,chart:i,initialX:e,initialY:a,finalX:n,finalY:s},this.fire(e.type,e))}if(this.enabled&&0<r.length){if(this.pan)this.rolledOver=!1;else if(this.zoomable&&this.zooming){if(e=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"},e.target=this,e.chart=i,"cursor"==this.type)this.rotate?this.selectionPosY=s:this.selectionPosX=s=n,4>Math.abs(s-this.initialMouse)&&this.fromIndex==this.index||(this.index<this.fromIndex?(e.end=this.fromIndex,e.start=this.index):(e.end=this.index,e.start=this.fromIndex),s=i.categoryAxis,s.parseDates&&!s.equalSpacing&&(r[e.start]&&(e.start=r[e.start].time),r[e.end]&&(e.end=i.getEndTime(r[e.end].time))),this.skipZoomDispatch||this.fire(e.type,e));else{var o=this.initialMouseX,l=this.initialMouseY;3>Math.abs(n-o)&&3>Math.abs(s-l)||(r=Math.min(o,n),a=Math.min(l,s),n=Math.abs(o-n),s=Math.abs(l-s),i.hideXScrollbar&&(r=0,n=this.width),i.hideYScrollbar&&(a=0,s=this.height),e.selectionHeight=s,e.selectionWidth=n,e.selectionY=a,e.selectionX=r,this.skipZoomDispatch||this.fire(e.type,e))}this.selectWithoutZooming||t.remove(this.selection)}this.skipZoomDispatch=!1}}this.panning=this.zooming=!1},showCursorAt:function(t){var e=this.chart.categoryAxis;t=e.parseDates?e.dateToCoordinate(t):e.categoryToCoordinate(t),this.previousMousePosition=NaN,this.forceShow=!0,this.setPosition(t,!1)},clearSelection:function(){t.remove(this.selection)},handleMouseDown:function(e){if(this.zoomable||this.pan||this.drawing){var i=this.rotate,r=this.chart,n=r.mouseX-this.x,s=r.mouseY-this.y;(0<n&&n<this.width&&0<s&&s<this.height||"fake"==e)&&(this.setPosition(),this.selectWithoutZooming&&t.remove(this.selection),this.drawing?(this.drawStartY=s,this.drawStartX=n,this.drawingNow=!0):this.pan?(this.zoomable=!1,r.setMouseCursor("move"),this.panning=!0,this.panClickPos=i?s:n,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,i?(this.initialMouse=s,this.selectionPosY=this.linePos):(this.initialMouse=n,this.selectionPosX=this.linePos)):(this.initialMouseX=n,this.initialMouseY=s,this.selectionPosX=n,this.selectionPosY=s),this.zooming=!0))}}})}(),function(){var t=window.AmCharts;t.SimpleChartScrollbar=t.Class({construct:function(e){this.createEvents("zoomed"),this.backgroundColor="#D4D4D4",this.backgroundAlpha=1,this.selectedBackgroundColor="#EFEFEF",this.scrollDuration=this.selectedBackgroundAlpha=1,this.resizeEnabled=!0,this.hideResizeGrips=!1,this.scrollbarHeight=20,this.updateOnReleaseOnly=!1,9>document.documentMode&&(this.updateOnReleaseOnly=!0),this.dragIconHeight=this.dragIconWidth=35,this.dragIcon="dragIconRoundBig",t.applyTheme(this,e,"SimpleChartScrollbar")},draw:function(){var e=this;if(e.destroy(),e.enabled){var i=e.chart.container,r=e.rotate,n=e.chart,s=i.set();e.set=s,n.scrollbarsSet.push(s);var a,o;if(r?(a=e.scrollbarHeight,o=n.plotAreaHeight):(o=e.scrollbarHeight,a=n.plotAreaWidth),e.width=a,(e.height=o)&&a){var l=t.rect(i,a,o,e.backgroundColor,e.backgroundAlpha,1,e.backgroundColor,e.backgroundAlpha);t.setCN(n,l,"scrollbar-bg"),e.bg=l,s.push(l),l=t.rect(i,a,o,"#000",.005),s.push(l),e.invisibleBg=l,l.click(function(){e.handleBgClick()}).mouseover(function(){e.handleMouseOver()}).mouseout(function(){e.handleMouseOut()}).touchend(function(){e.handleBgClick()}),l=t.rect(i,a,o,e.selectedBackgroundColor,e.selectedBackgroundAlpha),t.setCN(n,l,"scrollbar-bg-selected"),e.selectedBG=l,s.push(l),a=t.rect(i,a,o,"#000",.005),e.dragger=a,s.push(a),a.mousedown(function(t){e.handleDragStart(t)}).mouseup(function(){e.handleDragStop()}).mouseover(function(){e.handleDraggerOver()}).mouseout(function(){e.handleMouseOut()}).touchstart(function(t){e.handleDragStart(t)}).touchend(function(){e.handleDragStop()}),a=n.pathToImages,r?(l=a+e.dragIcon+"H.png",a=e.dragIconWidth,r=e.dragIconHeight):(l=a+e.dragIcon+".png",r=e.dragIconWidth,a=e.dragIconHeight),o=i.image(l,0,0,r,a),t.setCN(n,o,"scrollbar-grip-left"),l=i.image(l,0,0,r,a),t.setCN(n,l,"scrollbar-grip-right");var h=10,c=20;n.panEventsEnabled&&(h=25,c=e.scrollbarHeight);var u=t.rect(i,h,c,"#000",.005),f=t.rect(i,h,c,"#000",.005);f.translate(-(h-r)/2,-(c-a)/2),u.translate(-(h-r)/2,-(c-a)/2),r=i.set([o,f]),i=i.set([l,u]),e.iconLeft=r,s.push(e.iconLeft),e.iconRight=i,s.push(i),r.mousedown(function(){e.leftDragStart()}).mouseup(function(){e.leftDragStop()}).mouseover(function(){e.iconRollOver()}).mouseout(function(){e.iconRollOut()}).touchstart(function(){e.leftDragStart()}).touchend(function(){e.leftDragStop()}),i.mousedown(function(){e.rightDragStart()}).mouseup(function(){e.rightDragStop()}).mouseover(function(){e.iconRollOver()}).mouseout(function(){e.iconRollOut()}).touchstart(function(){e.rightDragStart()}).touchend(function(){e.rightDragStop()}),t.ifArray(n.chartData)?s.show():s.hide(),e.hideDragIcons(),e.clipDragger(!1)}s.translate(e.x,e.y),s.node.style.msTouchAction="none"}},updateScrollbarSize:function(t,e){t=Math.round(t),e=Math.round(e);var i,r,n,s,a=this.dragger;this.rotate?(i=0,r=t,n=this.width+1,s=e-t,a.setAttr("height",e-t),a.setAttr("y",r)):(i=t,r=0,n=e-t,s=this.height+1,a.setAttr("width",e-t),a.setAttr("x",i)),this.clipAndUpdate(i,r,n,s)},update:function(){var t,e,i,r=!1,n=this.x,s=this.y,a=this.dragger,o=this.getDBox();if(o){e=o.x+n,i=o.y+s;var l=o.width,o=o.height,h=this.rotate,c=this.chart,u=this.width,f=this.height,d=c.mouseX,p=c.mouseY;t=this.initialMouse,this.forceClip&&this.clipDragger(!0),c.mouseIsOver&&(this.dragging&&(c=this.initialCoord,h?(t=c+(p-t),0>t&&(t=0),c=f-o,t>c&&(t=c),a.setAttr("y",t)):(t=c+(d-t),0>t&&(t=0),c=u-l,t>c&&(t=c),a.setAttr("x",t)),this.clipDragger(!0)),this.resizingRight&&(h?(t=p-i,t+i>f+s&&(t=f-i+s),0>t?(this.resizingRight=!1,r=this.resizingLeft=!0):(0===t&&(t=.1),a.setAttr("height",t))):(t=d-e,t+e>u+n&&(t=u-e+n),0>t?(this.resizingRight=!1,r=this.resizingLeft=!0):(0===t&&(t=.1),a.setAttr("width",t))),this.clipDragger(!0)),this.resizingLeft&&(h?(e=i,i=p,i<s&&(i=s),i>f+s&&(i=f+s),t=!0===r?e-i:o+e-i,0>t?(this.resizingRight=!0,this.resizingLeft=!1,a.setAttr("y",e+o-s)):(0===t&&(t=.1),a.setAttr("y",i-s),a.setAttr("height",t))):(i=d,i<n&&(i=n),i>u+n&&(i=u+n),t=!0===r?e-i:l+e-i,0>t?(this.resizingRight=!0,this.resizingLeft=!1,a.setAttr("x",e+l-n)):(0===t&&(t=.1),a.setAttr("x",i-n),a.setAttr("width",t))),this.clipDragger(!0)))}},stopForceClip:function(){this.forceClip=!1},clipDragger:function(t){var e=this.getDBox();if(e){var i=e.x,r=e.y,n=e.width,e=e.height,s=!1;this.rotate?(i=0,n=this.width+1,(this.clipY!=r||this.clipH!=e)&&(s=!0)):(r=0,e=this.height+1,(this.clipX!=i||this.clipW!=n)&&(s=!0)),s&&(this.clipAndUpdate(i,r,n,e),t&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(t,e,i,r){this.clipX=t,this.clipY=e,this.clipW=i,this.clipH=r,this.selectedBG.clipRect(t,e,i,r),this.updateDragIconPositions(),this.maskGraphs(t,e,i,r)},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var t=this.chart;t.hideBalloon();var e=this.getDBox(),i=e.x,r=e.y,n=e.width,e=e.height;this.rotate?(i=r,n=this.height/e):n=this.width/n,t={type:"zoomed",position:i,chart:t,target:this,multiplier:n},this.fire(t.type,t)}},updateDragIconPositions:function(){var t,e,i=this.getDBox(),r=i.x,n=i.y,s=this.iconLeft,a=this.iconRight,o=this.scrollbarHeight;this.rotate?(t=this.dragIconWidth,e=this.dragIconHeight,s.translate((o-e)/2,n-t/2),a.translate((o-e)/2,n+i.height-t/2)):(t=this.dragIconHeight,e=this.dragIconWidth,s.translate(r-e/2,(o-t)/2),a.translate(r-e/2+i.width,(o-t)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){this.resizingLeft||this.resizingRight||this.dragging||(!this.hideResizeGrips&&this.resizeEnabled||(this.iconLeft.hide(),this.iconRight.hide()),this.removeCursors())},removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(t,e){this.enabled&&(this.dragger.stop(),this.multiplier=t,this.position=e,this.updateScrollbarSize(e,this.rotate?e+this.height/t:e+this.width/t),this.clipDragger())},destroy:function(){this.clear(),t.remove(this.set),t.remove(this.iconRight),t.remove(this.iconLeft)},clear:function(){},handleDragStart:function(){if(this.enabled){var t=this.chart;this.dragger.stop(),this.removeCursors(),this.dragging=!0;var e=this.getDBox();this.rotate?(this.initialCoord=e.y,this.initialMouse=t.mouseY):(this.initialCoord=e.x,this.initialMouse=t.mouseX)}},handleDragStop:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent()),this.dragging=!1,this.mouseIsOver&&this.removeCursors(),this.update()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop(),this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},rightDragStart:function(){this.dragger.stop(),this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("n-resize"):this.chart.setMouseCursor("e-resize"),this.handleMouseOver()},getDBox:function(){if(this.dragger)return this.dragger.getBBox()},handleBgClick:function(){var e=this;if(!e.resizingRight&&!e.resizingLeft){e.zooming=!0;var i,r,n=e.scrollDuration,s=e.dragger;i=e.getDBox();var a=i.height,o=i.width;r=e.chart;var l=e.y,h=e.x,c=e.rotate;c?(i="y",r=r.mouseY-a/2-l,r=t.fitToBounds(r,0,e.height-a)):(i="x",r=r.mouseX-o/2-h,r=t.fitToBounds(r,0,e.width-o)),e.updateOnReleaseOnly?(e.skipEvent=!1,s.setAttr(i,r),e.dispatchScrollbarEvent(),e.clipDragger()):(r=Math.round(r),c?s.animate({y:r},n,">"):s.animate({x:r},n,">"),e.forceClip=!0,clearTimeout(e.forceTO),e.forceTO=setTimeout(function(){e.stopForceClip.call(e)},5e3*n))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){this.set&&((this.resizingLeft||this.resizingRight||this.dragging)&&(this.updateOnRelease(),this.removeCursors()),this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1,this.hideDragIcons(),this.update())},handleMouseOver:function(){this.mouseIsOver=!0,this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1,this.hideDragIcons()}})}(),function(){var t=window.AmCharts;t.ChartScrollbar=t.Class({inherits:t.SimpleChartScrollbar,construct:function(e){this.cname="ChartScrollbar",t.ChartScrollbar.base.construct.call(this,e),this.enabled=!0,this.graphLineColor="#BBBBBB",this.graphLineAlpha=0,this.graphFillColor="#BBBBBB",this.graphFillAlpha=1,this.selectedGraphLineColor="#888888",this.selectedGraphLineAlpha=0,this.selectedGraphFillColor="#888888",this.selectedGraphFillAlpha=1,this.gridCount=0,this.gridColor="#FFFFFF",this.gridAlpha=.7,this.skipEvent=this.autoGridCount=!1,this.color="#FFFFFF",this.scrollbarCreated=!1,this.offset=0,this.oppositeAxis=!0,t.applyTheme(this,e,this.cname)},init:function(){var e=this.categoryAxis,i=this.chart;if(e||(this.categoryAxis=e=new t.CategoryAxis),e.chart=i,e.id="scrollbar",e.dateFormats=i.categoryAxis.dateFormats,e.markPeriodChange=i.categoryAxis.markPeriodChange,e.boldPeriodBeginning=i.categoryAxis.boldPeriodBeginning,e.axisItemRenderer=t.RecItem,e.axisRenderer=t.RecAxis,e.guideFillRenderer=t.RecFill,e.inside=!0,e.fontSize=this.fontSize,e.tickLength=0,e.axisAlpha=0,t.isString(this.graph)&&(this.graph=t.getObjById(i.graphs,this.graph)),e=this.graph){var r=this.valueAxis;r||(this.valueAxis=r=new t.ValueAxis,r.visible=!1,r.scrollbar=!0,r.axisItemRenderer=t.RecItem,r.axisRenderer=t.RecAxis,r.guideFillRenderer=t.RecFill,r.labelsEnabled=!1,r.chart=i),i=this.unselectedGraph,i||(i=new t.AmGraph,i.scrollbar=!0,this.unselectedGraph=i,i.negativeBase=e.negativeBase,i.noStepRisers=e.noStepRisers),i=this.selectedGraph,i||(i=new t.AmGraph,i.scrollbar=!0,this.selectedGraph=i,i.negativeBase=e.negativeBase,i.noStepRisers=e.noStepRisers)}this.scrollbarCreated=!0},draw:function(){var e=this;if(t.ChartScrollbar.base.draw.call(e),e.enabled){e.scrollbarCreated||e.init();var i=e.chart,r=i.chartData,n=e.categoryAxis,s=e.rotate,a=e.x,o=e.y,l=e.width,h=e.height,c=i.categoryAxis,u=e.set;if(n.setOrientation(!s),n.parseDates=c.parseDates,n.rotate=s,n.equalSpacing=c.equalSpacing,n.minPeriod=c.minPeriod,n.startOnAxis=c.startOnAxis,n.viW=l,n.viH=h,n.width=l,n.height=h,n.gridCount=e.gridCount,n.gridColor=e.gridColor,n.gridAlpha=e.gridAlpha,n.color=e.color,n.tickLength=0,n.axisAlpha=0,n.autoGridCount=e.autoGridCount,n.parseDates&&!n.equalSpacing&&n.timeZoom(i.firstTime,i.lastTime),n.zoom(0,r.length-1),c=e.graph){var f=e.valueAxis,d=c.valueAxis;f.id=d.id,f.rotate=s,f.setOrientation(s),f.width=l,f.height=h,f.viW=l,f.viH=h,f.dataProvider=r,f.reversed=d.reversed,f.logarithmic=d.logarithmic,f.gridAlpha=0,f.axisAlpha=0,u.push(f.set),s?(f.y=o,f.x=0):(f.x=a,f.y=0);var p,a=1/0,o=-(1/0);for(p=0;p<r.length;p++){var g,m=r[p].axes[d.id].graphs[c.id].values;for(g in m)if(m.hasOwnProperty(g)&&"percents"!=g&&"total"!=g){var v=m[g];v<a&&(a=v),v>o&&(o=v)}}1/0!=a&&(f.minimum=a),-(1/0)!=o&&(f.maximum=o+.1*(o-a)),a==o&&(--f.minimum,f.maximum+=1),void 0!==e.minimum&&(f.minimum=e.minimum),void 0!==e.maximum&&(f.maximum=e.maximum),f.zoom(0,r.length-1),g=e.unselectedGraph,g.id=c.id,g.bcn="scrollbar-graph-",g.rotate=s,g.chart=i,g.data=r,g.valueAxis=f,g.chart=c.chart,g.categoryAxis=e.categoryAxis,g.periodSpan=c.periodSpan,g.valueField=c.valueField,g.openField=c.openField,g.closeField=c.closeField,g.highField=c.highField,g.lowField=c.lowField,g.lineAlpha=e.graphLineAlpha,g.lineColorR=e.graphLineColor,g.fillAlphas=e.graphFillAlpha,g.fillColorsR=e.graphFillColor,g.connect=c.connect,g.hidden=c.hidden,g.width=l,g.height=h,g.pointPosition=c.pointPosition,g.stepDirection=c.stepDirection,g.periodSpan=c.periodSpan,d=e.selectedGraph,d.id=c.id,d.bcn=g.bcn+"selected-",d.rotate=s,d.chart=i,d.data=r,d.valueAxis=f,d.chart=c.chart,d.categoryAxis=n,d.periodSpan=c.periodSpan,d.valueField=c.valueField,d.openField=c.openField,d.closeField=c.closeField,d.highField=c.highField,d.lowField=c.lowField,d.lineAlpha=e.selectedGraphLineAlpha,d.lineColorR=e.selectedGraphLineColor,d.fillAlphas=e.selectedGraphFillAlpha,d.fillColorsR=e.selectedGraphFillColor,d.connect=c.connect,d.hidden=c.hidden,d.width=l,d.height=h,d.pointPosition=c.pointPosition,d.stepDirection=c.stepDirection,d.periodSpan=c.periodSpan,i=e.graphType,i||(i=c.type),g.type=i,d.type=i,r=r.length-1,g.zoom(0,r),d.zoom(0,r),d.set.click(function(){e.handleBackgroundClick()}).mouseover(function(){e.handleMouseOver()}).mouseout(function(){e.handleMouseOut()}),g.set.click(function(){e.handleBackgroundClick()}).mouseover(function(){e.handleMouseOver()}).mouseout(function(){e.handleMouseOut()}),u.push(g.set),u.push(d.set)}u.push(n.set),u.push(n.labelsSet),e.bg.toBack(),e.invisibleBg.toFront(),e.dragger.toFront(),e.iconLeft.toFront(),e.iconRight.toFront()}},timeZoom:function(e,i,r){this.startTime=e,this.endTime=i,this.timeDifference=i-e,this.skipEvent=!t.toBoolean(r),this.zoomScrollbar(),this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(t,e){this.start=t,this.end=e,this.skipEvent=!0,this.zoomScrollbar()},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var t,e,i=this.chart.chartData,r=this.dragger.getBBox();t=r.x;var n=r.y,s=r.width,r=r.height,a=this.chart;this.rotate?(t=n,e=r):e=s,s={type:"zoomed",target:this},s.chart=a;var o=this.categoryAxis,l=this.stepWidth,n=a.minSelectedTime,r=!1;o.parseDates&&!o.equalSpacing?(i=a.lastTime,a=a.firstTime,o=Math.round(t/l)+a,t=this.dragging?o+this.timeDifference:Math.round((t+e)/l)+a,o>t&&(o=t),0<n&&t-o<n&&(t=Math.round(o+(t-o)/2),r=Math.round(n/2),o=t-r,t+=r,r=!0),t>i&&(t=i),t-n<o&&(o=t-n),o<a&&(o=a),o+n>t&&(t=o+n),(o!=this.startTime||t!=this.endTime)&&(this.startTime=o,this.endTime=t,s.start=o,s.end=t,s.startDate=new Date(o),s.endDate=new Date(t),this.fire(s.type,s))):(o.startOnAxis||(t+=l/2),e-=this.stepWidth/2,n=o.xToIndex(t),t=o.xToIndex(t+e),(n!=this.start||this.end!=t)&&(o.startOnAxis&&(this.resizingRight&&n==t&&t++,this.resizingLeft&&n==t&&(0<n?n--:t=1)),this.start=n,this.end=this.dragging?this.start+this.difference:t,s.start=this.start,s.end=this.end,o.parseDates&&(i[this.start]&&(s.startDate=new Date(i[this.start].time)),i[this.end]&&(s.endDate=new Date(i[this.end].time))),this.fire(s.type,s))),r&&this.zoomScrollbar()}},zoomScrollbar:function(){var t,e;t=this.chart;var i=t.chartData,r=this.categoryAxis;r.parseDates&&!r.equalSpacing?(i=r.stepWidth,r=t.firstTime,t=i*(this.startTime-r),e=i*(this.endTime-r)):(t=i[this.start].x[r.id],e=i[this.end].x[r.id],i=r.stepWidth,r.startOnAxis||(r=i/2,t-=r,e+=r)),this.stepWidth=i,this.updateScrollbarSize(t,e)},maskGraphs:function(t,e,i,r){var n=this.selectedGraph;n&&n.set.clipRect(t,e,i,r)},handleDragStart:function(){t.ChartScrollbar.base.handleDragStart.call(this),this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){t.ChartScrollbar.base.handleBackgroundClick.call(this),this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}})}(),function(){var t=window.AmCharts;t.AmBalloon=t.Class({construct:function(e){this.cname="AmBalloon",this.enabled=!0,this.fillColor="#FFFFFF",this.fillAlpha=.8,this.borderThickness=2,this.borderColor="#FFFFFF",this.borderAlpha=1,this.cornerRadius=0,this.maxWidth=220,this.horizontalPadding=8,this.verticalPadding=4,this.pointerWidth=6,this.pointerOrientation="V",this.color="#000000",this.adjustBorderColor=!0,this.show=this.follow=this.showBullet=!1,this.bulletSize=3,this.shadowAlpha=.4,this.shadowColor="#000000",this.fadeOutDuration=this.animationDuration=.3,this.fixedPosition=!1,this.offsetY=6,this.offsetX=1,this.textAlign="center",this.disableMouseEvents=!0,this.deltaSignX=this.deltaSignY=1,t.isModern||(this.offsetY*=1.5),t.applyTheme(this,e,this.cname)},draw:function(){var e=this.pointToX,i=this.pointToY,r=this.chart;if(t.VML&&(this.fadeOutDuration=0),this.xAnim&&r.stopAnim(this.xAnim),this.yAnim&&r.stopAnim(this.yAnim),!isNaN(e)){var n=this.follow,s=r.container,a=this.set;if(t.remove(a),this.removeDiv(),a=s.set(),a.node.style.pointerEvents="none",this.set=a,r.balloonsSet.push(a),this.show){var o=this.l,l=this.t,h=this.r,c=this.b,u=this.balloonColor,f=this.fillColor,d=this.borderColor,p=f;void 0!=u&&(this.adjustBorderColor?p=d=u:f=u);var g=this.horizontalPadding,m=this.verticalPadding,v=this.pointerWidth,b=this.pointerOrientation,y=this.cornerRadius,x=r.fontFamily,w=this.fontSize;void 0==w&&(w=r.fontSize);var u=document.createElement("div"),_=r.classNamePrefix;u.className=_+"-balloon-div",this.className&&(u.className=u.className+" "+_+"-balloon-div-"+this.className),_=u.style,this.disableMouseEvents&&(_.pointerEvents="none"),_.position="absolute";var C=this.minWidth,S="";isNaN(C)||(S="min-width:"+(C-2*g)+"px; "),u.innerHTML="<div style='text-align:"+this.textAlign+"; "+S+"max-width:"+this.maxWidth+"px; font-size:"+w+"px; color:"+this.color+"; font-family:"+x+"'>"+this.text+"</div>",r.chartDiv.appendChild(u),this.textDiv=u,w=u.offsetWidth,x=u.offsetHeight,u.clientHeight&&(w=u.clientWidth,x=u.clientHeight),x+=2*m,S=w+2*g,!isNaN(C)&&S<C&&(S=C),window.opera&&(x+=2);var T=!1,w=this.offsetY;r.handDrawn&&(w+=r.handDrawScatter+2),"H"!=b?(C=e-S/2,i<l+x+10&&"down"!=b?(T=!0,n&&(i+=w),w=i+v,this.deltaSignY=-1):(n&&(i-=w),w=i-x-v,this.deltaSignY=1)):(2*v>x&&(v=x/2),w=i-x/2,e<o+(h-o)/2?(C=e+v,this.deltaSignX=-1):(C=e-S-v,this.deltaSignX=1)),w+x>=c&&(w=c-x),w<l&&(w=l),C<o&&(C=o),C+S>h&&(C=h-S);var k,l=w+m,c=C+g,m=this.shadowAlpha,O=this.shadowColor,g=this.borderThickness,A=this.bulletSize;0<y||0===v?(0<m&&(e=t.rect(s,S,x,f,0,g+1,O,m,this.cornerRadius),t.isModern?e.translate(1,1):e.translate(4,4),a.push(e)),f=t.rect(s,S,x,f,this.fillAlpha,g,d,this.borderAlpha,this.cornerRadius),this.showBullet&&(k=t.circle(s,A,p,this.fillAlpha),a.push(k))):(p=[],y=[],"H"!=b?(o=e-C,o>S-v&&(o=S-v),o<v&&(o=v),p=[0,o-v,e-C,o+v,S,S,0,0],y=T?[0,0,i-w,0,0,x,x,0]:[x,x,i-w,x,x,0,0,x]):(p=i-w,p>x-v&&(p=x-v),p<v&&(p=v),y=[0,p-v,i-w,p+v,x,x,0,0],p=e<o+(h-o)/2?[0,0,C<e?0:e-C,0,0,S,S,0]:[S,S,C+S>e?S:e-C,S,S,0,0,S]),0<m&&(e=t.polygon(s,p,y,f,0,g,O,m),e.translate(1,1),a.push(e)),f=t.polygon(s,p,y,f,this.fillAlpha,g,d,this.borderAlpha)),
this.bg=f,a.push(f),f.toFront(),t.setCN(r,f,"balloon-bg"),this.className&&t.setCN(r,f,"balloon-bg-"+this.className),s=1*this.deltaSignX,_.left=c+"px",_.top=l+"px",a.translate(C-s,w),f=f.getBBox(),this.bottom=w+x+1,this.yPos=f.y+w,k&&k.translate(this.pointToX-C+s,i-w),i=this.animationDuration,0<this.animationDuration&&!n&&!isNaN(this.prevX)&&(a.translate(this.prevX,this.prevY),a.animate({translate:C-s+","+w},i,"easeOutSine"),u&&(_.left=this.prevTX+"px",_.top=this.prevTY+"px",this.xAnim=r.animate({node:u},"left",this.prevTX,c,i,"easeOutSine","px"),this.yAnim=r.animate({node:u},"top",this.prevTY,l,i,"easeOutSine","px"))),this.prevX=C-s,this.prevY=w,this.prevTX=c,this.prevTY=l}}},followMouse:function(){if(this.follow&&this.show){var t=this.chart.mouseX-this.offsetX*this.deltaSignX,e=this.chart.mouseY;if(this.pointToX=t,this.pointToY=e,t!=this.previousX||e!=this.previousY)if(this.previousX=t,this.previousY=e,0===this.cornerRadius)this.draw();else{var i=this.set;if(i){var r=i.getBBox(),t=t-r.width/2,n=e-r.height-10;t<this.l&&(t=this.l),t>this.r-r.width&&(t=this.r-r.width),n<this.t&&(n=e+10),i.translate(t,n),e=this.textDiv.style,e.left=t+this.horizontalPadding+"px",e.top=n+this.verticalPadding+"px"}}}},changeColor:function(t){this.balloonColor=t},setBounds:function(t,e,i,r){this.l=t,this.t=e,this.r=i,this.b=r,this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(t){this.text=t,this.show=!0,this.destroyTO&&clearTimeout(this.destroyTO),t=this.chart,this.fadeAnim1&&t.stopAnim(this.fadeAnim1),this.fadeAnim2&&t.stopAnim(this.fadeAnim2),this.draw()},hide:function(t){var e=this;isNaN(t)&&(t=e.fadeOutDuration);var i=e.chart;if(0<t){e.destroyTO&&clearTimeout(e.destroyTO),e.destroyTO=setTimeout(function(){e.destroy.call(e)},1e3*t),e.follow=!1,e.show=!1;var r=e.set;r&&(r.setAttr("opacity",e.fillAlpha),e.fadeAnim1=r.animate({opacity:0},t,"easeInSine")),e.textDiv&&(e.fadeAnim2=i.animate({node:e.textDiv},"opacity",1,0,t,"easeInSine",""))}else e.show=!1,e.follow=!1,e.destroy()},setPosition:function(t,e,i){this.pointToX=t,this.pointToY=e,i&&(t==this.previousX&&e==this.previousY||this.draw()),this.previousX=t,this.previousY=e},followCursor:function(t){var e=this;(e.follow=t)?(e.pShowBullet=e.showBullet,e.showBullet=!1):void 0!==e.pShowBullet&&(e.showBullet=e.pShowBullet),clearInterval(e.interval);var i=e.chart.mouseX,r=e.chart.mouseY;!isNaN(i)&&t&&(e.pointToX=i-e.offsetX*e.deltaSignX,e.pointToY=r,e.followMouse(),e.interval=setInterval(function(){e.followMouse.call(e)},40))},removeDiv:function(){if(this.textDiv){var t=this.textDiv.parentNode;t&&t.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval),t.remove(this.set),this.removeDiv(),this.set=null}})}(),function(){var t=window.AmCharts;t.AmCoordinateChart=t.Class({inherits:t.AmChart,construct:function(e){t.AmCoordinateChart.base.construct.call(this,e),this.theme=e,this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.startAlpha=1,this.startDuration=0,this.startEffect="elastic",this.sequencedAnimation=!0,this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" "),this.balloonDateFormat="MMM DD, YYYY",this.valueAxes=[],this.graphs=[],this.guides=[],this.gridAboveGraphs=!1,t.applyTheme(this,e,"AmCoordinateChart")},initChart:function(){t.AmCoordinateChart.base.initChart.call(this);var e=this.categoryAxis;e&&(this.categoryAxis=t.processObject(e,t.CategoryAxis,this.theme)),this.processValueAxes(),this.createValueAxes(),this.processGraphs(),this.processGuides(),t.VML&&(this.startAlpha=1),this.setLegendData(this.graphs),this.gridAboveGraphs&&this.gridSet.toFront()},createValueAxes:function(){if(0===this.valueAxes.length){var e=new t.ValueAxis;this.addValueAxis(e)}},parseData:function(){this.processValueAxes(),this.processGraphs()},parseSerialData:function(e){var i,r=this.graphs,n={},s=this.seriesIdField;if(s||(s=this.categoryField),this.chartData=[],e){var a,o,l,h,c=!1,u=this.categoryAxis;u&&(c=u.parseDates,o=u.forceShowField,h=u.classNameField,l=u.labelColorField,a=u.categoryFunction);var f,d,p,g={};c&&(i=t.extractPeriod(u.minPeriod),f=i.period,d=i.count,p=t.getPeriodDuration(f,d));var m={};this.lookupTable=m;var v,b=this.dataDateFormat,y={};for(v=0;v<e.length;v++){var x={},w=e[v];if(i=w[this.categoryField],x.dataContext=w,x.category=a?a(i,w,u):String(i),o&&(x.forceShow=w[o]),h&&(x.className=w[h]),l&&(x.labelColor=w[l]),m[w[s]]=x,!c||(u.categoryFunction?i=u.categoryFunction(i,w,u):(!b||i instanceof Date||(i=i.toString()+" |"),i=t.getDate(i,b,u.minPeriod)),i=t.resetDateToMin(i,f,d,u.firstDayOfWeek),x.category=i,x.time=i.getTime(),!isNaN(x.time))){var _=this.valueAxes;x.axes={},x.x={};var C;for(C=0;C<_.length;C++){var S=_[C].id;x.axes[S]={},x.axes[S].graphs={};var T;for(T=0;T<r.length;T++){i=r[T];var k=i.id,O=1.1;isNaN(i.gapPeriod)||(O=i.gapPeriod);var A=i.periodValue;if(i.valueAxis.id==S){x.axes[S].graphs[k]={};var M={};M.index=v;var D=w;i.dataProvider&&(D=n),M.values=this.processValues(D,i,A),!i.connect&&y&&y[k]&&x.time-g[k]>=p*O&&(y[k].gap=!0),this.processFields(i,M,D),M.category=x.category,M.serialDataItem=x,M.graph=i,x.axes[S].graphs[k]=M,g[k]=x.time,y[k]=M}}}this.chartData[v]=x}}}for(e=0;e<r.length;e++)i=r[e],i.dataProvider&&this.parseGraphData(i)},processValues:function(e,i,r){var n,s={},a=!1;"candlestick"!=i.type&&"ohlc"!=i.type||""===r||(a=!0);for(var o="value error open close low high".split(" "),l=0;l<o.length;l++){var h=o[l];"value"!=h&&"error"!=h&&a&&(r=h.charAt(0).toUpperCase()+h.slice(1));var c=e[i[h+"Field"]+r];n=Number(c),isNaN(n)||(s[h]=n),"date"==i.valueAxis.type&&void 0!==c&&(n=t.getDate(c,i.chart.dataDateFormat),s[h]=n.getTime())}return s},parseGraphData:function(t){var e=t.dataProvider,i=t.seriesIdField;i||(i=this.seriesIdField),i||(i=this.categoryField);var r;for(r=0;r<e.length;r++){var n=e[r],s=this.lookupTable[String(n[i])],a=t.valueAxis.id;s&&(a=s.axes[a].graphs[t.id],a.serialDataItem=s,a.values=this.processValues(n,t,t.periodValue),this.processFields(t,a,n))}},addValueAxis:function(t){t.chart=this,this.valueAxes.push(t),this.validateData()},removeValueAxesAndGraphs:function(){var t,e=this.valueAxes;for(t=e.length-1;-1<t;t--)this.removeValueAxis(e[t])},removeValueAxis:function(t){var e,i=this.graphs;for(e=i.length-1;0<=e;e--){var r=i[e];r&&r.valueAxis==t&&this.removeGraph(r)}for(i=this.valueAxes,e=i.length-1;0<=e;e--)i[e]==t&&i.splice(e,1);this.validateData()},addGraph:function(t){this.graphs.push(t),this.chooseGraphColor(t,this.graphs.length-1),this.validateData()},removeGraph:function(t){var e,i=this.graphs;for(e=i.length-1;0<=e;e--)i[e]==t&&(i.splice(e,1),t.destroy());this.validateData()},processValueAxes:function(){var e,i=this.valueAxes;for(e=0;e<i.length;e++){var r=i[e],r=t.processObject(r,t.ValueAxis,this.theme);i[e]=r,r.chart=this,r.id||(r.id="valueAxisAuto"+e+"_"+(new Date).getTime()),void 0===r.usePrefixes&&(r.usePrefixes=this.usePrefixes)}},processGuides:function(){var e=this.guides,i=this.categoryAxis;if(e)for(var r=0;r<e.length;r++){var n=e[r];(void 0!==n.category||void 0!==n.date)&&i&&i.addGuide(n),n.id||(n.id="guideAuto"+r+"_"+(new Date).getTime());var s=n.valueAxis;s?(t.isString(s)&&(s=this.getValueAxisById(s)),s?s.addGuide(n):this.valueAxes[0].addGuide(n)):isNaN(n.value)||this.valueAxes[0].addGuide(n)}},processGraphs:function(){var e,i=this.graphs;for(e=0;e<i.length;e++){var r=i[e],r=t.processObject(r,t.AmGraph,this.theme);i[e]=r,this.chooseGraphColor(r,e),r.chart=this,t.isString(r.valueAxis)&&(r.valueAxis=this.getValueAxisById(r.valueAxis)),r.valueAxis||(r.valueAxis=this.valueAxes[0]),r.id||(r.id="graphAuto"+e+"_"+(new Date).getTime())}},formatString:function(e,i,r){var n=i.graph,s=n.valueAxis;return s.duration&&i.values.value&&(s=t.formatDuration(i.values.value,s.duration,"",s.durationUnits,s.maxInterval,s.numberFormatter),e=e.split("[[value]]").join(s)),e=t.massReplace(e,{"[[title]]":n.title,"[[description]]":i.description}),e=r?t.fixNewLines(e):t.fixBrakes(e),e=t.cleanFromEmpty(e)},getBalloonColor:function(t,e,i){var r=t.lineColor,n=t.balloonColor;return i&&(n=r),i=t.fillColorsR,"object"==typeof i?r=i[0]:void 0!==i&&(r=i),e.isNegative&&(i=t.negativeLineColor,t=t.negativeFillColors,"object"==typeof t?i=t[0]:void 0!==t&&(i=t),void 0!==i&&(r=i)),void 0!==e.color&&(r=e.color),void 0===n&&(n=r),n},getGraphById:function(e){return t.getObjById(this.graphs,e)},getValueAxisById:function(e){return t.getObjById(this.valueAxes,e)},processFields:function(e,i,r){if(e.itemColors){var n=e.itemColors,s=i.index;i.color=s<n.length?n[s]:t.randomColor()}for(n="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern gap className".split(" "),s=0;s<n.length;s++){var a=n[s],o=e[a+"Field"];o&&(o=r[o],t.isDefined(o)&&(i[a]=o))}i.dataContext=r},chooseGraphColor:function(e,i){if(e.lineColor)e.lineColorR=e.lineColor;else{var r;r=this.colors.length>i?this.colors[i]:t.randomColor(),e.lineColorR=r}e.fillColorsR=e.fillColors?e.fillColors:e.lineColorR,e.bulletBorderColorR=e.bulletBorderColor?e.bulletBorderColor:e.useLineColorForBulletBorder?e.lineColorR:e.bulletColor,e.bulletColorR=e.bulletColor?e.bulletColor:e.lineColorR,(r=this.patterns)&&(e.pattern=r[i])},handleLegendEvent:function(t){var e=t.type;if(t=t.dataItem,!this.legend.data&&t){var i=t.hidden,r=t.showBalloon;switch(e){case"clickMarker":this.textClickEnabled&&(r?this.hideGraphsBalloon(t):this.showGraphsBalloon(t));break;case"clickLabel":r?this.hideGraphsBalloon(t):this.showGraphsBalloon(t);break;case"rollOverItem":i||this.highlightGraph(t);break;case"rollOutItem":i||this.unhighlightGraph();break;case"hideItem":this.hideGraph(t);break;case"showItem":this.showGraph(t)}}},highlightGraph:function(t){var e,i=this.graphs,r=.2;if(this.legend&&(r=this.legend.rollOverGraphAlpha),1!=r)for(e=0;e<i.length;e++){var n=i[e];n!=t&&n.changeOpacity(r)}},unhighlightGraph:function(){var t;if(this.legend&&(t=this.legend.rollOverGraphAlpha),1!=t){t=this.graphs;var e;for(e=0;e<t.length;e++)t[e].changeOpacity(1)}},showGraph:function(t){t.switchable&&(t.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(t){t.switchable&&(this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),t.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(t){t.showBalloon=!1,this.updateLegend()},showGraphsBalloon:function(t){t.showBalloon=!0,this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var t=this.graphs;if(t){var e;for(e=0;e<t.length;e++)t[e].animationPlayed=!1}},animateAgain:function(){this.resetAnimation(),this.validateNow()}})}(),function(){var t=window.AmCharts;t.AmSlicedChart=t.Class({inherits:t.AmChart,construct:function(e){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),t.AmSlicedChart.base.construct.call(this,e),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[],this.maxLabelWidth=200,t.applyTheme(this,e,"AmSlicedChart")},initChart:function(){t.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData)),this.drawChart()},handleLegendEvent:function(t){var e=t.type,i=t.dataItem,r=this.legend;if(!r.data&&i){var n=i.hidden;switch(t=t.event,e){case"clickMarker":n||r.switchable||this.clickSlice(i,t);break;case"clickLabel":n||this.clickSlice(i,t,!1);break;case"rollOverItem":n||this.rollOverSlice(i,!1,t);break;case"rollOutItem":n||this.rollOutSlice(i,t);break;case"hideItem":this.hideSlice(i,t);break;case"showItem":this.showSlice(i,t)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var t=this.legend;t&&t.invalidateSize()},addEventListeners:function(t,e){var i=this;t.mouseover(function(t){i.rollOverSlice(e,!0,t)}).mouseout(function(t){i.rollOutSlice(e,t)}).touchend(function(t){i.rollOverSlice(e,t),i.panEventsEnabled&&i.clickSlice(e,t)}).touchstart(function(t){i.rollOverSlice(e,t)}).click(function(t){i.clickSlice(e,t)}).contextmenu(function(t){i.handleRightClick(e,t)})},formatString:function(e,i,r){e=t.formatValue(e,i,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);var n=this.pf.precision;return isNaN(this.tempPrec)||(this.pf.precision=this.tempPrec),e=t.formatValue(e,i,["percents"],this.pf),e=t.massReplace(e,{"[[title]]":i.title,"[[description]]":i.description}),this.pf.precision=n,-1!=e.indexOf("[[")&&(e=t.formatDataContextValue(e,i.dataContext)),e=r?t.fixNewLines(e):t.fixBrakes(e),e=t.cleanFromEmpty(e)},startSlices:function(){var t;for(t=0;t<this.chartData.length;t++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(t):this.startSlice(this.chartData[t])},setStartTO:function(t){var e=this;t=setTimeout(function(){e.startSequenced.call(e)},e.startDuration/e.chartData.length*500*t),e.timeOuts.push(t)},pullSlices:function(t){var e,i=this.chartData;for(e=0;e<i.length;e++){var r=i[e];r.pulled&&this.pullSlice(r,1,t)}},startSequenced:function(){var t,e=this.chartData;for(t=0;t<e.length;t++)if(!e[t].started){this.startSlice(this.chartData[t]);break}},startSlice:function(t){t.started=!0;var e=t.wedge,i=this.startDuration;e&&0<i&&(0<t.alpha&&e.show(),e.translate(t.startX,t.startY),e.animate({opacity:1,translate:"0,0"},i,this.startEffect))},showLabels:function(){var t,e=this.chartData;for(t=0;t<e.length;t++){var i=e[t];if(0<i.alpha){var r=i.label;r&&r.show(),(i=i.tick)&&i.show()}}},showSlice:function(t){isNaN(t)?t.hidden=!1:this.chartData[t].hidden=!1,this.invalidateVisibility()},hideSlice:function(t){isNaN(t)?t.hidden=!0:this.chartData[t].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(e,i,r){if(isNaN(e)||(e=this.chartData[e]),clearTimeout(this.hoverInt),!e.hidden){this.pullOnHover&&this.pullSlice(e,1),1>this.hoverAlpha&&e.wedge&&e.wedge.attr({opacity:this.hoverAlpha});var n=e.balloonX,s=e.balloonY;e.pulled&&(n+=e.pullX,s+=e.pullY);var a=this.formatString(this.balloonText,e,!0),o=this.balloonFunction;o&&(a=o(e,a)),o=t.adjustLuminosity(e.color,-.15),a?this.showBalloon(a,o,i,n,s):this.hideBalloon(),0===e.value&&this.hideBalloon(),e={type:"rollOverSlice",dataItem:e,chart:this,event:r},this.fire(e.type,e)}},rollOutSlice:function(t,e){isNaN(t)||(t=this.chartData[t]),t.wedge&&t.wedge.attr({opacity:1}),this.hideBalloon();var i={type:"rollOutSlice",dataItem:t,chart:this,event:e};this.fire(i.type,i)},clickSlice:function(e,i,r){isNaN(e)||(e=this.chartData[e]),e.pulled?this.pullSlice(e,0):this.pullSlice(e,1),t.getURL(e.url,this.urlTarget),r||(e={type:"clickSlice",dataItem:e,chart:this,event:i},this.fire(e.type,e))},handleRightClick:function(t,e){isNaN(t)||(t=this.chartData[t]);var i={type:"rightClickSlice",dataItem:t,chart:this,event:e};this.fire(i.type,i)},drawTicks:function(){var e,i=this.chartData;for(e=0;e<i.length;e++){var r=i[e];if(r.label){var n=r.ty,n=t.line(this.container,[r.tx0,r.tx,r.tx2],[r.ty0,n,n],this.labelTickColor,this.labelTickAlpha);t.setCN(this,n,this.type+"-tick"),t.setCN(this,n,r.className,!0),r.tick=n,r.wedge.push(n)}}},initialStart:function(){var t=this,e=t.startDuration,i=setTimeout(function(){t.showLabels.call(t)},1e3*e);t.timeOuts.push(i),t.chartCreated?t.pullSlices(!0):(t.startSlices(),0<e?(e=setTimeout(function(){t.pullSlices.call(t)},1200*e),t.timeOuts.push(e)):t.pullSlices(!0))},pullSlice:function(t,e,i){var r=this.pullOutDuration;!0===i&&(r=0),(i=t.wedge)&&(0<r?i.animate({translate:e*t.pullX+","+e*t.pullY},r,this.pullOutEffect):i.translate(e*t.pullX,e*t.pullY)),1==e?(t.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(t.index),t={type:"pullOutSlice",dataItem:t,chart:this}):(t.pulled=!1,t={type:"pullInSlice",dataItem:t,chart:this}),this.fire(t.type,t)},pullInAll:function(t){var e,i=this.chartData;for(e=0;e<this.chartData.length;e++)e!=t&&i[e].pulled&&this.pullSlice(i[e],0)},pullOutAll:function(){var t,e=this.chartData;for(t=0;t<e.length;t++)e[t].pulled||this.pullSlice(e[t],1)},parseData:function(){var e=[];this.chartData=e;var i=this.dataProvider;if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==i){var r,n,s,a=i.length,o=0;for(r=0;r<a;r++){n={};var l=i[r];n.dataContext=l,n.value=Number(l[this.valueField]),(s=l[this.titleField])||(s=""),n.title=s,n.pulled=t.toBoolean(l[this.pulledField],!1),(s=l[this.descriptionField])||(s=""),n.description=s,n.labelRadius=Number(l[this.labelRadiusField]),n.switchable=!0,n.className=l[this.classNameField],n.url=l[this.urlField],s=l[this.patternField],!s&&this.patterns&&(s=this.patterns[r]),n.pattern=s,n.visibleInLegend=t.toBoolean(l[this.visibleInLegendField],!0),s=l[this.alphaField],n.alpha=void 0!==s?Number(s):this.alpha,s=l[this.colorField],void 0!==s&&(n.color=s),n.labelColor=t.toColor(l[this.labelColorField]),o+=n.value,n.hidden=!1,e[r]=n}for(r=i=0;r<a;r++)n=e[r],n.percents=n.value/o*100,n.percents<this.groupPercent&&i++;for(1<i&&(this.groupValue=0,this.removeSmallSlices(),e.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/o*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}})),a=this.baseColor,a||(a=this.pieBaseColor),o=this.brightnessStep,o||(o=this.pieBrightnessStep),r=0;r<e.length;r++)a?s=t.adjustLuminosity(a,r*o/100):(s=this.colors[r],void 0===s&&(s=t.randomColor())),void 0===e[r].color&&(e[r].color=s);this.recalculatePercents()}},recalculatePercents:function(){var t,e,i=this.chartData,r=0;for(t=0;t<i.length;t++)e=i[t],!e.hidden&&0<e.value&&(r+=e.value);for(t=0;t<i.length;t++)e=this.chartData[t],e.percents=!e.hidden&&0<e.value?100*e.value/r:0},removeSmallSlices:function(){var t,e=this.chartData;for(t=e.length-1;0<=t;t--)e[t].percents<this.groupPercent&&(this.groupValue+=e[t].value,e.splice(t,1))},animateAgain:function(){var t=this;t.startSlices();for(var e=0;e<t.chartData.length;e++){var i=t.chartData[e];i.started=!1;var r=i.wedge;r&&r.translate(i.startX,i.startY)}e=t.startDuration,0<e?(e=setTimeout(function(){t.pullSlices.call(t)},1200*e),t.timeOuts.push(e)):t.pullSlices()},measureMaxLabel:function(){var e,i=this.chartData,r=0;for(e=0;e<i.length;e++){var n=i[e],s=this.formatString(this.labelText,n),a=this.labelFunction;a&&(s=a(n,s)),n=t.text(this.container,s,this.color,this.fontFamily,this.fontSize),s=n.getBBox().width,s>r&&(r=s),n.remove()}return r}})}(),function(){var t=window.AmCharts;t.AmRectangularChart=t.Class({inherits:t.AmCoordinateChart,construct:function(e){t.AmRectangularChart.base.construct.call(this,e),this.theme=e,this.createEvents("zoomed"),this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20,this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0,this.heightMultiplier=this.widthMultiplier=1,this.plotAreaFillColors="#FFFFFF",this.plotAreaFillAlphas=0,this.plotAreaBorderColor="#000000",this.plotAreaBorderAlpha=0,this.zoomOutButtonImageSize=19,this.zoomOutButtonImage="lens.png",this.zoomOutText="Show all",this.zoomOutButtonColor="#e5e5e5",this.zoomOutButtonAlpha=0,this.zoomOutButtonRollOverAlpha=1,this.zoomOutButtonPadding=8,this.trendLines=[],this.autoMargins=!0,this.marginsUpdated=!1,this.autoMarginOffset=10,t.applyTheme(this,e,"AmRectangularChart")},initChart:function(){t.AmRectangularChart.base.initChart.call(this),this.updateDxy();var e=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),e=!1),this.processScrollbars(),this.updateMargins(),this.updatePlotArea(),this.updateScrollbars(),this.updateTrendLines(),this.updateChartCursor(),this.updateValueAxes(),e&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){if(t.AmRectangularChart.base.drawChart.call(this),this.drawPlotArea(),t.ifArray(this.chartData)){var e=this.chartCursor;e&&e.draw()}},resetMargins:function(){var t,e={};if("xy"==this.type){var i=this.xAxes,r=this.yAxes;for(t=0;t<i.length;t++){var n=i[t];n.ignoreAxisWidth||(n.setOrientation(!0),n.fixAxisPosition(),e[n.position]=!0)}for(t=0;t<r.length;t++)i=r[t],i.ignoreAxisWidth||(i.setOrientation(!1),i.fixAxisPosition(),e[i.position]=!0)}else{for(r=this.valueAxes,t=0;t<r.length;t++)i=r[t],i.ignoreAxisWidth||(i.setOrientation(this.rotate),i.fixAxisPosition(),e[i.position]=!0);(t=this.categoryAxis)&&!t.ignoreAxisWidth&&(t.setOrientation(!this.rotate),t.fixAxisPosition(),t.fixAxisPosition(),e[t.position]=!0)}e.left&&(this.marginLeft=0),e.right&&(this.marginRight=0),e.top&&(this.marginTop=0),e.bottom&&(this.marginBottom=0),this.fixMargins=e},measureMargins:function(){var t,e=this.valueAxes,i=this.autoMarginOffset,r=this.fixMargins,n=this.realWidth,s=this.realHeight,a=i,o=i,l=n;t=s;var h;for(h=0;h<e.length;h++)e[h].handleSynchronization(),t=this.getAxisBounds(e[h],a,l,o,t),a=Math.round(t.l),l=Math.round(t.r),o=Math.round(t.t),t=Math.round(t.b);(e=this.categoryAxis)&&(t=this.getAxisBounds(e,a,l,o,t),a=Math.round(t.l),l=Math.round(t.r),o=Math.round(t.t),t=Math.round(t.b)),r.left&&a<i&&(this.marginLeft=Math.round(-a+i)),r.right&&l>=n-i&&(this.marginRight=Math.round(l-n+i)),r.top&&o<i+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-o+i+this.titleHeight)),r.bottom&&t>s-i&&(this.marginBottom=Math.round(this.marginBottom+t-s+i)),this.initChart()},getAxisBounds:function(t,e,i,r,n){if(!t.ignoreAxisWidth){var s=t.labelsSet,a=t.tickLength;if(t.inside&&(a=0),s)switch(s=t.getBBox(),t.position){case"top":t=s.y,r>t&&(r=t);break;case"bottom":t=s.y+s.height,n<t&&(n=t);break;case"right":t=s.x+s.width+a+3,i<t&&(i=t);break;case"left":t=s.x-a,e>t&&(e=t)}}return{l:e,t:r,r:i,b:n}},drawZoomOutButton:function(){var e=this;if(!e.zbSet){var i=e.container.set();e.zoomButtonSet.push(i);var r=e.color,n=e.fontSize,s=e.zoomOutButtonImageSize,a=e.zoomOutButtonImage,o=t.lang.zoomOutText||e.zoomOutText,l=e.zoomOutButtonColor,h=e.zoomOutButtonAlpha,c=e.zoomOutButtonFontSize,u=e.zoomOutButtonPadding;isNaN(c)||(n=c),(c=e.zoomOutButtonFontColor)&&(r=c);var f,c=e.zoomOutButton;c&&(c.fontSize&&(n=c.fontSize),c.color&&(r=c.color),c.backgroundColor&&(l=c.backgroundColor),isNaN(c.backgroundAlpha)||(e.zoomOutButtonRollOverAlpha=c.backgroundAlpha));var d=c=0;for(void 0!==e.pathToImages&&a&&(f=e.container.image(e.pathToImages+a,0,0,s,s),t.setCN(e,f,"zoom-out-image"),i.push(f),f=f.getBBox(),c=f.width+5),void 0!==o&&(r=t.text(e.container,o,r,e.fontFamily,n,"start"),t.setCN(e,r,"zoom-out-label"),n=r.getBBox(),d=f?f.height/2-3:n.height/2,r.translate(c,d),i.push(r)),f=i.getBBox(),r=1,t.isModern||(r=0),l=t.rect(e.container,f.width+2*u+5,f.height+2*u-2,l,1,1,l,r),l.setAttr("opacity",h),l.translate(-u,-u),t.setCN(e,l,"zoom-out-bg"),i.push(l),l.toBack(),e.zbBG=l,f=l.getBBox(),i.translate(e.marginLeftReal+e.plotAreaWidth-f.width+u,e.marginTopReal+u),i.hide(),i.mouseover(function(){e.rollOverZB()}).mouseout(function(){e.rollOutZB()}).click(function(){e.clickZB()}).touchstart(function(){e.rollOverZB()}).touchend(function(){e.rollOutZB(),e.clickZB()}),h=0;h<i.length;h++)i[h].attr({cursor:"pointer"});e.zbSet=i}},rollOverZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0,this.zoom()},drawPlotArea:function(){var e=this.dx,i=this.dy,r=this.marginLeftReal,n=this.marginTopReal,s=this.plotAreaWidth-1,a=this.plotAreaHeight-1,o=this.plotAreaFillColors,l=this.plotAreaFillAlphas,h=this.plotAreaBorderColor,c=this.plotAreaBorderAlpha;"object"==typeof l&&(l=l[0]),o=t.polygon(this.container,[0,s,s,0,0],[0,0,a,a,0],o,l,1,h,c,this.plotAreaGradientAngle),t.setCN(this,o,"plot-area"),o.translate(r+e,n+i),this.set.push(o),0!==e&&0!==i&&(o=this.plotAreaFillColors,"object"==typeof o&&(o=o[0]),o=t.adjustLuminosity(o,-.15),s=t.polygon(this.container,[0,e,s+e,s,0],[0,i,i,0,0],o,l,1,h,c),t.setCN(this,s,"plot-area-bottom"),s.translate(r,n+a),this.set.push(s),e=t.polygon(this.container,[0,0,e,e,0],[0,a,a+i,i,0],o,l,1,h,c),t.setCN(this,e,"plot-area-left"),e.translate(r,n),this.set.push(e)),(r=this.bbset)&&this.scrollbarOnly&&r.remove()},updatePlotArea:function(){var t=this.updateWidth(),e=this.updateHeight(),i=this.container;this.realWidth=t,this.realWidth=e,i&&this.container.setSize(t,e),t=t-this.marginLeftReal-this.marginRightReal-this.dx,e=e-this.marginTopReal-this.marginBottomReal,1>t&&(t=1),1>e&&(e=1),this.plotAreaWidth=Math.round(t),this.plotAreaHeight=Math.round(e)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180)),this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var t=this.getTitleHeight();this.titleHeight=t,this.marginTopReal=this.marginTop-this.dy,this.fixMargins&&!this.fixMargins.top&&(this.marginTopReal+=t),this.marginBottomReal=this.marginBottom,this.marginLeftReal=this.marginLeft,this.marginRightReal=this.marginRight},updateValueAxes:function(){var e,i=this.valueAxes,r=this.marginLeftReal,n=this.marginTopReal,s=this.plotAreaHeight,a=this.plotAreaWidth;for(e=0;e<i.length;e++){var o=i[e];o.axisRenderer=t.RecAxis,o.guideFillRenderer=t.RecFill,o.axisItemRenderer=t.RecItem,o.dx=this.dx,o.dy=this.dy,o.viW=a-1,o.viH=s-1,o.marginsChanged=!0,o.viX=r,o.viY=n,this.updateObjectSize(o)}},updateObjectSize:function(t){t.width=(this.plotAreaWidth-1)*this.widthMultiplier,t.height=(this.plotAreaHeight-1)*this.heightMultiplier,t.x=this.marginLeftReal+this.horizontalPosition,t.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){var t,e=this.graphs;for(t=0;t<e.length;t++){var i=e[t];i.x=this.marginLeftReal+this.horizontalPosition,i.y=this.marginTopReal+this.verticalPosition,i.width=this.plotAreaWidth*this.widthMultiplier,i.height=this.plotAreaHeight*this.heightMultiplier,i.index=t,i.dx=this.dx,i.dy=this.dy,i.rotate=this.rotate}},updateChartCursor:function(){var e=this.chartCursor;e&&(e=t.processObject(e,t.ChartCursor,this.theme),this.addChartCursor(e),e.x=this.marginLeftReal,e.y=this.marginTopReal,e.width=this.plotAreaWidth-1,e.height=this.plotAreaHeight-1,e.chart=this)},processScrollbars:function(){var e=this.chartScrollbar;e&&(e=t.processObject(e,t.ChartScrollbar,this.theme),this.addChartScrollbar(e))},updateScrollbars:function(){},addChartCursor:function(e){t.callMethod("destroy",[this.chartCursor]),e&&(this.listenTo(e,"changed",this.handleCursorChange),this.listenTo(e,"zoomed",this.handleCursorZoom)),this.chartCursor=e},removeChartCursor:function(){t.callMethod("destroy",[this.chartCursor]),this.chartCursor=null},zoomTrendLines:function(){var t,e=this.trendLines;for(t=0;t<e.length;t++){var i=e[t];i.valueAxis.recalculateToPercents?i.set&&i.set.hide():(i.x=this.marginLeftReal+this.horizontalPosition,i.y=this.marginTopReal+this.verticalPosition,i.draw())}},addTrendLine:function(t){this.trendLines.push(t)},removeTrendLine:function(t){var e,i=this.trendLines;for(e=i.length-1;0<=e;e--)i[e]==t&&i.splice(e,1)},adjustMargins:function(t,e){var i=t.position,r=t.scrollbarHeight+t.offset;t.enabled&&("top"==i?e?this.marginLeftReal+=r:this.marginTopReal+=r:e?this.marginRightReal+=r:this.marginBottomReal+=r)},getScrollbarPosition:function(t,e,i){var r="bottom",n="top";t.oppositeAxis||(n=r,r="top"),t.position=e?"bottom"==i||"left"==i?r:n:"top"==i||"right"==i?r:n},updateChartScrollbar:function(t,e){if(t){t.rotate=e;var i=this.marginTopReal,r=this.marginLeftReal,n=t.scrollbarHeight,s=this.dx,a=this.dy,o=t.offset;"top"==t.position?e?(t.y=i,t.x=r-n-o):(t.y=i-n+a-o,t.x=r+s):e?(t.y=i+a,t.x=r+this.plotAreaWidth+s+o):(t.y=i+this.plotAreaHeight+o,t.x=this.marginLeftReal)}},showZB:function(t){var e=this.zbSet;t&&(e=this.zoomOutText,""!==e&&e&&this.drawZoomOutButton()),(e=this.zbSet)&&(this.zoomButtonSet.push(e),t?e.show():e.hide(),this.rollOutZB())},handleReleaseOutside:function(e){t.AmRectangularChart.base.handleReleaseOutside.call(this,e),(e=this.chartCursor)&&e.handleReleaseOutside&&e.handleReleaseOutside()},handleMouseDown:function(e){t.AmRectangularChart.base.handleMouseDown.call(this,e);var i=this.chartCursor;i&&i.handleMouseDown(e)},handleCursorChange:function(){},update:function(){t.AmRectangularChart.base.update.call(this),this.chartCursor&&this.chartCursor.update&&this.chartCursor.update()}})}(),function(){var t=window.AmCharts;t.TrendLine=t.Class({construct:function(e){this.cname="TrendLine",this.createEvents("click"),this.isProtected=!1,this.dashLength=0,this.lineColor="#00CC00",this.lineThickness=this.lineAlpha=1,t.applyTheme(this,e,this.cname)},draw:function(){var e=this;e.destroy();var i,r,n,s,a=e.chart,o=a.container,l=e.categoryAxis,h=e.initialDate,c=e.initialCategory,u=e.finalDate,f=e.finalCategory,d=e.valueAxis,p=e.valueAxisX,g=e.initialXValue,m=e.finalXValue,v=e.initialValue,b=e.finalValue,y=d.recalculateToPercents,x=a.dataDateFormat;l&&(h&&(h=t.getDate(h,x,"fff"),e.initialDate=h,i=l.dateToCoordinate(h)),c&&(i=l.categoryToCoordinate(c)),u&&(u=t.getDate(u,x,"fff"),e.finalDate=u,r=l.dateToCoordinate(u)),f&&(r=l.categoryToCoordinate(f))),p&&!y&&(isNaN(g)||(i=p.getCoordinate(g)),isNaN(m)||(r=p.getCoordinate(m))),d&&!y&&(isNaN(v)||(n=d.getCoordinate(v)),isNaN(b)||(s=d.getCoordinate(b))),isNaN(i)||isNaN(r)||isNaN(n)||isNaN(n)||(a.rotate?(l=[n,s],r=[i,r]):(l=[i,r],r=[n,s]),n=e.lineColor,i=t.line(o,l,r,n,e.lineAlpha,e.lineThickness,e.dashLength),s=l,h=r,f=l[1]-l[0],d=r[1]-r[0],0===f&&(f=.01),0===d&&(d=.01),c=f/Math.abs(f),u=d/Math.abs(d),d=f*d/Math.abs(f*d)*Math.sqrt(Math.pow(f,2)+Math.pow(d,2)),f=Math.asin(f/d),d=90*Math.PI/180-f,f=Math.abs(5*Math.cos(d)),d=Math.abs(5*Math.sin(d)),s.push(l[1]-c*d,l[0]-c*d),h.push(r[1]+u*f,r[0]+u*f),l=t.polygon(o,s,h,n,.005,0),o=o.set([l,i]),o.translate(a.marginLeftReal,a.marginTopReal),a.trendLinesSet.push(o),t.setCN(a,i,"trend-line"),t.setCN(a,i,"trend-line-"+e.id),e.line=i,e.set=o,l.mouseup(function(){e.handleLineClick()}).mouseover(function(){e.handleLineOver()}).mouseout(function(){e.handleLineOut()}),l.touchend&&l.touchend(function(){e.handleLineClick()}),o.clipRect(0,0,a.plotAreaWidth,a.plotAreaHeight))},handleLineClick:function(){var t={type:"click",trendLine:this,chart:this.chart};this.fire(t.type,t)},handleLineOver:function(){var t=this.rollOverColor;void 0!==t&&this.line.attr({stroke:t})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){t.remove(this.set)}})}(),function(){var t=window.AmCharts;t.circle=function(e,i,r,n,s,a,o,l,h){return 0>=i&&(i=.001),void 0!=s&&0!==s||(s=.01),void 0===a&&(a="#000000"),void 0===o&&(o=0),n={fill:r,stroke:a,"fill-opacity":n,"stroke-width":s,"stroke-opacity":o},e=isNaN(h)?e.circle(0,0,i).attr(n):e.ellipse(0,0,i,h).attr(n),l&&e.gradient("radialGradient",[r,t.adjustLuminosity(r,-.6)]),e},t.text=function(e,i,r,n,s,a,o,l){return a||(a="middle"),"right"==a&&(a="end"),"left"==a&&(a="start"),isNaN(l)&&(l=1),void 0!==i&&(i=String(i),t.isIE&&!t.isModern&&(i=i.replace("&amp;","&"),i=i.replace("&","&amp;"))),r={fill:r,"font-family":n,
"font-size":s,opacity:l},!0===o&&(r["font-weight"]="bold"),r["text-anchor"]=a,e.text(i,r)},t.polygon=function(e,i,r,n,s,a,o,l,h,c,u){isNaN(a)&&(a=.01),isNaN(l)&&(l=s);var f=n,d=!1;for("object"==typeof f&&1<f.length&&(d=!0,f=f[0]),void 0===o&&(o=f),s={fill:f,stroke:o,"fill-opacity":s,"stroke-width":a,"stroke-opacity":l},void 0!==u&&0<u&&(s["stroke-dasharray"]=u),u=t.dx,a=t.dy,e.handDrawn&&(r=t.makeHD(i,r,e.handDrawScatter),i=r[0],r=r[1]),o=Math.round,c&&(o=t.doNothing),c="M"+(o(i[0])+u)+","+(o(r[0])+a),l=1;l<i.length;l++)c+=" L"+(o(i[l])+u)+","+(o(r[l])+a);return e=e.path(c+" Z").attr(s),d&&e.gradient("linearGradient",n,h),e},t.rect=function(e,i,r,n,s,a,o,l,h,c,u){if(isNaN(i)||isNaN(r))return e.set();isNaN(a)&&(a=0),void 0===h&&(h=0),void 0===c&&(c=270),isNaN(s)&&(s=0);var f=n,d=!1;"object"==typeof f&&(f=f[0],d=!0),void 0===o&&(o=f),void 0===l&&(l=s),i=Math.round(i),r=Math.round(r);var p=0,g=0;return 0>i&&(i=Math.abs(i),p=-i),0>r&&(r=Math.abs(r),g=-r),p+=t.dx,g+=t.dy,s={fill:f,stroke:o,"fill-opacity":s,"stroke-opacity":l},void 0!==u&&0<u&&(s["stroke-dasharray"]=u),e=e.rect(p,g,i,r,h,a).attr(s),d&&e.gradient("linearGradient",n,c),e},t.bullet=function(e,i,r,n,s,a,o,l,h,c,u,f){var d;switch("circle"==i&&(i="round"),i){case"round":d=t.circle(e,r/2,n,s,a,o,l);break;case"square":d=t.polygon(e,[-r/2,r/2,r/2,-r/2],[r/2,r/2,-r/2,-r/2],n,s,a,o,l,c-180);break;case"rectangle":d=t.polygon(e,[-r,r,r,-r],[r/2,r/2,-r/2,-r/2],n,s,a,o,l,c-180);break;case"diamond":d=t.polygon(e,[-r/2,0,r/2,0],[0,-r/2,0,r/2],n,s,a,o,l);break;case"triangleUp":d=t.triangle(e,r,0,n,s,a,o,l);break;case"triangleDown":d=t.triangle(e,r,180,n,s,a,o,l);break;case"triangleLeft":d=t.triangle(e,r,270,n,s,a,o,l);break;case"triangleRight":d=t.triangle(e,r,90,n,s,a,o,l);break;case"bubble":d=t.circle(e,r/2,n,s,a,o,l,!0);break;case"line":d=t.line(e,[-r/2,r/2],[0,0],n,s,a,o,l);break;case"yError":d=e.set(),d.push(t.line(e,[0,0],[-r/2,r/2],n,s,a)),d.push(t.line(e,[-h,h],[-r/2,-r/2],n,s,a)),d.push(t.line(e,[-h,h],[r/2,r/2],n,s,a));break;case"xError":d=e.set(),d.push(t.line(e,[-r/2,r/2],[0,0],n,s,a)),d.push(t.line(e,[-r/2,-r/2],[-h,h],n,s,a)),d.push(t.line(e,[r/2,r/2],[-h,h],n,s,a))}return d&&d.pattern(u,NaN,f),d},t.triangle=function(t,e,i,r,n,s,a,o){void 0!==s&&0!==s||(s=1),void 0===a&&(a="#000"),void 0===o&&(o=0),r={fill:r,stroke:a,"fill-opacity":n,"stroke-width":s,"stroke-opacity":o},e/=2;var l;return 0===i&&(l=" M"+-e+","+e+" L0,"+-e+" L"+e+","+e+" Z"),180==i&&(l=" M"+-e+","+-e+" L0,"+e+" L"+e+","+-e+" Z"),90==i&&(l=" M"+-e+","+-e+" L"+e+",0 L"+-e+","+e+" Z"),270==i&&(l=" M"+-e+",0 L"+e+","+e+" L"+e+","+-e+" Z"),t.path(l).attr(r)},t.line=function(e,i,r,n,s,a,o,l,h,c,u){if(e.handDrawn&&!u)return t.handDrawnLine(e,i,r,n,s,a,o,l,h,c,u);for(a={fill:"none","stroke-width":a},void 0!==o&&0<o&&(a["stroke-dasharray"]=o),isNaN(s)||(a["stroke-opacity"]=s),n&&(a.stroke=n),n=Math.round,c&&(n=t.doNothing),c=t.dx,s=t.dy,o="M"+(n(i[0])+c)+","+(n(r[0])+s),l=1;l<i.length;l++)o+=" L"+(n(i[l])+c)+","+(n(r[l])+s);return t.VML?e.path(o,void 0,!0).attr(a):(h&&(o+=" M0,0 L0,0"),e.path(o).attr(a))},t.makeHD=function(t,e,i){for(var r=[],n=[],s=1;s<t.length;s++)for(var a=Number(t[s-1]),o=Number(e[s-1]),l=Number(t[s]),h=Number(e[s]),c=Math.sqrt(Math.pow(l-a,2)+Math.pow(h-o,2)),c=Math.round(c/50)+1,l=(l-a)/c,h=(h-o)/c,u=0;u<=c;u++){var f=a+u*l+Math.random()*i,d=o+u*h+Math.random()*i;r.push(f),n.push(d)}return[r,n]},t.handDrawnLine=function(e,i,r,n,s,a,o,l,h,c){var u,f=e.set();for(u=1;u<i.length;u++)for(var d=[i[u-1],i[u]],p=[r[u-1],r[u]],p=t.makeHD(d,p,e.handDrawScatter),d=p[0],p=p[1],g=1;g<d.length;g++)f.push(t.line(e,[d[g-1],d[g]],[p[g-1],p[g]],n,s,a+Math.random()*e.handDrawThickness-e.handDrawThickness/2,o,l,h,c,!0));return f},t.doNothing=function(t){return t},t.wedge=function(e,i,r,n,s,a,o,l,h,c,u,f,d){var p=Math.round;a=p(a),o=p(o),l=p(l);var g=p(o/a*l),m=t.VML,v=359.5+a/100;359.94<v&&(v=359.94),s>=v&&(s=v);var b=1/180*Math.PI,v=i+Math.sin(n*b)*l,y=r-Math.cos(n*b)*g,x=i+Math.sin(n*b)*a,w=r-Math.cos(n*b)*o,_=i+Math.sin((n+s)*b)*a,C=r-Math.cos((n+s)*b)*o,S=i+Math.sin((n+s)*b)*l,b=r-Math.cos((n+s)*b)*g,T={fill:t.adjustLuminosity(c.fill,-.2),"stroke-opacity":0,"fill-opacity":c["fill-opacity"]},k=0;180<Math.abs(s)&&(k=1),n=e.set();var O;m&&(v=p(10*v),x=p(10*x),_=p(10*_),S=p(10*S),y=p(10*y),w=p(10*w),C=p(10*C),b=p(10*b),i=p(10*i),h=p(10*h),r=p(10*r),a*=10,o*=10,l*=10,g*=10,1>Math.abs(s)&&1>=Math.abs(_-x)&&1>=Math.abs(C-w)&&(O=!0)),s="";var A;if(f&&(T["fill-opacity"]=0,T["stroke-opacity"]=c["stroke-opacity"]/2,T.stroke=c.stroke),0<h&&(A=" M"+v+","+(y+h)+" L"+x+","+(w+h),m?(O||(A+=" A"+(i-a)+","+(h+r-o)+","+(i+a)+","+(h+r+o)+","+x+","+(w+h)+","+_+","+(C+h)),A+=" L"+S+","+(b+h),0<l&&(O||(A+=" B"+(i-l)+","+(h+r-g)+","+(i+l)+","+(h+r+g)+","+S+","+(h+b)+","+v+","+(h+y)))):(A+=" A"+a+","+o+",0,"+k+",1,"+_+","+(C+h)+" L"+S+","+(b+h),0<l&&(A+=" A"+l+","+g+",0,"+k+",0,"+v+","+(y+h))),A=e.path(A+" Z",void 0,void 0,"1000,1000").attr(T),n.push(A),A=e.path(" M"+v+","+y+" L"+v+","+(y+h)+" L"+x+","+(w+h)+" L"+x+","+w+" L"+v+","+y+" Z",void 0,void 0,"1000,1000").attr(T),h=e.path(" M"+_+","+C+" L"+_+","+(C+h)+" L"+S+","+(b+h)+" L"+S+","+b+" L"+_+","+C+" Z",void 0,void 0,"1000,1000").attr(T),n.push(A),n.push(h)),m?(O||(s=" A"+p(i-a)+","+p(r-o)+","+p(i+a)+","+p(r+o)+","+p(x)+","+p(w)+","+p(_)+","+p(C)),a=" M"+p(v)+","+p(y)+" L"+p(x)+","+p(w)+s+" L"+p(S)+","+p(b)):a=" M"+v+","+y+" L"+x+","+w+(" A"+a+","+o+",0,"+k+",1,"+_+","+C)+" L"+S+","+b,0<l&&(m?O||(a+=" B"+(i-l)+","+(r-g)+","+(i+l)+","+(r+g)+","+S+","+b+","+v+","+y):a+=" A"+l+","+g+",0,"+k+",0,"+v+","+y),e.handDrawn&&(i=t.line(e,[v,x],[y,w],c.stroke,c.thickness*Math.random()*e.handDrawThickness,c["stroke-opacity"]),n.push(i)),e=e.path(a+" Z",void 0,void 0,"1000,1000").attr(c),u){for(i=[],r=0;r<u.length;r++)i.push(t.adjustLuminosity(c.fill,u[r]));0<i.length&&e.gradient("linearGradient",i)}return e.pattern(f,NaN,d),n.wedge=e,n.push(e),n},t.adjustLuminosity=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),6>t.length&&(t=String(t[0])+String(t[0])+String(t[1])+String(t[1])+String(t[2])+String(t[2])),e=e||0;var i,r,n="#";for(r=0;3>r;r++)i=parseInt(t.substr(2*r,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),n+=("00"+i).substr(i.length);return n}}(),function(){var t=window.AmCharts;t.Bezier=t.Class({construct:function(e,i,r,n,s,a,o,l,h,c){for("object"==typeof o&&(o=o[0]),"object"==typeof l&&(l=l[0]),0===l&&(o="none"),a={fill:o,"fill-opacity":l,"stroke-width":a},void 0!==h&&0<h&&(a["stroke-dasharray"]=h),isNaN(s)||(a["stroke-opacity"]=s),n&&(a.stroke=n),n="M"+Math.round(i[0])+","+Math.round(r[0]),s=[],h=0;h<i.length;h++)s.push({x:Number(i[h]),y:Number(r[h])});1<s.length&&(i=this.interpolate(s),n+=this.drawBeziers(i)),c?n+=c:t.VML||(n+="M0,0 L0,0"),this.path=e.path(n).attr(a),this.node=this.path.node},interpolate:function(e){var i=[];i.push({x:e[0].x,y:e[0].y});var r=e[1].x-e[0].x,n=e[1].y-e[0].y,s=t.bezierX,a=t.bezierY;i.push({x:e[0].x+r/s,y:e[0].y+n/a});var o;for(o=1;o<e.length-1;o++){var l=e[o-1],h=e[o],n=e[o+1];isNaN(n.x)&&(n=h),isNaN(h.x)&&(h=l),isNaN(l.x)&&(l=h),r=n.x-h.x,n=n.y-l.y,l=h.x-l.x,l>r&&(l=r),i.push({x:h.x-l/s,y:h.y-n/a}),i.push({x:h.x,y:h.y}),i.push({x:h.x+l/s,y:h.y+n/a})}return n=e[e.length-1].y-e[e.length-2].y,r=e[e.length-1].x-e[e.length-2].x,i.push({x:e[e.length-1].x-r/s,y:e[e.length-1].y-n/a}),i.push({x:e[e.length-1].x,y:e[e.length-1].y}),i},drawBeziers:function(t){var e,i="";for(e=0;e<(t.length-1)/3;e++)i+=this.drawBezierMidpoint(t[3*e],t[3*e+1],t[3*e+2],t[3*e+3]);return i},drawBezierMidpoint:function(t,e,i,r){var n=Math.round,s=this.getPointOnSegment(t,e,.75),a=this.getPointOnSegment(r,i,.75),o=(r.x-t.x)/16,l=(r.y-t.y)/16,h=this.getPointOnSegment(t,e,.375);return t=this.getPointOnSegment(s,a,.375),t.x-=o,t.y-=l,e=this.getPointOnSegment(a,s,.375),e.x+=o,e.y+=l,i=this.getPointOnSegment(r,i,.375),o=this.getMiddle(h,t),s=this.getMiddle(s,a),a=this.getMiddle(e,i),h=" Q"+n(h.x)+","+n(h.y)+","+n(o.x)+","+n(o.y),h+=" Q"+n(t.x)+","+n(t.y)+","+n(s.x)+","+n(s.y),h+=" Q"+n(e.x)+","+n(e.y)+","+n(a.x)+","+n(a.y),h+=" Q"+n(i.x)+","+n(i.y)+","+n(r.x)+","+n(r.y)},getMiddle:function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},getPointOnSegment:function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}})}(),function(){var t=window.AmCharts;t.AmDraw=t.Class({construct:function(e,i,r,n){t.SVG_NS="http://www.w3.org/2000/svg",t.SVG_XLINK="http://www.w3.org/1999/xlink",t.hasSVG=!!document.createElementNS&&!!document.createElementNS(t.SVG_NS,"svg").createSVGRect,1>i&&(i=10),1>r&&(r=10),this.div=e,this.width=i,this.height=r,this.rBin=document.createElement("div"),t.hasSVG?(t.SVG=!0,i=this.createSvgElement("svg"),e.appendChild(i),this.container=i,this.addDefs(n),this.R=new t.SVGRenderer(this)):t.isIE&&t.VMLRenderer&&(t.VML=!0,t.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(i=document.createStyleSheet(),i.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),t.vmlStyleSheet=i):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),this.container=e,this.R=new t.VMLRenderer(this,n),this.R.disableSelection(e))},createSvgElement:function(e){return document.createElementNS(t.SVG_NS,e)},circle:function(e,i,r,n){var s=new t.AmDObject("circle",this);return s.attr({r:r,cx:e,cy:i}),this.addToContainer(s.node,n),s},ellipse:function(e,i,r,n,s){var a=new t.AmDObject("ellipse",this);return a.attr({rx:r,ry:n,cx:e,cy:i}),this.addToContainer(a.node,s),a},setSize:function(t,e){0<t&&0<e&&(this.container.style.width=t+"px",this.container.style.height=e+"px")},rect:function(e,i,r,n,s,a,o){var l=new t.AmDObject("rect",this);return t.VML&&(s=Math.round(100*s/Math.min(r,n)),r+=2*a,n+=2*a,l.bw=a,l.node.style.marginLeft=-a,l.node.style.marginTop=-a),1>r&&(r=1),1>n&&(n=1),l.attr({x:e,y:i,width:r,height:n,rx:s,ry:s,"stroke-width":a}),this.addToContainer(l.node,o),l},image:function(e,i,r,n,s,a){var o=new t.AmDObject("image",this);return o.attr({x:i,y:r,width:n,height:s}),this.R.path(o,e),this.addToContainer(o.node,a),o},addToContainer:function(t,e){e||(e=this.container),e.appendChild(t)},text:function(t,e,i){return this.R.text(t,e,i)},path:function(e,i,r,n){var s=new t.AmDObject("path",this);return n||(n="100,100"),s.attr({cs:n}),r?s.attr({dd:e}):s.attr({d:e}),this.addToContainer(s.node,i),s},set:function(t){return this.R.set(t)},remove:function(t){if(t){var e=this.rBin;e.appendChild(t),e.innerHTML=""}},renderFix:function(){var t,e=this.container,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}e=1-t.e%1,t=1-t.f%1,.5<e&&--e,.5<t&&--t,e&&(i.left=e+"px"),t&&(i.top=t+"px")},update:function(){this.R.update()},addDefs:function(e){if(t.hasSVG){var i=this.createSvgElement("desc"),r=this.container;r.setAttribute("version","1.1"),r.style.position="absolute",this.setSize(this.width,this.height),t.rtl&&(r.setAttribute("direction","rtl"),r.style.left="auto",r.style.right="0px"),e.addCodeCredits&&i.appendChild(document.createTextNode("JavaScript chart by amCharts "+e.version)),r.appendChild(i),e.defs&&(i=this.createSvgElement("defs"),r.appendChild(i),t.parseDefs(e.defs,i),this.defs=i)}}})}(),function(){var t=window.AmCharts;t.AmDObject=t.Class({construct:function(t,e){this.D=e,this.R=e.R,this.node=this.R.create(this,t),this.y=this.x=0,this.scale=1},attr:function(t){return this.R.attr(this,t),this},getAttr:function(t){return this.node.getAttribute(t)},setAttr:function(t,e){return this.R.setAttr(this,t,e),this},clipRect:function(t,e,i,r){this.R.clipRect(this,t,e,i,r)},translate:function(t,e,i,r){r||(t=Math.round(t),e=Math.round(e)),this.R.move(this,t,e,i),this.x=t,this.y=e,this.scale=i,this.angle&&this.rotate(this.angle)},rotate:function(t,e){this.R.rotate(this,t,e),this.angle=t},animate:function(e,i,r){for(var n in e)if(e.hasOwnProperty(n)){var s=n,a=e[n];r=t.getEffect(r),this.R.animate(this,s,a,i,r)}},push:function(t){if(t){var e=this.node;e.appendChild(t.node);var i=t.clipPath;i&&e.appendChild(i),(t=t.grad)&&e.appendChild(t)}},text:function(t){this.R.setText(this,t)},remove:function(){this.R.remove(this)},clear:function(){var t=this.node;if(t.hasChildNodes())for(;1<=t.childNodes.length;)t.removeChild(t.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var t=this.node;if(t){this.prevNextNode=t.nextSibling;var e=t.parentNode;e&&e.appendChild(t)}},toPrevious:function(){var t=this.node;t&&this.prevNextNode&&(t=t.parentNode)&&t.insertBefore(this.prevNextNode,null)},toBack:function(){var t=this.node;if(t){this.prevNextNode=t.nextSibling;var e=t.parentNode;if(e){var i=e.firstChild;i&&e.insertBefore(t,i)}}},mouseover:function(t){return this.R.addListener(this,"mouseover",t),this},mouseout:function(t){return this.R.addListener(this,"mouseout",t),this},click:function(t){return this.R.addListener(this,"click",t),this},dblclick:function(t){return this.R.addListener(this,"dblclick",t),this},mousedown:function(t){return this.R.addListener(this,"mousedown",t),this},mouseup:function(t){return this.R.addListener(this,"mouseup",t),this},touchstart:function(t){return this.R.addListener(this,"touchstart",t),this},touchend:function(t){return this.R.addListener(this,"touchend",t),this},contextmenu:function(t){return this.node.addEventListener?this.node.addEventListener("contextmenu",t,!0):this.R.addListener(this,"contextmenu",t),this},stop:function(){t.removeFromArray(this.R.animations,this.an_x),t.removeFromArray(this.R.animations,this.an_y)},length:function(){return this.node.childNodes.length},gradient:function(t,e,i){this.R.gradient(this,t,e,i)},pattern:function(t,e,i){t&&this.R.pattern(this,t,e,i)}})}(),function(){var t=window.AmCharts;t.VMLRenderer=t.Class({construct:function(t,e){this.chart=e,this.D=t,this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"},this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(t,e){var i;if("group"==e)i=document.createElement("div"),t.type="div";else if("text"==e)i=document.createElement("div"),t.type="text";else if("image"==e)i=document.createElement("img"),t.type="image";else{t.type="shape",t.shapeType=this.cNames[e],i=document.createElement("amvml:"+this.cNames[e]);var r=document.createElement("amvml:stroke");i.appendChild(r),t.stroke=r;var n=document.createElement("amvml:fill");i.appendChild(n),t.fill=n,n.className="amvml",r.className="amvml",i.className="amvml"}return i.style.position="absolute",i.style.top=0,i.style.left=0,i},path:function(t,e){t.node.setAttribute("src",e)},setAttr:function(e,i,r){if(void 0!==r){var n;8===document.documentMode&&(n=!0);var s=e.node,a=e.type,o=s.style;"r"==i&&(o.width=2*r,o.height=2*r),"oval"==e.shapeType&&("rx"==i&&(o.width=2*r),"ry"==i&&(o.height=2*r)),"roundrect"==e.shapeType&&("width"!=i&&"height"!=i||--r),"cursor"==i&&(o.cursor=r),"cx"==i&&(o.left=r-t.removePx(o.width)/2),"cy"==i&&(o.top=r-t.removePx(o.height)/2);var l=this.styleMap[i];if(void 0!==l&&(o[l]=r),"text"==a&&("text-anchor"==i&&(e.anchor=r,l=s.clientWidth,"end"==r&&(o.marginLeft=-l+"px"),"middle"==r&&(o.marginLeft=-(l/2)+"px",o.textAlign="center"),"start"==r&&(o.marginLeft="0px")),"fill"==i&&(o.color=r),"font-weight"==i&&(o.fontWeight=r)),o=e.children)for(l=0;l<o.length;l++)o[l].setAttr(i,r);"shape"==a&&("cs"==i&&(s.style.width="100px",s.style.height="100px",s.setAttribute("coordsize",r)),"d"==i&&s.setAttribute("path",this.svgPathToVml(r)),"dd"==i&&s.setAttribute("path",r),a=e.stroke,e=e.fill,"stroke"==i&&(n?a.color=r:a.setAttribute("color",r)),"stroke-width"==i&&(n?a.weight=r:a.setAttribute("weight",r)),"stroke-opacity"==i&&(n?a.opacity=r:a.setAttribute("opacity",r)),"stroke-dasharray"==i&&(o="solid",0<r&&3>r&&(o="dot"),3<=r&&6>=r&&(o="dash"),6<r&&(o="longdash"),n?a.dashstyle=o:a.setAttribute("dashstyle",o)),"fill-opacity"!=i&&"opacity"!=i||(0===r?n?e.on=!1:e.setAttribute("on",!1):n?e.opacity=r:e.setAttribute("opacity",r)),"fill"==i&&(n?e.color=r:e.setAttribute("color",r)),"rx"==i&&(n?s.arcSize=r+"%":s.setAttribute("arcsize",r+"%")))}},attr:function(t,e){for(var i in e)e.hasOwnProperty(i)&&this.setAttr(t,i,e[i])},text:function(e,i,r){var n=new t.AmDObject("text",this.D),s=n.node;return s.style.whiteSpace="pre",s.innerHTML=e,this.D.addToContainer(s,r),this.attr(n,i),n},getBBox:function(t){return this.getBox(t.node)},getBox:function(t){var e,i=t.offsetLeft,r=t.offsetTop,n=t.offsetWidth,s=t.offsetHeight;if(t.hasChildNodes()){var a,o,l;for(l=0;l<t.childNodes.length;l++){e=this.getBox(t.childNodes[l]);var h=e.x;isNaN(h)||(isNaN(a)?a=h:h<a&&(a=h));var c=e.y;isNaN(c)||(isNaN(o)?o=c:c<o&&(o=c)),h=e.width+h,isNaN(h)||(n=Math.max(n,h)),e=e.height+c,isNaN(e)||(s=Math.max(s,e))}0>a&&(i+=a),0>o&&(r+=o)}return{x:i,y:r,width:n,height:s}},setText:function(t,e){var i=t.node;i&&(i.innerHTML=e),this.setAttr(t,"text-anchor",t.anchor)},addListener:function(t,e,i){t.node["on"+e]=i},move:function(e,i,r){var n=e.node,s=n.style;"text"==e.type&&(r-=t.removePx(s.fontSize)/2-1),"oval"==e.shapeType&&(i-=t.removePx(s.width)/2,r-=t.removePx(s.height)/2),e=e.bw,isNaN(e)||(i-=e,r-=e),isNaN(i)||isNaN(r)||(n.style.left=i+"px",n.style.top=r+"px")},svgPathToVml:function(t){var e=t.split(" ");t="";var i,r,n=Math.round;for(r=0;r<e.length;r++){var s=e[r],a=s.substring(0,1),s=s.substring(1),o=s.split(","),l=n(o[0])+","+n(o[1]);if("M"==a&&(t+=" m "+l),"L"==a&&(t+=" l "+l),"Z"==a&&(t+=" x e"),"Q"==a){var h=i.length,c=i[h-1],u=o[0],f=o[1],l=o[2],d=o[3];i=n(i[h-2]/3+2/3*u),c=n(c/3+2/3*f),u=n(2/3*u+l/3),f=n(2/3*f+d/3),t+=" c "+i+","+c+","+u+","+f+","+l+","+d}"A"==a&&(t+=" wa "+s),"B"==a&&(t+=" at "+s),i=o}return t},animate:function(t,e,i,r,n){var s=t.node,a=this.chart;if("translate"==e){e=i.split(","),i=e[1];var o=s.offsetTop;a.animate(t,"left",s.offsetLeft,e[0],r,n,"px"),a.animate(t,"top",o,i,r,n,"px")}},clipRect:function(t,e,i,r,n){t=t.node,0===e&&0===i?(t.style.width=r+"px",t.style.height=n+"px",t.style.overflow="hidden"):t.style.clip="rect("+i+"px "+(e+r)+"px "+(i+n)+"px "+e+"px)"},rotate:function(e,i,r){if(0!==Number(i)){var n=e.node;e=n.style,r||(r=this.getBGColor(n.parentNode)),e.backgroundColor=r,e.paddingLeft=1,r=i*Math.PI/180;var s=Math.cos(r),a=Math.sin(r),o=t.removePx(e.left),l=t.removePx(e.top),h=n.offsetWidth,n=n.offsetHeight;i/=Math.abs(i),e.left=o+h/2-h/2*Math.cos(r)-i*n/2*Math.sin(r)+3,e.top=l-i*h/2*Math.sin(r)+i*n/2*Math.sin(r),e.cssText=e.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+s+"', M12='"+-a+"', M21='"+a+"', M22='"+s+"', sizingmethod='auto expand');"}},getBGColor:function(t){var e="#FFFFFF";if(t.style){var i=t.style.backgroundColor;""!==i?e=i:t.parentNode&&(e=this.getBGColor(t.parentNode))}return e},set:function(e){var i=new t.AmDObject("group",this.D);if(this.D.container.appendChild(i.node),e){var r;for(r=0;r<e.length;r++)i.push(e[r])}return i},gradient:function(t,e,i,r){var n="";"radialGradient"==e&&(e="gradientradial",i.reverse()),"linearGradient"==e&&(e="gradient");var s;for(s=0;s<i.length;s++){var a=Math.round(100*s/(i.length-1)),n=n+(a+"% "+i[s]);s<i.length-1&&(n+=",")}t=t.fill,90==r?r=0:270==r?r=180:180==r?r=90:0===r&&(r=270),8===document.documentMode?(t.type=e,t.angle=r):(t.setAttribute("type",e),t.setAttribute("angle",r)),n&&(t.colors.value=n)},remove:function(t){t.clipPath&&this.D.remove(t.clipPath),this.D.remove(t.node)},disableSelection:function(t){void 0!==typeof t.onselectstart&&(t.onselectstart=function(){return!1}),t.style.cursor="default"},pattern:function(e,i,r,n){r=e.node,e=e.fill;var s="none";i.color&&(s=i.color),r.fillColor=s,i=i.url,t.isAbsolute(i)||(i=n+i),8===document.documentMode?(e.type="tile",e.src=i):(e.setAttribute("type","tile"),e.setAttribute("src",i))},update:function(){}})}(),function(){var t=window.AmCharts;t.SVGRenderer=t.Class({construct:function(t){this.D=t,this.animations=[]},create:function(e,i){return document.createElementNS(t.SVG_NS,i)},attr:function(t,e){for(var i in e)e.hasOwnProperty(i)&&this.setAttr(t,i,e[i])},setAttr:function(t,e,i){void 0!==i&&t.node.setAttribute(e,i)},animate:function(e,i,r,n,s){var a=e.node;e["an_"+i]&&t.removeFromArray(this.animations,e["an_"+i]),"translate"==i?(a=(a=a.getAttribute("transform"))?String(a).substring(10,a.length-1):"0,0",a=a.split(", ").join(" "),a=a.split(" ").join(","),0===a&&(a="0,0")):a=Number(a.getAttribute(i)),r={obj:e,frame:0,attribute:i,from:a,to:r,time:n,effect:s},this.animations.push(r),e["an_"+i]=r},update:function(){var e,i=this.animations;for(e=i.length-1;0<=e;e--){var r,n,s,a=i[e],o=1e3*a.time/t.updateRate,l=a.frame+1,h=a.obj,c=a.attribute;l<=o?(a.frame++,"translate"==c?(r=a.from.split(","),c=Number(r[0]),r=Number(r[1]),isNaN(r)&&(r=0),n=a.to.split(","),s=Number(n[0]),n=Number(n[1]),s=0===s-c?s:Math.round(t[a.effect](0,l,c,s-c,o)),a=0===n-r?n:Math.round(t[a.effect](0,l,r,n-r,o)),c="transform",a="translate("+s+","+a+")"):(n=Number(a.from),r=Number(a.to),s=r-n,a=t[a.effect](0,l,n,s,o),isNaN(a)&&(a=r),0===s&&this.animations.splice(e,1)),this.setAttr(h,c,a)):("translate"==c?(n=a.to.split(","),s=Number(n[0]),n=Number(n[1]),h.translate(s,n)):(r=Number(a.to),this.setAttr(h,c,r)),this.animations.splice(e,1))}},getBBox:function(t){if(t=t.node)try{return t.getBBox()}catch(t){}return{width:0,height:0,x:0,y:0}},path:function(e,i){e.node.setAttributeNS(t.SVG_XLINK,"xlink:href",i)},clipRect:function(e,i,r,n,s){var a=e.node,o=e.clipPath;o&&this.D.remove(o);var l=a.parentNode;l&&(a=document.createElementNS(t.SVG_NS,"clipPath"),o=t.getUniqueId(),a.setAttribute("id",o),this.D.rect(i,r,n,s,0,0,a),l.appendChild(a),i="#",t.baseHref&&!t.isIE&&(i=this.removeTarget(window.location.href)+i),this.setAttr(e,"clip-path","url("+i+o+")"),this.clipPathC++,e.clipPath=a)},text:function(e,i,r){var n=new t.AmDObject("text",this.D);e=String(e).split("\n");var s,a=i["font-size"];for(s=0;s<e.length;s++){var o=this.create(null,"tspan");o.appendChild(document.createTextNode(e[s])),o.setAttribute("y",(a+2)*s+Math.round(a/2)),o.setAttribute("x",0),o.style.fontSize=a+"px",n.node.appendChild(o)}return n.node.setAttribute("y",Math.round(a/2)),this.attr(n,i),this.D.addToContainer(n.node,r),n},setText:function(t,e){var i=t.node;i&&(i.removeChild(i.firstChild),i.appendChild(document.createTextNode(e)))},move:function(t,e,i,r){isNaN(e)&&(e=0),isNaN(i)&&(i=0),e="translate("+e+","+i+")",r&&(e=e+" scale("+r+")"),this.setAttr(t,"transform",e)},rotate:function(t,e){var i=t.node.getAttribute("transform"),r="rotate("+e+")";i&&(r=i+" "+r),this.setAttr(t,"transform",r)},set:function(e){var i=new t.AmDObject("g",this.D);if(this.D.container.appendChild(i.node),e){var r;for(r=0;r<e.length;r++)i.push(e[r])}return i},addListener:function(t,e,i){t.node["on"+e]=i},gradient:function(e,i,r,n){var s=e.node,a=e.grad;if(a&&this.D.remove(a),i=document.createElementNS(t.SVG_NS,i),a=t.getUniqueId(),i.setAttribute("id",a),!isNaN(n)){var o=0,l=0,h=0,c=0;90==n?h=100:270==n?c=100:180==n?o=100:0===n&&(l=100),i.setAttribute("x1",o+"%"),i.setAttribute("x2",l+"%"),i.setAttribute("y1",h+"%"),i.setAttribute("y2",c+"%")}for(n=0;n<r.length;n++)o=document.createElementNS(t.SVG_NS,"stop"),l=100*n/(r.length-1),0===n&&(l=0),o.setAttribute("offset",l+"%"),o.setAttribute("stop-color",r[n]),i.appendChild(o);s.parentNode.appendChild(i),r="#",t.baseHref&&!t.isIE&&(r=this.removeTarget(window.location.href)+r),s.setAttribute("fill","url("+r+a+")"),e.grad=i},removeTarget:function(t){return t.split("#")[0]},pattern:function(e,i,r,n){var s=e.node;isNaN(r)&&(r=1);var a=e.patternNode;a&&this.D.remove(a);var a=document.createElementNS(t.SVG_NS,"pattern"),o=t.getUniqueId(),l=i;i.url&&(l=i.url),t.isAbsolute(l)||(l=n+l),n=Number(i.width),isNaN(n)&&(n=4);var h=Number(i.height);isNaN(h)&&(h=4),n/=r,h/=r,r=i.x,isNaN(r)&&(r=0);var c=-Math.random()*Number(i.randomX);isNaN(c)||(r=c),c=i.y,isNaN(c)&&(c=0);var u=-Math.random()*Number(i.randomY);isNaN(u)||(c=u),a.setAttribute("id",o),a.setAttribute("width",n),a.setAttribute("height",h),a.setAttribute("patternUnits","userSpaceOnUse"),a.setAttribute("xlink:href",l),i.color&&(u=document.createElementNS(t.SVG_NS,"rect"),u.setAttributeNS(null,"height",n),u.setAttributeNS(null,"width",h),u.setAttributeNS(null,"fill",i.color),a.appendChild(u)),this.D.image(l,0,0,n,h,a).translate(r,c),l="#",t.baseHref&&!t.isIE&&(l=this.removeTarget(window.location.href)+l),s.setAttribute("fill","url("+l+o+")"),e.patternNode=a,s.parentNode.appendChild(a)},remove:function(t){t.clipPath&&this.D.remove(t.clipPath),t.grad&&this.D.remove(t.grad),t.patternNode&&this.D.remove(t.patternNode),this.D.remove(t.node)}})}(),AmCharts.AmDSet=AmCharts.Class({construct:function(t){this.create("g")},attr:function(t){this.R.attr(this.node,t)},move:function(t,e){this.R.move(this.node,t,e)}}),function(){var t=window.AmCharts;t.AmLegend=t.Class({construct:function(e){this.enabled=!0,this.cname="AmLegend",this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel"),this.position="bottom",this.borderColor=this.color="#000000",this.borderAlpha=0,this.markerLabelGap=5,this.verticalGap=10,this.align="left",this.horizontalGap=0,this.spacing=10,this.markerDisabledColor="#AAB3B3",this.markerType="square",this.markerSize=16,this.markerBorderThickness=this.markerBorderAlpha=1,this.marginBottom=this.marginTop=0,this.marginLeft=this.marginRight=20,this.autoMargins=!0,this.valueWidth=50,this.switchable=!0,this.switchType="x",this.switchColor="#FFFFFF",this.rollOverColor="#CC0000",this.reversedOrder=!1,this.labelText="[[title]]",this.valueText="[[value]]",this.useMarkerColorForLabels=!1,this.rollOverGraphAlpha=1,this.textClickEnabled=!1,this.equalWidths=!0,this.dateFormat="DD-MM-YYYY",this.backgroundColor="#FFFFFF",this.backgroundAlpha=0,this.useGraphSettings=!1,this.showEntries=!0,t.applyTheme(this,e,this.cname)},setData:function(t){this.legendData=t,this.invalidateSize()},invalidateSize:function(){this.destroy(),this.entries=[],this.valueLabels=[];var e=this.legendData;this.enabled&&(t.ifArray(e)||t.ifArray(this.data))&&this.drawLegend()},drawLegend:function(){var e=this.chart,i=this.position,r=this.width,n=e.divRealWidth,s=e.divRealHeight,a=this.div,o=this.legendData;if(this.data&&(o=this.data),isNaN(this.fontSize)&&(this.fontSize=e.fontSize),"right"==i||"left"==i)this.maxColumns=1,this.autoMargins&&(this.marginLeft=this.marginRight=10);else if(this.autoMargins){this.marginRight=e.marginRight,this.marginLeft=e.marginLeft;var l=e.autoMarginOffset;"bottom"==i?(this.marginBottom=l,this.marginTop=0):(this.marginTop=l,this.marginBottom=0)}if(r=void 0!==r?t.toCoordinate(r,n):e.realWidth,"outside"==i?(r=a.offsetWidth,s=a.offsetHeight,a.clientHeight&&(r=a.clientWidth,s=a.clientHeight)):(isNaN(r)||(a.style.width=r+"px"),a.className="amChartsLegend "+e.classNamePrefix+"-legend-div"),this.divWidth=r,(i=this.container)?(i.container.innerHTML="",a.appendChild(i.container),i.width=r,i.height=s,i.addDefs(e)):i=new t.AmDraw(a,r,s,e),this.container=i,this.lx=0,this.ly=8,s=this.markerSize,s>this.fontSize&&(this.ly=s/2-1),0<s&&(this.lx+=s+this.markerLabelGap),this.titleWidth=0,(s=this.title)&&(s=t.text(this.container,s,this.color,e.fontFamily,this.fontSize,"start",!0),t.setCN(e,s,"legend-title"),s.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),e=s.getBBox(),this.titleWidth=e.width+15,this.titleHeight=e.height+6),this.index=this.maxLabelWidth=0,this.showEntries){for(e=0;e<o.length;e++)this.createEntry(o[e]);for(e=this.index=0;e<o.length;e++)this.createValue(o[e])}this.arrangeEntries(),this.updateValues()},arrangeEntries:function(){var e=this.position,i=this.marginLeft+this.titleWidth,r=this.marginRight,n=this.marginTop,s=this.marginBottom,a=this.horizontalGap,o=this.div,l=this.divWidth,h=this.maxColumns,c=this.verticalGap,u=this.spacing,f=l-r-i,d=0,p=0,g=this.container;this.set&&this.set.remove();var m=g.set();this.set=m;var v=g.set();m.push(v);var b,y,x=this.entries;for(y=0;y<x.length;y++){b=x[y].getBBox();var w=b.width;w>d&&(d=w),b=b.height,b>p&&(p=b)}var w=p=0,_=a,C=0,S=0;for(y=0;y<x.length;y++){var T=x[y];this.reversedOrder&&(T=x[x.length-y-1]),b=T.getBBox();var k;this.equalWidths?k=a+w*(d+u+this.markerLabelGap):(k=_,_=_+b.width+a+u),b.height>S&&(S=b.height),k+b.width>f&&0<y&&0!==w&&(p++,w=0,k=a,_=k+b.width+a+u,C=C+S+c,S=0),T.translate(k,C),w++,!isNaN(h)&&w>=h&&(w=0,p++,C=C+S+c,_=a,S=0),v.push(T)}b=v.getBBox(),h=b.height+2*c-1,"left"==e||"right"==e?(u=b.width+2*a,l=u+i+r,o.style.width=l+"px",this.ieW=l):u=l-i-r-1,r=t.polygon(this.container,[0,u,u,0],[0,0,h,h],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),t.setCN(this.chart,r,"legend-bg"),m.push(r),m.translate(i,n),r.toBack(),i=a,"top"!=e&&"bottom"!=e&&"absolute"!=e&&"outside"!=e||("center"==this.align?i=a+(u-b.width)/2:"right"==this.align&&(i=a+u-b.width)),v.translate(i,c+1),this.titleHeight>h&&(h=this.titleHeight),e=h+n+s+1,0>e&&(e=0),e>this.chart.divRealHeight&&(o.style.top="0px"),o.style.height=Math.round(e)+"px",g.setSize(this.divWidth,e)},createEntry:function(e){if(!1!==e.visibleInLegend){var i=this.chart,r=e.markerType;e.legendEntryWidth=this.markerSize,r||(r=this.markerType);var n=e.color,s=e.alpha;e.legendKeyColor&&(n=e.legendKeyColor()),e.legendKeyAlpha&&(s=e.legendKeyAlpha());var a;!0===e.hidden&&(a=n=this.markerDisabledColor);var o=e.pattern,l=e.customMarker;l||(l=this.customMarker);var h=this.container,c=this.markerSize,u=0,f=0,d=c/2;if(this.useGraphSettings){if(r=e.type,this.switchType=void 0,"line"==r||"step"==r||"smoothedLine"==r||"ohlc"==r)o=h.set(),e.hidden||(n=e.lineColorR,a=e.bulletBorderColorR),u=t.line(h,[0,2*c],[c/2,c/2],n,e.lineAlpha,e.lineThickness,e.dashLength),t.setCN(i,u,"graph-stroke"),o.push(u),e.bullet&&(e.hidden||(n=e.bulletColorR),u=t.bullet(h,e.bullet,e.bulletSize,n,e.bulletAlpha,e.bulletBorderThickness,a,e.bulletBorderAlpha))&&(t.setCN(i,u,"graph-bullet"),u.translate(c+1,c/2),o.push(u)),d=0,u=c,f=c/3;else{var p;e.getGradRotation&&(p=e.getGradRotation()),u=e.fillColorsR,!0===e.hidden&&(u=n),(o=this.createMarker("rectangle",u,e.fillAlphas,e.lineThickness,n,e.lineAlpha,p,o))&&(d=c,o.translate(d,c/2)),u=c}t.setCN(i,o,"graph-"+r),t.setCN(i,o,"graph-"+e.id)}else l?o=h.image(l,0,0,c,c):(o=this.createMarker(r,n,s,void 0,void 0,void 0,void 0,o))&&o.translate(c/2,c/2);t.setCN(i,o,"legend-marker"),this.addListeners(o,e),h=h.set([o]),this.switchable&&e.switchable&&h.setAttr("cursor","pointer"),void 0!==e.id&&t.setCN(i,h,"legend-item-"+e.id),t.setCN(i,h,e.className,!0),(a=this.switchType)&&"none"!=a&&0<c&&("x"==a?(r=this.createX(),r.translate(c/2,c/2)):r=this.createV(),r.dItem=e,!0!==e.hidden?"x"==a?r.hide():r.show():"x"!=a&&r.hide(),this.switchable||r.hide(),this.addListeners(r,e),e.legendSwitch=r,h.push(r),t.setCN(i,r,"legend-switch")),a=this.color,e.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(a=this.selectedColor),this.useMarkerColorForLabels&&(a=n),!0===e.hidden&&(a=this.markerDisabledColor),n=t.massReplace(this.labelText,{"[[title]]":e.title}),r=this.fontSize,o&&(c<=r&&o.translate(d,c/2+this.ly-r/2+(r+2-c)/2-f),e.legendEntryWidth=o.getBBox().width);var g;n&&(n=t.fixBrakes(n),e.legendTextReal=n,g=this.labelWidth,g=isNaN(g)?t.text(this.container,n,a,i.fontFamily,r,"start"):t.wrappedText(this.container,n,a,i.fontFamily,r,"start",!1,g,0),t.setCN(i,g,"legend-label"),g.translate(this.lx+u,this.ly),h.push(g),i=g.getBBox().width,this.maxLabelWidth<i&&(this.maxLabelWidth=i)),this.entries[this.index]=h,e.legendEntry=this.entries[this.index],e.legendLabel=g,this.index++}},addListeners:function(t,e){var i=this;t&&t.mouseover(function(t){i.rollOverMarker(e,t)}).mouseout(function(t){i.rollOutMarker(e,t)}).click(function(t){i.clickMarker(e,t)})},rollOverMarker:function(t,e){this.switchable&&this.dispatch("rollOverMarker",t,e),this.dispatch("rollOverItem",t,e)},rollOutMarker:function(t,e){this.switchable&&this.dispatch("rollOutMarker",t,e),
this.dispatch("rollOutItem",t,e)},clickMarker:function(t,e){this.switchable&&(!0===t.hidden?this.dispatch("showItem",t,e):this.dispatch("hideItem",t,e)),this.dispatch("clickMarker",t,e)},rollOverLabel:function(t,e){t.hidden||(this.textClickEnabled&&t.legendLabel&&t.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",t,e))},rollOutLabel:function(t,e){if(!t.hidden){if(this.textClickEnabled&&t.legendLabel){var i=this.color;void 0!==this.selectedColor&&t.showBalloon&&(i=this.selectedColor),this.useMarkerColorForLabels&&(i=t.lineColor,void 0===i&&(i=t.color)),t.legendLabel.attr({fill:i})}this.dispatch("rollOutItem",t,e)}},clickLabel:function(t,e){this.textClickEnabled?t.hidden||this.dispatch("clickLabel",t,e):this.switchable&&(!0===t.hidden?this.dispatch("showItem",t,e):this.dispatch("hideItem",t,e))},dispatch:function(t,e,i){this.fire(t,{type:t,dataItem:e,target:this,event:i,chart:this.chart})},createValue:function(e){var i=this,r=i.fontSize,n=i.chart;if(!1!==e.visibleInLegend){var s=i.maxLabelWidth;i.forceWidth&&(s=i.labelWidth),i.equalWidths||(i.valueAlign="left"),"left"==i.valueAlign&&(s=e.legendEntry.getBBox().width);var a=s;if(i.valueText&&0<i.valueWidth){var o=i.color;i.useMarkerColorForValues&&(o=e.color,e.legendKeyColor&&(o=e.legendKeyColor())),!0===e.hidden&&(o=i.markerDisabledColor);var l=i.valueText,s=s+i.lx+i.markerLabelGap+i.valueWidth,h="end";"left"==i.valueAlign&&(s-=i.valueWidth,h="start"),o=t.text(i.container,l,o,i.chart.fontFamily,r,h),t.setCN(n,o,"legend-value"),o.translate(s,i.ly),i.entries[i.index].push(o),a+=i.valueWidth+2*i.markerLabelGap,o.dItem=e,i.valueLabels.push(o)}i.index++,n=i.markerSize,n<r+7&&(n=r+7,t.VML&&(n+=3)),r=i.container.rect(e.legendEntryWidth,0,a,n,0,0).attr({stroke:"none",fill:"#fff","fill-opacity":.005}),r.dItem=e,i.entries[i.index-1].push(r),r.mouseover(function(t){i.rollOverLabel(e,t)}).mouseout(function(t){i.rollOutLabel(e,t)}).click(function(t){i.clickLabel(e,t)})}},createV:function(){var e=this.markerSize;return t.polygon(this.container,[e/5,e/2,e-e/5,e/2],[e/3,e-e/5,e/5,e/1.7],this.switchColor)},createX:function(){var e=(this.markerSize-4)/2,i={stroke:this.switchColor,"stroke-width":3},r=this.container,n=t.line(r,[-e,e],[-e,e]).attr(i),e=t.line(r,[-e,e],[e,-e]).attr(i);return this.container.set([n,e])},createMarker:function(e,i,r,n,s,a,o,l){var h=this.markerSize,c=this.container;return s||(s=this.markerBorderColor),s||(s=i),isNaN(n)&&(n=this.markerBorderThickness),isNaN(a)&&(a=this.markerBorderAlpha),t.bullet(c,e,h,i,r,n,s,a,h,o,l,this.chart.path)},validateNow:function(){this.invalidateSize()},updateValues:function(){var t,e=this.valueLabels,i=this.chart,r=this.data;for(t=0;t<e.length;t++){var n=e[t],s=n.dItem,a=" ";if(r)s.value?n.text(s.value):n.text("");else{var o;if(void 0!==s.type){o=s.currentDataItem;var l=this.periodValueText;s.legendPeriodValueText&&(l=s.legendPeriodValueText),o?(a=this.valueText,s.legendValueText&&(a=s.legendValueText),a=i.formatString(a,o)):l&&(a=i.formatPeriodString(l,s))}else a=i.formatString(this.valueText,s);(l=this.valueFunction)&&(o&&(s=o),a=l(s,a)),n.text(a)}}},renderFix:function(){if(!t.VML){var e=this.container;e&&e.renderFix()}},destroy:function(){this.div.innerHTML="",t.remove(this.set)}})}(),function(){var t=window.AmCharts;t.formatMilliseconds=function(t,e){if(-1!=t.indexOf("fff")){var i=e.getMilliseconds(),r=String(i);10>i&&(r="00"+i),10<=i&&100>i&&(r="0"+i),t=t.replace(/fff/g,r)}return t},t.extractPeriod=function(e){var i=t.stripNumbers(e),r=1;return i!=e&&(r=Number(e.slice(0,e.indexOf(i)))),{period:i,count:r}},t.getDate=function(e,i,r){return e instanceof Date?t.newDate(e,r):i&&isNaN(e)?t.stringToDate(e,i):new Date(e)},t.newDate=function(e,i){return i&&"fff"!=i?new Date(e):t.useUTC?new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()):new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},t.resetDateToMin=function(e,i,r,n){void 0===n&&(n=1);var s,a,o,l,h,c,u;switch(t.useUTC?(s=e.getUTCFullYear(),a=e.getUTCMonth(),o=e.getUTCDate(),l=e.getUTCHours(),h=e.getUTCMinutes(),c=e.getUTCSeconds(),u=e.getUTCMilliseconds(),e=e.getUTCDay()):(s=e.getFullYear(),a=e.getMonth(),o=e.getDate(),l=e.getHours(),h=e.getMinutes(),c=e.getSeconds(),u=e.getMilliseconds(),e=e.getDay()),i){case"YYYY":s=Math.floor(s/r)*r,a=0,o=1,u=c=h=l=0;break;case"MM":a=Math.floor(a/r)*r,o=1,u=c=h=l=0;break;case"WW":o=e>=n?o-e+n:o-(7+e)+n,u=c=h=l=0;break;case"DD":u=c=h=l=0;break;case"hh":l=Math.floor(l/r)*r,u=c=h=0;break;case"mm":h=Math.floor(h/r)*r,u=c=0;break;case"ss":c=Math.floor(c/r)*r,u=0;break;case"fff":u=Math.floor(u/r)*r}return t.useUTC?(e=new Date,e.setUTCFullYear(s,a,o),e.setUTCHours(l,h,c,u)):e=new Date(s,a,o,l,h,c,u),e},t.getPeriodDuration=function(t,e){void 0===e&&(e=1);var i;switch(t){case"YYYY":i=316224e5;break;case"MM":i=26784e5;break;case"WW":i=6048e5;break;case"DD":i=864e5;break;case"hh":i=36e5;break;case"mm":i=6e4;break;case"ss":i=1e3;break;case"fff":i=1}return i*e},t.intervals={s:{nextInterval:"ss",contains:1e3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:1/0,count:3}},t.getMaxInterval=function(e,i){var r=t.intervals;return e>=r[i].contains?(e=Math.round(e/r[i].contains),i=r[i].nextInterval,t.getMaxInterval(e,i)):"ss"==i?r[i].nextInterval:i},t.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),t.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" "),t.monthNames="January February March April May June July August September October November December".split(" "),t.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),t.getWeekNumber=function(t){t=new Date(t),t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+1)/7)},t.stringToDate=function(e,i){var r={},n=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],s=!0,a=i.indexOf("AA");-1!=a&&(e.substr(a,2),"pm"==e.toLowerCase&&(s=!1));var o,l,h,a=i;for(h=0;h<n.length;h++)l=n[h].period,r[l]=0,"date"==l&&(r[l]=1);for(h=0;h<n.length;h++)if(o=n[h].pattern,l=n[h].period,-1!=i.indexOf(o)){var c=t.getFromDateString(o,e,a);i=i.replace(o,""),"KK"!=o&&"K"!=o&&"LL"!=o&&"L"!=o||s||(c+=12),r[l]=c}return t.useUTC?(n=new Date,n.setUTCFullYear(r.year,r.month,r.date),n.setUTCHours(r.hours,r.minutes,r.seconds,r.milliseconds)):n=new Date(r.year,r.month,r.date,r.hours,r.minutes,r.seconds,r.milliseconds),n},t.getFromDateString=function(t,e,i){if(void 0!==e)return i=i.indexOf(t),e=String(e),e=e.substr(i,t.length),"0"==e.charAt(0)&&(e=e.substr(1,e.length-1)),e=Number(e),isNaN(e)&&(e=0),-1!=t.indexOf("M")&&e--,e},t.formatDate=function(e,i,r){r||(r=t);var n,s,a,o,l,h,c,u=t.getWeekNumber(e);t.useUTC?(n=e.getUTCFullYear(),s=e.getUTCMonth(),a=e.getUTCDate(),o=e.getUTCDay(),l=e.getUTCHours(),h=e.getUTCMinutes(),c=e.getUTCSeconds(),e=e.getUTCMilliseconds()):(n=e.getFullYear(),s=e.getMonth(),a=e.getDate(),o=e.getDay(),l=e.getHours(),h=e.getMinutes(),c=e.getSeconds(),e=e.getMilliseconds());var f=String(n).substr(2,2),d=s+1;9>s&&(d="0"+d);var p="0"+o;i=i.replace(/W/g,u),u=l,24==u&&(u=0);var g=u;10>g&&(g="0"+g),i=i.replace(/JJ/g,g),i=i.replace(/J/g,u),g=l,0===g&&(g=24,-1!=i.indexOf("H")&&a--),u=a,10>a&&(u="0"+a);var m=g;return 10>m&&(m="0"+m),i=i.replace(/HH/g,m),i=i.replace(/H/g,g),g=l,11<g&&(g-=12),m=g,10>m&&(m="0"+m),i=i.replace(/KK/g,m),i=i.replace(/K/g,g),g=l,0===g&&(g=12),12<g&&(g-=12),m=g,10>m&&(m="0"+m),i=i.replace(/LL/g,m),i=i.replace(/L/g,g),g=h,10>g&&(g="0"+g),i=i.replace(/NN/g,g),i=i.replace(/N/g,h),h=c,10>h&&(h="0"+h),i=i.replace(/SS/g,h),i=i.replace(/S/g,c),c=e,10>c&&(c="00"+c),100>c&&(c="0"+c),h=e,10>h&&(h="00"+h),i=i.replace(/QQQ/g,c),i=i.replace(/QQ/g,h),i=i.replace(/Q/g,e),i=12>l?i.replace(/A/g,"am"):i.replace(/A/g,"pm"),i=i.replace(/YYYY/g,"@IIII@"),i=i.replace(/YY/g,"@II@"),i=i.replace(/MMMM/g,"@XXXX@"),i=i.replace(/MMM/g,"@XXX@"),i=i.replace(/MM/g,"@XX@"),i=i.replace(/M/g,"@X@"),i=i.replace(/DD/g,"@RR@"),i=i.replace(/D/g,"@R@"),i=i.replace(/EEEE/g,"@PPPP@"),i=i.replace(/EEE/g,"@PPP@"),i=i.replace(/EE/g,"@PP@"),i=i.replace(/E/g,"@P@"),i=i.replace(/@IIII@/g,n),i=i.replace(/@II@/g,f),i=i.replace(/@XXXX@/g,r.monthNames[s]),i=i.replace(/@XXX@/g,r.shortMonthNames[s]),i=i.replace(/@XX@/g,d),i=i.replace(/@X@/g,s+1),i=i.replace(/@RR@/g,u),i=i.replace(/@R@/g,a),i=i.replace(/@PPPP@/g,r.dayNames[o]),i=i.replace(/@PPP@/g,r.shortDayNames[o]),i=i.replace(/@PP@/g,p),i=i.replace(/@P@/g,o)},t.changeDate=function(e,i,r,n,s){if(t.useUTC)return t.changeUTCDate(e,i,r,n,s);var a=-1;switch(void 0===n&&(n=!0),void 0===s&&(s=!1),!0===n&&(a=1),i){case"YYYY":e.setFullYear(e.getFullYear()+r*a),n||s||e.setDate(e.getDate()+1);break;case"MM":i=e.getMonth(),e.setMonth(e.getMonth()+r*a),e.getMonth()>i+r*a&&e.setDate(e.getDate()-1),n||s||e.setDate(e.getDate()+1);break;case"DD":e.setDate(e.getDate()+r*a);break;case"WW":e.setDate(e.getDate()+r*a*7);break;case"hh":e.setHours(e.getHours()+r*a);break;case"mm":e.setMinutes(e.getMinutes()+r*a);break;case"ss":e.setSeconds(e.getSeconds()+r*a);break;case"fff":e.setMilliseconds(e.getMilliseconds()+r*a)}return e},t.changeUTCDate=function(t,e,i,r,n){var s=-1;switch(void 0===r&&(r=!0),void 0===n&&(n=!1),!0===r&&(s=1),e){case"YYYY":t.setUTCFullYear(t.getUTCFullYear()+i*s),r||n||t.setUTCDate(t.getUTCDate()+1);break;case"MM":e=t.getUTCMonth(),t.setUTCMonth(t.getUTCMonth()+i*s),t.getUTCMonth()>e+i*s&&t.setUTCDate(t.getUTCDate()-1),r||n||t.setUTCDate(t.getUTCDate()+1);break;case"DD":t.setUTCDate(t.getUTCDate()+i*s);break;case"WW":t.setUTCDate(t.getUTCDate()+i*s*7);break;case"hh":t.setUTCHours(t.getUTCHours()+i*s);break;case"mm":t.setUTCMinutes(t.getUTCMinutes()+i*s);break;case"ss":t.setUTCSeconds(t.getUTCSeconds()+i*s);break;case"fff":t.setUTCMilliseconds(t.getUTCMilliseconds()+i*s)}return t}}(),function(){var t=window.AmCharts;t.AmPieChart=t.Class({inherits:t.AmSlicedChart,construct:function(e){this.type="pie",t.AmPieChart.base.construct.call(this,e),this.cname="AmPieChart",this.pieBrightnessStep=30,this.minRadius=10,this.depth3D=0,this.startAngle=90,this.angle=this.innerRadius=0,this.startRadius="500%",this.pullOutRadius="20%",this.labelRadius=20,this.labelText="[[title]]: [[percents]]%",this.balloonText="[[title]]: [[percents]]% ([[value]])\n[[description]]",this.previousScale=1,this.adjustPrecision=!1,t.applyTheme(this,e,this.cname)},drawChart:function(){t.AmPieChart.base.drawChart.call(this);var e=this.chartData;if(t.ifArray(e)){if(0<this.realWidth&&0<this.realHeight){t.VML&&(this.startAlpha=1);var i=this.startDuration,r=this.container,n=this.updateWidth();this.realWidth=n;var s=this.updateHeight();this.realHeight=s;var a,o,l,h=t.toCoordinate,c=h(this.marginLeft,n),u=h(this.marginRight,n),f=h(this.marginTop,s)+this.getTitleHeight(),d=h(this.marginBottom,s),p=t.toNumber(this.labelRadius),g=this.measureMaxLabel();for(g>this.maxLabelWidth&&(g=this.maxLabelWidth),this.labelText&&this.labelsEnabled||(p=g=0),a=void 0===this.pieX?(n-c-u)/2+c:h(this.pieX,this.realWidth),o=void 0===this.pieY?(s-f-d)/2+f:h(this.pieY,s),l=h(this.radius,n,s),l||(n=0<=p?n-c-u-2*g:n-c-u,s=s-f-d,l=Math.min(n,s),s<n&&(l/=1-this.angle/90,l>n&&(l=n)),s=t.toCoordinate(this.pullOutRadius,l),l=(0<=p?l-1.8*(p+s):l-1.8*s)/2),l<this.minRadius&&(l=this.minRadius),s=h(this.pullOutRadius,l),f=t.toCoordinate(this.startRadius,l),h=h(this.innerRadius,l),h>=l&&(h=l-1),d=t.fitToBounds(this.startAngle,0,360),0<this.depth3D&&(d=270<=d?270:90),d-=90,n=l-l*this.angle/90,c=g=0;c<e.length;c++)u=e[c],!0!==u.hidden&&(g+=t.roundTo(u.percents,this.pf.precision));for(g=t.roundTo(g,this.pf.precision),this.tempPrec=NaN,this.adjustPrecision&&100!=g&&(this.tempPrec=this.pf.precision+1),c=0;c<e.length;c++)if(u=e[c],!0!==u.hidden&&0<u.percents){var m=360*u.percents/100,g=Math.sin((d+m/2)/180*Math.PI),v=-Math.cos((d+m/2)/180*Math.PI)*(n/l),b=this.outlineColor;b||(b=u.color);var y=this.alpha;if(isNaN(u.alpha)||(y=u.alpha),b={fill:u.color,stroke:b,"stroke-width":this.outlineThickness,"stroke-opacity":this.outlineAlpha,"fill-opacity":y},u.url&&(b.cursor="pointer"),b=t.wedge(r,a,o,d,m,l,n,h,this.depth3D,b,this.gradientRatio,u.pattern,this.path),t.setCN(this,b,"pie-item"),t.setCN(this,b.wedge,"pie-slice"),t.setCN(this,b,u.className,!0),this.addEventListeners(b,u),u.startAngle=d,e[c].wedge=b,0<i&&(this.chartCreated||b.setAttr("opacity",this.startAlpha)),u.ix=g,u.iy=v,u.wedge=b,u.index=c,this.labelsEnabled&&this.labelText&&u.percents>=this.hideLabelsPercent){var x=d+m/2;360<x&&(x-=360);var w=p;isNaN(u.labelRadius)||(w=u.labelRadius);var _,m=a+g*(l+w),y=o+v*(l+w),C=0;if(0<=w){var S;90>=x&&0<=x?(S=0,_="start",C=8):90<=x&&180>x?(S=1,_="start",C=8):180<=x&&270>x?(S=2,_="end",C=-8):270<=x&&360>x&&(S=3,_="end",C=-8),u.labelQuarter=S}else _="middle";var x=this.formatString(this.labelText,u),T=this.labelFunction;T&&(x=T(u,x)),T=u.labelColor,T||(T=this.color),""!==x&&(x=t.wrappedText(r,x,T,this.fontFamily,this.fontSize,_,!1,this.maxLabelWidth),t.setCN(this,x,"pie-label"),t.setCN(this,x,u.className,!0),x.translate(m+1.5*C,y),x.node.style.pointerEvents="none",u.tx=m+1.5*C,u.ty=y,0<=w?(w=x.getBBox(),T=t.rect(r,w.width+5,w.height+5,"#FFFFFF",.005),T.translate(m+1.5*C+w.x,y+w.y),u.hitRect=T,b.push(x),b.push(T)):this.freeLabelsSet.push(x),u.label=x),u.tx=m,u.tx2=m+C,u.tx0=a+g*l,u.ty0=o+v*l}m=h+(l-h)/2,u.pulled&&(m+=this.pullOutRadiusReal),u.balloonX=g*m+a,u.balloonY=v*m+o,u.startX=Math.round(g*f),u.startY=Math.round(v*f),u.pullX=Math.round(g*s),u.pullY=Math.round(v*s),this.graphsSet.push(b),(0===u.alpha||0<i&&!this.chartCreated)&&b.hide(),d+=360*u.percents/100}0<p&&!this.labelRadiusField&&this.arrangeLabels(),this.pieXReal=a,this.pieYReal=o,this.radiusReal=l,this.innerRadiusReal=h,0<p&&this.drawTicks(),this.initialStart(),this.setDepths()}(e=this.legend)&&e.invalidateSize()}else this.cleanChart();this.dispDUpd(),this.chartCreated=!0},setDepths:function(){var t,e=this.chartData;for(t=0;t<e.length;t++){var i=e[t],r=i.wedge,i=i.startAngle;0<=i&&180>i?r.toFront():180<=i&&r.toBack()}},arrangeLabels:function(){var t,e,i=this.chartData,r=i.length;for(e=r-1;0<=e;e--)t=i[e],0!==t.labelQuarter||t.hidden||this.checkOverlapping(e,t,0,!0,0);for(e=0;e<r;e++)t=i[e],1!=t.labelQuarter||t.hidden||this.checkOverlapping(e,t,1,!1,0);for(e=r-1;0<=e;e--)t=i[e],2!=t.labelQuarter||t.hidden||this.checkOverlapping(e,t,2,!0,0);for(e=0;e<r;e++)t=i[e],3!=t.labelQuarter||t.hidden||this.checkOverlapping(e,t,3,!1,0)},checkOverlapping:function(t,e,i,r,n){var s,a,o=this.chartData,l=o.length,h=e.label;if(h){if(!0===r)for(a=t+1;a<l;a++)o[a].labelQuarter==i&&(s=this.checkOverlappingReal(e,o[a],i))&&(a=l);else for(a=t-1;0<=a;a--)o[a].labelQuarter==i&&(s=this.checkOverlappingReal(e,o[a],i))&&(a=0);!0===s&&100>n&&(s=e.ty+3*e.iy,e.ty=s,h.translate(e.tx2,s),e.hitRect&&(h=h.getBBox(),e.hitRect.translate(e.tx2+h.x,s+h.y)),this.checkOverlapping(t,e,i,r,n+1))}},checkOverlappingReal:function(e,i,r){var n=!1,s=e.label,a=i.label;return e.labelQuarter!=r||e.hidden||i.hidden||!a||(s=s.getBBox(),r={},r.width=s.width,r.height=s.height,r.y=e.ty,r.x=e.tx,e=a.getBBox(),a={},a.width=e.width,a.height=e.height,a.y=i.ty,a.x=i.tx,t.hitTest(r,a)&&(n=!0)),n}})}(),function(){var t=window.AmCharts;t.AmSerialChart=t.Class({inherits:t.AmRectangularChart,construct:function(e){this.type="serial",t.AmSerialChart.base.construct.call(this,e),this.cname="AmSerialChart",this.theme=e,this.createEvents("changed"),this.columnSpacing=5,this.columnSpacing3D=0,this.columnWidth=.8,this.updateScrollbar=!0;var i=new t.CategoryAxis(e);i.chart=this,this.categoryAxis=i,this.zoomOutOnDataUpdate=!0,this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1,this.minSelectedTime=0,t.applyTheme(this,e,this.cname)},initChart:function(){t.AmSerialChart.base.initChart.call(this),this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis"),this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var e=this.chartCursor;e&&(e.updateData(),e.fullWidth&&(e.fullRectSet=this.cursorLineSet));var i,e=this.countColumns(),r=this.graphs;for(i=0;i<r.length;i++)r[i].columnCount=e;this.updateScrollbar=!0,this.drawChart(),this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins())},handleWheelReal:function(t,e){if(!this.wheelBusy){var i=this.categoryAxis,r=i.parseDates,n=i.minDuration(),s=i=1;this.mouseWheelZoomEnabled?e||(i=-1):e&&(i=-1);var a=this.chartData.length,o=this.lastTime,l=this.firstTime;0>t?r?(a=this.endTime-this.startTime,r=this.startTime+i*n,n=this.endTime+s*n,0<s&&0<i&&n>=o&&(n=o,r=o-a),this.zoomToDates(new Date(r),new Date(n))):(0<s&&0<i&&this.end>=a-1&&(i=s=0),r=this.start+i,n=this.end+s,this.zoomToIndexes(r,n)):r?(a=this.endTime-this.startTime,r=this.startTime-i*n,n=this.endTime-s*n,0<s&&0<i&&r<=l&&(r=l,n=l+a),this.zoomToDates(new Date(r),new Date(n))):(0<s&&0<i&&1>this.start&&(i=s=0),r=this.start-i,n=this.end-s,this.zoomToIndexes(r,n))}},validateData:function(e){this.marginsUpdated=!1,this.zoomOutOnDataUpdate&&!e&&(this.endTime=this.end=this.startTime=this.start=NaN),t.AmSerialChart.base.validateData.call(this)},drawChart:function(){t.AmSerialChart.base.drawChart.call(this);var e=this.chartData;if(t.ifArray(e)){var i=this.chartScrollbar;if(i&&i.draw(),0<this.realWidth&&0<this.realHeight){var r,e=e.length-1,i=this.categoryAxis;i.parseDates&&!i.equalSpacing?(i=this.startTime,r=this.endTime,(isNaN(i)||isNaN(r))&&(i=this.firstTime,r=this.lastTime)):(i=this.start,r=this.end,(isNaN(i)||isNaN(r))&&(i=0,r=e)),this.endTime=this.startTime=this.end=this.start=void 0,this.zoom(i,r)}}else this.cleanChart();this.dispDUpd(),this.chartCreated=!0},cleanChart:function(){t.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(e,i,r){e.chart=this,e.id=r,e.rotate=i,e.axisRenderer=t.RecAxis,e.guideFillRenderer=t.RecFill,e.axisItemRenderer=t.RecItem,e.setOrientation(!this.rotate),e.x=this.marginLeftReal,e.y=this.marginTopReal,e.dx=this.dx,e.dy=this.dy,e.width=this.plotAreaWidth-1,e.height=this.plotAreaHeight-1,e.viW=this.plotAreaWidth-1,e.viH=this.plotAreaHeight-1,e.viX=this.marginLeftReal,e.viY=this.marginTopReal,e.marginsChanged=!0},updateValueAxes:function(){t.AmSerialChart.base.updateValueAxes.call(this);var e,i=this.valueAxes;for(e=0;e<i.length;e++){var r=i[e],n=this.rotate;r.rotate=n,r.setOrientation(n),n=this.categoryAxis,n.startOnAxis&&!n.parseDates||(r.expandMinMax=!0)}},updateData:function(){this.parseData();var t,e=this.graphs,i=this.chartData;for(t=0;t<e.length;t++)e[t].data=i;0<i.length&&(this.firstTime=this.getStartTime(i[0].time),this.lastTime=this.getEndTime(i[i.length-1].time))},getStartTime:function(e){var i=this.categoryAxis;return t.resetDateToMin(new Date(e),i.minPeriod,1,i.firstDayOfWeek).getTime()},getEndTime:function(e){var i=t.extractPeriod(this.categoryAxis.minPeriod);return t.changeDate(new Date(e),i.period,i.count,!0).getTime()-1},updateMargins:function(){t.AmSerialChart.base.updateMargins.call(this);var e=this.chartScrollbar;e&&(this.getScrollbarPosition(e,this.rotate,this.categoryAxis.position),this.adjustMargins(e,this.rotate))},updateScrollbars:function(){t.AmSerialChart.base.updateScrollbars.call(this),this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(t,e){var i=this.categoryAxis;i.parseDates&&!i.equalSpacing?this.timeZoom(t,e):this.indexZoom(t,e),this.updateLegendValues()},timeZoom:function(e,i){var r=this.maxSelectedTime;isNaN(r)||(i!=this.endTime&&i-e>r&&(e=i-r,this.updateScrollbar=!0),e!=this.startTime&&i-e>r&&(i=e+r,this.updateScrollbar=!0));var n=this.minSelectedTime;if(0<n&&i-e<n){var s=Math.round(e+(i-e)/2),n=Math.round(n/2);e=s-n,i=s+n}var a=this.chartData,s=this.categoryAxis;if(t.ifArray(a)&&(e!=this.startTime||i!=this.endTime)){var o=s.minDuration(),n=this.firstTime,l=this.lastTime;e||(e=n,isNaN(r)||(e=l-r)),i||(i=l),e>l&&(e=l),i<n&&(i=n),e<n&&(e=n),i>l&&(i=l),i<e&&(i=e+o),i-e<o/5&&(i<l?i=e+o/5:e=i-o/5),this.startTime=e,this.endTime=i,r=a.length-1,o=this.getClosestIndex(a,"time",e,!0,0,r),a=this.getClosestIndex(a,"time",i,!1,o,r),s.timeZoom(e,i),s.zoom(o,a),this.start=t.fitToBounds(o,0,r),this.end=t.fitToBounds(a,0,r),this.zoomAxesAndGraphs(),this.zoomScrollbar(),e!=n||i!=l?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchTimeZoomEvent()}},updateAfterValueZoom:function(){this.zoomAxesAndGraphs(),this.zoomScrollbar(),this.updateColumnsDepth()},indexZoom:function(t,e){var i=this.maxSelectedSeries;if(isNaN(i)||(e!=this.end&&e-t>i&&(t=e-i,this.updateScrollbar=!0),t!=this.start&&e-t>i&&(e=t+i,this.updateScrollbar=!0)),t!=this.start||e!=this.end){var r=this.chartData.length-1;isNaN(t)&&(t=0,isNaN(i)||(t=r-i)),isNaN(e)&&(e=r),e<t&&(e=t),e>r&&(e=r),t>r&&(t=r-1),0>t&&(t=0),this.start=t,this.end=e,this.categoryAxis.zoom(t,e),this.zoomAxesAndGraphs(),this.zoomScrollbar(),0!==t||e!=this.chartData.length-1?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchIndexZoomEvent()}},updateGraphs:function(){t.AmSerialChart.base.updateGraphs.call(this);var e,i=this.graphs;for(e=0;e<i.length;e++){var r=i[e];r.columnWidthReal=this.columnWidth,r.categoryAxis=this.categoryAxis,t.isString(r.fillToGraph)&&(r.fillToGraph=this.getGraphById(r.fillToGraph))}},updateColumnsDepth:function(){var e,i,r=this.graphs;for(t.remove(this.columnsSet),this.columnsArray=[],e=0;e<r.length;e++){i=r[e];var n=i.columnsArray;if(n){var s;for(s=0;s<n.length;s++)this.columnsArray.push(n[s])}}if(this.columnsArray.sort(this.compareDepth),0<this.columnsArray.length){for(r=this.container.set(),this.columnSet.push(r),e=0;e<this.columnsArray.length;e++)r.push(this.columnsArray[e].column.set);i&&r.translate(i.x,i.y),this.columnsSet=r}},compareDepth:function(t,e){return t.depth>e.depth?1:-1},zoomScrollbar:function(){var t=this.chartScrollbar,e=this.categoryAxis;t&&this.updateScrollbar&&t.enabled&&(t.dragger.stop(),e.parseDates&&!e.equalSpacing?t.timeZoom(this.startTime,this.endTime):t.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var e,i=this.trendLines;for(e=0;e<i.length;e++){var r=i[e],r=t.processObject(r,t.TrendLine,this.theme);i[e]=r,r.chart=this,r.id||(r.id="trendLineAuto"+e+"_"+(new Date).getTime()),t.isString(r.valueAxis)&&(r.valueAxis=this.getValueAxisById(r.valueAxis)),r.valueAxis||(r.valueAxis=this.valueAxes[0]),r.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var t,e=this.valueAxes;for(t=0;t<e.length;t++)e[t].zoom(this.start,this.end);for(e=this.graphs,t=0;t<e.length;t++)e[t].zoom(this.start,this.end);this.zoomTrendLines(),(t=this.chartCursor)&&t.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var t,e,i,r,n=0,s=this.valueAxes.length,a=this.graphs.length,o=!1;for(r=0;r<s;r++){e=this.valueAxes[r];var l=e.stackType;if("100%"==l||"regular"==l)for(o=!1,i=0;i<a;i++)t=this.graphs[i],t.tcc=1,t.valueAxis==e&&"column"==t.type&&(!o&&t.stackable&&(n++,o=!0),(!t.stackable&&t.clustered||t.newStack)&&n++,t.columnIndex=n-1,t.clustered||(t.columnIndex=0));if("none"==l||"3d"==l){for(o=!1,i=0;i<a;i++)t=this.graphs[i],t.valueAxis==e&&"column"==t.type&&(t.clustered?(t.tcc=1,t.newStack&&(n=0),t.hidden||(t.columnIndex=n,n++)):t.hidden||(o=!0,t.tcc=1,t.columnIndex=0));o&&0===n&&(n=1)}if("3d"==l){for(e=1,r=0;r<a;r++)t=this.graphs[r],t.newStack&&e++,t.depthCount=e,t.tcc=n;n=e}}return n},parseData:function(){t.AmSerialChart.base.parseData.call(this),this.parseSerialData(this.dataProvider)},getCategoryIndexByValue:function(t){var e,i,r=this.chartData;for(i=0;i<r.length;i++)r[i].category==t&&(e=i);return e},handleCursorChange:function(t){this.updateLegendValues(t.index)},handleCursorZoom:function(t){this.updateScrollbar=!0,this.zoom(t.start,t.end)},handleScrollbarZoom:function(t){this.updateScrollbar=!1,this.zoom(t.start,t.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var e={type:"zoomed"};e.startDate=new Date(this.startTime),e.endDate=new Date(this.endTime),e.startIndex=this.start,e.endIndex=this.end,this.startIndex=this.start,this.endIndex=this.end,this.startDate=e.startDate,this.endDate=e.endDate,this.prevStartTime=this.startTime,this.prevEndTime=this.endTime;var i=this.categoryAxis,r=t.extractPeriod(i.minPeriod).period,i=i.dateFormatsObject[r];e.startValue=t.formatDate(e.startDate,i,this),e.endValue=t.formatDate(e.endDate,i,this),e.chart=this,e.target=this,this.fire(e.type,e)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start,this.endIndex=this.end;var e=this.chartData;if(t.ifArray(e)&&!isNaN(this.start)&&!isNaN(this.end)){var i={chart:this,target:this,type:"zoomed"};i.startIndex=this.start,i.endIndex=this.end,i.startValue=e[this.start].category,i.endValue=e[this.end].category,this.categoryAxis.parseDates&&(this.startTime=e[this.start].time,this.endTime=e[this.end].time,i.startDate=new Date(this.startTime),i.endDate=new Date(this.endTime)),this.prevStartIndex=this.start,this.prevEndIndex=this.end,this.fire(i.type,i)}}},updateLegendValues:function(t){var e,i=this.graphs;for(e=0;e<i.length;e++){var r=i[e];isNaN(t)?r.currentDataItem=void 0:r.currentDataItem=this.chartData[t].axes[r.valueAxis.id].graphs[r.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(t,e,i,r,n,s){0>n&&(n=0),s>t.length-1&&(s=t.length-1);var a=n+Math.round((s-n)/2),o=t[a][e];return i==o?a:1>=s-n?r?n:(r=t[s][e],Math.abs(t[n][e]-i)<Math.abs(r-i)?n:s):i==o?a:i<o?this.getClosestIndex(t,e,i,r,n,a):this.getClosestIndex(t,e,i,r,a,s)},zoomToIndexes:function(t,e){this.updateScrollbar=!0;var i=this.chartData;if(i){var r=i.length;0<r&&(0>t&&(t=0),e>r-1&&(e=r-1),r=this.categoryAxis,r.parseDates&&!r.equalSpacing?this.zoom(i[t].time,this.getEndTime(i[e].time)):this.zoom(t,e))}},zoomToDates:function(e,i){this.updateScrollbar=!0;var r=this.chartData;if(this.categoryAxis.equalSpacing){var n=this.getClosestIndex(r,"time",e.getTime(),!0,0,r.length);i=t.resetDateToMin(i,this.categoryAxis.minPeriod,1),r=this.getClosestIndex(r,"time",i.getTime(),!1,0,r.length),this.zoom(n,r)}else this.zoom(e.getTime(),i.getTime())},zoomToCategoryValues:function(t,e){this.updateScrollbar=!0,this.zoom(this.getCategoryIndexByValue(t),this.getCategoryIndexByValue(e))},formatPeriodString:function(e,i){if(i){var r=["value","open","low","high","close"],n="value open low high close average sum count".split(" "),s=i.valueAxis,a=this.chartData,o=i.numberFormatter;o||(o=this.nf);for(var l=0;l<r.length;l++){for(var h,c,u,f,d,p,g,m,v,b,y=r[l],x=0,w=0,_=0,C=0,S=this.start;S<=this.end;S++){var T=a[S];if(T&&(T=T.axes[s.id].graphs[i.id])){if(T.values){var k=T.values[y];if(this.rotate?(0>T.x||T.x>T.graph.height)&&(k=NaN):(0>T.x||T.x>T.graph.width)&&(k=NaN),!isNaN(k)){isNaN(h)&&(h=k),c=k,(isNaN(u)||u>k)&&(u=k),(isNaN(f)||f<k)&&(f=k),d=t.getDecimals(x);var O=t.getDecimals(k),x=x+k,x=t.roundTo(x,Math.max(d,O));w++,d=x/w}}T.percents&&(T=T.percents[y],!isNaN(T))&&(isNaN(p)&&(p=T),g=T,(isNaN(m)||m>T)&&(m=T),(isNaN(v)||v<T)&&(v=T),b=t.getDecimals(_),k=t.getDecimals(T),_+=T,_=t.roundTo(_,Math.max(b,k)),C++,b=_/C)}}_={open:p,close:g,high:v,low:m,average:b,sum:_,count:C},e=t.formatValue(e,{open:h,close:c,high:f,low:u,average:d,sum:x,count:w},n,o,y+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),e=t.formatValue(e,_,n,this.pf,"percents\\."+y+"\\.")}}return e=t.cleanFromEmpty(e)},formatString:function(e,i,r){var n=i.graph;if(-1!=e.indexOf("[[category]]")){var s=i.serialDataItem.category;if(this.categoryAxis.parseDates){var a=this.balloonDateFormat,o=this.chartCursor;o&&(a=o.categoryBalloonDateFormat),-1!=e.indexOf("[[category]]")&&(a=t.formatDate(s,a,this),-1!=a.indexOf("fff")&&(a=t.formatMilliseconds(a,s)),s=a)}e=e.replace(/\[\[category\]\]/g,String(s))}return s=n.numberFormatter,s||(s=this.nf),a=i.graph.valueAxis,(o=a.duration)&&!isNaN(i.values.value)&&(o=t.formatDuration(i.values.value,o,"",a.durationUnits,a.maxInterval,s),e=e.replace(RegExp("\\[\\[value\\]\\]","g"),o)),"date"==a.type&&(a=t.formatDate(new Date(i.values.value),n.dateFormat,this),o=RegExp("\\[\\[value\\]\\]","g"),e=e.replace(o,a),a=t.formatDate(new Date(i.values.open),n.dateFormat,this),o=RegExp("\\[\\[open\\]\\]","g"),e=e.replace(o,a)),n="value open low high close total".split(" "),a=this.pf,e=t.formatValue(e,i.percents,n,a,"percents\\."),e=t.formatValue(e,i.values,n,s,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),e=t.formatValue(e,i.values,["percents"],a),-1!=e.indexOf("[[")&&(e=t.formatDataContextValue(e,i.dataContext)),-1!=e.indexOf("[[")&&i.graph.customData&&(e=t.formatDataContextValue(e,i.graph.customData)),e=t.AmSerialChart.base.formatString.call(this,e,i,r)},addChartScrollbar:function(e){t.callMethod("destroy",[this.chartScrollbar]),e&&(e.chart=this,this.listenTo(e,"zoomed",this.handleScrollbarZoom)),this.rotate?void 0===e.width&&(e.width=e.scrollbarHeight):void 0===e.height&&(e.height=e.scrollbarHeight),this.chartScrollbar=e},removeChartScrollbar:function(){t.callMethod("destroy",[this.chartScrollbar]),this.chartScrollbar=null},handleReleaseOutside:function(e){t.AmSerialChart.base.handleReleaseOutside.call(this,e),t.callMethod("handleReleaseOutside",[this.chartScrollbar])},update:function(){t.AmSerialChart.base.update.call(this),this.chartScrollbar&&this.chartScrollbar.update&&this.chartScrollbar.update()}})}(),function(){var t=window.AmCharts;t.Cuboid=t.Class({construct:function(t,e,i,r,n,s,a,o,l,h,c,u,f,d,p,g,m){this.set=t.set(),this.container=t,this.h=Math.round(i),this.w=Math.round(e),this.dx=r,this.dy=n,this.colors=s,this.alpha=a,this.bwidth=o,this.bcolor=l,this.balpha=h,this.dashLength=d,this.topRadius=g,this.pattern=p,this.rotate=f,this.bcn=m,f?0>e&&0===c&&(c=180):0>i&&270==c&&(c=90),this.gradientRotation=c,0===r&&0===n&&(this.cornerRadius=u),this.draw()},draw:function(){var e=this.set;e.clear();var i=this.container,r=i.chart,n=this.w,s=this.h,a=this.dx,o=this.dy,l=this.colors,h=this.alpha,c=this.bwidth,u=this.bcolor,f=this.balpha,d=this.gradientRotation,p=this.cornerRadius,g=this.dashLength,m=this.pattern,v=this.topRadius,b=this.bcn,y=l,x=l;"object"==typeof l&&(y=l[0],x=l[l.length-1]);var w,_,C,S,T,k,O,A,M,D=h;m&&(h=0);var N,L,F,I,E=this.rotate;if(0<Math.abs(a)||0<Math.abs(o))if(isNaN(v))O=x,x=t.adjustLuminosity(y,-.2),x=t.adjustLuminosity(y,-.2),w=t.polygon(i,[0,a,n+a,n,0],[0,o,o,0,0],x,h,1,u,0,d),0<f&&(M=t.line(i,[0,a,n+a],[0,o,o],u,f,c,g)),_=t.polygon(i,[0,0,n,n,0],[0,s,s,0,0],x,h,1,u,0,d),_.translate(a,o),0<f&&(C=t.line(i,[a,a],[o,o+s],u,f,c,g)),S=t.polygon(i,[0,0,a,a,0],[0,s,s+o,o,0],x,h,1,u,0,d),T=t.polygon(i,[n,n,n+a,n+a,n],[0,s,s+o,o,0],x,h,1,u,0,d),0<f&&(k=t.line(i,[n,n+a,n+a,n],[0,o,s+o,s],u,f,c,g)),x=t.adjustLuminosity(O,.2),O=t.polygon(i,[0,a,n+a,n,0],[s,s+o,s+o,s,s],x,h,1,u,0,d),0<f&&(A=t.line(i,[0,a,n+a],[s,s+o,s+o],u,f,c,g));else{var P,j,B;E?(P=s/2,x=a/2,B=s/2,j=n+a/2,L=Math.abs(s/2),N=Math.abs(a/2)):(x=n/2,P=o/2,j=n/2,B=s+o/2+1,N=Math.abs(n/2),L=Math.abs(o/2)),F=N*v,I=L*v,.1<N&&.1<N&&(w=t.circle(i,N,y,h,c,u,f,!1,L),w.translate(x,P)),.1<F&&.1<F&&(O=t.circle(i,F,t.adjustLuminosity(y,.5),h,c,u,f,!1,I),O.translate(j,B))}for(h=D,1>Math.abs(s)&&(s=0),1>Math.abs(n)&&(n=0),!isNaN(v)&&(0<Math.abs(a)||0<Math.abs(o))?(l=[y],
l={fill:l,stroke:u,"stroke-width":c,"stroke-opacity":f,"fill-opacity":h},E?(h="M0,0 L"+n+","+(s/2-s/2*v),c=" B",0<n&&(c=" A"),t.VML?(h+=c+Math.round(n-F)+","+Math.round(s/2-I)+","+Math.round(n+F)+","+Math.round(s/2+I)+","+n+",0,"+n+","+s,h=h+(" L0,"+s)+(c+Math.round(-N)+","+Math.round(s/2-L)+","+Math.round(N)+","+Math.round(s/2+L)+",0,"+s+",0,0")):(h+="A"+F+","+I+",0,0,0,"+n+","+(s-s/2*(1-v))+"L0,"+s,h+="A"+N+","+L+",0,0,1,0,0"),N=90):(c=n/2-n/2*v,h="M0,0 L"+c+","+s,t.VML?(h="M0,0 L"+c+","+s,c=" B",0>s&&(c=" A"),h+=c+Math.round(n/2-F)+","+Math.round(s-I)+","+Math.round(n/2+F)+","+Math.round(s+I)+",0,"+s+","+n+","+s,h+=" L"+n+",0",h+=c+Math.round(n/2+N)+","+Math.round(L)+","+Math.round(n/2-N)+","+Math.round(-L)+","+n+",0,0,0"):(h+="A"+F+","+I+",0,0,0,"+(n-n/2*(1-v))+","+s+"L"+n+",0",h+="A"+N+","+L+",0,0,1,0,0"),N=180),i=i.path(h).attr(l),i.gradient("linearGradient",[y,t.adjustLuminosity(y,-.3),t.adjustLuminosity(y,-.3),y],N),E?i.translate(a/2,0):i.translate(0,o/2)):i=0===s?t.line(i,[0,n],[0,0],u,f,c,g):0===n?t.line(i,[0,0],[0,s],u,f,c,g):0<p?t.rect(i,n,s,l,h,c,u,f,p,d,g):t.polygon(i,[0,0,n,n,0],[0,s,s,0,0],l,h,c,u,f,d,!1,g),n=isNaN(v)?0>s?[w,M,_,C,S,T,k,O,A,i]:[O,A,_,C,S,T,w,M,k,i]:E?0<n?[w,i,O]:[O,i,w]:0>s?[w,i,O]:[O,i,w],t.setCN(r,i,b+"front"),t.setCN(r,_,b+"back"),t.setCN(r,O,b+"top"),t.setCN(r,w,b+"bottom"),t.setCN(r,S,b+"left"),t.setCN(r,T,b+"right"),w=0;w<n.length;w++)(_=n[w])&&(e.push(_),t.setCN(r,_,b+"element"));m&&i.pattern(m,NaN,r.path)},width:function(t){isNaN(t)&&(t=0),this.w=Math.round(t),this.draw()},height:function(t){isNaN(t)&&(t=0),this.h=Math.round(t),this.draw()},animateHeight:function(e,i){var r=this;r.easing=i,r.totalFrames=Math.round(1e3*e/t.updateRate),r.rh=r.h,r.frame=0,r.height(1),setTimeout(function(){r.updateHeight.call(r)},t.updateRate)},updateHeight:function(){var e=this;e.frame++;var i=e.totalFrames;e.frame<=i&&(i=e.easing(0,e.frame,1,e.rh-1,i),e.height(i),setTimeout(function(){e.updateHeight.call(e)},t.updateRate))},animateWidth:function(e,i){var r=this;r.easing=i,r.totalFrames=Math.round(1e3*e/t.updateRate),r.rw=r.w,r.frame=0,r.width(1),setTimeout(function(){r.updateWidth.call(r)},t.updateRate)},updateWidth:function(){var e=this;e.frame++;var i=e.totalFrames;e.frame<=i&&(i=e.easing(0,e.frame,1,e.rw-1,i),e.width(i),setTimeout(function(){e.updateWidth.call(e)},t.updateRate))}})}(),function(){var t=window.AmCharts;t.CategoryAxis=t.Class({inherits:t.AxisBase,construct:function(e){this.cname="CategoryAxis",t.CategoryAxis.base.construct.call(this,e),this.minPeriod="DD",this.equalSpacing=this.parseDates=!1,this.position="bottom",this.startOnAxis=!1,this.firstDayOfWeek=1,this.gridPosition="middle",this.markPeriodChange=this.boldPeriodBeginning=!0,this.safeDistance=30,this.centerLabelOnFullPeriod=!0,t.applyTheme(this,e,this.cname)},draw:function(){t.CategoryAxis.base.draw.call(this),this.generateDFObject();var e=this.chart.chartData;if(this.data=e,t.ifArray(e)){var i,r=this.chart;"scrollbar"!=this.id?(t.setCN(r,this.set,"category-axis"),t.setCN(r,this.labelsSet,"category-axis"),t.setCN(r,this.axisLine.axisSet,"category-axis")):this.bcn=this.id+"-";var n,s,a,o,l,h,c=this.start,u=this.labelFrequency,f=0,d=this.end-c+1,p=this.gridCountR,g=this.showFirstLabel,m=this.showLastLabel,v="",v=t.extractPeriod(this.minPeriod),b=t.getPeriodDuration(v.period,v.count);s=this.rotate,i=this.firstDayOfWeek,n=this.boldPeriodBeginning;var y=t.resetDateToMin(new Date(e[e.length-1].time+1.05*b),this.minPeriod,1,i).getTime();this.firstTime=r.firstTime,this.endTime>y&&(this.endTime=y),h=this.minorGridEnabled;var x,y=this.gridAlpha;if(this.parseDates&&!this.equalSpacing)this.lastTime=e[e.length-1].time,this.maxTime=t.resetDateToMin(new Date(this.lastTime+1.05*b),this.minPeriod,1,i).getTime(),this.timeDifference=this.endTime-this.startTime,this.parseDatesDraw();else if(this.parseDates){if(this.parseDates&&this.equalSpacing){f=this.start,this.startTime=this.data[this.start].time,this.endTime=this.data[this.end].time,this.timeDifference=this.endTime-this.startTime,c=this.choosePeriod(0),u=c.period,s=c.count,e=t.getPeriodDuration(u,s),e<b&&(u=v.period,s=v.count,e=b),a=u,"WW"==a&&(a="DD"),this.stepWidth=this.getStepWidth(d),p=Math.ceil(this.timeDifference/e)+1,v=t.resetDateToMin(new Date(this.startTime-e),u,s,i).getTime(),this.cellWidth=this.getStepWidth(d),d=Math.round(v/e),c=-1,d/2==Math.round(d/2)&&(c=-2,v-=e),d=this.start,d/2==Math.round(d/2)&&d--,0>d&&(d=0),e=this.end+2,e>=this.data.length&&(e=this.data.length),S=!1,S=!g,this.previousPos=-1e3,20<this.labelRotation&&(this.safeDistance=5);var w=d;if(this.data[d].time!=t.resetDateToMin(new Date(this.data[d].time),u,s,i).getTime()){var b=0,_=v;for(i=d;i<e;i++)l=this.data[i].time,this.checkPeriodChange(u,s,l,_)&&(b++,2<=b&&(w=i,i=e),_=l)}if(h&&1<s&&(x=this.chooseMinorFrequency(s),t.getPeriodDuration(u,x)),0<this.gridCountR)for(i=d;i<e;i++)l=this.data[i].time,this.checkPeriodChange(u,s,l,v)&&i>=w?(d=this.getCoordinate(i-this.start),h=!1,this.nextPeriod[a]&&(h=this.checkPeriodChange(this.nextPeriod[a],1,l,v,a)),b=!1,h&&this.markPeriodChange?(h=this.dateFormatsObject[this.nextPeriod[a]],b=!0):h=this.dateFormatsObject[a],v=t.formatDate(new Date(l),h,r),(i==c&&!g||i==p&&!m)&&(v=" "),S?S=!1:(n||(b=!1),d-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(v=this.labelFunction(v,new Date(l),this,u,s,o)),this.boldLabels&&(b=!0),o=new this.axisItemRenderer(this,d,v,void 0,void 0,void 0,void 0,b),h=o.graphics(),this.pushAxisItem(o),h=h.getBBox().width,t.isModern||(h-=d),this.previousPos=d+h)),o=v=l):isNaN(x)||(this.checkPeriodChange(u,x,l,C)&&(this.gridAlpha=this.minorGridAlpha,d=this.getCoordinate(i-this.start),h=new this.axisItemRenderer(this,d,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.pushAxisItem(h),C=l),this.gridAlpha=y)}}else if(this.cellWidth=this.getStepWidth(d),d<p&&(p=d),f+=this.start,this.stepWidth=this.getStepWidth(d),0<p){p=Math.floor(d/p),x=this.chooseMinorFrequency(p),d=f,d/2==Math.round(d/2)&&d--,0>d&&(d=0);var C=0;for(this.end-d+1>=this.autoRotateCount&&(this.labelRotation=this.autoRotateAngle),i=d;i<=this.end+2;i++){if(n=!1,0<=i&&i<this.data.length?(a=this.data[i],v=a.category,n=a.forceShow):v="",h&&!isNaN(x)){if(i/x!=Math.round(i/x)&&!n)continue;i/p==Math.round(i/p)||n||(this.gridAlpha=this.minorGridAlpha,v=void 0)}else if(i/p!=Math.round(i/p)&&!n)continue;d=this.getCoordinate(i-f),o=0,"start"==this.gridPosition&&(d-=this.cellWidth/2,o=this.cellWidth/2),n=!0,e=o,"start"==this.tickPosition&&(e=0,n=!1,o=0),(i==c&&!g||i==this.end&&!m)&&(v=void 0),Math.round(C/u)!=C/u&&(v=void 0),C++;var S=this.cellWidth;s&&(S=NaN),this.labelFunction&&a&&(v=this.labelFunction(v,a,this)),v=t.fixBrakes(v),b=!1,this.boldLabels&&(b=!0),i>this.end&&"start"==this.tickPosition&&(v=" "),this.rotate&&this.inside&&(o=-2),o=new this.axisItemRenderer(this,d,v,n,S,o,void 0,b,e,!1,a.labelColor,a.className),o.serialDataItem=a,this.pushAxisItem(o),this.gridAlpha=y}}for(i=0;i<this.data.length;i++)(g=this.data[i])&&(m=this.parseDates&&!this.equalSpacing?Math.round((g.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(i-f),g.x[this.id]=m);for(g=this.guides.length,i=0;i<g;i++)m=this.guides[i],h=n=h=y=c=NaN,x=m.above,m.toCategory&&(n=r.getCategoryIndexByValue(m.toCategory),isNaN(n)||(c=this.getCoordinate(n-f),m.expand&&(c+=this.cellWidth/2),o=new this.axisItemRenderer(this,c,"",!0,NaN,NaN,m),this.pushAxisItem(o,x))),m.category&&(h=r.getCategoryIndexByValue(m.category),isNaN(h)||(y=this.getCoordinate(h-f),m.expand&&(y-=this.cellWidth/2),h=(c-y)/2,o=new this.axisItemRenderer(this,y,m.label,!0,NaN,h,m),this.pushAxisItem(o,x))),h=r.dataDateFormat,m.toDate&&(m.toDate=t.getDate(m.toDate,h,this.minPeriod),this.equalSpacing?(n=r.getClosestIndex(this.data,"time",m.toDate.getTime(),!1,0,this.data.length-1),isNaN(n)||(c=this.getCoordinate(n-f))):c=(m.toDate.getTime()-this.startTime)*this.stepWidth,o=new this.axisItemRenderer(this,c,"",!0,NaN,NaN,m),this.pushAxisItem(o,x)),m.date&&(m.date=t.getDate(m.date,h,this.minPeriod),this.equalSpacing?(h=r.getClosestIndex(this.data,"time",m.date.getTime(),!1,0,this.data.length-1),isNaN(h)||(y=this.getCoordinate(h-f))):y=(m.date.getTime()-this.startTime)*this.stepWidth,h=(c-y)/2,n=!0,m.toDate&&(n=!1),o="H"==this.orientation?new this.axisItemRenderer(this,y,m.label,n,2*h,NaN,m):new this.axisItemRenderer(this,y,m.label,!1,NaN,h,m),this.pushAxisItem(o,x)),(0<c||0<y)&&(c<this.width||y<this.width)&&(c=new this.guideFillRenderer(this,y,c,m),y=c.graphics(),this.pushAxisItem(c,x),m.graphics=y,y.index=i,m.balloonText&&this.addEventListeners(y,m))}this.axisCreated=!0,r=this.x,f=this.y,this.set.translate(r,f),this.labelsSet.translate(r,f),this.positionTitle(),(r=this.axisLine.set)&&r.toFront(),r=this.getBBox().height,2<r-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1),this.previousHeight=r},xToIndex:function(e){var i=this.data,r=this.chart,n=r.rotate,s=this.stepWidth;this.parseDates&&!this.equalSpacing?(e=this.startTime+Math.round(e/s)-this.minDuration()/2,r=r.getClosestIndex(i,"time",e,!1,this.start,this.end+1)):(this.startOnAxis||(e-=s/2),r=this.start+Math.round(e/s));var a,r=t.fitToBounds(r,0,i.length-1);return i[r]&&(a=i[r].x[this.id]),n?a>this.height+1&&r--:a>this.width+1&&r--,0>a&&r++,r=t.fitToBounds(r,0,i.length-1)},dateToCoordinate:function(t){return this.parseDates&&!this.equalSpacing?(t.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(t=this.chart.getClosestIndex(this.data,"time",t.getTime(),!1,0,this.data.length-1),this.getCoordinate(t-this.start)):NaN},categoryToCoordinate:function(t){return this.chart?(t=this.chart.getCategoryIndexByValue(t),this.getCoordinate(t-this.start)):NaN},coordinateToDate:function(t){return this.equalSpacing?(t=this.xToIndex(t),new Date(this.data[t].time)):new Date(this.startTime+t/this.stepWidth)},getCoordinate:function(t){return t*=this.stepWidth,this.startOnAxis||(t+=this.stepWidth/2),Math.round(t)}})}(),AmCharts.themes.dark={themeName:"dark",AmChart:{color:"#e7e7e7",backgroundColor:"#282828"},AmCoordinateChart:{colors:["#ae85c9","#aab9f7","#b6d2ff","#c9e6f2","#c9f0e1","#e8d685","#e0ad63","#d48652","#d27362","#495fba","#7a629b","#8881cc"]},AmStockChart:{colors:["#639dbd","#e8d685","#ae85c9","#c9f0e1","#d48652","#629b6d","#719dc3","#719dc3"]},AmSlicedChart:{outlineAlpha:1,outlineThickness:2,labelTickColor:"#FFFFFF",labelTickAlpha:.3,colors:["#495fba","#e8d685","#ae85c9","#c9f0e1","#d48652","#629b6d","#719dc3","#719dc3"]},AmRectangularChart:{zoomOutButtonColor:"#FFFFFF",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lensWhite.png"},AxisBase:{axisColor:"#FFFFFF",axisAlpha:.3,gridAlpha:.1,gridColor:"#FFFFFF",dashLength:3},ChartScrollbar:{backgroundColor:"#000000",backgroundAlpha:.2,graphFillAlpha:.2,graphLineAlpha:0,graphFillColor:"#FFFFFF",selectedGraphFillColor:"#FFFFFF",selectedGraphFillAlpha:.4,selectedGraphLineColor:"#FFFFFF",selectedBackgroundColor:"#FFFFFF",selectedBackgroundAlpha:.09,gridAlpha:.15},ChartCursor:{cursorColor:"#FFFFFF",color:"#000000",cursorAlpha:.5},AmLegend:{color:"#e7e7e7"},AmGraph:{lineAlpha:.9},GaugeArrow:{color:"#FFFFFF",alpha:.8,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#FFFFFF",tickAlpha:1,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#FFFFFF",axisAlpha:1,bandAlpha:.8},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AreasSettings:{alpha:.8,color:"#FFFFFF",colorSolid:"#000000",unlistedAreasAlpha:.4,unlistedAreasColor:"#FFFFFF",outlineColor:"#000000",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#3c5bdc",rollOverOutlineColor:"#000000",selectedOutlineColor:"#000000",selectedColor:"#f15135",unlistedAreasOutlineColor:"#000000",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#FFFFFF",alpha:.8},ImagesSettings:{alpha:.8,labelColor:"#FFFFFF",color:"#FFFFFF",labelRollOverColor:"#3c5bdc"},ZoomControl:{buttonRollOverColor:"#3c5bdc",buttonFillColor:"#f15135",buttonFillAlpha:.8,gridBackgroundColor:"#FFFFFF",buttonBorderAlpha:0,buttonCornerRadius:2,gridAlpha:.5,gridBackgroundColor:"#FFFFFF",homeIconFile:"homeIconWhite.gif",buttonIconAlpha:.6,gridAlpha:.2,buttonSize:20},SmallMap:{mapColor:"#FFFFFF",rectangleColor:"#FFFFFF",backgroundColor:"#000000",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{color:"#e7e7e7"},PeriodButton:{color:"#e7e7e7",background:"transparent",opacity:.7,border:"1px solid rgba(255, 255, 255, .15)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{color:"#e7e7e7",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{color:"#e7e7e7",background:"transparent",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"},DataSetSelector:{color:"#e7e7e7",selectedBackgroundColor:"rgba(255, 255, 255, .25)",rollOverBackgroundColor:"rgba(255, 255, 255, .15)"},DataSetCompareList:{color:"#e7e7e7",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(255, 255, 255, .15)"},DataSetSelect:{border:"1px solid rgba(255, 255, 255, .15)",outline:"none"}},AmCharts.themes.light={themeName:"light",AmChart:{color:"#000000",backgroundColor:"#FFFFFF"},AmCoordinateChart:{colors:["#67b7dc","#fdd400","#84b761","#cc4748","#cd82ad","#2f4074","#448e4d","#b7b83f","#b9783f","#b93e3d","#913167"]},AmStockChart:{colors:["#67b7dc","#fdd400","#84b761","#cc4748","#cd82ad","#2f4074","#448e4d","#b7b83f","#b9783f","#b93e3d","#913167"]},AmSlicedChart:{colors:["#67b7dc","#fdd400","#84b761","#cc4748","#cd82ad","#2f4074","#448e4d","#b7b83f","#b9783f","#b93e3d","#913167"],outlineAlpha:1,outlineThickness:2,labelTickColor:"#000000",labelTickAlpha:.3},AmRectangularChart:{zoomOutButtonColor:"#000000",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lens.png"},AxisBase:{axisColor:"#000000",axisAlpha:.3,gridAlpha:.1,gridColor:"#000000"},ChartScrollbar:{backgroundColor:"#000000",backgroundAlpha:.12,graphFillAlpha:.5,graphLineAlpha:0,selectedBackgroundColor:"#FFFFFF",selectedBackgroundAlpha:.4,gridAlpha:.15},ChartCursor:{cursorColor:"#000000",color:"#FFFFFF",cursorAlpha:.5},AmLegend:{color:"#000000"},AmGraph:{lineAlpha:.9},GaugeArrow:{color:"#000000",alpha:.8,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#000000",tickAlpha:1,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#000000",axisAlpha:1,bandAlpha:.8},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AreasSettings:{alpha:.8,color:"#67b7dc",colorSolid:"#003767",unlistedAreasAlpha:.4,unlistedAreasColor:"#000000",outlineColor:"#FFFFFF",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#3c5bdc",rollOverOutlineColor:"#FFFFFF",selectedOutlineColor:"#FFFFFF",selectedColor:"#f15135",unlistedAreasOutlineColor:"#FFFFFF",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#000000",alpha:.8},ImagesSettings:{alpha:.8,labelColor:"#000000",color:"#000000",labelRollOverColor:"#3c5bdc"},ZoomControl:{buttonRollOverColor:"#3c5bdc",buttonFillColor:"#3994e2",buttonBorderColor:"#3994e2",buttonFillAlpha:.8,gridBackgroundColor:"#FFFFFF",buttonBorderAlpha:0,buttonCornerRadius:2,gridColor:"#FFFFFF",gridBackgroundColor:"#000000",buttonIconAlpha:.6,gridAlpha:.6,buttonSize:20},SmallMap:{mapColor:"#000000",rectangleColor:"#f15135",backgroundColor:"#FFFFFF",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{color:"#000000"},PeriodButton:{color:"#000000",background:"transparent",opacity:.7,border:"1px solid rgba(0, 0, 0, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{color:"#000000",backgroundColor:"#b9cdf5",border:"1px solid rgba(0, 0, 0, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{color:"#000000",background:"transparent",border:"1px solid rgba(0, 0, 0, .3)",outline:"none"},DataSetSelector:{color:"#000000",selectedBackgroundColor:"#b9cdf5",rollOverBackgroundColor:"#a8b0e4"},DataSetCompareList:{color:"#000000",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(0, 0, 0, .3)"},DataSetSelect:{border:"1px solid rgba(0, 0, 0, .3)",outline:"none"}},AmCharts.themes.chalk={themeName:"chalk",AmChart:{color:"#e7e7e7",fontFamily:"Covered By Your Grace",fontSize:18,handDrawn:!0,backgroundColor:"#282828"},AmCoordinateChart:{colors:["#FFFFFF","#e384a6","#f4d499","#4d90d6","#c7e38c","#9986c8","#edf28c","#ffd1d4","#5ee1dc","#b0eead","#fef85a","#8badd2"]},AmSlicedChart:{outlineAlpha:1,labelTickColor:"#FFFFFF",labelTickAlpha:.3,colors:["#FFFFFF","#e384a6","#f4d499","#4d90d6","#c7e38c","#9986c8","#edf28c","#ffd1d4","#5ee1dc","#b0eead","#fef85a","#8badd2"]},AmStockChart:{colors:["#FFFFFF","#e384a6","#f4d499","#4d90d6","#c7e38c","#9986c8","#edf28c","#ffd1d4","#5ee1dc","#b0eead","#fef85a","#8badd2"]},AmRectangularChart:{zoomOutButtonColor:"#FFFFFF",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lensWhite.png"},AxisBase:{axisColor:"#FFFFFF",gridColor:"#FFFFFF"},ChartScrollbar:{backgroundColor:"#FFFFFF",backgroundAlpha:.2,graphFillAlpha:.5,graphLineAlpha:0,selectedBackgroundColor:"#000000",selectedBackgroundAlpha:.25,fontSize:15,gridAlpha:.15},ChartCursor:{cursorColor:"#FFFFFF",color:"#000000"},AmLegend:{color:"#e7e7e7",markerSize:20},AmGraph:{lineAlpha:.8},GaugeArrow:{color:"#FFFFFF",alpha:.1,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#FFFFFF",tickAlpha:.8,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#FFFFFF",axisAlpha:.8,bandAlpha:.4},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AmMap:{handDrawn:!1},AreasSettings:{alpha:.8,color:"#FFFFFF",colorSolid:"#000000",unlistedAreasAlpha:.4,unlistedAreasColor:"#FFFFFF",outlineColor:"#000000",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#4d90d6",rollOverOutlineColor:"#000000",selectedOutlineColor:"#000000",selectedColor:"#e384a6",unlistedAreasOutlineColor:"#000000",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#FFFFFF",alpha:.8},ImagesSettings:{alpha:.8,labelFontSize:16,labelColor:"#FFFFFF",color:"#FFFFFF",labelRollOverColor:"#4d90d6"},ZoomControl:{buttonRollOverColor:"#4d90d6",buttonFillColor:"#e384a6",buttonFillAlpha:.8,buttonBorderColor:"#FFFFFF",gridBackgroundColor:"#FFFFFF",gridAlpha:.8},SmallMap:{mapColor:"#FFFFFF",rectangleColor:"#FFFFFF",backgroundColor:"#000000",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7"},PeriodButton:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",background:"transparent",opacity:.7,border:"1px solid rgba(255, 255, 255, .15)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",background:"transparent",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"},DataSetSelector:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",selectedBackgroundColor:"rgba(255, 255, 255, .25)",rollOverBackgroundColor:"rgba(255, 255, 255, .15)"},DataSetCompareList:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(255, 255, 255, .15)"},DataSetSelect:{fontFamily:"Covered By Your Grace",fontSize:"16px",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"}},AmCharts.themes.black={themeName:"black",AmChart:{color:"#e7e7e7",backgroundColor:"#222222"},AmCoordinateChart:{colors:["#de4c4f","#d8854f","#eea638","#a7a737","#86a965","#8aabb0","#69c8ff","#cfd27e","#9d9888","#916b8a","#724887","#7256bc"]},AmStockChart:{colors:["#de4c4f","#d8854f","#eea638","#a7a737","#86a965","#8aabb0","#69c8ff","#cfd27e","#9d9888","#916b8a","#724887","#7256bc"]},AmSlicedChart:{outlineAlpha:1,outlineThickness:2,labelTickColor:"#FFFFFF",labelTickAlpha:.3,colors:["#de4c4f","#d8854f","#eea638","#a7a737","#86a965","#8aabb0","#69c8ff","#cfd27e","#9d9888","#916b8a","#724887","#7256bc"]},AmRectangularChart:{zoomOutButtonColor:"#FFFFFF",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lensWhite.png"},AxisBase:{axisColor:"#FFFFFF",axisAlpha:.3,gridAlpha:.1,gridColor:"#FFFFFF",dashLength:3},ChartScrollbar:{backgroundColor:"#000000",backgroundAlpha:.2,graphFillAlpha:.2,graphLineAlpha:0,graphFillColor:"#FFFFFF",selectedGraphFillColor:"#FFFFFF",selectedGraphFillAlpha:.4,selectedGraphLineColor:"#FFFFFF",selectedBackgroundColor:"#FFFFFF",selectedBackgroundAlpha:.09,gridAlpha:.15},ChartCursor:{cursorColor:"#FFFFFF",color:"#000000",cursorAlpha:.5},AmLegend:{color:"#e7e7e7"},AmGraph:{lineAlpha:.9},GaugeArrow:{color:"#FFFFFF",alpha:.8,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#FFFFFF",tickAlpha:1,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#FFFFFF",axisAlpha:1,bandAlpha:.8},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AreasSettings:{alpha:.8,color:"#FFFFFF",colorSolid:"#000000",unlistedAreasAlpha:.4,unlistedAreasColor:"#FFFFFF",outlineColor:"#000000",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#3c5bdc",rollOverOutlineColor:"#000000",selectedOutlineColor:"#000000",selectedColor:"#f15135",unlistedAreasOutlineColor:"#000000",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#FFFFFF",alpha:.8},ImagesSettings:{alpha:.8,labelColor:"#FFFFFF",color:"#FFFFFF",labelRollOverColor:"#3c5bdc"},ZoomControl:{buttonRollOverColor:"#3c5bdc",buttonFillColor:"#738f58",buttonBorderColor:"#738f58",buttonFillAlpha:.8,gridBackgroundColor:"#FFFFFF",buttonBorderAlpha:0,buttonCornerRadius:2,gridAlpha:.5,gridBackgroundColor:"#FFFFFF",homeIconFile:"homeIconWhite.gif",buttonIconAlpha:.6,gridAlpha:.2,buttonSize:20},SmallMap:{mapColor:"#FFFFFF",rectangleColor:"#FFFFFF",backgroundColor:"#000000",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{color:"#e7e7e7"},PeriodButton:{color:"#e7e7e7",background:"transparent",opacity:.7,border:"1px solid rgba(255, 255, 255, .15)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{color:"#e7e7e7",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{color:"#e7e7e7",background:"transparent",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"},DataSetSelector:{color:"#e7e7e7",selectedBackgroundColor:"rgba(255, 255, 255, .25)",rollOverBackgroundColor:"rgba(255, 255, 255, .15)"},DataSetCompareList:{color:"#e7e7e7",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(255, 255, 255, .15)"},DataSetSelect:{border:"1px solid rgba(255, 255, 255, .15)",outline:"none"}},AmCharts.translations.export||(AmCharts.translations.export={}),AmCharts.translations.export.en||(AmCharts.translations.export.en={"fallback.save.text":"CTRL + C to copy the data into the clipboard.","fallback.save.image":"Rightclick -> Save picture as... to save the image.","capturing.delayed.menu.label":"{{duration}}","capturing.delayed.menu.title":"Click to cancel"}),AmCharts.addInitHandler(function(t){var e={name:"export",version:"1.1.8",libs:{async:!0,autoLoad:!0,reload:!1,path:(t.path||"")+"plugins/export/libs/",resources:[{"pdfmake/pdfmake.js":["pdfmake/vfs_fonts.js"],"jszip/jszip.js":["xlsx/xlsx.js"]},"fabric.js/fabric.js","FileSaver.js/FileSaver.js"]},config:{},setup:{hasBlob:!1},drawing:{enabled:!1,actions:["undo","redo","done","cancel"],undos:[],undo:function(){var t=e.drawing.undos.pop();t&&(e.drawing.redos.push(t),"added"==t.action&&(t.target.known=!0,e.setup.fabric.remove(t.target)),t.target.setOptions(JSON.parse(t.options)),e.setup.fabric.renderAll())},redos:[],redo:function(){var t=e.drawing.redos.pop();t&&(e.drawing.undos.push(t),"added"==t.action&&(t.target.known=!0,e.setup.fabric.add(t.target)),t.target.setOptions(JSON.parse(t.options)),e.setup.fabric.renderAll())},done:function(){e.drawing.enabled=!1,e.drawing.undos=[],e.drawing.redos=[],e.createMenu(e.config.menu),e.setup.wrapper.setAttribute("class",e.setup.chart.classNamePrefix+"-export-canvas")}},defaults:{position:"top-right",fileName:"amCharts",action:"download",formats:{JPG:{mimeType:"image/jpg",extension:"jpg",capture:!0},PNG:{mimeType:"image/png",extension:"png",capture:!0},SVG:{mimeType:"text/xml",extension:"svg",capture:!0},PDF:{mimeType:"application/pdf",extension:"pdf",capture:!0},CSV:{mimeType:"text/plain",extension:"csv"},JSON:{mimeType:"text/plain",extension:"json"},XLSX:{mimeType:"application/octet-stream",extension:"xlsx"}},fabric:{backgroundColor:"#FFFFFF",isDrawingMode:!1,selection:!1,removeImages:!0},pdfMake:{pageSize:"A4",pageOrientation:"portrait",images:{},content:[{image:"reference",fit:[523.28,769.89]}]},divId:null,menuReviver:null,menuWalker:null,menu:[{class:"export-main",label:"Export",menu:[{label:"Download as ...",menu:["PNG","JPG","SVG",{format:"PDF",content:["Saved from:",window.location.href,{image:"reference",fit:[523.28,769.89]}]}]},{label:"Save data ...",menu:["CSV","XLSX","JSON"]},{label:"Annotate",action:"draw",menu:[{class:"export-drawing",menu:[{label:"Color ...",menu:[{class:"export-drawing-color export-drawing-color-black",label:"Black",click:function(){this.setup.fabric.freeDrawingBrush.color="#000"}},{class:"export-drawing-color export-drawing-color-white",label:"White",click:function(){this.setup.fabric.freeDrawingBrush.color="#fff"}},{class:"export-drawing-color export-drawing-color-red",label:"Red",click:function(){this.setup.fabric.freeDrawingBrush.color="#f00"}},{class:"export-drawing-color export-drawing-color-green",label:"Green",click:function(){this.setup.fabric.freeDrawingBrush.color="#0f0"}},{class:"export-drawing-color export-drawing-color-blue",label:"Blue",click:function(){this.setup.fabric.freeDrawingBrush.color="#00f"}}]},"UNDO","REDO",{label:"Save as ...",menu:["PNG","JPG","SVG",{format:"PDF",content:["Saved from:",window.location.href,{image:"reference",fit:[523.28,769.89]}]}]},{format:"PRINT",label:"Print"},"CANCEL"]}]},{format:"PRINT",label:"Print"}]}],fallback:!0},i18l:function(t,e){var i=AmCharts.translations.export[e]||AmCharts.translations.export.en;return i[t]||t},download:function(t,i,r){if(window.saveAs&&e.setup.hasBlob){e.toBlob({data:t,type:i},function(t){saveAs(t,r)})}else if(e.config.fallback&&"text/plain"==i){var n=document.createElement("div"),s=document.createElement("div"),a=document.createElement("textarea");s.innerHTML=e.i18l("fallback.save.text",e.setup.chart.language),n.appendChild(s),n.appendChild(a),s.setAttribute("class","amcharts-export-fallback-message"),n.setAttribute("class","amcharts-export-fallback"),e.setup.chart.containerDiv.appendChild(n),a.setAttribute("readonly",""),a.value=t,a.focus(),a.select(),e.createMenu([{class:"export-main export-close",label:"Done",click:function(){e.createMenu(e.config.menu),e.setup.chart.containerDiv.removeChild(n)}}])}else{if(!e.config.fallback||"image"!=i.split("/")[0])throw new Error("Unable to create file. Ensure saveAs (FileSaver.js) is supported.");var n=document.createElement("div"),s=document.createElement("div"),o=e.toImage({data:t});s.innerHTML=e.i18l("fallback.save.image",e.setup.chart.language),n.appendChild(s),n.appendChild(o),s.setAttribute("class","amcharts-export-fallback-message"),n.setAttribute("class","amcharts-export-fallback"),e.setup.chart.containerDiv.appendChild(n),e.createMenu([{class:"export-main export-close",label:"Done",click:function(){e.createMenu(e.config.menu),e.setup.chart.containerDiv.removeChild(n)}}])}return t},loadResource:function(t,i){function r(){if(i)for(n=0;n<i.length;n++)e.loadResource(i[n])}var n,s,a,o,l,h,c=t.indexOf("//")!=-1?t:[e.libs.path,t].join("");for(t.indexOf(".js")!=-1?(a=document.createElement("script"),a.setAttribute("type","text/javascript"),a.setAttribute("src",c),e.libs.async&&a.setAttribute("async","")):t.indexOf(".css")!=-1&&(a=document.createElement("link"),a.setAttribute("type","text/css"),a.setAttribute("rel","stylesheet"),a.setAttribute("href",c)),n=0;n<document.head.childNodes.length;n++)if(o=document.head.childNodes[n],l=!!o&&(o.src||o.href),h=!!o&&o.tagName,o&&l&&l.indexOf(t)!=-1){e.libs.reload&&document.head.removeChild(o),s=!0;break}s&&!e.libs.reload||(a.addEventListener("load",r),document.head.appendChild(a))},loadDependencies:function(){var t,i;if(e.libs.autoLoad)for(t=0;t<e.libs.resources.length;t++)if(e.libs.resources[t]instanceof Object)for(i in e.libs.resources[t])e.loadResource(i,e.libs.resources[t][i]);else e.loadResource(e.libs.resources[t])},pxToNumber:function(t){return Number(String(t).replace("px",""))||0},numberToPx:function(t){return String(t)+"px"},deepMerge:function(t,i,r){var n,s,a=i instanceof Array?"array":"object";for(n in i)"array"==a&&isNaN(n)||(s=i[n],(void 0==t[n]||r)&&(s instanceof Array?t[n]=new Array:s instanceof Function?t[n]=new Function:s instanceof Date?t[n]=new Date:s instanceof Object?t[n]=new Object:s instanceof Number?t[n]=new Number:s instanceof String&&(t[n]=new String)),s instanceof Function||s instanceof Date||e.isElement(s)||!(s instanceof Object||s instanceof Array)?t instanceof Array&&!r?t.push(s):t[n]=s:e.deepMerge(t[n],s,r));return t},isElement:function(t){return t instanceof Object&&t&&1===t.nodeType},isTainted:function(t){var e=String(window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));return!(!t||t.indexOf("//")==-1||t.indexOf(e.replace(/.*:/,""))!=-1)},gatherAttribute:function(t,i,r,n){var s,n=n?n:0,r=r?r:3;return t&&(s=t.getAttribute(i),!s&&n<r)?e.gatherAttribute(t.parentNode,i,r,n+1):s},gatherElements:function(t,i,r){var n,s;for(n=0;n<t.children.length;n++){var a=t.children[n];if("clipPath"==a.tagName){for(s=0;s<a.childNodes.length;s++)a.childNodes[s].setAttribute("fill","transparent");t.clippings[a.id]=a}else if("pattern"==a.tagName){var o={node:a,source:a.getAttribute("xlink:href"),width:Number(a.getAttribute("width")),height:Number(a.getAttribute("height")),repeat:"repeat"};for(s=0;s<a.childNodes.length;s++)"rect"==a.childNodes[s].tagName&&(o.fill=a.childNodes[s].getAttribute("fill"));i.removeImages&&e.isTainted(o.source)?t.patterns[a.id]=o.fill?o.fill:"transparent":(r.included++,fabric.Image.fromURL(o.source,function(e){return function(i){r.loaded++;var n=new fabric.StaticCanvas(void 0,{backgroundColor:e.fill});n.add(i);var s=new fabric.Pattern({source:function(){return n.setDimensions({width:e.width,height:e.height}),n.getElement()},repeat:"repeat"});t.patterns[e.node.id]=s}}(o)))}else"image"==a.tagName&&(r.included++,fabric.Image.fromURL(a.getAttribute("xlink:href"),function(t){r.loaded++}))}return t},capture:function(t,i){var r,n=e.deepMerge(e.deepMerge({},e.config.fabric),t||{}),s=[],a={x:0,y:0,width:e.setup.chart.divRealWidth,height:e.setup.chart.divRealHeight},o={loaded:0,included:0},l=e.setup.chart.containerDiv.getElementsByTagName("svg");for(r=0;r<l.length;r++){var h={svg:l[r],parent:l[r].parentNode,children:l[r].getElementsByTagName("*"),offset:{x:0,y:0},patterns:{},clippings:{}};h=e.gatherElements(h,n,o),s.push(h)}if(e.config.legend&&e.setup.chart.legend&&"outside"==e.setup.chart.legend.position){var h={svg:e.setup.chart.legend.container.container,parent:e.setup.chart.legend.container.container.parentNode,children:e.setup.chart.legend.container.container.getElementsByTagName("*"),
offset:{x:0,y:0},legend:{type:["top","left"].indexOf(e.config.legend.position)!=-1?"unshift":"push",position:e.config.legend.position,width:e.config.legend.width?e.config.legend.width:e.setup.chart.legend.container.width,height:e.config.legend.height?e.config.legend.height:e.setup.chart.legend.container.height},patterns:{},clippings:{}};["left","right"].indexOf(h.legend.position)!=-1?(a.width+=h.legend.width,a.height=h.legend.height>a.height?h.legend.height:a.height):["top","bottom"].indexOf(h.legend.position)!=-1&&(a.height+=h.legend.height),h=e.gatherElements(h,n,o),s[h.legend.type](h)}if(e.drawing.enabled=n.isDrawingMode=!(!n.drawing||!n.drawing.enabled)||"draw"==n.action,e.setup.wrapper?e.setup.wrapper.innerHTML="":(e.setup.wrapper=document.createElement("div"),e.setup.wrapper.setAttribute("class",e.setup.chart.classNamePrefix+"-export-canvas"),e.setup.chart.containerDiv.appendChild(e.setup.wrapper)),"stock"==e.setup.chart.type){var c={top:0,right:0,bottom:0,left:0};e.setup.chart.leftContainer&&(a.width-=e.setup.chart.leftContainer.offsetWidth,c.left=e.setup.chart.leftContainer.offsetWidth+2*e.setup.chart.panelsSettings.panelSpacing),e.setup.chart.rightContainer&&(a.width-=e.setup.chart.rightContainer.offsetWidth,c.right=e.setup.chart.rightContainer.offsetWidth+2*e.setup.chart.panelsSettings.panelSpacing),e.setup.chart.periodSelector&&["top","bottom"].indexOf(e.setup.chart.periodSelector.position)!=-1&&(a.height-=e.setup.chart.periodSelector.offsetHeight+e.setup.chart.panelsSettings.panelSpacing,c[e.setup.chart.periodSelector.position]+=e.setup.chart.periodSelector.offsetHeight+e.setup.chart.panelsSettings.panelSpacing),e.setup.chart.dataSetSelector&&["top","bottom"].indexOf(e.setup.chart.dataSetSelector.position)!=-1&&(a.height-=e.setup.chart.dataSetSelector.offsetHeight,c[e.setup.chart.dataSetSelector.position]+=e.setup.chart.dataSetSelector.offsetHeight),e.setup.wrapper.style.paddingTop=e.numberToPx(c.top),e.setup.wrapper.style.paddingRight=e.numberToPx(c.right),e.setup.wrapper.style.paddingBottom=e.numberToPx(c.bottom),e.setup.wrapper.style.paddingLeft=e.numberToPx(c.left)}for(e.setup.canvas=document.createElement("canvas"),e.setup.wrapper.appendChild(e.setup.canvas),e.setup.fabric=new fabric.Canvas(e.setup.canvas,e.deepMerge({width:a.width,height:a.height},n)),e.deepMerge(e.setup.fabric,n),e.setup.fabric.on("object:added",function(t){var i=t.target,r=JSON.stringify(i.originalState);i.selectable&&!i.known&&(e.drawing.undos.push({action:"added",target:i,options:r}),e.drawing.redos=[])}),e.setup.fabric.on("object:modified",function(t){var i=t.target,r=JSON.stringify(i.saveState().originalState);i.selectable&&e.drawing.undos.push({action:"modified",target:i,options:r})}),e.drawing.enabled?(e.setup.wrapper.setAttribute("class",e.setup.chart.classNamePrefix+"-export-canvas active"),e.setup.wrapper.style.backgroundColor=n.backgroundColor):e.setup.wrapper.setAttribute("class",e.setup.chart.classNamePrefix+"-export-canvas"),r=0;r<s.length;r++){var h=s[r];h.parent.style.top||h.parent.style.left?(h.offset.y=e.pxToNumber(h.parent.style.top),h.offset.x=e.pxToNumber(h.parent.style.left)):(h.legend?"left"==h.legend.position?a.x+=h.legend.width:"right"==h.legend.position?h.offset.x+=a.width-h.legend.width:"top"==h.legend.position?a.y+=h.legend.height:"bottom"==h.legend.position&&(h.offset.y+=a.height-h.legend.height):(h.offset.x=a.x,h.offset.y=a.y,a.y+=e.pxToNumber(h.parent.style.height)),h.parent&&(h.parent.getAttribute("class")||"").split(" ").indexOf("amChartsLegend")!=-1&&(a.y+=e.pxToNumber(h.parent.parentNode.parentNode.style.marginTop),h.offset.y+=e.pxToNumber(h.parent.parentNode.parentNode.style.marginTop))),e.handleCallback(n.beforeCapture,n),fabric.parseSVGDocument(h.svg,function(t){return function(r,a){var l,h=fabric.util.groupSVGElements(r,a),c={top:t.offset.y,left:t.offset.x,selectable:!1};for(l=0;l<h.paths.length;l++)if(h.paths[l]){if(n.removeImages&&e.isTainted(h.paths[l]["xlink:href"])){h.paths.splice(l,1);continue}if(h.paths[l].fill instanceof Object)"radial"==h.paths[l].fill.type&&(h.paths[l].fill.coords.r2=h.paths[l].fill.coords.r1*-1,h.paths[l].fill.coords.r1=0),h.paths[l].set({opacity:h.paths[l].fillOpacity});else if("url"==String(h.paths[l].fill).slice(0,3)){var u=h.paths[l].fill.slice(5,-1);t.patterns&&t.patterns[u]&&h.paths[l].set({fill:t.patterns[u],opacity:h.paths[l].fillOpacity})}if("url"==String(h.paths[l].clipPath).slice(0,3)){var u=h.paths[l].clipPath.slice(5,-1);if(t.clippings[u]){var f=t.clippings[u].childNodes[0],d=h.paths[l].svg.getAttribute("transform")||"translate(0,0)";d=d.slice(10,-1).split(","),h.paths[l].set({clipTo:function(t,e){return function(i){var r=Number(t.getAttribute("width")||"0"),n=Number(t.getAttribute("height")||"0"),s=Number(t.getAttribute("x")||"0"),a=Number(t.getAttribute("y")||"0");i.rect(Number(e[0])*-1+s,Number(e[1])*-1+a,r,n)}}(f,d)})}}if(h.paths[l].originalBBox){var p=h.paths[l].originalBBox;"left"==h.paths[l].textAlign?h.paths[l].set({left:p.left+h.paths[l].width/2}):h.paths[l].set({left:p.left-h.paths[l].width/2})}}if(h.set(c),e.setup.fabric.add(h),t.svg.parentNode&&t.svg.parentNode.getElementsByTagName){var g=t.svg.parentNode.getElementsByClassName(e.setup.chart.classNamePrefix+"-balloon-div");for(l=0;l<g.length;l++)if(n.balloonFunction instanceof Function)n.balloonFunction.apply(e,[g[l],t]);else{var m=g[l],v=m.childNodes[0],b=new fabric.Text(v.innerText||v.innerHTML,{fontSize:e.pxToNumber(v.style.fontSize),fontFamily:v.style.fontFamily,fill:v.style.color,top:e.pxToNumber(m.style.top)+t.offset.y,left:e.pxToNumber(m.style.left)+t.offset.x,selectable:!1});e.setup.fabric.add(b)}}if(t.svg.nextSibling&&"A"==t.svg.nextSibling.tagName){var b=new fabric.Text(t.svg.nextSibling.innerText||t.svg.nextSibling.innerHTML,{fontSize:e.pxToNumber(t.svg.nextSibling.style.fontSize),fontFamily:t.svg.nextSibling.style.fontFamily,fill:t.svg.nextSibling.style.color,top:e.pxToNumber(t.svg.nextSibling.style.top)+t.offset.y,left:e.pxToNumber(t.svg.nextSibling.style.left)+t.offset.x});e.setup.fabric.add(b)}if(s.pop(),!s.length)var y=setInterval(function(){o.loaded==o.included&&(clearTimeout(y),e.handleCallback(n.afterCapture,n),e.setup.fabric.renderAll(),e.handleCallback(i,n))},AmCharts.updateRate)}}(h),function(t,i){var r,s=e.gatherAttribute(t,"class"),a=e.gatherAttribute(t,"visibility"),o=e.gatherAttribute(t,"clip-path");if(i.className=s,i.clipPath=o,i.svg=t,"text"==t.tagName&&t.childNodes.length>1){var l=[],h=t.getAttribute("text-anchor")||"left",c={start:"left",middle:"center",end:"right"};for(r=0;r<t.childNodes.length;r++)l.push(t.childNodes[r].textContent);i.className==e.setup.chart.classNamePrefix+"-label"&&(i.originalBBox=i.getBoundingRect()),i.set({top:i.top+i.height/2*(l.length-1),text:l.join("\n"),textAlign:c[h]})}if("hidden"==a)i.opacity=0;else{var u=["fill","stroke"];for(r=0;r<u.length;r++){var f=u[r],d=String(t.getAttribute(f)||""),p=Number(t.getAttribute(f+"-opacity")||"1"),g=fabric.Color.fromHex(d).getSource();i.className!=e.setup.chart.classNamePrefix+"-guide-fill"||d||(p=0,g=fabric.Color.fromHex("#000000").getSource()),g&&(g.pop(),g.push(p),i[f]="rgba("+g.join()+")",i[e.capitalize(f+"-opacity")]=p)}}e.handleCallback(n.reviver,i,t)})}},toCanvas:function(t,i){var r=(e.deepMerge({},t||{}),e.setup.canvas);return e.handleCallback(i,r),r},toImage:function(t,i){var r=e.deepMerge({format:"png",quality:1,multiplier:1},t||{}),n=r.data,s=document.createElement("img");return r.data||(n=r.lossless||"svg"==r.format?e.toSVG(e.deepMerge(r,{getBase64:!0})):e.setup.fabric.toDataURL(r)),s.setAttribute("src",n),e.handleCallback(i,s),s},toBlob:function(t,i){var r=e.deepMerge({data:"empty",type:"text/plain"},t||{}),n=/^data:.+;base64,(.*)$/.exec(r.data);return n&&(r.data=n[0],r.type=r.data.slice(5,r.data.indexOf(",")-7),r.data=e.toByteArray({data:r.data.slice(r.data.indexOf(",")+1,r.data.length)})),r.getByteArray?data=r.data:data=new Blob([r.data],{type:r.type}),e.handleCallback(i,data),data},toJPG:function(t,i){var r=e.deepMerge({format:"jpeg",quality:1,multiplier:1},t||{}),n=e.setup.fabric.toDataURL(r);return e.handleCallback(i,n),n},toPNG:function(t,i){var r=e.deepMerge({format:"png",quality:1,multiplier:1},t||{}),n=e.setup.fabric.toDataURL(r);return e.handleCallback(i,n),n},toSVG:function(t,i){var r=e.deepMerge({},t||{}),n=e.setup.fabric.toSVG(r);return r.getBase64&&(n="data:image/svg+xml;base64,"+btoa(n)),e.handleCallback(i,n),n},toPDF:function(t,i){var r=e.deepMerge(e.deepMerge({multiplier:2},e.config.pdfMake),t||{},!0);r.images.reference=e.toPNG(r);var n=new pdfMake.createPdf(r);return i&&n.getDataUrl(function(t){return function(){t.apply(e,arguments)}}(i)),n},toPRINT:function(t,i){var r,n=e.deepMerge({delay:1,lossless:!1},t||{}),s=e.toImage(n),a=[],o=document.body.childNodes;for(s.setAttribute("style","width: 100%; max-height: 100%;"),r=0;r<o.length;r++)e.isElement(o[r])&&(a[r]=o[r].style.display,o[r].style.display="none");return document.body.appendChild(s),window.print(),setTimeout(function(){for(r=0;r<o.length;r++)e.isElement(o[r])&&(o[r].style.display=a[r]);document.body.removeChild(s),e.handleCallback(i,s)},n.delay),s},toJSON:function(t,i){var r=e.deepMerge({data:e.getChartData()},t||{},!0),n=JSON.stringify(r.data,void 0,"\t");return e.handleCallback(i,n),n},toCSV:function(t,i){function r(t,e){return"string"==typeof t?t=t:e&&a.dateFormat&&t instanceof Date&&a.dateFields.indexOf(e)!=-1&&(t=AmCharts.formatDate(t,a.dateFormat)),"string"==typeof t&&(a.escape&&(t=t.replace('"','""')),a.quotes&&(t=['"',t,'"'].join(""))),t}var n,s,a=e.deepMerge({data:e.getChartData(),delimiter:",",quotes:!0,escape:!0,dateFields:[],dateFormat:e.setup.chart.dataDateFormat||"YYYY-MM-DD"},t||{},!0),o="",l=[],h=[];e.setup.chart.categoryAxis&&e.setup.chart.categoryAxis.parseDates&&e.setup.chart.categoryField&&a.dateFields.push(e.setup.chart.categoryField);for(u in a.data[0])h.push(r(u)),l.push(u);o+=h.join(a.delimiter)+"\n";for(n in a.data)if(h=[],!isNaN(n)){for(s in l)if(!isNaN(s)){var c=l[s],u=a.data[n][c];h.push(r(u,c))}o+=h.join(a.delimiter)+"\n"}return e.handleCallback(i,o),o},toXLSX:function(t,i){function r(t,e){e&&(t+=1462);var i=Date.parse(t);return(i-new Date(Date.UTC(1899,11,30)))/864e5}function n(t,e){for(var i={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}},s=0;s!=t.length;++s)for(var a=0;a!=t[s].length;++a){n.s.r>s&&(n.s.r=s),n.s.c>a&&(n.s.c=a),n.e.r<s&&(n.e.r=s),n.e.c<a&&(n.e.c=a);var o={v:t[s][a]};if(null!=o.v){var l=XLSX.utils.encode_cell({c:a,r:s});"number"==typeof o.v?o.t="n":"boolean"==typeof o.v?o.t="b":o.v instanceof Date?(o.t="n",o.z=XLSX.SSF._table[14],o.v=r(o.v)):o.t="s",i[l]=o}}return n.s.c<1e7&&(i["!ref"]=XLSX.utils.encode_range(n)),i}var s=e.deepMerge({data:e.getChartData(),name:"amCharts",withHeader:!0},t||{},!0),a="",o={SheetNames:[],Sheets:{}};return o.SheetNames.push(s.name),o.Sheets[s.name]=n(e.toArray(s)),a=XLSX.write(o,{bookType:"xlsx",bookSST:!0,type:"base64"}),a="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+a,e.handleCallback(i,a),a},toArray:function(t,i){var r,n,s=e.deepMerge({data:e.getChartData(),dateFields:[],dateFormat:!1,withHeader:!1},t||{},!0),a=[],o=[];if(s.withHeader){for(n in s.data[0])o.push(n);a.push(o)}for(r in s.data){var l=[];if(!isNaN(r)){for(n in o){var n=o[n],h=s.data[r][n]||"";h=s.dateFormat&&h instanceof Date&&s.dateFields.indexOf(n)!=-1?AmCharts.formatDate(h,s.dateFormat):String(h),l.push(h)}a.push(l)}}return e.handleCallback(i,a),a},toByteArray:function(t,i){function r(t){var e=t.charCodeAt(0);return e===o?62:e===l?63:e<h?-1:e<h+10?e-h+26+26:e<u+26?e-u:e<c+26?e-c+26:void 0}function n(t){function e(t){h[u++]=t}var i,n,s,o,l,h;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;l="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,h=new a(3*t.length/4-l),s=l>0?t.length-4:t.length;var u=0;for(i=0,n=0;i<s;i+=4,n+=3)o=r(t.charAt(i))<<18|r(t.charAt(i+1))<<12|r(t.charAt(i+2))<<6|r(t.charAt(i+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===l?(o=r(t.charAt(i))<<2|r(t.charAt(i+1))>>4,e(255&o)):1===l&&(o=r(t.charAt(i))<<10|r(t.charAt(i+1))<<4|r(t.charAt(i+2))>>2,e(o>>8&255),e(255&o)),h}var s=e.deepMerge({},t||{}),a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),l="/".charCodeAt(0),h="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0),f=n(s.data);return e.handleCallback(i,f),f},handleCallback:function(t){var i,r=Array();if(t&&t instanceof Function){for(i=0;i<arguments.length;i++)i>0&&r.push(arguments[i]);t.apply(e,r)}},getChartData:function(){var t,i,r=[];if("stock"==e.setup.chart.type)r=e.setup.chart.mainDataSet.dataProvider;else if("gantt"==e.setup.chart.type){var n=e.setup.chart.segmentsField;for(t=0;t<e.setup.chart.dataProvider.length;t++)if(e.setup.chart.dataProvider[t][n])for(i=0;i<e.setup.chart.dataProvider[t][n].length;i++)r.push(e.setup.chart.dataProvider[t][n][i])}else r=e.setup.chart.dataProvider;return r},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},createMenu:function(i,r){function n(i,r){var s,a=document.createElement("ul");for(s=0;s<i.length;s++){var o="string"==typeof i[s]?{format:i[s]}:i[s],l=document.createElement("li"),h=document.createElement("a"),c=document.createElement("img"),u=document.createElement("span"),f=String(o.action?o.action:o.format).toLowerCase();o.format=String(o.format).toUpperCase(),e.config.formats[o.format]?o=e.deepMerge({label:o.icon?"":o.format,format:o.format,mimeType:e.config.formats[o.format].mimeType,extension:e.config.formats[o.format].extension,capture:e.config.formats[o.format].capture,action:e.config.action,fileName:e.config.fileName},o):o.menu||o.items||(o.label=o.label?o.label:e.capitalize(f)),["CSV","JSON","XLSX"].indexOf(o.format)!=-1&&["map","gauge"].indexOf(e.setup.chart.type)!=-1||!e.setup.hasBlob&&"UNDEFINED"!=o.format&&o.mimeType&&"image"!=o.mimeType.split("/")[0]&&"text/plain"!=o.mimeType||(o.click||o.menu||o.items?"draw"==o.action&&(o.click=function(t){return function(){this.capture(t,function(){this.createMenu(t.menu)})}}(o)):e.drawing.actions.indexOf(f)!=-1?(o.action=f,o.click=function(t){return function(){this.drawing[t.action]()}}(o)):e.drawing.enabled?o.click=function(t){return function(){this["to"+t.format](t,function(e){this.drawing.done(),"print"!=t.action&&"PRINT"!=t.format&&this.download(e,t.mimeType,[t.fileName,t.extension].join("."))})}}(o):"UNDEFINED"!=o.format&&(o.click=function(t){return function(){if(t.capture||"print"==t.action||"PRINT"==t.format)this.capture(t,function(){this["to"+t.format](t,function(e){"download"==t.action&&this.download(e,t.mimeType,[t.fileName,t.extension].join("."))})});else{if(!this["to"+t.format])throw new Error("Invalid format. Could not determine output type.");this["to"+t.format](t,function(e){this.download(e,t.mimeType,[t.fileName,t.extension].join("."))})}}}(o)),h.setAttribute("href","#"),h.addEventListener("click",function(t,i){return function(r){return r.preventDefault(),i.delay=i.delay?i.delay:e.config.delay,i.delay?void e.delay(i,t):void t.apply(e,arguments)}}(o.click||function(t){t.preventDefault()},o)),l.appendChild(h),u.innerHTML=o.label,o.class&&(l.className=o.class),o.icon&&(c.setAttribute("src",(o.icon.slice(0,10).indexOf("//")==-1?t.pathToImages:"")+o.icon),h.appendChild(c)),o.label&&h.appendChild(u),o.title&&h.setAttribute("title",o.title),e.config.menuReviver&&(l=e.config.menuReviver.apply(e,[o,l])),(o.menu||o.items)&&"draw"!=o.action?n(o.menu||o.items,l).childNodes.length&&a.appendChild(l):a.appendChild(l))}return r.appendChild(a)}return r||("string"==typeof e.config.divId?e.config.divId=r=document.getElementById(e.config.divId):r=e.isElement(e.config.divId)?e.config.divId:e.setup.chart.containerDiv),e.isElement(e.setup.menu)?e.setup.menu.innerHTML="":e.setup.menu=document.createElement("div"),e.setup.menu.setAttribute("class",e.setup.chart.classNamePrefix+"-export-menu "+e.setup.chart.classNamePrefix+"-export-menu-"+e.config.position+" amExportButton"),e.config.menuWalker&&(n=e.config.menuWalker),n.apply(this,[i,e.setup.menu]),r.appendChild(e.setup.menu),e.setup.menu},delay:function(t,i){var r,n,s=e.deepMerge({delay:3,precision:2},t||{}),a=Number(new Date),o=e.createMenu([{label:e.i18l("capturing.delayed.menu.label").replace("{{duration}}",AmCharts.toFixed(s.delay,s.precision)),title:e.i18l("capturing.delayed.menu.title"),class:"export-delayed-capturing",click:function(){clearTimeout(r),clearTimeout(n),e.createMenu(e.config.menu)}}]),l=o.getElementsByTagName("a")[0];r=setInterval(function(){var t=s.delay-(Number(new Date)-a)/1e3;t<=0?(clearTimeout(r),"draw"!=s.action&&e.createMenu(e.config.menu)):l&&(l.innerHTML=e.i18l("capturing.delayed.menu.label").replace("{{duration}}",AmCharts.toFixed(t,2)))},10),n=setTimeout(function(){i.apply(e,arguments)},1e3*s.delay)},migrateSetup:function(t){function i(t){var e;for(e in t){var n=t[e];"export"==e.slice(0,6)&&n?r.menu.push(e.slice(6)):"userCFG"==e?i(n):"menuItems"==e?r.menu=n:"libs"==e?r.libs=n:"string"==typeof e&&(r[e]=n)}}if(t.amExport||t.exportConfig){var r=e.deepMerge({enabled:!0,migrated:!0,libs:{autoLoad:!1}},e.deepMerge(e.defaults,{menu:[]},!0));i(t.amExport||t.exportConfig),t.export=r}return t},init:function(){clearTimeout(e.timer),e.timer=setInterval(function(){e.setup.chart.containerDiv&&(clearTimeout(e.timer),e.setup.chart.AmExport=e,window.safari=window.safari?window.safari:{},e.createMenu(e.config.menu))},AmCharts.updateRate)}};if(e.drawing.cancel=e.drawing.done,e.setup.chart=e.migrateSetup(t),void 0!==e.setup.chart.export&&e.setup.chart.export.enabled){try{e.setup.hasBlob=!!new Blob}catch(t){}e.deepMerge(e.libs,e.setup.chart.export.libs||{},!0),e.deepMerge(e.defaults.pdfMake,e.setup.chart.export),e.deepMerge(e.defaults.fabric,e.setup.chart.export),e.config=e.deepMerge(e.defaults,e.setup.chart.export,!0),AmCharts.isIE&&AmCharts.IEversion<=9&&(!document.head||e.config.fallback===!1)||(e.setup.chart.export=e,e.setup.chart.addClassNames=!0,e.loadDependencies(e.libs.resources,e.libs.reload),e.init())}},["pie","serial","xy","funnel","radar","gauge","stock","map","gantt"]),define("text",["module"],function(t){"use strict";var e,i,r,n,s,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,c=h&&location.protocol&&location.protocol.replace(/\:/,""),u=h&&location.hostname,f=h&&(location.port||void 0),d={},p=t.config&&t.config()||{};return e={version:"2.0.14",strip:function(t){if(t){t=t.replace(o,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){i=a[e];try{t=new ActiveXObject(i)}catch(t){}if(t){a=[i];break}}return t},parseName:function(t){var e,i,r,n=!1,s=t.lastIndexOf("."),a=0===t.indexOf("./")||0===t.indexOf("../");return s!==-1&&(!a||s>1)?(e=t.substring(0,s),i=t.substring(s+1)):e=t,r=i||e,s=r.indexOf("!"),s!==-1&&(n="strip"===r.substring(s+1),r=r.substring(0,s),i?i=r:e=r),{moduleName:e,ext:i,strip:n}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,r,n){var s,a,o,l=e.xdRegExp.exec(t);return!l||(s=l[2],a=l[3],a=a.split(":"),o=a[1],a=a[0],!(s&&s!==i||a&&a.toLowerCase()!==r.toLowerCase()||(o||a)&&o!==n))},finishLoad:function(t,i,r,n){r=i?e.strip(r):r,p.isBuild&&(d[t]=r),n(r)},load:function(t,i,r,n){if(n&&n.isBuild&&!n.inlineText)return void r();p.isBuild=n&&n.isBuild;var s=e.parseName(t),a=s.moduleName+(s.ext?"."+s.ext:""),o=i.toUrl(a),l=p.useXhr||e.useXhr;return 0===o.indexOf("empty:")?void r():void(!h||l(o,c,u,f)?e.get(o,function(i){e.finishLoad(t,s.strip,i,r)},function(t){r.error&&r.error(t)}):i([a],function(t){e.finishLoad(s.moduleName+"."+s.ext,s.strip,t,r)}))},write:function(t,i,r,n){if(d.hasOwnProperty(i)){var s=e.jsEscape(d[i]);r.asModule(t+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,i,r,n,s){var a=e.parseName(i),o=a.ext?"."+a.ext:"",l=a.moduleName+o,h=r.toUrl(a.moduleName+o)+".js";e.load(l,r,function(i){var r=function(t){return n(h,t)};r.asModule=function(t,e){return n.asModule(t,h,e)},e.write(t,l,r,s)},s)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),e.get=function(t,e,r){try{var n=i.readFileSync(t,"utf8");"\ufeff"===n[0]&&(n=n.substring(1)),e(n)}catch(t){r&&r(t)}}):"xhr"===p.env||!p.env&&e.createXhr()?e.get=function(t,i,r,n){var s,a=e.createXhr();if(a.open("GET",t,!0),n)for(s in n)n.hasOwnProperty(s)&&a.setRequestHeader(s.toLowerCase(),n[s]);p.onXhr&&p.onXhr(a,t),a.onreadystatechange=function(e){var n,s;4===a.readyState&&(n=a.status||0,n>399&&n<600?(s=new Error(t+" HTTP status: "+n),s.xhr=a,r&&r(s)):i(a.responseText),p.onXhrComplete&&p.onXhrComplete(a,t))},a.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,r,n="utf-8",s=new java.io.File(t),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),n)),l="";try{for(i=new java.lang.StringBuffer,r=o.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&i.append(r);null!==(r=o.readLine());)i.append(a),i.append(r);l=String(i.toString())}finally{o.close()}e(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,n=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,e.get=function(t,e){var i,a,o,l={};s&&(t=t.replace(/\//g,"\\")),o=new FileUtils.File(t);try{i=r["@mozilla.org/network/file-input-stream;1"].createInstance(n.nsIFileInputStream),i.init(o,1,0,!1),a=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(n.nsIConverterInputStream),a.init(i,"utf-8",i.available(),n.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(i.available(),l),a.close(),i.close(),e(l.value)}catch(t){throw new Error((o&&o.path||"")+": "+t)}}),e}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function i(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function r(t,e,i,r){for(var n=-1,s=t?t.length:0;++n<s;){var a=t[n];e(r,a,i(a),t)}return r}function n(t,e){for(var i=-1,r=t?t.length:0;++i<r&&e(t[i],i,t)!==!1;);return t}function s(t,e){for(var i=t?t.length:0;i--&&e(t[i],i,t)!==!1;);return t}function a(t,e){for(var i=-1,r=t?t.length:0;++i<r;)if(!e(t[i],i,t))return!1;return!0}function o(t,e){for(var i=-1,r=t?t.length:0,n=0,s=[];++i<r;){var a=t[i];e(a,i,t)&&(s[n++]=a)}return s}function l(t,e){var i=t?t.length:0;return!!i&&y(t,e,0)>-1}function h(t,e,i){for(var r=-1,n=t?t.length:0;++r<n;)if(i(e,t[r]))return!0;return!1}function c(t,e){for(var i=-1,r=t?t.length:0,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}function u(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}function f(t,e,i,r){var n=-1,s=t?t.length:0;for(r&&s&&(i=t[++n]);++n<s;)i=e(i,t[n],n,t);return i}function d(t,e,i,r){var n=t?t.length:0;for(r&&n&&(i=t[--n]);n--;)i=e(i,t[n],n,t);return i}function p(t,e){for(var i=-1,r=t?t.length:0;++i<r;)if(e(t[i],i,t))return!0;return!1}function g(t){return t.split("")}function m(t){return t.match(Ae)||[]}function v(t,e,i){var r;return i(t,function(t,i,n){if(e(t,i,n))return r=i,!1}),r}function b(t,e,i,r){for(var n=t.length,s=i+(r?1:-1);r?s--:++s<n;)if(e(t[s],s,t))return s;return-1}function y(t,e,i){if(e!==e)return b(t,w,i);for(var r=i-1,n=t.length;++r<n;)if(t[r]===e)return r;return-1}function x(t,e,i,r){for(var n=i-1,s=t.length;++n<s;)if(r(t[n],e))return n;return-1}function w(t){return t!==t}function _(t,e){var i=t?t.length:0;return i?O(t,e)/i:Ot}function C(t){return function(e){return null==e?Q:e[t]}}function S(t){return function(e){return null==t?Q:t[e]}}function T(t,e,i,r,n){return n(t,function(t,n,s){i=r?(r=!1,t):e(i,t,n,s)}),i}function k(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function O(t,e){for(var i,r=-1,n=t.length;++r<n;){var s=e(t[r]);s!==Q&&(i=i===Q?s:i+s)}return i}function A(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}function M(t,e){return c(e,function(e){return[e,t[e]]})}function D(t){return function(e){return t(e)}}function N(t,e){return c(e,function(e){return t[e]})}function L(t,e){return t.has(e)}function F(t,e){for(var i=-1,r=t.length;++i<r&&y(e,t[i],0)>-1;);return i}function I(t,e){for(var i=t.length;i--&&y(e,t[i],0)>-1;);return i}function E(t,e){for(var i=t.length,r=0;i--;)t[i]===e&&r++;return r}function P(t){return"\\"+ji[t]}function j(t,e){return null==t?Q:t[e]}function B(t){return Ai.test(t)}function R(t){return Mi.test(t)}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function W(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}function G(t){var e=-1,i=Array(t.size);return t.forEach(function(t,r){i[++e]=[r,t]}),i}function Y(t,e){return function(i){return t(e(i))}}function H(t,e){for(var i=-1,r=t.length,n=0,s=[];++i<r;){var a=t[i];a!==e&&a!==nt||(t[i]=nt,s[n++]=i)}return s}function V(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function X(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=[t,t]}),i}function U(t){return B(t)?Z(t):tr(t)}function q(t){return B(t)?$(t):g(t)}function Z(t){for(var e=ki.lastIndex=0;ki.test(t);)e++;return e}function $(t){return t.match(ki)||[]}function K(t){return t.match(Oi)||[]}function J(g){function S(t){if(jo(t)&&!Gu(t)&&!(t instanceof Ae)){if(t instanceof $)return t;if(Zh.call(t,"__wrapped__"))return Ls(t)}return new $(t)}function Z(){}function $(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Q}function Ae(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function We(){var t=new Ae(this.__wrapped__);return t.__actions__=Sn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Sn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Sn(this.__views__),t}function Ge(){if(this.__filtered__){var t=new Ae(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ye(){var t=this.__wrapped__.value(),e=this.__dir__,i=Gu(t),r=e<0,n=i?t.length:0,s=os(0,n,this.__views__),a=s.start,o=s.end,l=o-a,h=r?o:a-1,c=this.__iteratees__,u=c.length,f=0,d=wc(l,this.__takeCount__);if(!i||n<et||n==l&&d==l)return sn(t,this.__actions__);var p=[];t:for(;l--&&f<d;){h+=e;for(var g=-1,m=t[h];++g<u;){var v=c[g],b=v.iteratee,y=v.type,x=b(m);if(y==_t)m=x;else if(!x){if(y==wt)continue t;break t}}p[f++]=m}return p}function He(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Ve(){this.__data__=Dc?Dc(null):{}}function Xe(t){return this.has(t)&&delete this.__data__[t]}function Ue(t){var e=this.__data__;if(Dc){var i=e[t];return i===rt?Q:i}return Zh.call(e,t)?e[t]:Q}function qe(t){var e=this.__data__;return Dc?e[t]!==Q:Zh.call(e,t)}function Ze(t,e){var i=this.__data__;return i[t]=Dc&&e===Q?rt:e,this}function $e(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Ke(){this.__data__=[]}function Je(t){var e=this.__data__,i=wi(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():lc.call(e,i,1),!0}function Qe(t){var e=this.__data__,i=wi(e,t);return i<0?Q:e[i][1]}function ti(t){return wi(this.__data__,t)>-1}function ei(t,e){var i=this.__data__,r=wi(i,t);return r<0?i.push([t,e]):i[r][1]=e,this}function ii(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function ri(){this.__data__={hash:new He,map:new(kc||$e),string:new He}}function ni(t){return ns(this,t).delete(t)}function si(t){return ns(this,t).get(t)}function ai(t){return ns(this,t).has(t)}function oi(t,e){return ns(this,t).set(t,e),this}function li(t){var e=-1,i=t?t.length:0;for(this.__data__=new ii;++e<i;)this.add(t[e])}function hi(t){return this.__data__.set(t,rt),this}function ci(t){return this.__data__.has(t)}function ui(t){this.__data__=new $e(t)}function fi(){this.__data__=new $e}function di(t){return this.__data__.delete(t)}function pi(t){return this.__data__.get(t)}function gi(t){return this.__data__.has(t)}function mi(t,e){var i=this.__data__;if(i instanceof $e){var r=i.__data__;if(!kc||r.length<et-1)return r.push([t,e]),this;i=this.__data__=new ii(r)}return i.set(t,e),this}function vi(t,e){var i=Gu(t)||Co(t)?A(t.length,Wh):[],r=i.length,n=!!r;for(var s in t)!e&&!Zh.call(t,s)||n&&("length"==s||gs(s,r))||i.push(s);return i}function bi(t,e,i,r){return t===Q||_o(t,Vh[i])&&!Zh.call(r,i)?e:t}function yi(t,e,i){(i===Q||_o(t[e],i))&&("number"!=typeof e||i!==Q||e in t)||(t[e]=i)}function xi(t,e,i){var r=t[e];Zh.call(t,e)&&_o(r,i)&&(i!==Q||e in t)||(t[e]=i)}function wi(t,e){for(var i=t.length;i--;)if(_o(t[i][0],e))return i;return-1}function _i(t,e,i,r){return Yc(t,function(t,n,s){e(r,t,i(t),s)}),r}function Ci(t,e){return t&&Tn(e,bl(e),t)}function ki(t,e){for(var i=-1,r=null==t,n=e.length,s=Ih(n);++i<n;)s[i]=r?Q:gl(t,e[i]);return s}function Oi(t,e,i){return t===t&&(i!==Q&&(t=t<=i?t:i),e!==Q&&(t=t>=e?t:e)),t}function Ai(t,e,i,r,s,a,o){var l;if(r&&(l=a?r(t,s,a,o):r(t)),l!==Q)return l;if(!Po(t))return t;var h=Gu(t);if(h){if(l=cs(t),!e)return Sn(t,l)}else{var c=Qc(t),u=c==jt||c==Bt;if(Hu(t))return fn(t,e);if(c==Wt||c==Lt||u&&!a){if(z(t))return a?t:{};if(l=us(u?{}:t),!e)return kn(t,Ci(l,t))}else{if(!Fi[c])return a?t:{};l=fs(t,c,Ai,e)}}o||(o=new ui);var f=o.get(t);if(f)return f;if(o.set(t,l),!h)var d=i?Qn(t):bl(t);return n(d||t,function(n,s){d&&(s=n,n=t[s]),xi(l,s,Ai(n,e,i,r,s,t,o))}),l}function Mi(t){var e=bl(t);return function(i){return Ii(i,t,e)}}function Ii(t,e,i){var r=i.length;if(null==t)return!r;for(t=Rh(t);r--;){var n=i[r],s=e[n],a=t[n];if(a===Q&&!(n in t)||!s(a))return!1}return!0}function Ei(t){return Po(t)?ac(t):{}}function Pi(t,e,i){if("function"!=typeof t)throw new Gh(it);return iu(function(){t.apply(Q,i)},e)}function ji(t,e,i,r){var n=-1,s=l,a=!0,o=t.length,u=[],f=e.length;if(!o)return u;i&&(e=c(e,D(i))),r?(s=h,a=!1):e.length>=et&&(s=L,a=!1,e=new li(e));t:for(;++n<o;){var d=t[n],p=i?i(d):d;if(d=r||0!==d?d:0,a&&p===p){for(var g=f;g--;)if(e[g]===p)continue t;u.push(d)}else s(e,p,r)||u.push(d)}return u}function zi(t,e){var i=!0;return Yc(t,function(t,r,n){return i=!!e(t,r,n)}),i}function Wi(t,e,i){for(var r=-1,n=t.length;++r<n;){var s=t[r],a=e(s);if(null!=a&&(o===Q?a===a&&!qo(a):i(a,o)))var o=a,l=s}return l}function Yi(t,e,i,r){var n=t.length;for(i=tl(i),i<0&&(i=-i>n?0:n+i),r=r===Q||r>n?n:tl(r),r<0&&(r+=n),r=i>r?0:el(r);i<r;)t[i++]=e;return t}function Hi(t,e){var i=[];return Yc(t,function(t,r,n){e(t,r,n)&&i.push(t)}),i}function Xi(t,e,i,r,n){var s=-1,a=t.length;for(i||(i=ps),n||(n=[]);++s<a;){var o=t[s];e>0&&i(o)?e>1?Xi(o,e-1,i,r,n):u(n,o):r||(n[n.length]=o)}return n}function Ui(t,e){return t&&Vc(t,e,bl)}function tr(t,e){return t&&Xc(t,e,bl)}function sr(t,e){return o(e,function(e){return Fo(t[e])})}function ar(t,e){e=vs(e,t)?[e]:cn(e);for(var i=0,r=e.length;null!=t&&i<r;)t=t[Ms(e[i++])];return i&&i==r?t:Q}function or(t,e,i){var r=e(t);return Gu(t)?r:u(r,i(t))}function lr(t){return Jh.call(t)}function hr(t,e){return t>e}function cr(t,e){return null!=t&&Zh.call(t,e)}function ur(t,e){return null!=t&&e in Rh(t)}function fr(t,e,i){return t>=wc(e,i)&&t<xc(e,i)}function dr(t,e,i){for(var r=i?h:l,n=t[0].length,s=t.length,a=s,o=Ih(s),u=1/0,f=[];a--;){
var d=t[a];a&&e&&(d=c(d,D(e))),u=wc(d.length,u),o[a]=!i&&(e||n>=120&&d.length>=120)?new li(a&&d):Q}d=t[0];var p=-1,g=o[0];t:for(;++p<n&&f.length<u;){var m=d[p],v=e?e(m):m;if(m=i||0!==m?m:0,!(g?L(g,v):r(f,v,i))){for(a=s;--a;){var b=o[a];if(!(b?L(b,v):r(t[a],v,i)))continue t}g&&g.push(v),f.push(m)}}return f}function pr(t,e,i,r){return Ui(t,function(t,n,s){e(r,i(t),n,s)}),r}function gr(t,e,r){vs(e,t)||(e=cn(e),t=Os(t,e),e=Ks(e));var n=null==t?t:t[Ms(e)];return null==n?Q:i(n,t,r)}function mr(t){return jo(t)&&Jh.call(t)==Zt}function vr(t){return jo(t)&&Jh.call(t)==Et}function br(t,e,i,r,n){return t===e||(null==t||null==e||!Po(t)&&!jo(e)?t!==t&&e!==e:yr(t,e,br,i,r,n))}function yr(t,e,i,r,n,s){var a=Gu(t),o=Gu(e),l=Ft,h=Ft;a||(l=Qc(t),l=l==Lt?Wt:l),o||(h=Qc(e),h=h==Lt?Wt:h);var c=l==Wt&&!z(t),u=h==Wt&&!z(e),f=l==h;if(f&&!c)return s||(s=new ui),a||Zu(t)?$n(t,e,i,r,n,s):Kn(t,e,l,i,r,n,s);if(!(n&mt)){var d=c&&Zh.call(t,"__wrapped__"),p=u&&Zh.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,m=p?e.value():e;return s||(s=new ui),i(g,m,r,n,s)}}return!!f&&(s||(s=new ui),Jn(t,e,i,r,n,s))}function xr(t){return jo(t)&&Qc(t)==Rt}function wr(t,e,i,r){var n=i.length,s=n,a=!r;if(null==t)return!s;for(t=Rh(t);n--;){var o=i[n];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<s;){o=i[n];var l=o[0],h=t[l],c=o[1];if(a&&o[2]){if(h===Q&&!(l in t))return!1}else{var u=new ui;if(r)var f=r(h,c,l,t,e,u);if(!(f===Q?br(c,h,r,gt|mt,u):f))return!1}}return!0}function _r(t){if(!Po(t)||xs(t))return!1;var e=Fo(t)||z(t)?tc:Ee;return e.test(Ds(t))}function Cr(t){return Po(t)&&Jh.call(t)==Yt}function Sr(t){return jo(t)&&Qc(t)==Ht}function Tr(t){return jo(t)&&Eo(t.length)&&!!Li[Jh.call(t)]}function kr(t){return"function"==typeof t?t:null==t?lh:"object"==typeof t?Gu(t)?Lr(t[0],t[1]):Nr(t):mh(t)}function Or(t){if(!ws(t))return yc(t);var e=[];for(var i in Rh(t))Zh.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Ar(t){if(!Po(t))return ks(t);var e=ws(t),i=[];for(var r in t)("constructor"!=r||!e&&Zh.call(t,r))&&i.push(r);return i}function Mr(t,e){return t<e}function Dr(t,e){var i=-1,r=So(t)?Ih(t.length):[];return Yc(t,function(t,n,s){r[++i]=e(t,n,s)}),r}function Nr(t){var e=ss(t);return 1==e.length&&e[0][2]?Cs(e[0][0],e[0][1]):function(i){return i===t||wr(i,t,e)}}function Lr(t,e){return vs(t)&&_s(e)?Cs(Ms(t),e):function(i){var r=gl(i,t);return r===Q&&r===e?vl(i,t):br(e,r,Q,gt|mt)}}function Fr(t,e,i,r,s){if(t!==e){if(!Gu(e)&&!Zu(e))var a=Ar(e);n(a||e,function(n,o){if(a&&(o=n,n=e[o]),Po(n))s||(s=new ui),Ir(t,e,o,i,Fr,r,s);else{var l=r?r(t[o],n,o+"",t,e,s):Q;l===Q&&(l=n),yi(t,o,l)}})}}function Ir(t,e,i,r,n,s,a){var o=t[i],l=e[i],h=a.get(l);if(h)return void yi(t,i,h);var c=s?s(o,l,i+"",t,e,a):Q,u=c===Q;u&&(c=l,Gu(l)||Zu(l)?Gu(o)?c=o:To(o)?c=Sn(o):(u=!1,c=Ai(l,!0)):Vo(l)||Co(l)?Co(o)?c=rl(o):!Po(o)||r&&Fo(o)?(u=!1,c=Ai(l,!0)):c=o:u=!1),u&&(a.set(l,c),n(c,l,r,s,a),a.delete(l)),yi(t,i,c)}function Er(t,e){var i=t.length;if(i)return e+=e<0?i:0,gs(e,i)?t[e]:Q}function Pr(t,e,i){var r=-1;e=c(e.length?e:[lh],D(rs()));var n=Dr(t,function(t,i,n){var s=c(e,function(e){return e(t)});return{criteria:s,index:++r,value:t}});return k(n,function(t,e){return wn(t,e,i)})}function jr(t,e){return t=Rh(t),Br(t,e,function(e,i){return i in t})}function Br(t,e,i){for(var r=-1,n=e.length,s={};++r<n;){var a=e[r],o=t[a];i(o,a)&&(s[a]=o)}return s}function Rr(t){return function(e){return ar(e,t)}}function zr(t,e,i,r){var n=r?x:y,s=-1,a=e.length,o=t;for(t===e&&(e=Sn(e)),i&&(o=c(t,D(i)));++s<a;)for(var l=0,h=e[s],u=i?i(h):h;(l=n(o,u,l,r))>-1;)o!==t&&lc.call(o,l,1),lc.call(t,l,1);return t}function Wr(t,e){for(var i=t?e.length:0,r=i-1;i--;){var n=e[i];if(i==r||n!==s){var s=n;if(gs(n))lc.call(t,n,1);else if(vs(n,t))delete t[Ms(n)];else{var a=cn(n),o=Os(t,a);null!=o&&delete o[Ms(Ks(a))]}}}return t}function Gr(t,e){return t+pc(Cc()*(e-t+1))}function Yr(t,e,i,r){for(var n=-1,s=xc(dc((e-t)/(i||1)),0),a=Ih(s);s--;)a[r?s:++n]=t,t+=i;return a}function Hr(t,e){var i="";if(!t||e<1||e>Tt)return i;do e%2&&(i+=t),e=pc(e/2),e&&(t+=t);while(e);return i}function Vr(t,e){return e=xc(e===Q?t.length-1:e,0),function(){for(var r=arguments,n=-1,s=xc(r.length-e,0),a=Ih(s);++n<s;)a[n]=r[e+n];n=-1;for(var o=Ih(e+1);++n<e;)o[n]=r[n];return o[e]=a,i(t,this,o)}}function Xr(t,e,i,r){if(!Po(t))return t;e=vs(e,t)?[e]:cn(e);for(var n=-1,s=e.length,a=s-1,o=t;null!=o&&++n<s;){var l=Ms(e[n]),h=i;if(n!=a){var c=o[l];h=r?r(c,l,o):Q,h===Q&&(h=Po(c)?c:gs(e[n+1])?[]:{})}xi(o,l,h),o=o[l]}return t}function Ur(t,e,i){var r=-1,n=t.length;e<0&&(e=-e>n?0:n+e),i=i>n?n:i,i<0&&(i+=n),n=e>i?0:i-e>>>0,e>>>=0;for(var s=Ih(n);++r<n;)s[r]=t[r+e];return s}function qr(t,e){var i;return Yc(t,function(t,r,n){return i=e(t,r,n),!i}),!!i}function Zr(t,e,i){var r=0,n=t?t.length:r;if("number"==typeof e&&e===e&&n<=Dt){for(;r<n;){var s=r+n>>>1,a=t[s];null!==a&&!qo(a)&&(i?a<=e:a<e)?r=s+1:n=s}return n}return $r(t,e,lh,i)}function $r(t,e,i,r){e=i(e);for(var n=0,s=t?t.length:0,a=e!==e,o=null===e,l=qo(e),h=e===Q;n<s;){var c=pc((n+s)/2),u=i(t[c]),f=u!==Q,d=null===u,p=u===u,g=qo(u);if(a)var m=r||p;else m=h?p&&(r||f):o?p&&f&&(r||!d):l?p&&f&&!d&&(r||!g):!d&&!g&&(r?u<=e:u<e);m?n=c+1:s=c}return wc(s,Mt)}function Kr(t,e){for(var i=-1,r=t.length,n=0,s=[];++i<r;){var a=t[i],o=e?e(a):a;if(!i||!_o(o,l)){var l=o;s[n++]=0===a?0:a}}return s}function Jr(t){return"number"==typeof t?t:qo(t)?Ot:+t}function Qr(t){if("string"==typeof t)return t;if(qo(t))return Gc?Gc.call(t):"";var e=t+"";return"0"==e&&1/t==-St?"-0":e}function tn(t,e,i){var r=-1,n=l,s=t.length,a=!0,o=[],c=o;if(i)a=!1,n=h;else if(s>=et){var u=e?null:Zc(t);if(u)return V(u);a=!1,n=L,c=new li}else c=e?[]:o;t:for(;++r<s;){var f=t[r],d=e?e(f):f;if(f=i||0!==f?f:0,a&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue t;e&&c.push(d),o.push(f)}else n(c,d,i)||(c!==o&&c.push(d),o.push(f))}return o}function en(t,e){e=vs(e,t)?[e]:cn(e),t=Os(t,e);var i=Ms(Ks(e));return!(null!=t&&Zh.call(t,i))||delete t[i]}function rn(t,e,i,r){return Xr(t,e,i(ar(t,e)),r)}function nn(t,e,i,r){for(var n=t.length,s=r?n:-1;(r?s--:++s<n)&&e(t[s],s,t););return i?Ur(t,r?0:s,r?s+1:n):Ur(t,r?s+1:0,r?n:s)}function sn(t,e){var i=t;return i instanceof Ae&&(i=i.value()),f(e,function(t,e){return e.func.apply(e.thisArg,u([t],e.args))},i)}function an(t,e,i){for(var r=-1,n=t.length;++r<n;)var s=s?u(ji(s,t[r],e,i),ji(t[r],s,e,i)):t[r];return s&&s.length?tn(s,e,i):[]}function on(t,e,i){for(var r=-1,n=t.length,s=e.length,a={};++r<n;){var o=r<s?e[r]:Q;i(a,t[r],o)}return a}function ln(t){return To(t)?t:[]}function hn(t){return"function"==typeof t?t:lh}function cn(t){return Gu(t)?t:nu(t)}function un(t,e,i){var r=t.length;return i=i===Q?r:i,!e&&i>=r?t:Ur(t,e,i)}function fn(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}function dn(t){var e=new t.constructor(t.byteLength);return new rc(e).set(new rc(t)),e}function pn(t,e){var i=e?dn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}function gn(e,i,r){var n=i?r(G(e),!0):G(e);return f(n,t,new e.constructor)}function mn(t){var e=new t.constructor(t.source,Ne.exec(t));return e.lastIndex=t.lastIndex,e}function vn(t,i,r){var n=i?r(V(t),!0):V(t);return f(n,e,new t.constructor)}function bn(t){return Wc?Rh(Wc.call(t)):{}}function yn(t,e){var i=e?dn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function xn(t,e){if(t!==e){var i=t!==Q,r=null===t,n=t===t,s=qo(t),a=e!==Q,o=null===e,l=e===e,h=qo(e);if(!o&&!h&&!s&&t>e||s&&a&&l&&!o&&!h||r&&a&&l||!i&&l||!n)return 1;if(!r&&!s&&!h&&t<e||h&&i&&n&&!r&&!s||o&&i&&n||!a&&n||!l)return-1}return 0}function wn(t,e,i){for(var r=-1,n=t.criteria,s=e.criteria,a=n.length,o=i.length;++r<a;){var l=xn(n[r],s[r]);if(l){if(r>=o)return l;var h=i[r];return l*("desc"==h?-1:1)}}return t.index-e.index}function _n(t,e,i,r){for(var n=-1,s=t.length,a=i.length,o=-1,l=e.length,h=xc(s-a,0),c=Ih(l+h),u=!r;++o<l;)c[o]=e[o];for(;++n<a;)(u||n<s)&&(c[i[n]]=t[n]);for(;h--;)c[o++]=t[n++];return c}function Cn(t,e,i,r){for(var n=-1,s=t.length,a=-1,o=i.length,l=-1,h=e.length,c=xc(s-o,0),u=Ih(c+h),f=!r;++n<c;)u[n]=t[n];for(var d=n;++l<h;)u[d+l]=e[l];for(;++a<o;)(f||n<s)&&(u[d+i[a]]=t[n++]);return u}function Sn(t,e){var i=-1,r=t.length;for(e||(e=Ih(r));++i<r;)e[i]=t[i];return e}function Tn(t,e,i,r){i||(i={});for(var n=-1,s=e.length;++n<s;){var a=e[n],o=r?r(i[a],t[a],a,i,t):Q;xi(i,a,o===Q?t[a]:o)}return i}function kn(t,e){return Tn(t,Kc(t),e)}function On(t,e){return function(i,n){var s=Gu(i)?r:_i,a=e?e():{};return s(i,t,rs(n,2),a)}}function An(t){return Vr(function(e,i){var r=-1,n=i.length,s=n>1?i[n-1]:Q,a=n>2?i[2]:Q;for(s=t.length>3&&"function"==typeof s?(n--,s):Q,a&&ms(i[0],i[1],a)&&(s=n<3?Q:s,n=1),e=Rh(e);++r<n;){var o=i[r];o&&t(e,o,r,s)}return e})}function Mn(t,e){return function(i,r){if(null==i)return i;if(!So(i))return t(i,r);for(var n=i.length,s=e?n:-1,a=Rh(i);(e?s--:++s<n)&&r(a[s],s,a)!==!1;);return i}}function Dn(t){return function(e,i,r){for(var n=-1,s=Rh(e),a=r(e),o=a.length;o--;){var l=a[t?o:++n];if(i(s[l],l,s)===!1)break}return e}}function Nn(t,e,i){function r(){var e=this&&this!==Gi&&this instanceof r?s:t;return e.apply(n?i:this,arguments)}var n=e&st,s=In(t);return r}function Ln(t){return function(e){e=sl(e);var i=B(e)?q(e):Q,r=i?i[0]:e.charAt(0),n=i?un(i,1).join(""):e.slice(1);return r[t]()+n}}function Fn(t){return function(e){return f(rh(jl(e).replace(Si,"")),t,"")}}function In(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ei(t.prototype),r=t.apply(i,e);return Po(r)?r:i}}function En(t,e,r){function n(){for(var a=arguments.length,o=Ih(a),l=a,h=is(n);l--;)o[l]=arguments[l];var c=a<3&&o[0]!==h&&o[a-1]!==h?[]:H(o,h);if(a-=c.length,a<r)return Xn(t,e,Bn,n.placeholder,Q,o,c,Q,Q,r-a);var u=this&&this!==Gi&&this instanceof n?s:t;return i(u,this,o)}var s=In(t);return n}function Pn(t){return function(e,i,r){var n=Rh(e);if(!So(e)){var s=rs(i,3);e=bl(e),i=function(t){return s(n[t],t,n)}}var a=t(e,i,r);return a>-1?n[s?e[a]:a]:Q}}function jn(t){return Vr(function(e){e=Xi(e,1);var i=e.length,r=i,n=$.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Gh(it);if(n&&!a&&"wrapper"==es(s))var a=new $([],!0)}for(r=a?r:i;++r<i;){s=e[r];var o=es(s),l="wrapper"==o?$c(s):Q;a=l&&ys(l[0])&&l[1]==(ft|lt|ct|dt)&&!l[4].length&&1==l[9]?a[es(l[0])].apply(a,l[3]):1==s.length&&ys(s)?a[o]():a.thru(s)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Gu(r)&&r.length>=et)return a.plant(r).value();for(var n=0,s=i?e[n].apply(this,t):r;++n<i;)s=e[n].call(this,s);return s}})}function Bn(t,e,i,r,n,s,a,o,l,h){function c(){for(var v=arguments.length,b=Ih(v),y=v;y--;)b[y]=arguments[y];if(p)var x=is(c),w=E(b,x);if(r&&(b=_n(b,r,n,p)),s&&(b=Cn(b,s,a,p)),v-=w,p&&v<h){var _=H(b,x);return Xn(t,e,Bn,c.placeholder,i,b,_,o,l,h-v)}var C=f?i:this,S=d?C[t]:t;return v=b.length,o?b=As(b,o):g&&v>1&&b.reverse(),u&&l<v&&(b.length=l),this&&this!==Gi&&this instanceof c&&(S=m||In(S)),S.apply(C,b)}var u=e&ft,f=e&st,d=e&at,p=e&(lt|ht),g=e&pt,m=d?Q:In(t);return c}function Rn(t,e){return function(i,r){return pr(i,t,e(r),{})}}function zn(t,e){return function(i,r){var n;if(i===Q&&r===Q)return e;if(i!==Q&&(n=i),r!==Q){if(n===Q)return r;"string"==typeof i||"string"==typeof r?(i=Qr(i),r=Qr(r)):(i=Jr(i),r=Jr(r)),n=t(i,r)}return n}}function Wn(t){return Vr(function(e){return e=1==e.length&&Gu(e[0])?c(e[0],D(rs())):c(Xi(e,1),D(rs())),Vr(function(r){var n=this;return t(e,function(t){return i(t,n,r)})})})}function Gn(t,e){e=e===Q?" ":Qr(e);var i=e.length;if(i<2)return i?Hr(e,t):e;var r=Hr(e,dc(t/U(e)));return B(e)?un(q(r),0,t).join(""):r.slice(0,t)}function Yn(t,e,r,n){function s(){for(var e=-1,l=arguments.length,h=-1,c=n.length,u=Ih(c+l),f=this&&this!==Gi&&this instanceof s?o:t;++h<c;)u[h]=n[h];for(;l--;)u[h++]=arguments[++e];return i(f,a?r:this,u)}var a=e&st,o=In(t);return s}function Hn(t){return function(e,i,r){return r&&"number"!=typeof r&&ms(e,i,r)&&(i=r=Q),e=Qo(e),i===Q?(i=e,e=0):i=Qo(i),r=r===Q?e<i?1:-1:Qo(r),Yr(e,i,r,t)}}function Vn(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=il(e),i=il(i)),t(e,i)}}function Xn(t,e,i,r,n,s,a,o,l,h){var c=e&lt,u=c?a:Q,f=c?Q:a,d=c?s:Q,p=c?Q:s;e|=c?ct:ut,e&=~(c?ut:ct),e&ot||(e&=~(st|at));var g=[t,e,n,d,u,p,f,o,l,h],m=i.apply(Q,g);return ys(t)&&eu(m,g),m.placeholder=r,ru(m,t,e)}function Un(t){var e=Bh[t];return function(t,i){if(t=il(t),i=wc(tl(i),292)){var r=(sl(t)+"e").split("e"),n=e(r[0]+"e"+(+r[1]+i));return r=(sl(n)+"e").split("e"),+(r[0]+"e"+(+r[1]-i))}return e(t)}}function qn(t){return function(e){var i=Qc(e);return i==Rt?G(e):i==Ht?X(e):M(e,t(e))}}function Zn(t,e,i,r,n,s,a,o){var l=e&at;if(!l&&"function"!=typeof t)throw new Gh(it);var h=r?r.length:0;if(h||(e&=~(ct|ut),r=n=Q),a=a===Q?a:xc(tl(a),0),o=o===Q?o:tl(o),h-=n?n.length:0,e&ut){var c=r,u=n;r=n=Q}var f=l?Q:$c(t),d=[t,e,i,r,n,c,u,s,a,o];if(f&&Ss(d,f),t=d[0],e=d[1],i=d[2],r=d[3],n=d[4],o=d[9]=null==d[9]?l?0:t.length:xc(d[9]-h,0),!o&&e&(lt|ht)&&(e&=~(lt|ht)),e&&e!=st)p=e==lt||e==ht?En(t,e,o):e!=ct&&e!=(st|ct)||n.length?Bn.apply(Q,d):Yn(t,e,i,r);else var p=Nn(t,e,i);var g=f?Uc:eu;return ru(g(p,d),t,e)}function $n(t,e,i,r,n,s){var a=n&mt,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var c=-1,u=!0,f=n&gt?new li:Q;for(s.set(t,e),s.set(e,t);++c<o;){var d=t[c],g=e[c];if(r)var m=a?r(g,d,c,e,t,s):r(d,g,c,t,e,s);if(m!==Q){if(m)continue;u=!1;break}if(f){if(!p(e,function(t,e){if(!f.has(e)&&(d===t||i(d,t,r,n,s)))return f.add(e)})){u=!1;break}}else if(d!==g&&!i(d,g,r,n,s)){u=!1;break}}return s.delete(t),s.delete(e),u}function Kn(t,e,i,r,n,s,a){switch(i){case $t:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Zt:return!(t.byteLength!=e.byteLength||!r(new rc(t),new rc(e)));case It:case Et:case zt:return _o(+t,+e);case Pt:return t.name==e.name&&t.message==e.message;case Yt:case Vt:return t==e+"";case Rt:var o=G;case Ht:var l=s&mt;if(o||(o=V),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;s|=gt,a.set(t,e);var c=$n(o(t),o(e),r,n,s,a);return a.delete(t),c;case Xt:if(Wc)return Wc.call(t)==Wc.call(e)}return!1}function Jn(t,e,i,r,n,s){var a=n&mt,o=bl(t),l=o.length,h=bl(e),c=h.length;if(l!=c&&!a)return!1;for(var u=l;u--;){var f=o[u];if(!(a?f in e:Zh.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++u<l;){f=o[u];var m=t[f],v=e[f];if(r)var b=a?r(v,m,f,e,t,s):r(m,v,f,t,e,s);if(!(b===Q?m===v||i(m,v,r,n,s):b)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var y=t.constructor,x=e.constructor;y!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x)&&(p=!1)}return s.delete(t),s.delete(e),p}function Qn(t){return or(t,bl,Kc)}function ts(t){return or(t,yl,Jc)}function es(t){for(var e=t.name+"",i=Ic[e],r=Zh.call(Ic,e)?i.length:0;r--;){var n=i[r],s=n.func;if(null==s||s==t)return n.name}return e}function is(t){var e=Zh.call(S,"placeholder")?S:t;return e.placeholder}function rs(){var t=S.iteratee||hh;return t=t===hh?kr:t,arguments.length?t(arguments[0],arguments[1]):t}function ns(t,e){var i=t.__data__;return bs(e)?i["string"==typeof e?"string":"hash"]:i.map}function ss(t){for(var e=bl(t),i=e.length;i--;){var r=e[i],n=t[r];e[i]=[r,n,_s(n)]}return e}function as(t,e){var i=j(t,e);return _r(i)?i:Q}function os(t,e,i){for(var r=-1,n=i.length;++r<n;){var s=i[r],a=s.size;switch(s.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wc(e,t+a);break;case"takeRight":t=xc(t,e-a)}}return{start:t,end:e}}function ls(t){var e=t.match(ke);return e?e[1].split(Oe):[]}function hs(t,e,i){e=vs(e,t)?[e]:cn(e);for(var r,n=-1,s=e.length;++n<s;){var a=Ms(e[n]);if(!(r=null!=t&&i(t,a)))break;t=t[a]}if(r)return r;var s=t?t.length:0;return!!s&&Eo(s)&&gs(a,s)&&(Gu(t)||Co(t))}function cs(t){var e=t.length,i=t.constructor(e);return e&&"string"==typeof t[0]&&Zh.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function us(t){return"function"!=typeof t.constructor||ws(t)?{}:Ei(nc(t))}function fs(t,e,i,r){var n=t.constructor;switch(e){case Zt:return dn(t);case It:case Et:return new n(+t);case $t:return pn(t,r);case Kt:case Jt:case Qt:case te:case ee:case ie:case re:case ne:case se:return yn(t,r);case Rt:return gn(t,r,i);case zt:case Vt:return new n(t);case Yt:return mn(t);case Ht:return vn(t,r,i);case Xt:return bn(t)}}function ds(t,e){var i=e.length,r=i-1;return e[r]=(i>1?"& ":"")+e[r],e=e.join(i>2?", ":" "),t.replace(Te,"{\n/* [wrapped with "+e+"] */\n")}function ps(t){return Gu(t)||Co(t)||!!(hc&&t&&t[hc])}function gs(t,e){return e=null==e?Tt:e,!!e&&("number"==typeof t||je.test(t))&&t>-1&&t%1==0&&t<e}function ms(t,e,i){if(!Po(i))return!1;var r=typeof e;return!!("number"==r?So(i)&&gs(e,i.length):"string"==r&&e in i)&&_o(i[e],t)}function vs(t,e){if(Gu(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!qo(t))||(ve.test(t)||!me.test(t)||null!=e&&t in Rh(e))}function bs(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ys(t){var e=es(t),i=S[e];if("function"!=typeof i||!(e in Ae.prototype))return!1;if(t===i)return!0;var r=$c(i);return!!r&&t===r[0]}function xs(t){return!!Uh&&Uh in t}function ws(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||Vh;return t===i}function _s(t){return t===t&&!Po(t)}function Cs(t,e){return function(i){return null!=i&&(i[t]===e&&(e!==Q||t in Rh(i)))}}function Ss(t,e){var i=t[1],r=e[1],n=i|r,s=n<(st|at|ft),a=r==ft&&i==lt||r==ft&&i==dt&&t[7].length<=e[8]||r==(ft|dt)&&e[7].length<=e[8]&&i==lt;if(!s&&!a)return t;r&st&&(t[2]=e[2],n|=i&st?0:ot);var o=e[3];if(o){var l=t[3];t[3]=l?_n(l,o,e[4]):o,t[4]=l?H(t[3],nt):e[4]}return o=e[5],o&&(l=t[5],t[5]=l?Cn(l,o,e[6]):o,t[6]=l?H(t[5],nt):e[6]),o=e[7],o&&(t[7]=o),r&ft&&(t[8]=null==t[8]?e[8]:wc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=n,t}function Ts(t,e,i,r,n,s){return Po(t)&&Po(e)&&(s.set(e,t),Fr(t,e,Q,Ts,s),s.delete(e)),t}function ks(t){var e=[];if(null!=t)for(var i in Rh(t))e.push(i);return e}function Os(t,e){return 1==e.length?t:ar(t,Ur(e,0,-1))}function As(t,e){for(var i=t.length,r=wc(e.length,i),n=Sn(t);r--;){var s=e[r];t[r]=gs(s,i)?n[s]:Q}return t}function Ms(t){if("string"==typeof t||qo(t))return t;var e=t+"";return"0"==e&&1/t==-St?"-0":e}function Ds(t){if(null!=t){try{return qh.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ns(t,e){return n(Nt,function(i){var r="_."+i[0];e&i[1]&&!l(t,r)&&t.push(r)}),t.sort()}function Ls(t){if(t instanceof Ae)return t.clone();var e=new $(t.__wrapped__,t.__chain__);return e.__actions__=Sn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Fs(t,e,i){e=(i?ms(t,e,i):e===Q)?1:xc(tl(e),0);var r=t?t.length:0;if(!r||e<1)return[];for(var n=0,s=0,a=Ih(dc(r/e));n<r;)a[s++]=Ur(t,n,n+=e);return a}function Is(t){for(var e=-1,i=t?t.length:0,r=0,n=[];++e<i;){var s=t[e];s&&(n[r++]=s)}return n}function Es(){for(var t=arguments.length,e=Ih(t?t-1:0),i=arguments[0],r=t;r--;)e[r-1]=arguments[r];return t?u(Gu(i)?Sn(i):[i],Xi(e,1)):[]}function Ps(t,e,i){var r=t?t.length:0;return r?(e=i||e===Q?1:tl(e),Ur(t,e<0?0:e,r)):[]}function js(t,e,i){var r=t?t.length:0;return r?(e=i||e===Q?1:tl(e),e=r-e,Ur(t,0,e<0?0:e)):[]}function Bs(t,e){return t&&t.length?nn(t,rs(e,3),!0,!0):[]}function Rs(t,e){return t&&t.length?nn(t,rs(e,3),!0):[]}function zs(t,e,i,r){var n=t?t.length:0;return n?(i&&"number"!=typeof i&&ms(t,e,i)&&(i=0,r=n),Yi(t,e,i,r)):[]}function Ws(t,e,i){var r=t?t.length:0;if(!r)return-1;var n=null==i?0:tl(i);return n<0&&(n=xc(r+n,0)),b(t,rs(e,3),n)}function Gs(t,e,i){var r=t?t.length:0;if(!r)return-1;var n=r-1;return i!==Q&&(n=tl(i),n=i<0?xc(r+n,0):wc(n,r-1)),b(t,rs(e,3),n,!0)}function Ys(t){var e=t?t.length:0;return e?Xi(t,1):[]}function Hs(t){var e=t?t.length:0;return e?Xi(t,St):[]}function Vs(t,e){var i=t?t.length:0;return i?(e=e===Q?1:tl(e),Xi(t,e)):[]}function Xs(t){for(var e=-1,i=t?t.length:0,r={};++e<i;){var n=t[e];r[n[0]]=n[1]}return r}function Us(t){return t&&t.length?t[0]:Q}function qs(t,e,i){var r=t?t.length:0;if(!r)return-1;var n=null==i?0:tl(i);return n<0&&(n=xc(r+n,0)),y(t,e,n)}function Zs(t){var e=t?t.length:0;return e?Ur(t,0,-1):[]}function $s(t,e){return t?bc.call(t,e):""}function Ks(t){var e=t?t.length:0;return e?t[e-1]:Q}function Js(t,e,i){var r=t?t.length:0;if(!r)return-1;var n=r;if(i!==Q&&(n=tl(i),n=(n<0?xc(r+n,0):wc(n,r-1))+1),e!==e)return b(t,w,n-1,!0);for(;n--;)if(t[n]===e)return n;return-1}function Qs(t,e){return t&&t.length?Er(t,tl(e)):Q}function ta(t,e){return t&&t.length&&e&&e.length?zr(t,e):t}function ea(t,e,i){return t&&t.length&&e&&e.length?zr(t,e,rs(i,2)):t}function ia(t,e,i){return t&&t.length&&e&&e.length?zr(t,e,Q,i):t}function ra(t,e){var i=[];if(!t||!t.length)return i;var r=-1,n=[],s=t.length;for(e=rs(e,3);++r<s;){var a=t[r];e(a,r,t)&&(i.push(a),n.push(r))}return Wr(t,n),i}function na(t){return t?Sc.call(t):t}function sa(t,e,i){var r=t?t.length:0;return r?(i&&"number"!=typeof i&&ms(t,e,i)?(e=0,i=r):(e=null==e?0:tl(e),i=i===Q?r:tl(i)),Ur(t,e,i)):[]}function aa(t,e){return Zr(t,e)}function oa(t,e,i){return $r(t,e,rs(i,2))}function la(t,e){var i=t?t.length:0;if(i){var r=Zr(t,e);if(r<i&&_o(t[r],e))return r}return-1}function ha(t,e){return Zr(t,e,!0)}function ca(t,e,i){return $r(t,e,rs(i,2),!0)}function ua(t,e){var i=t?t.length:0;if(i){var r=Zr(t,e,!0)-1;if(_o(t[r],e))return r}return-1}function fa(t){return t&&t.length?Kr(t):[]}function da(t,e){return t&&t.length?Kr(t,rs(e,2)):[]}function pa(t){var e=t?t.length:0;return e?Ur(t,1,e):[]}function ga(t,e,i){return t&&t.length?(e=i||e===Q?1:tl(e),Ur(t,0,e<0?0:e)):[]}function ma(t,e,i){var r=t?t.length:0;return r?(e=i||e===Q?1:tl(e),e=r-e,Ur(t,e<0?0:e,r)):[]}function va(t,e){return t&&t.length?nn(t,rs(e,3),!1,!0):[]}function ba(t,e){return t&&t.length?nn(t,rs(e,3)):[]}function ya(t){return t&&t.length?tn(t):[]}function xa(t,e){return t&&t.length?tn(t,rs(e,2)):[]}function wa(t,e){return t&&t.length?tn(t,Q,e):[]}function _a(t){if(!t||!t.length)return[];var e=0;return t=o(t,function(t){if(To(t))return e=xc(t.length,e),!0}),A(e,function(e){return c(t,C(e))})}function Ca(t,e){if(!t||!t.length)return[];var r=_a(t);return null==e?r:c(r,function(t){return i(e,Q,t)})}function Sa(t,e){return on(t||[],e||[],xi)}function Ta(t,e){return on(t||[],e||[],Xr)}function ka(t){var e=S(t);return e.__chain__=!0,e}function Oa(t,e){return e(t),t}function Aa(t,e){return e(t)}function Ma(){return ka(this)}function Da(){return new $(this.value(),this.__chain__)}function Na(){this.__values__===Q&&(this.__values__=Jo(this.value()));var t=this.__index__>=this.__values__.length,e=t?Q:this.__values__[this.__index__++];return{done:t,value:e}}function La(){return this}function Fa(t){for(var e,i=this;i instanceof Z;){var r=Ls(i);r.__index__=0,r.__values__=Q,e?n.__wrapped__=r:e=r;var n=r;i=i.__wrapped__}return n.__wrapped__=t,e}function Ia(){var t=this.__wrapped__;if(t instanceof Ae){var e=t;return this.__actions__.length&&(e=new Ae(this)),e=e.reverse(),e.__actions__.push({func:Aa,args:[na],thisArg:Q}),new $(e,this.__chain__)}return this.thru(na)}function Ea(){return sn(this.__wrapped__,this.__actions__)}function Pa(t,e,i){var r=Gu(t)?a:zi;return i&&ms(t,e,i)&&(e=Q),r(t,rs(e,3))}function ja(t,e){var i=Gu(t)?o:Hi;return i(t,rs(e,3))}function Ba(t,e){return Xi(Ha(t,e),1)}function Ra(t,e){return Xi(Ha(t,e),St)}function za(t,e,i){return i=i===Q?1:tl(i),Xi(Ha(t,e),i)}function Wa(t,e){var i=Gu(t)?n:Yc;return i(t,rs(e,3))}function Ga(t,e){var i=Gu(t)?s:Hc;return i(t,rs(e,3))}function Ya(t,e,i,r){t=So(t)?t:Nl(t),i=i&&!r?tl(i):0;var n=t.length;return i<0&&(i=xc(n+i,0)),Uo(t)?i<=n&&t.indexOf(e,i)>-1:!!n&&y(t,e,i)>-1}function Ha(t,e){var i=Gu(t)?c:Dr;return i(t,rs(e,3))}function Va(t,e,i,r){return null==t?[]:(Gu(e)||(e=null==e?[]:[e]),i=r?Q:i,Gu(i)||(i=null==i?[]:[i]),Pr(t,e,i))}function Xa(t,e,i){var r=Gu(t)?f:T,n=arguments.length<3;return r(t,rs(e,4),i,n,Yc)}function Ua(t,e,i){var r=Gu(t)?d:T,n=arguments.length<3;return r(t,rs(e,4),i,n,Hc)}function qa(t,e){var i=Gu(t)?o:Hi;return i(t,lo(rs(e,3)))}function Za(t){var e=So(t)?t:Nl(t),i=e.length;return i>0?e[Gr(0,i-1)]:Q}function $a(t,e,i){var r=-1,n=Jo(t),s=n.length,a=s-1;for(e=(i?ms(t,e,i):e===Q)?1:Oi(tl(e),0,s);++r<e;){var o=Gr(r,a),l=n[o];n[o]=n[r],n[r]=l}return n.length=e,n}function Ka(t){return $a(t,At)}function Ja(t){if(null==t)return 0;if(So(t))return Uo(t)?U(t):t.length;var e=Qc(t);return e==Rt||e==Ht?t.size:Or(t).length}function Qa(t,e,i){var r=Gu(t)?p:qr;return i&&ms(t,e,i)&&(e=Q),r(t,rs(e,3))}function to(t,e){if("function"!=typeof e)throw new Gh(it);return t=tl(t),function(){if(--t<1)return e.apply(this,arguments)}}function eo(t,e,i){return e=i?Q:e,e=t&&null==e?t.length:e,Zn(t,ft,Q,Q,Q,Q,e)}function io(t,e){var i;if("function"!=typeof e)throw new Gh(it);return t=tl(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=Q),i}}function ro(t,e,i){e=i?Q:e;var r=Zn(t,lt,Q,Q,Q,Q,Q,e);return r.placeholder=ro.placeholder,r}function no(t,e,i){e=i?Q:e;var r=Zn(t,ht,Q,Q,Q,Q,Q,e);return r.placeholder=no.placeholder,r}function so(t,e,i){function r(e){var i=f,r=d;return f=d=Q,b=e,g=t.apply(r,i)}function n(t){return b=t,m=iu(o,e),y?r(t):g}function s(t){var i=t-v,r=t-b,n=e-i;return x?wc(n,p-r):n}function a(t){var i=t-v,r=t-b;return v===Q||i>=e||i<0||x&&r>=p}function o(){var t=Nu();return a(t)?l(t):void(m=iu(o,s(t)))}function l(t){return m=Q,w&&f?r(t):(f=d=Q,g)}function h(){m!==Q&&qc(m),b=0,f=v=d=m=Q}function c(){return m===Q?g:l(Nu())}function u(){var t=Nu(),i=a(t);if(f=arguments,d=this,v=t,i){if(m===Q)return n(v);if(x)return m=iu(o,e),r(v)}return m===Q&&(m=iu(o,e)),g}var f,d,p,g,m,v,b=0,y=!1,x=!1,w=!0;if("function"!=typeof t)throw new Gh(it);return e=il(e)||0,Po(i)&&(y=!!i.leading,x="maxWait"in i,p=x?xc(il(i.maxWait)||0,e):p,w="trailing"in i?!!i.trailing:w),u.cancel=h,u.flush=c,u}function ao(t){return Zn(t,pt)}function oo(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Gh(it);var i=function(){var r=arguments,n=e?e.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var a=t.apply(this,r);return i.cache=s.set(n,a),a};return i.cache=new(oo.Cache||ii),i}function lo(t){if("function"!=typeof t)throw new Gh(it);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ho(t){return io(2,t)}function co(t,e){if("function"!=typeof t)throw new Gh(it);return e=e===Q?e:tl(e),Vr(t,e)}function uo(t,e){if("function"!=typeof t)throw new Gh(it);return e=e===Q?0:xc(tl(e),0),Vr(function(r){var n=r[e],s=un(r,0,e);return n&&u(s,n),i(t,this,s)})}function fo(t,e,i){var r=!0,n=!0;if("function"!=typeof t)throw new Gh(it);return Po(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),so(t,e,{leading:r,maxWait:e,trailing:n})}function po(t){return eo(t,1)}function go(t,e){return e=null==e?lh:e,ju(e,t)}function mo(){if(!arguments.length)return[];var t=arguments[0];return Gu(t)?t:[t]}function vo(t){return Ai(t,!1,!0)}function bo(t,e){return Ai(t,!1,!0,e)}function yo(t){return Ai(t,!0,!0)}function xo(t,e){return Ai(t,!0,!0,e)}function wo(t,e){return null==e||Ii(t,e,bl(e))}function _o(t,e){return t===e||t!==t&&e!==e}function Co(t){return To(t)&&Zh.call(t,"callee")&&(!oc.call(t,"callee")||Jh.call(t)==Lt)}function So(t){return null!=t&&Eo(t.length)&&!Fo(t)}function To(t){return jo(t)&&So(t)}function ko(t){return t===!0||t===!1||jo(t)&&Jh.call(t)==It}function Oo(t){return!!t&&1===t.nodeType&&jo(t)&&!Vo(t)}function Ao(t){if(So(t)&&(Gu(t)||"string"==typeof t||"function"==typeof t.splice||Hu(t)||Co(t)))return!t.length;var e=Qc(t);if(e==Rt||e==Ht)return!t.size;if(Fc||ws(t))return!yc(t).length;for(var i in t)if(Zh.call(t,i))return!1;return!0}function Mo(t,e){return br(t,e)}function Do(t,e,i){i="function"==typeof i?i:Q;var r=i?i(t,e):Q;return r===Q?br(t,e,i):!!r}function No(t){return!!jo(t)&&(Jh.call(t)==Pt||"string"==typeof t.message&&"string"==typeof t.name)}function Lo(t){return"number"==typeof t&&vc(t)}function Fo(t){var e=Po(t)?Jh.call(t):"";return e==jt||e==Bt}function Io(t){return"number"==typeof t&&t==tl(t)}function Eo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Tt}function Po(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function jo(t){return!!t&&"object"==typeof t}function Bo(t,e){return t===e||wr(t,e,ss(e))}function Ro(t,e,i){return i="function"==typeof i?i:Q,wr(t,e,ss(e),i)}function zo(t){return Ho(t)&&t!=+t}function Wo(t){if(tu(t))throw new Ph("This method is not supported with core-js. Try https://github.com/es-shims.");return _r(t)}function Go(t){return null===t}function Yo(t){return null==t}function Ho(t){return"number"==typeof t||jo(t)&&Jh.call(t)==zt}function Vo(t){if(!jo(t)||Jh.call(t)!=Wt||z(t))return!1;var e=nc(t);if(null===e)return!0;var i=Zh.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&qh.call(i)==Kh}function Xo(t){return Io(t)&&t>=-Tt&&t<=Tt}function Uo(t){return"string"==typeof t||!Gu(t)&&jo(t)&&Jh.call(t)==Vt}function qo(t){return"symbol"==typeof t||jo(t)&&Jh.call(t)==Xt}function Zo(t){return t===Q}function $o(t){return jo(t)&&Qc(t)==Ut}function Ko(t){return jo(t)&&Jh.call(t)==qt}function Jo(t){if(!t)return[];if(So(t))return Uo(t)?q(t):Sn(t);if(sc&&t[sc])return W(t[sc]());var e=Qc(t),i=e==Rt?G:e==Ht?V:Nl;return i(t)}function Qo(t){if(!t)return 0===t?t:0;if(t=il(t),t===St||t===-St){var e=t<0?-1:1;return e*kt}return t===t?t:0}function tl(t){var e=Qo(t),i=e%1;return e===e?i?e-i:e:0}function el(t){return t?Oi(tl(t),0,At):0}function il(t){if("number"==typeof t)return t;if(qo(t))return Ot;if(Po(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Po(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(_e,"");var i=Ie.test(t);return i||Pe.test(t)?Ri(t.slice(2),i?2:8):Fe.test(t)?Ot:+t}function rl(t){return Tn(t,yl(t))}function nl(t){return Oi(tl(t),-Tt,Tt)}function sl(t){return null==t?"":Qr(t)}function al(t,e){var i=Ei(t);return e?Ci(i,e):i}function ol(t,e){return v(t,rs(e,3),Ui)}function ll(t,e){return v(t,rs(e,3),tr)}function hl(t,e){return null==t?t:Vc(t,rs(e,3),yl)}function cl(t,e){return null==t?t:Xc(t,rs(e,3),yl)}function ul(t,e){return t&&Ui(t,rs(e,3))}function fl(t,e){return t&&tr(t,rs(e,3))}function dl(t){return null==t?[]:sr(t,bl(t))}function pl(t){return null==t?[]:sr(t,yl(t))}function gl(t,e,i){var r=null==t?Q:ar(t,e);return r===Q?i:r}function ml(t,e){return null!=t&&hs(t,e,cr)}function vl(t,e){return null!=t&&hs(t,e,ur)}function bl(t){return So(t)?vi(t):Or(t)}function yl(t){return So(t)?vi(t,!0):Ar(t)}function xl(t,e){var i={};return e=rs(e,3),Ui(t,function(t,r,n){i[e(t,r,n)]=t}),i}function wl(t,e){var i={};return e=rs(e,3),Ui(t,function(t,r,n){i[r]=e(t,r,n)}),i}function _l(t,e){return Cl(t,lo(rs(e)))}function Cl(t,e){return null==t?{}:Br(t,ts(t),rs(e))}function Sl(t,e,i){e=vs(e,t)?[e]:cn(e);var r=-1,n=e.length;for(n||(t=Q,n=1);++r<n;){var s=null==t?Q:t[Ms(e[r])];s===Q&&(r=n,s=i),t=Fo(s)?s.call(t):s}return t}function Tl(t,e,i){return null==t?t:Xr(t,e,i)}function kl(t,e,i,r){return r="function"==typeof r?r:Q,null==t?t:Xr(t,e,i,r)}function Ol(t,e,i){var r=Gu(t)||Zu(t);if(e=rs(e,4),null==i)if(r||Po(t)){var s=t.constructor;i=r?Gu(t)?new s:[]:Fo(s)?Ei(nc(t)):{}}else i={};return(r?n:Ui)(t,function(t,r,n){return e(i,t,r,n)}),i}function Al(t,e){return null==t||en(t,e)}function Ml(t,e,i){return null==t?t:rn(t,e,hn(i))}function Dl(t,e,i,r){return r="function"==typeof r?r:Q,null==t?t:rn(t,e,hn(i),r)}function Nl(t){return t?N(t,bl(t)):[]}function Ll(t){return null==t?[]:N(t,yl(t))}function Fl(t,e,i){return i===Q&&(i=e,e=Q),i!==Q&&(i=il(i),i=i===i?i:0),e!==Q&&(e=il(e),e=e===e?e:0),Oi(il(t),e,i)}function Il(t,e,i){return e=Qo(e),i===Q?(i=e,e=0):i=Qo(i),t=il(t),fr(t,e,i)}function El(t,e,i){
if(i&&"boolean"!=typeof i&&ms(t,e,i)&&(e=i=Q),i===Q&&("boolean"==typeof e?(i=e,e=Q):"boolean"==typeof t&&(i=t,t=Q)),t===Q&&e===Q?(t=0,e=1):(t=Qo(t),e===Q?(e=t,t=0):e=Qo(e)),t>e){var r=t;t=e,e=r}if(i||t%1||e%1){var n=Cc();return wc(t+n*(e-t+Bi("1e-"+((n+"").length-1))),e)}return Gr(t,e)}function Pl(t){return _f(sl(t).toLowerCase())}function jl(t){return t=sl(t),t&&t.replace(Be,er).replace(Ti,"")}function Bl(t,e,i){t=sl(t),e=Qr(e);var r=t.length;i=i===Q?r:Oi(tl(i),0,r);var n=i;return i-=e.length,i>=0&&t.slice(i,n)==e}function Rl(t){return t=sl(t),t&&fe.test(t)?t.replace(ce,ir):t}function zl(t){return t=sl(t),t&&we.test(t)?t.replace(xe,"\\$&"):t}function Wl(t,e,i){t=sl(t),e=tl(e);var r=e?U(t):0;if(!e||r>=e)return t;var n=(e-r)/2;return Gn(pc(n),i)+t+Gn(dc(n),i)}function Gl(t,e,i){t=sl(t),e=tl(e);var r=e?U(t):0;return e&&r<e?t+Gn(e-r,i):t}function Yl(t,e,i){t=sl(t),e=tl(e);var r=e?U(t):0;return e&&r<e?Gn(e-r,i)+t:t}function Hl(t,e,i){return i||null==e?e=0:e&&(e=+e),t=sl(t).replace(_e,""),_c(t,e||(Le.test(t)?16:10))}function Vl(t,e,i){return e=(i?ms(t,e,i):e===Q)?1:tl(e),Hr(sl(t),e)}function Xl(){var t=arguments,e=sl(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function Ul(t,e,i){return i&&"number"!=typeof i&&ms(t,e,i)&&(e=i=Q),(i=i===Q?At:i>>>0)?(t=sl(t),t&&("string"==typeof e||null!=e&&!Uu(e))&&(e=Qr(e),!e&&B(t))?un(q(t),0,i):t.split(e,i)):[]}function ql(t,e,i){return t=sl(t),i=Oi(tl(i),0,t.length),e=Qr(e),t.slice(i,i+e.length)==e}function Zl(t,e,i){var r=S.templateSettings;i&&ms(t,e,i)&&(e=Q),t=sl(t),e=tf({},e,r,bi);var n,s,a=tf({},e.imports,r.imports,bi),o=bl(a),l=N(a,o),h=0,c=e.interpolate||Re,u="__p += '",f=zh((e.escape||Re).source+"|"+c.source+"|"+(c===ge?De:Re).source+"|"+(e.evaluate||Re).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ni+"]")+"\n";t.replace(f,function(e,i,r,a,o,l){return r||(r=a),u+=t.slice(h,l).replace(ze,P),i&&(n=!0,u+="' +\n__e("+i+") +\n'"),o&&(s=!0,u+="';\n"+o+";\n__p += '"),r&&(u+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=l+e.length,e}),u+="';\n";var p=e.variable;p||(u="with (obj) {\n"+u+"\n}\n"),u=(s?u.replace(ae,""):u).replace(oe,"$1").replace(le,"$1;"),u="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(n?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var g=Cf(function(){return jh(o,d+"return "+u).apply(Q,l)});if(g.source=u,No(g))throw g;return g}function $l(t){return sl(t).toLowerCase()}function Kl(t){return sl(t).toUpperCase()}function Jl(t,e,i){if(t=sl(t),t&&(i||e===Q))return t.replace(_e,"");if(!t||!(e=Qr(e)))return t;var r=q(t),n=q(e),s=F(r,n),a=I(r,n)+1;return un(r,s,a).join("")}function Ql(t,e,i){if(t=sl(t),t&&(i||e===Q))return t.replace(Se,"");if(!t||!(e=Qr(e)))return t;var r=q(t),n=I(r,q(e))+1;return un(r,0,n).join("")}function th(t,e,i){if(t=sl(t),t&&(i||e===Q))return t.replace(Ce,"");if(!t||!(e=Qr(e)))return t;var r=q(t),n=F(r,q(e));return un(r,n).join("")}function eh(t,e){var i=vt,r=bt;if(Po(e)){var n="separator"in e?e.separator:n;i="length"in e?tl(e.length):i,r="omission"in e?Qr(e.omission):r}t=sl(t);var s=t.length;if(B(t)){var a=q(t);s=a.length}if(i>=s)return t;var o=i-U(r);if(o<1)return r;var l=a?un(a,0,o).join(""):t.slice(0,o);if(n===Q)return l+r;if(a&&(o+=l.length-o),Uu(n)){if(t.slice(o).search(n)){var h,c=l;for(n.global||(n=zh(n.source,sl(Ne.exec(n))+"g")),n.lastIndex=0;h=n.exec(c);)var u=h.index;l=l.slice(0,u===Q?o:u)}}else if(t.indexOf(Qr(n),o)!=o){var f=l.lastIndexOf(n);f>-1&&(l=l.slice(0,f))}return l+r}function ih(t){return t=sl(t),t&&ue.test(t)?t.replace(he,rr):t}function rh(t,e,i){return t=sl(t),e=i?Q:e,e===Q?R(t)?K(t):m(t):t.match(e)||[]}function nh(t){var e=t?t.length:0,r=rs();return t=e?c(t,function(t){if("function"!=typeof t[1])throw new Gh(it);return[r(t[0]),t[1]]}):[],Vr(function(r){for(var n=-1;++n<e;){var s=t[n];if(i(s[0],this,r))return i(s[1],this,r)}})}function sh(t){return Mi(Ai(t,!0))}function ah(t){return function(){return t}}function oh(t,e){return null==t||t!==t?e:t}function lh(t){return t}function hh(t){return kr("function"==typeof t?t:Ai(t,!0))}function ch(t){return Nr(Ai(t,!0))}function uh(t,e){return Lr(t,Ai(e,!0))}function fh(t,e,i){var r=bl(e),s=sr(e,r);null!=i||Po(e)&&(s.length||!r.length)||(i=e,e=t,t=this,s=sr(e,bl(e)));var a=!(Po(i)&&"chain"in i&&!i.chain),o=Fo(t);return n(s,function(i){var r=e[i];t[i]=r,o&&(t.prototype[i]=function(){var e=this.__chain__;if(a||e){var i=t(this.__wrapped__),n=i.__actions__=Sn(this.__actions__);return n.push({func:r,args:arguments,thisArg:t}),i.__chain__=e,i}return r.apply(t,u([this.value()],arguments))})}),t}function dh(){return Gi._===this&&(Gi._=Qh),this}function ph(){}function gh(t){return t=tl(t),Vr(function(e){return Er(e,t)})}function mh(t){return vs(t)?C(Ms(t)):Rr(t)}function vh(t){return function(e){return null==t?Q:ar(t,e)}}function bh(){return[]}function yh(){return!1}function xh(){return{}}function wh(){return""}function _h(){return!0}function Ch(t,e){if(t=tl(t),t<1||t>Tt)return[];var i=At,r=wc(t,At);e=rs(e),t-=At;for(var n=A(r,e);++i<t;)e(i);return n}function Sh(t){return Gu(t)?c(t,Ms):qo(t)?[t]:Sn(nu(t))}function Th(t){var e=++$h;return sl(t)+e}function kh(t){return t&&t.length?Wi(t,lh,hr):Q}function Oh(t,e){return t&&t.length?Wi(t,rs(e,2),hr):Q}function Ah(t){return _(t,lh)}function Mh(t,e){return _(t,rs(e,2))}function Dh(t){return t&&t.length?Wi(t,lh,Mr):Q}function Nh(t,e){return t&&t.length?Wi(t,rs(e,2),Mr):Q}function Lh(t){return t&&t.length?O(t,lh):0}function Fh(t,e){return t&&t.length?O(t,rs(e,2)):0}g=g?nr.defaults(Gi.Object(),g,nr.pick(Gi,Di)):Gi;var Ih=g.Array,Eh=g.Date,Ph=g.Error,jh=g.Function,Bh=g.Math,Rh=g.Object,zh=g.RegExp,Wh=g.String,Gh=g.TypeError,Yh=Ih.prototype,Hh=jh.prototype,Vh=Rh.prototype,Xh=g["__core-js_shared__"],Uh=function(){var t=/[^.]+$/.exec(Xh&&Xh.keys&&Xh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),qh=Hh.toString,Zh=Vh.hasOwnProperty,$h=0,Kh=qh.call(Rh),Jh=Vh.toString,Qh=Gi._,tc=zh("^"+qh.call(Zh).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ec=Vi?g.Buffer:Q,ic=g.Symbol,rc=g.Uint8Array,nc=Y(Rh.getPrototypeOf,Rh),sc=ic?ic.iterator:Q,ac=Rh.create,oc=Vh.propertyIsEnumerable,lc=Yh.splice,hc=ic?ic.isConcatSpreadable:Q,cc=g.clearTimeout!==Gi.clearTimeout&&g.clearTimeout,uc=Eh&&Eh.now!==Gi.Date.now&&Eh.now,fc=g.setTimeout!==Gi.setTimeout&&g.setTimeout,dc=Bh.ceil,pc=Bh.floor,gc=Rh.getOwnPropertySymbols,mc=ec?ec.isBuffer:Q,vc=g.isFinite,bc=Yh.join,yc=Y(Rh.keys,Rh),xc=Bh.max,wc=Bh.min,_c=g.parseInt,Cc=Bh.random,Sc=Yh.reverse,Tc=as(g,"DataView"),kc=as(g,"Map"),Oc=as(g,"Promise"),Ac=as(g,"Set"),Mc=as(g,"WeakMap"),Dc=as(Rh,"create"),Nc=function(){var t=as(Rh,"defineProperty"),e=as.name;return e&&e.length>2?t:Q}(),Lc=Mc&&new Mc,Fc=!oc.call({valueOf:1},"valueOf"),Ic={},Ec=Ds(Tc),Pc=Ds(kc),jc=Ds(Oc),Bc=Ds(Ac),Rc=Ds(Mc),zc=ic?ic.prototype:Q,Wc=zc?zc.valueOf:Q,Gc=zc?zc.toString:Q;S.templateSettings={escape:de,evaluate:pe,interpolate:ge,variable:"",imports:{_:S}},S.prototype=Z.prototype,S.prototype.constructor=S,$.prototype=Ei(Z.prototype),$.prototype.constructor=$,Ae.prototype=Ei(Z.prototype),Ae.prototype.constructor=Ae,He.prototype.clear=Ve,He.prototype.delete=Xe,He.prototype.get=Ue,He.prototype.has=qe,He.prototype.set=Ze,$e.prototype.clear=Ke,$e.prototype.delete=Je,$e.prototype.get=Qe,$e.prototype.has=ti,$e.prototype.set=ei,ii.prototype.clear=ri,ii.prototype.delete=ni,ii.prototype.get=si,ii.prototype.has=ai,ii.prototype.set=oi,li.prototype.add=li.prototype.push=hi,li.prototype.has=ci,ui.prototype.clear=fi,ui.prototype.delete=di,ui.prototype.get=pi,ui.prototype.has=gi,ui.prototype.set=mi;var Yc=Mn(Ui),Hc=Mn(tr,!0),Vc=Dn(),Xc=Dn(!0),Uc=Lc?function(t,e){return Lc.set(t,e),t}:lh,qc=cc||function(t){return Gi.clearTimeout(t)},Zc=Ac&&1/V(new Ac([,-0]))[1]==St?function(t){return new Ac(t)}:ph,$c=Lc?function(t){return Lc.get(t)}:ph,Kc=gc?Y(gc,Rh):bh,Jc=gc?function(t){for(var e=[];t;)u(e,Kc(t)),t=nc(t);return e}:bh,Qc=lr;(Tc&&Qc(new Tc(new ArrayBuffer(1)))!=$t||kc&&Qc(new kc)!=Rt||Oc&&Qc(Oc.resolve())!=Gt||Ac&&Qc(new Ac)!=Ht||Mc&&Qc(new Mc)!=Ut)&&(Qc=function(t){var e=Jh.call(t),i=e==Wt?t.constructor:Q,r=i?Ds(i):Q;if(r)switch(r){case Ec:return $t;case Pc:return Rt;case jc:return Gt;case Bc:return Ht;case Rc:return Ut}return e});var tu=Xh?Fo:yh,eu=function(){var t=0,e=0;return function(i,r){var n=Nu(),s=xt-(n-e);if(e=n,s>0){if(++t>=yt)return i}else t=0;return Uc(i,r)}}(),iu=fc||function(t,e){return Gi.setTimeout(t,e)},ru=Nc?function(t,e,i){var r=e+"";return Nc(t,"toString",{configurable:!0,enumerable:!1,value:ah(ds(r,Ns(ls(r),i)))})}:lh,nu=oo(function(t){t=sl(t);var e=[];return be.test(t)&&e.push(""),t.replace(ye,function(t,i,r,n){e.push(r?n.replace(Me,"$1"):i||t)}),e}),su=Vr(function(t,e){return To(t)?ji(t,Xi(e,1,To,!0)):[]}),au=Vr(function(t,e){var i=Ks(e);return To(i)&&(i=Q),To(t)?ji(t,Xi(e,1,To,!0),rs(i,2)):[]}),ou=Vr(function(t,e){var i=Ks(e);return To(i)&&(i=Q),To(t)?ji(t,Xi(e,1,To,!0),Q,i):[]}),lu=Vr(function(t){var e=c(t,ln);return e.length&&e[0]===t[0]?dr(e):[]}),hu=Vr(function(t){var e=Ks(t),i=c(t,ln);return e===Ks(i)?e=Q:i.pop(),i.length&&i[0]===t[0]?dr(i,rs(e,2)):[]}),cu=Vr(function(t){var e=Ks(t),i=c(t,ln);return e===Ks(i)?e=Q:i.pop(),i.length&&i[0]===t[0]?dr(i,Q,e):[]}),uu=Vr(ta),fu=Vr(function(t,e){e=Xi(e,1);var i=t?t.length:0,r=ki(t,e);return Wr(t,c(e,function(t){return gs(t,i)?+t:t}).sort(xn)),r}),du=Vr(function(t){return tn(Xi(t,1,To,!0))}),pu=Vr(function(t){var e=Ks(t);return To(e)&&(e=Q),tn(Xi(t,1,To,!0),rs(e,2))}),gu=Vr(function(t){var e=Ks(t);return To(e)&&(e=Q),tn(Xi(t,1,To,!0),Q,e)}),mu=Vr(function(t,e){return To(t)?ji(t,e):[]}),vu=Vr(function(t){return an(o(t,To))}),bu=Vr(function(t){var e=Ks(t);return To(e)&&(e=Q),an(o(t,To),rs(e,2))}),yu=Vr(function(t){var e=Ks(t);return To(e)&&(e=Q),an(o(t,To),Q,e)}),xu=Vr(_a),wu=Vr(function(t){var e=t.length,i=e>1?t[e-1]:Q;return i="function"==typeof i?(t.pop(),i):Q,Ca(t,i)}),_u=Vr(function(t){t=Xi(t,1);var e=t.length,i=e?t[0]:0,r=this.__wrapped__,n=function(e){return ki(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Ae&&gs(i)?(r=r.slice(i,+i+(e?1:0)),r.__actions__.push({func:Aa,args:[n],thisArg:Q}),new $(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Q),t})):this.thru(n)}),Cu=On(function(t,e,i){Zh.call(t,i)?++t[i]:t[i]=1}),Su=Pn(Ws),Tu=Pn(Gs),ku=On(function(t,e,i){Zh.call(t,i)?t[i].push(e):t[i]=[e]}),Ou=Vr(function(t,e,r){var n=-1,s="function"==typeof e,a=vs(e),o=So(t)?Ih(t.length):[];return Yc(t,function(t){var l=s?e:a&&null!=t?t[e]:Q;o[++n]=l?i(l,t,r):gr(t,e,r)}),o}),Au=On(function(t,e,i){t[i]=e}),Mu=On(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),Du=Vr(function(t,e){if(null==t)return[];var i=e.length;return i>1&&ms(t,e[0],e[1])?e=[]:i>2&&ms(e[0],e[1],e[2])&&(e=[e[0]]),Pr(t,Xi(e,1),[])}),Nu=uc||function(){return Gi.Date.now()},Lu=Vr(function(t,e,i){var r=st;if(i.length){var n=H(i,is(Lu));r|=ct}return Zn(t,r,e,i,n)}),Fu=Vr(function(t,e,i){var r=st|at;if(i.length){var n=H(i,is(Fu));r|=ct}return Zn(e,r,t,i,n)}),Iu=Vr(function(t,e){return Pi(t,1,e)}),Eu=Vr(function(t,e,i){return Pi(t,il(e)||0,i)});oo.Cache=ii;var Pu=Vr(function(t,e){e=1==e.length&&Gu(e[0])?c(e[0],D(rs())):c(Xi(e,1),D(rs()));var r=e.length;return Vr(function(n){for(var s=-1,a=wc(n.length,r);++s<a;)n[s]=e[s].call(this,n[s]);return i(t,this,n)})}),ju=Vr(function(t,e){var i=H(e,is(ju));return Zn(t,ct,Q,e,i)}),Bu=Vr(function(t,e){var i=H(e,is(Bu));return Zn(t,ut,Q,e,i)}),Ru=Vr(function(t,e){return Zn(t,dt,Q,Q,Q,Xi(e,1))}),zu=Vn(hr),Wu=Vn(function(t,e){return t>=e}),Gu=Ih.isArray,Yu=qi?D(qi):mr,Hu=mc||yh,Vu=Zi?D(Zi):vr,Xu=$i?D($i):xr,Uu=Ki?D(Ki):Cr,qu=Ji?D(Ji):Sr,Zu=Qi?D(Qi):Tr,$u=Vn(Mr),Ku=Vn(function(t,e){return t<=e}),Ju=An(function(t,e){if(Fc||ws(e)||So(e))return void Tn(e,bl(e),t);for(var i in e)Zh.call(e,i)&&xi(t,i,e[i])}),Qu=An(function(t,e){Tn(e,yl(e),t)}),tf=An(function(t,e,i,r){Tn(e,yl(e),t,r)}),ef=An(function(t,e,i,r){Tn(e,bl(e),t,r)}),rf=Vr(function(t,e){return ki(t,Xi(e,1))}),nf=Vr(function(t){return t.push(Q,bi),i(tf,Q,t)}),sf=Vr(function(t){return t.push(Q,Ts),i(cf,Q,t)}),af=Rn(function(t,e,i){t[e]=i},ah(lh)),of=Rn(function(t,e,i){Zh.call(t,e)?t[e].push(i):t[e]=[i]},rs),lf=Vr(gr),hf=An(function(t,e,i){Fr(t,e,i)}),cf=An(function(t,e,i,r){Fr(t,e,i,r)}),uf=Vr(function(t,e){return null==t?{}:(e=c(Xi(e,1),Ms),jr(t,ji(ts(t),e)))}),ff=Vr(function(t,e){return null==t?{}:jr(t,c(Xi(e,1),Ms))}),df=qn(bl),pf=qn(yl),gf=Fn(function(t,e,i){return e=e.toLowerCase(),t+(i?Pl(e):e)}),mf=Fn(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),vf=Fn(function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}),bf=Ln("toLowerCase"),yf=Fn(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),xf=Fn(function(t,e,i){return t+(i?" ":"")+_f(e)}),wf=Fn(function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}),_f=Ln("toUpperCase"),Cf=Vr(function(t,e){try{return i(t,Q,e)}catch(t){return No(t)?t:new Ph(t)}}),Sf=Vr(function(t,e){return n(Xi(e,1),function(e){e=Ms(e),t[e]=Lu(t[e],t)}),t}),Tf=jn(),kf=jn(!0),Of=Vr(function(t,e){return function(i){return gr(i,t,e)}}),Af=Vr(function(t,e){return function(i){return gr(t,i,e)}}),Mf=Wn(c),Df=Wn(a),Nf=Wn(p),Lf=Hn(),Ff=Hn(!0),If=zn(function(t,e){return t+e},0),Ef=Un("ceil"),Pf=zn(function(t,e){return t/e},1),jf=Un("floor"),Bf=zn(function(t,e){return t*e},1),Rf=Un("round"),zf=zn(function(t,e){return t-e},0);return S.after=to,S.ary=eo,S.assign=Ju,S.assignIn=Qu,S.assignInWith=tf,S.assignWith=ef,S.at=rf,S.before=io,S.bind=Lu,S.bindAll=Sf,S.bindKey=Fu,S.castArray=mo,S.chain=ka,S.chunk=Fs,S.compact=Is,S.concat=Es,S.cond=nh,S.conforms=sh,S.constant=ah,S.countBy=Cu,S.create=al,S.curry=ro,S.curryRight=no,S.debounce=so,S.defaults=nf,S.defaultsDeep=sf,S.defer=Iu,S.delay=Eu,S.difference=su,S.differenceBy=au,S.differenceWith=ou,S.drop=Ps,S.dropRight=js,S.dropRightWhile=Bs,S.dropWhile=Rs,S.fill=zs,S.filter=ja,S.flatMap=Ba,S.flatMapDeep=Ra,S.flatMapDepth=za,S.flatten=Ys,S.flattenDeep=Hs,S.flattenDepth=Vs,S.flip=ao,S.flow=Tf,S.flowRight=kf,S.fromPairs=Xs,S.functions=dl,S.functionsIn=pl,S.groupBy=ku,S.initial=Zs,S.intersection=lu,S.intersectionBy=hu,S.intersectionWith=cu,S.invert=af,S.invertBy=of,S.invokeMap=Ou,S.iteratee=hh,S.keyBy=Au,S.keys=bl,S.keysIn=yl,S.map=Ha,S.mapKeys=xl,S.mapValues=wl,S.matches=ch,S.matchesProperty=uh,S.memoize=oo,S.merge=hf,S.mergeWith=cf,S.method=Of,S.methodOf=Af,S.mixin=fh,S.negate=lo,S.nthArg=gh,S.omit=uf,S.omitBy=_l,S.once=ho,S.orderBy=Va,S.over=Mf,S.overArgs=Pu,S.overEvery=Df,S.overSome=Nf,S.partial=ju,S.partialRight=Bu,S.partition=Mu,S.pick=ff,S.pickBy=Cl,S.property=mh,S.propertyOf=vh,S.pull=uu,S.pullAll=ta,S.pullAllBy=ea,S.pullAllWith=ia,S.pullAt=fu,S.range=Lf,S.rangeRight=Ff,S.rearg=Ru,S.reject=qa,S.remove=ra,S.rest=co,S.reverse=na,S.sampleSize=$a,S.set=Tl,S.setWith=kl,S.shuffle=Ka,S.slice=sa,S.sortBy=Du,S.sortedUniq=fa,S.sortedUniqBy=da,S.split=Ul,S.spread=uo,S.tail=pa,S.take=ga,S.takeRight=ma,S.takeRightWhile=va,S.takeWhile=ba,S.tap=Oa,S.throttle=fo,S.thru=Aa,S.toArray=Jo,S.toPairs=df,S.toPairsIn=pf,S.toPath=Sh,S.toPlainObject=rl,S.transform=Ol,S.unary=po,S.union=du,S.unionBy=pu,S.unionWith=gu,S.uniq=ya,S.uniqBy=xa,S.uniqWith=wa,S.unset=Al,S.unzip=_a,S.unzipWith=Ca,S.update=Ml,S.updateWith=Dl,S.values=Nl,S.valuesIn=Ll,S.without=mu,S.words=rh,S.wrap=go,S.xor=vu,S.xorBy=bu,S.xorWith=yu,S.zip=xu,S.zipObject=Sa,S.zipObjectDeep=Ta,S.zipWith=wu,S.entries=df,S.entriesIn=pf,S.extend=Qu,S.extendWith=tf,fh(S,S),S.add=If,S.attempt=Cf,S.camelCase=gf,S.capitalize=Pl,S.ceil=Ef,S.clamp=Fl,S.clone=vo,S.cloneDeep=yo,S.cloneDeepWith=xo,S.cloneWith=bo,S.conformsTo=wo,S.deburr=jl,S.defaultTo=oh,S.divide=Pf,S.endsWith=Bl,S.eq=_o,S.escape=Rl,S.escapeRegExp=zl,S.every=Pa,S.find=Su,S.findIndex=Ws,S.findKey=ol,S.findLast=Tu,S.findLastIndex=Gs,S.findLastKey=ll,S.floor=jf,S.forEach=Wa,S.forEachRight=Ga,S.forIn=hl,S.forInRight=cl,S.forOwn=ul,S.forOwnRight=fl,S.get=gl,S.gt=zu,S.gte=Wu,S.has=ml,S.hasIn=vl,S.head=Us,S.identity=lh,S.includes=Ya,S.indexOf=qs,S.inRange=Il,S.invoke=lf,S.isArguments=Co,S.isArray=Gu,S.isArrayBuffer=Yu,S.isArrayLike=So,S.isArrayLikeObject=To,S.isBoolean=ko,S.isBuffer=Hu,S.isDate=Vu,S.isElement=Oo,S.isEmpty=Ao,S.isEqual=Mo,S.isEqualWith=Do,S.isError=No,S.isFinite=Lo,S.isFunction=Fo,S.isInteger=Io,S.isLength=Eo,S.isMap=Xu,S.isMatch=Bo,S.isMatchWith=Ro,S.isNaN=zo,S.isNative=Wo,S.isNil=Yo,S.isNull=Go,S.isNumber=Ho,S.isObject=Po,S.isObjectLike=jo,S.isPlainObject=Vo,S.isRegExp=Uu,S.isSafeInteger=Xo,S.isSet=qu,S.isString=Uo,S.isSymbol=qo,S.isTypedArray=Zu,S.isUndefined=Zo,S.isWeakMap=$o,S.isWeakSet=Ko,S.join=$s,S.kebabCase=mf,S.last=Ks,S.lastIndexOf=Js,S.lowerCase=vf,S.lowerFirst=bf,S.lt=$u,S.lte=Ku,S.max=kh,S.maxBy=Oh,S.mean=Ah,S.meanBy=Mh,S.min=Dh,S.minBy=Nh,S.stubArray=bh,S.stubFalse=yh,S.stubObject=xh,S.stubString=wh,S.stubTrue=_h,S.multiply=Bf,S.nth=Qs,S.noConflict=dh,S.noop=ph,S.now=Nu,S.pad=Wl,S.padEnd=Gl,S.padStart=Yl,S.parseInt=Hl,S.random=El,S.reduce=Xa,S.reduceRight=Ua,S.repeat=Vl,S.replace=Xl,S.result=Sl,S.round=Rf,S.runInContext=J,S.sample=Za,S.size=Ja,S.snakeCase=yf,S.some=Qa,S.sortedIndex=aa,S.sortedIndexBy=oa,S.sortedIndexOf=la,S.sortedLastIndex=ha,S.sortedLastIndexBy=ca,S.sortedLastIndexOf=ua,S.startCase=xf,S.startsWith=ql,S.subtract=zf,S.sum=Lh,S.sumBy=Fh,S.template=Zl,S.times=Ch,S.toFinite=Qo,S.toInteger=tl,S.toLength=el,S.toLower=$l,S.toNumber=il,S.toSafeInteger=nl,S.toString=sl,S.toUpper=Kl,S.trim=Jl,S.trimEnd=Ql,S.trimStart=th,S.truncate=eh,S.unescape=ih,S.uniqueId=Th,S.upperCase=wf,S.upperFirst=_f,S.each=Wa,S.eachRight=Ga,S.first=Us,fh(S,function(){var t={};return Ui(S,function(e,i){Zh.call(S.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),S.VERSION=tt,n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){S[t].placeholder=S}),n(["drop","take"],function(t,e){Ae.prototype[t]=function(i){var r=this.__filtered__;if(r&&!e)return new Ae(this);i=i===Q?1:xc(tl(i),0);var n=this.clone();return r?n.__takeCount__=wc(i,n.__takeCount__):n.__views__.push({size:wc(i,At),type:t+(n.__dir__<0?"Right":"")}),n},Ae.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),n(["filter","map","takeWhile"],function(t,e){var i=e+1,r=i==wt||i==Ct;Ae.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:rs(t,3),type:i}),e.__filtered__=e.__filtered__||r,e}}),n(["head","last"],function(t,e){var i="take"+(e?"Right":"");Ae.prototype[t]=function(){return this[i](1).value()[0]}}),n(["initial","tail"],function(t,e){var i="drop"+(e?"":"Right");Ae.prototype[t]=function(){return this.__filtered__?new Ae(this):this[i](1)}}),Ae.prototype.compact=function(){return this.filter(lh)},Ae.prototype.find=function(t){return this.filter(t).head()},Ae.prototype.findLast=function(t){return this.reverse().find(t)},Ae.prototype.invokeMap=Vr(function(t,e){return"function"==typeof t?new Ae(this):this.map(function(i){return gr(i,t,e)})}),Ae.prototype.reject=function(t){return this.filter(lo(rs(t)))},Ae.prototype.slice=function(t,e){t=tl(t);var i=this;return i.__filtered__&&(t>0||e<0)?new Ae(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==Q&&(e=tl(e),i=e<0?i.dropRight(-e):i.take(e-t)),i)},Ae.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ae.prototype.toArray=function(){return this.take(At)},Ui(Ae.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),n=S[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);n&&(S.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,o=e instanceof Ae,l=a[0],h=o||Gu(e),c=function(t){var e=n.apply(S,u([t],a));return r&&f?e[0]:e};h&&i&&"function"==typeof l&&1!=l.length&&(o=h=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=o&&!d;if(!s&&h){e=g?e:new Ae(this);var m=t.apply(e,a);return m.__actions__.push({func:Aa,args:[c],thisArg:Q}),new $(m,f)}return p&&g?t.apply(this,a):(m=this.thru(c),p?r?m.value()[0]:m.value():m)})}),n(["pop","push","shift","sort","splice","unshift"],function(t){var e=Yh[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);S.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(Gu(n)?n:[],t)}return this[i](function(i){return e.apply(Gu(i)?i:[],t)})}}),Ui(Ae.prototype,function(t,e){var i=S[e];if(i){var r=i.name+"",n=Ic[r]||(Ic[r]=[]);n.push({name:e,func:i})}}),Ic[Bn(Q,at).name]=[{name:"wrapper",func:Q}],Ae.prototype.clone=We,Ae.prototype.reverse=Ge,Ae.prototype.value=Ye,S.prototype.at=_u,S.prototype.chain=Ma,S.prototype.commit=Da,S.prototype.next=Na,S.prototype.plant=Fa,S.prototype.reverse=Ia,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=Ea,S.prototype.first=S.prototype.head,sc&&(S.prototype[sc]=La),S}var Q,tt="4.15.0",et=200,it="Expected a function",rt="__lodash_hash_undefined__",nt="__lodash_placeholder__",st=1,at=2,ot=4,lt=8,ht=16,ct=32,ut=64,ft=128,dt=256,pt=512,gt=1,mt=2,vt=30,bt="...",yt=150,xt=16,wt=1,_t=2,Ct=3,St=1/0,Tt=9007199254740991,kt=1.7976931348623157e308,Ot=NaN,At=4294967295,Mt=At-1,Dt=At>>>1,Nt=[["ary",ft],["bind",st],["bindKey",at],["curry",lt],["curryRight",ht],["flip",pt],["partial",ct],["partialRight",ut],["rearg",dt]],Lt="[object Arguments]",Ft="[object Array]",It="[object Boolean]",Et="[object Date]",Pt="[object Error]",jt="[object Function]",Bt="[object GeneratorFunction]",Rt="[object Map]",zt="[object Number]",Wt="[object Object]",Gt="[object Promise]",Yt="[object RegExp]",Ht="[object Set]",Vt="[object String]",Xt="[object Symbol]",Ut="[object WeakMap]",qt="[object WeakSet]",Zt="[object ArrayBuffer]",$t="[object DataView]",Kt="[object Float32Array]",Jt="[object Float64Array]",Qt="[object Int8Array]",te="[object Int16Array]",ee="[object Int32Array]",ie="[object Uint8Array]",re="[object Uint8ClampedArray]",ne="[object Uint16Array]",se="[object Uint32Array]",ae=/\b__p \+= '';/g,oe=/\b(__p \+=) '' \+/g,le=/(__e\(.*?\)|\b__t\)) \+\n'';/g,he=/&(?:amp|lt|gt|quot|#39|#96);/g,ce=/[&<>"'`]/g,ue=RegExp(he.source),fe=RegExp(ce.source),de=/<%-([\s\S]+?)%>/g,pe=/<%([\s\S]+?)%>/g,ge=/<%=([\s\S]+?)%>/g,me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/,be=/^\./,ye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xe=/[\\^$.*+?()[\]{}|]/g,we=RegExp(xe.source),_e=/^\s+|\s+$/g,Ce=/^\s+/,Se=/\s+$/,Te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ke=/\{\n\/\* \[wrapped with (.+)\] \*/,Oe=/,? & /,Ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Me=/\\(\\)?/g,De=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ne=/\w*$/,Le=/^0x/i,Fe=/^[-+]0x[0-9a-f]+$/i,Ie=/^0b[01]+$/i,Ee=/^\[object .+?Constructor\]$/,Pe=/^0o[0-7]+$/i,je=/^(?:0|[1-9]\d*)$/,Be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Re=/($^)/,ze=/['\n\r\u2028\u2029\\]/g,We="\\ud800-\\udfff",Ge="\\u0300-\\u036f\\ufe20-\\ufe23",Ye="\\u20d0-\\u20f0",He="\\u2700-\\u27bf",Ve="a-z\\xdf-\\xf6\\xf8-\\xff",Xe="\\xac\\xb1\\xd7\\xf7",Ue="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qe="\\u2000-\\u206f",Ze=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$e="A-Z\\xc0-\\xd6\\xd8-\\xde",Ke="\\ufe0e\\ufe0f",Je=Xe+Ue+qe+Ze,Qe="['’]",ti="["+We+"]",ei="["+Je+"]",ii="["+Ge+Ye+"]",ri="\\d+",ni="["+He+"]",si="["+Ve+"]",ai="[^"+We+Je+ri+He+Ve+$e+"]",oi="\\ud83c[\\udffb-\\udfff]",li="(?:"+ii+"|"+oi+")",hi="[^"+We+"]",ci="(?:\\ud83c[\\udde6-\\uddff]){2}",ui="[\\ud800-\\udbff][\\udc00-\\udfff]",fi="["+$e+"]",di="\\u200d",pi="(?:"+si+"|"+ai+")",gi="(?:"+fi+"|"+ai+")",mi="(?:"+Qe+"(?:d|ll|m|re|s|t|ve))?",vi="(?:"+Qe+"(?:D|LL|M|RE|S|T|VE))?",bi=li+"?",yi="["+Ke+"]?",xi="(?:"+di+"(?:"+[hi,ci,ui].join("|")+")"+yi+bi+")*",wi=yi+bi+xi,_i="(?:"+[ni,ci,ui].join("|")+")"+wi,Ci="(?:"+[hi+ii+"?",ii,ci,ui,ti].join("|")+")",Si=RegExp(Qe,"g"),Ti=RegExp(ii,"g"),ki=RegExp(oi+"(?="+oi+")|"+Ci+wi,"g"),Oi=RegExp([fi+"?"+si+"+"+mi+"(?="+[ei,fi,"$"].join("|")+")",gi+"+"+vi+"(?="+[ei,fi+pi,"$"].join("|")+")",fi+"?"+pi+"+"+mi,fi+"+"+vi,ri,_i].join("|"),"g"),Ai=RegExp("["+di+We+Ge+Ye+Ke+"]"),Mi=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Di=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ni=-1,Li={};Li[Kt]=Li[Jt]=Li[Qt]=Li[te]=Li[ee]=Li[ie]=Li[re]=Li[ne]=Li[se]=!0,Li[Lt]=Li[Ft]=Li[Zt]=Li[It]=Li[$t]=Li[Et]=Li[Pt]=Li[jt]=Li[Rt]=Li[zt]=Li[Wt]=Li[Yt]=Li[Ht]=Li[Vt]=Li[Ut]=!1;var Fi={};Fi[Lt]=Fi[Ft]=Fi[Zt]=Fi[$t]=Fi[It]=Fi[Et]=Fi[Kt]=Fi[Jt]=Fi[Qt]=Fi[te]=Fi[ee]=Fi[Rt]=Fi[zt]=Fi[Wt]=Fi[Yt]=Fi[Ht]=Fi[Vt]=Fi[Xt]=Fi[ie]=Fi[re]=Fi[ne]=Fi[se]=!0,Fi[Pt]=Fi[jt]=Fi[Ut]=!1;var Ii={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},Ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Pi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ji={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bi=parseFloat,Ri=parseInt,zi="object"==typeof global&&global&&global.Object===Object&&global,Wi="object"==typeof self&&self&&self.Object===Object&&self,Gi=zi||Wi||Function("return this")(),Yi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hi=Yi&&"object"==typeof module&&module&&!module.nodeType&&module,Vi=Hi&&Hi.exports===Yi,Xi=Vi&&zi.process,Ui=function(){try{return Xi&&Xi.binding("util")}catch(t){}}(),qi=Ui&&Ui.isArrayBuffer,Zi=Ui&&Ui.isDate,$i=Ui&&Ui.isMap,Ki=Ui&&Ui.isRegExp,Ji=Ui&&Ui.isSet,Qi=Ui&&Ui.isTypedArray,tr=C("length"),er=S(Ii),ir=S(Ei),rr=S(Pi),nr=J();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Gi._=nr,define("lodash",[],function(){return nr})):Hi?((Hi.exports=nr)._=nr,Yi._=nr):Gi._=nr}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("moment",e):t.moment=e()}(this,function(){"use strict";function t(){return fr.apply(null,arguments)}function e(t){fr=t}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return"[object Object]"===Object.prototype.toString.call(t)}function n(t){var e;for(e in t)return!1;return!0}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function a(t,e){var i,r=[];for(i=0;i<t.length;++i)r.push(e(t[i],i));return r}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){for(var i in e)o(e,i)&&(t[i]=e[i]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,i,r){return me(t,e,i,r,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function u(t){return null==t._pf&&(t._pf=c()),t._pf}function f(t){if(null==t._isValid){var e=u(t),i=dr.call(e.parsedDateParts,function(t){return null!=t});t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function d(t){var e=h(NaN);return null!=t?l(u(e),t):u(e).userInvalidated=!0,e}function p(t){return void 0===t}function g(t,e){var i,r,n;if(p(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),p(e._i)||(t._i=e._i),p(e._f)||(t._f=e._f),p(e._l)||(t._l=e._l),p(e._strict)||(t._strict=e._strict),p(e._tzm)||(t._tzm=e._tzm),p(e._isUTC)||(t._isUTC=e._isUTC),p(e._offset)||(t._offset=e._offset),p(e._pf)||(t._pf=u(e)),p(e._locale)||(t._locale=e._locale),pr.length>0)for(i in pr)r=pr[i],n=e[r],p(n)||(t[r]=n);return t}function m(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),gr===!1&&(gr=!0,t.updateOffset(this),gr=!1)}function v(t){return t instanceof m||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function y(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=b(e)),i}function x(t,e,i){var r,n=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(r=0;r<n;r++)(i&&t[r]!==e[r]||!i&&y(t[r])!==y(e[r]))&&a++;return a+s}function w(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,i){var r=!0;return l(function(){return null!=t.deprecationHandler&&t.deprecationHandler(null,e),r&&(w(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),r=!1),i.apply(this,arguments)},i)}function C(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),mr[e]||(w(i),mr[e]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function T(t){var e,i;for(i in t)e=t[i],S(e)?this[i]=e:this["_"+i]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function k(t,e){var i,n=l({},t);for(i in e)o(e,i)&&(r(t[i])&&r(e[i])?(n[i]={},l(n[i],t[i]),l(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)o(t,i)&&!o(e,i)&&r(t[i])&&(n[i]=l({},n[i]));return n}function O(t){null!=t&&this.set(t)}function A(t,e,i){var r=this._calendar[t]||this._calendar.sameElse;return S(r)?r.call(e,i):r}function M(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function D(){return this._invalidDate}function N(t){return this._ordinal.replace("%d",t)}function L(t,e,i,r){var n=this._relativeTime[i];return S(n)?n(t,e,i,r):n.replace(/%d/i,t)}function F(t,e){var i=this._relativeTime[t>0?"future":"past"];return S(i)?i(e):i.replace(/%s/i,e)}function I(t,e){var i=t.toLowerCase();Tr[i]=Tr[i+"s"]=Tr[e]=t}function E(t){return"string"==typeof t?Tr[t]||Tr[t.toLowerCase()]:void 0}function P(t){var e,i,r={};for(i in t)o(t,i)&&(e=E(i),e&&(r[e]=t[i]));return r}function j(t,e){kr[t]=e}function B(t){var e=[];for(var i in t)e.push({unit:i,priority:kr[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function R(e,i){return function(r){return null!=r?(W(this,e,r),t.updateOffset(this,i),this):z(this,e)}}function z(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function W(t,e,i){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](i);
}function G(t){return t=E(t),S(this[t])?this[t]():this}function Y(t,e){if("object"==typeof t){t=P(t);for(var i=B(t),r=0;r<i.length;r++)this[i[r].unit](t[i[r].unit])}else if(t=E(t),S(this[t]))return this[t](e);return this}function H(t,e,i){var r=""+Math.abs(t),n=e-r.length,s=t>=0;return(s?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}function V(t,e,i,r){var n=r;"string"==typeof r&&(n=function(){return this[r]()}),t&&(Dr[t]=n),e&&(Dr[e[0]]=function(){return H(n.apply(this,arguments),e[1],e[2])}),i&&(Dr[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function X(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function U(t){var e,i,r=t.match(Or);for(e=0,i=r.length;e<i;e++)Dr[r[e]]?r[e]=Dr[r[e]]:r[e]=X(r[e]);return function(e){var n,s="";for(n=0;n<i;n++)s+=r[n]instanceof Function?r[n].call(e,t):r[n];return s}}function q(t,e){return t.isValid()?(e=Z(e,t.localeData()),Mr[e]=Mr[e]||U(e),Mr[e](t)):t.localeData().invalidDate()}function Z(t,e){function i(t){return e.longDateFormat(t)||t}var r=5;for(Ar.lastIndex=0;r>=0&&Ar.test(t);)t=t.replace(Ar,i),Ar.lastIndex=0,r-=1;return t}function $(t,e,i){qr[t]=S(e)?e:function(t,r){return t&&i?i:e}}function K(t,e){return o(qr,t)?qr[t](e._strict,e._locale):new RegExp(J(t))}function J(t){return Q(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,r,n){return e||i||r||n}))}function Q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function tt(t,e){var i,r=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(r=function(t,i){i[e]=y(t)}),i=0;i<t.length;i++)Zr[t[i]]=r}function et(t,e){tt(t,function(t,i,r,n){r._w=r._w||{},e(t,r._w,r,n)})}function it(t,e,i){null!=e&&o(Zr,t)&&Zr[t](e,i._a,i,t)}function rt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function nt(t,e){return i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||an).test(e)?"format":"standalone"][t.month()]}function st(t,e){return i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[an.test(e)?"format":"standalone"][t.month()]}function at(t,e,i){var r,n,s,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===e?(n=br.call(this._shortMonthsParse,a),n!==-1?n:null):(n=br.call(this._longMonthsParse,a),n!==-1?n:null):"MMM"===e?(n=br.call(this._shortMonthsParse,a),n!==-1?n:(n=br.call(this._longMonthsParse,a),n!==-1?n:null)):(n=br.call(this._longMonthsParse,a),n!==-1?n:(n=br.call(this._shortMonthsParse,a),n!==-1?n:null))}function ot(t,e,i){var r,n,s;if(this._monthsParseExact)return at.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=h([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(s="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(i&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!i&&this._monthsParse[r].test(t))return r}}function lt(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=y(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return i=Math.min(t.date(),rt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ht(e){return null!=e?(lt(this,e),t.updateOffset(this,!0),this):z(this,"Month")}function ct(){return rt(this.year(),this.month())}function ut(t){return this._monthsParseExact?(o(this,"_monthsRegex")||dt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=hn),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(t){return this._monthsParseExact?(o(this,"_monthsRegex")||dt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=cn),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function dt(){function t(t,e){return e.length-t.length}var e,i,r=[],n=[],s=[];for(e=0;e<12;e++)i=h([2e3,e]),r.push(this.monthsShort(i,"")),n.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(r.sort(t),n.sort(t),s.sort(t),e=0;e<12;e++)r[e]=Q(r[e]),n[e]=Q(n[e]);for(e=0;e<24;e++)s[e]=Q(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function pt(t){return gt(t)?366:365}function gt(t){return t%4===0&&t%100!==0||t%400===0}function mt(){return gt(this.year())}function vt(t,e,i,r,n,s,a){var o=new Date(t,e,i,r,n,s,a);return t<100&&t>=0&&isFinite(o.getFullYear())&&o.setFullYear(t),o}function bt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function yt(t,e,i){var r=7+e-i,n=(7+bt(t,0,r).getUTCDay()-e)%7;return-n+r-1}function xt(t,e,i,r,n){var s,a,o=(7+i-r)%7,l=yt(t,r,n),h=1+7*(e-1)+o+l;return h<=0?(s=t-1,a=pt(s)+h):h>pt(t)?(s=t+1,a=h-pt(t)):(s=t,a=h),{year:s,dayOfYear:a}}function wt(t,e,i){var r,n,s=yt(t.year(),e,i),a=Math.floor((t.dayOfYear()-s-1)/7)+1;return a<1?(n=t.year()-1,r=a+_t(n,e,i)):a>_t(t.year(),e,i)?(r=a-_t(t.year(),e,i),n=t.year()+1):(n=t.year(),r=a),{week:r,year:n}}function _t(t,e,i){var r=yt(t,e,i),n=yt(t+1,e,i);return(pt(t)-r+n)/7}function Ct(t){return wt(t,this._week.dow,this._week.doy).week}function St(){return this._week.dow}function Tt(){return this._week.doy}function kt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ot(t){var e=wt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function At(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Mt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Dt(t,e){return i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}function Nt(t){return this._weekdaysShort[t.day()]}function Lt(t){return this._weekdaysMin[t.day()]}function Ft(t,e,i){var r,n,s,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===e?(n=br.call(this._weekdaysParse,a),n!==-1?n:null):"ddd"===e?(n=br.call(this._shortWeekdaysParse,a),n!==-1?n:null):(n=br.call(this._minWeekdaysParse,a),n!==-1?n:null):"dddd"===e?(n=br.call(this._weekdaysParse,a),n!==-1?n:(n=br.call(this._shortWeekdaysParse,a),n!==-1?n:(n=br.call(this._minWeekdaysParse,a),n!==-1?n:null))):"ddd"===e?(n=br.call(this._shortWeekdaysParse,a),n!==-1?n:(n=br.call(this._weekdaysParse,a),n!==-1?n:(n=br.call(this._minWeekdaysParse,a),n!==-1?n:null))):(n=br.call(this._minWeekdaysParse,a),n!==-1?n:(n=br.call(this._weekdaysParse,a),n!==-1?n:(n=br.call(this._shortWeekdaysParse,a),n!==-1?n:null)))}function It(t,e,i){var r,n,s;if(this._weekdaysParseExact)return Ft.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=h([2e3,1]).day(r),i&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(i&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(i&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!i&&this._weekdaysParse[r].test(t))return r}}function Et(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=At(t,this.localeData()),this.add(t-e,"d")):e}function Pt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function jt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Mt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Bt(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=mn),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Rt(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=vn),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function zt(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=bn),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Wt(){function t(t,e){return e.length-t.length}var e,i,r,n,s,a=[],o=[],l=[],c=[];for(e=0;e<7;e++)i=h([2e3,1]).day(e),r=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),s=this.weekdays(i,""),a.push(r),o.push(n),l.push(s),c.push(r),c.push(n),c.push(s);for(a.sort(t),o.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)o[e]=Q(o[e]),l[e]=Q(l[e]),c[e]=Q(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Gt(){return this.hours()%12||12}function Yt(){return this.hours()||24}function Ht(t,e){V(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Vt(t,e){return e._meridiemParse}function Xt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ut(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function qt(t){return t?t.toLowerCase().replace("_","-"):t}function Zt(t){for(var e,i,r,n,s=0;s<t.length;){for(n=qt(t[s]).split("-"),e=n.length,i=qt(t[s+1]),i=i?i.split("-"):null;e>0;){if(r=$t(n.slice(0,e).join("-")))return r;if(i&&i.length>=e&&x(n,i,!0)>=e-1)break;e--}s++}return null}function $t(t){var e=null;if(!Cn[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=yn._abbr,require("./locale/"+t),Kt(e)}catch(t){}return Cn[t]}function Kt(t,e){var i;return t&&(i=p(e)?te(t):Jt(t,e),i&&(yn=i)),yn._abbr}function Jt(t,e){if(null!==e){var i=_n;return e.abbr=t,null!=Cn[t]?(C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Cn[t]._config):null!=e.parentLocale&&(null!=Cn[e.parentLocale]?i=Cn[e.parentLocale]._config:C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Cn[t]=new O(k(i,e)),Kt(t),Cn[t]}return delete Cn[t],null}function Qt(t,e){if(null!=e){var i,r=_n;null!=Cn[t]&&(r=Cn[t]._config),e=k(r,e),i=new O(e),i.parentLocale=Cn[t],Cn[t]=i,Kt(t)}else null!=Cn[t]&&(null!=Cn[t].parentLocale?Cn[t]=Cn[t].parentLocale:null!=Cn[t]&&delete Cn[t]);return Cn[t]}function te(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return yn;if(!i(t)){if(e=$t(t))return e;t=[t]}return Zt(t)}function ee(){return vr(Cn)}function ie(t){var e,i=t._a;return i&&u(t).overflow===-2&&(e=i[Kr]<0||i[Kr]>11?Kr:i[Jr]<1||i[Jr]>rt(i[$r],i[Kr])?Jr:i[Qr]<0||i[Qr]>24||24===i[Qr]&&(0!==i[tn]||0!==i[en]||0!==i[rn])?Qr:i[tn]<0||i[tn]>59?tn:i[en]<0||i[en]>59?en:i[rn]<0||i[rn]>999?rn:-1,u(t)._overflowDayOfYear&&(e<$r||e>Jr)&&(e=Jr),u(t)._overflowWeeks&&e===-1&&(e=nn),u(t)._overflowWeekday&&e===-1&&(e=sn),u(t).overflow=e),t}function re(t){var e,i,r,n,s,a,o=t._i,l=Sn.exec(o)||Tn.exec(o);if(l){for(u(t).iso=!0,e=0,i=On.length;e<i;e++)if(On[e][1].exec(l[1])){n=On[e][0],r=On[e][2]!==!1;break}if(null==n)return void(t._isValid=!1);if(l[3]){for(e=0,i=An.length;e<i;e++)if(An[e][1].exec(l[3])){s=(l[2]||" ")+An[e][0];break}if(null==s)return void(t._isValid=!1)}if(!r&&null!=s)return void(t._isValid=!1);if(l[4]){if(!kn.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=n+(s||"")+(a||""),he(t)}else t._isValid=!1}function ne(e){var i=Mn.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(re(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function se(t,e,i){return null!=t?t:null!=e?e:i}function ae(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function oe(t){var e,i,r,n,s=[];if(!t._d){for(r=ae(t),t._w&&null==t._a[Jr]&&null==t._a[Kr]&&le(t),t._dayOfYear&&(n=se(t._a[$r],r[$r]),t._dayOfYear>pt(n)&&(u(t)._overflowDayOfYear=!0),i=bt(n,0,t._dayOfYear),t._a[Kr]=i.getUTCMonth(),t._a[Jr]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Qr]&&0===t._a[tn]&&0===t._a[en]&&0===t._a[rn]&&(t._nextDay=!0,t._a[Qr]=0),t._d=(t._useUTC?bt:vt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Qr]=24)}}function le(t){var e,i,r,n,s,a,o,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,a=4,i=se(e.GG,t._a[$r],wt(ve(),1,4).year),r=se(e.W,1),n=se(e.E,1),(n<1||n>7)&&(l=!0)):(s=t._locale._week.dow,a=t._locale._week.doy,i=se(e.gg,t._a[$r],wt(ve(),s,a).year),r=se(e.w,1),null!=e.d?(n=e.d,(n<0||n>6)&&(l=!0)):null!=e.e?(n=e.e+s,(e.e<0||e.e>6)&&(l=!0)):n=s),r<1||r>_t(i,s,a)?u(t)._overflowWeeks=!0:null!=l?u(t)._overflowWeekday=!0:(o=xt(i,r,n,s,a),t._a[$r]=o.year,t._dayOfYear=o.dayOfYear)}function he(e){if(e._f===t.ISO_8601)return void re(e);e._a=[],u(e).empty=!0;var i,r,n,s,a,o=""+e._i,l=o.length,h=0;for(n=Z(e._f,e._locale).match(Or)||[],i=0;i<n.length;i++)s=n[i],r=(o.match(K(s,e))||[])[0],r&&(a=o.substr(0,o.indexOf(r)),a.length>0&&u(e).unusedInput.push(a),o=o.slice(o.indexOf(r)+r.length),h+=r.length),Dr[s]?(r?u(e).empty=!1:u(e).unusedTokens.push(s),it(s,r,e)):e._strict&&!r&&u(e).unusedTokens.push(s);u(e).charsLeftOver=l-h,o.length>0&&u(e).unusedInput.push(o),e._a[Qr]<=12&&u(e).bigHour===!0&&e._a[Qr]>0&&(u(e).bigHour=void 0),u(e).parsedDateParts=e._a.slice(0),u(e).meridiem=e._meridiem,e._a[Qr]=ce(e._locale,e._a[Qr],e._meridiem),oe(e),ie(e)}function ce(t,e,i){var r;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(r=t.isPM(i),r&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function ue(t){var e,i,r,n,s;if(0===t._f.length)return u(t).invalidFormat=!0,void(t._d=new Date(NaN));for(n=0;n<t._f.length;n++)s=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[n],he(e),f(e)&&(s+=u(e).charsLeftOver,s+=10*u(e).unusedTokens.length,u(e).score=s,(null==r||s<r)&&(r=s,i=e));l(t,i||e)}function fe(t){if(!t._d){var e=P(t._i);t._a=a([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),oe(t)}}function de(t){var e=new m(ie(pe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function pe(t){var e=t._i,r=t._f;return t._locale=t._locale||te(t._l),null===e||void 0===r&&""===e?d({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),v(e)?new m(ie(e)):(i(r)?ue(t):s(e)?t._d=e:r?he(t):ge(t),f(t)||(t._d=null),t))}function ge(e){var r=e._i;void 0===r?e._d=new Date(t.now()):s(r)?e._d=new Date(r.valueOf()):"string"==typeof r?ne(e):i(r)?(e._a=a(r.slice(0),function(t){return parseInt(t,10)}),oe(e)):"object"==typeof r?fe(e):"number"==typeof r?e._d=new Date(r):t.createFromInputFallback(e)}function me(t,e,s,a,o){var l={};return"boolean"==typeof s&&(a=s,s=void 0),(r(t)&&n(t)||i(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=s,l._i=t,l._f=e,l._strict=a,de(l)}function ve(t,e,i,r){return me(t,e,i,r,!1)}function be(t,e){var r,n;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return ve();for(r=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](r)||(r=e[n]);return r}function ye(){var t=[].slice.call(arguments,0);return be("isBefore",t)}function xe(){var t=[].slice.call(arguments,0);return be("isAfter",t)}function we(t){var e=P(t),i=e.year||0,r=e.quarter||0,n=e.month||0,s=e.week||0,a=e.day||0,o=e.hour||0,l=e.minute||0,h=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*h+6e4*l+1e3*o*60*60,this._days=+a+7*s,this._months=+n+3*r+12*i,this._data={},this._locale=te(),this._bubble()}function _e(t){return t instanceof we}function Ce(t,e){V(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+H(~~(t/60),2)+e+H(~~t%60,2)})}function Se(t,e){var i=(e||"").match(t)||[],r=i[i.length-1]||[],n=(r+"").match(Fn)||["-",0,0],s=+(60*n[1])+y(n[2]);return"+"===n[0]?s:-s}function Te(e,i){var r,n;return i._isUTC?(r=i.clone(),n=(v(e)||s(e)?e.valueOf():ve(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),t.updateOffset(r,!1),r):ve(e).local()}function ke(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Oe(e,i){var r,n=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Se(Vr,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&i&&(r=ke(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),n!==e&&(!i||this._changeInProgress?He(this,Be(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:ke(this):null!=e?this:NaN}function Ae(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Me(t){return this.utcOffset(0,t)}function De(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ke(this),"m")),this}function Ne(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Se(Hr,this._i)),this}function Le(t){return!!this.isValid()&&(t=t?ve(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function Fe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ie(){if(!p(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),t=pe(t),t._a){var e=t._isUTC?h(t._a):ve(t._a);this._isDSTShifted=this.isValid()&&x(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ee(){return!!this.isValid()&&!this._isUTC}function Pe(){return!!this.isValid()&&this._isUTC}function je(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Be(t,e){var i,r,n,s=t,a=null;return _e(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(a=In.exec(t))?(i="-"===a[1]?-1:1,s={y:0,d:y(a[Jr])*i,h:y(a[Qr])*i,m:y(a[tn])*i,s:y(a[en])*i,ms:y(a[rn])*i}):(a=En.exec(t))?(i="-"===a[1]?-1:1,s={y:Re(a[2],i),M:Re(a[3],i),w:Re(a[4],i),d:Re(a[5],i),h:Re(a[6],i),m:Re(a[7],i),s:Re(a[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(n=We(ve(s.from),ve(s.to)),s={},s.ms=n.milliseconds,s.M=n.months),r=new we(s),_e(t)&&o(t,"_locale")&&(r._locale=t._locale),r}function Re(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function ze(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function We(t,e){var i;return t.isValid()&&e.isValid()?(e=Te(e,t),t.isBefore(e)?i=ze(t,e):(i=ze(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Ge(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Ye(t,e){return function(i,r){var n,s;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=i,i=r,r=s),i="string"==typeof i?+i:i,n=Be(i,r),He(this,n,t),this}}function He(e,i,r,n){var s=i._milliseconds,a=Ge(i._days),o=Ge(i._months);e.isValid()&&(n=null==n||n,s&&e._d.setTime(e._d.valueOf()+s*r),a&&W(e,"Date",z(e,"Date")+a*r),o&&lt(e,z(e,"Month")+o*r),n&&t.updateOffset(e,a||o))}function Ve(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Xe(e,i){var r=e||ve(),n=Te(r,this).startOf("day"),s=t.calendarFormat(this,n)||"sameElse",a=i&&(S(i[s])?i[s].call(this,r):i[s]);return this.format(a||this.localeData().calendar(s,this,ve(r)))}function Ue(){return new m(this)}function qe(t,e){var i=v(t)?t:ve(t);return!(!this.isValid()||!i.isValid())&&(e=E(p(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function Ze(t,e){var i=v(t)?t:ve(t);return!(!this.isValid()||!i.isValid())&&(e=E(p(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function $e(t,e,i,r){return r=r||"()",("("===r[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===r[1]?this.isBefore(e,i):!this.isAfter(e,i))}function Ke(t,e){var i,r=v(t)?t:ve(t);return!(!this.isValid()||!r.isValid())&&(e=E(e||"millisecond"),"millisecond"===e?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function Je(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Qe(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ti(t,e,i){var r,n,s,a;return this.isValid()?(r=Te(t,this),r.isValid()?(n=6e4*(r.utcOffset()-this.utcOffset()),e=E(e),"year"===e||"month"===e||"quarter"===e?(a=ei(this,r),"quarter"===e?a/=3:"year"===e&&(a/=12)):(s=this-r,a="second"===e?s/1e3:"minute"===e?s/6e4:"hour"===e?s/36e5:"day"===e?(s-n)/864e5:"week"===e?(s-n)/6048e5:s),i?a:b(a)):NaN):NaN}function ei(t,e){var i,r,n=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(n,"months");return e-s<0?(i=t.clone().add(n-1,"months"),r=(e-s)/(s-i)):(i=t.clone().add(n+1,"months"),r=(e-s)/(i-s)),-(n+r)||0}function ii(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ri(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():q(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):q(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ni(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=q(this,e);return this.localeData().postformat(i)}function si(t,e){return this.isValid()&&(v(t)&&t.isValid()||ve(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ai(t){return this.from(ve(),t)}function oi(t,e){return this.isValid()&&(v(t)&&t.isValid()||ve(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function li(t){return this.to(ve(),t)}function hi(t){var e;return void 0===t?this._locale._abbr:(e=te(t),null!=e&&(this._locale=e),this)}function ci(){return this._locale}function ui(t){switch(t=E(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function fi(t){return t=E(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function di(){return this._d.valueOf()-6e4*(this._offset||0)}function pi(){return Math.floor(this.valueOf()/1e3)}function gi(){return new Date(this.valueOf())}function mi(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function vi(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function bi(){return this.isValid()?this.toISOString():null}function yi(){return f(this)}function xi(){return l({},u(this))}function wi(){return u(this).overflow}function _i(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ci(t,e){V(0,[t,t.length],0,e)}function Si(t){return Ai.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ti(t){return Ai.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function ki(){return _t(this.year(),1,4)}function Oi(){var t=this.localeData()._week;return _t(this.year(),t.dow,t.doy)}function Ai(t,e,i,r,n){var s;return null==t?wt(this,r,n).year:(s=_t(t,r,n),e>s&&(e=s),Mi.call(this,t,e,i,r,n))}function Mi(t,e,i,r,n){var s=xt(t,e,i,r,n),a=bt(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Di(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ni(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Li(t,e){e[rn]=y(1e3*("0."+t))}function Fi(){return this._isUTC?"UTC":""}function Ii(){return this._isUTC?"Coordinated Universal Time":""}function Ei(t){return ve(1e3*t)}function Pi(){return ve.apply(null,arguments).parseZone()}function ji(t){return t}function Bi(t,e,i,r){var n=te(),s=h().set(r,e);return n[i](s,t)}function Ri(t,e,i){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Bi(t,e,i,"month");var r,n=[];for(r=0;r<12;r++)n[r]=Bi(t,r,i,"month");return n}function zi(t,e,i,r){"boolean"==typeof t?("number"==typeof e&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,"number"==typeof e&&(i=e,e=void 0),e=e||"");var n=te(),s=t?n._week.dow:0;if(null!=i)return Bi(e,(i+s)%7,r,"day");var a,o=[];for(a=0;a<7;a++)o[a]=Bi(e,(a+s)%7,r,"day");return o}function Wi(t,e){return Ri(t,e,"months")}function Gi(t,e){return Ri(t,e,"monthsShort")}function Yi(t,e,i){return zi(t,e,i,"weekdays")}function Hi(t,e,i){return zi(t,e,i,"weekdaysShort")}function Vi(t,e,i){return zi(t,e,i,"weekdaysMin")}function Xi(){var t=this._data;return this._milliseconds=Un(this._milliseconds),this._days=Un(this._days),this._months=Un(this._months),t.milliseconds=Un(t.milliseconds),t.seconds=Un(t.seconds),t.minutes=Un(t.minutes),t.hours=Un(t.hours),t.months=Un(t.months),t.years=Un(t.years),this}function Ui(t,e,i,r){var n=Be(e,i);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function qi(t,e){return Ui(this,t,e,1)}function Zi(t,e){return Ui(this,t,e,-1)}function $i(t){return t<0?Math.floor(t):Math.ceil(t)}function Ki(){var t,e,i,r,n,s=this._milliseconds,a=this._days,o=this._months,l=this._data;return s>=0&&a>=0&&o>=0||s<=0&&a<=0&&o<=0||(s+=864e5*$i(Qi(o)+a),a=0,o=0),l.milliseconds=s%1e3,t=b(s/1e3),l.seconds=t%60,e=b(t/60),l.minutes=e%60,i=b(e/60),l.hours=i%24,a+=b(i/24),n=b(Ji(a)),o+=n,a-=$i(Qi(n)),r=b(o/12),o%=12,l.days=a,l.months=o,l.years=r,this}function Ji(t){return 4800*t/146097}function Qi(t){return 146097*t/4800}function tr(t){var e,i,r=this._milliseconds;if(t=E(t),"month"===t||"year"===t)return e=this._days+r/864e5,i=this._months+Ji(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Qi(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function er(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function ir(t){return function(){return this.as(t)}}function rr(t){return t=E(t),this[t+"s"]()}function nr(t){return function(){return this._data[t]}}function sr(){return b(this.days()/7)}function ar(t,e,i,r,n){return n.relativeTime(e||1,!!i,t,r)}function or(t,e,i){var r=Be(t).abs(),n=hs(r.as("s")),s=hs(r.as("m")),a=hs(r.as("h")),o=hs(r.as("d")),l=hs(r.as("M")),h=hs(r.as("y")),c=n<cs.s&&["s",n]||s<=1&&["m"]||s<cs.m&&["mm",s]||a<=1&&["h"]||a<cs.h&&["hh",a]||o<=1&&["d"]||o<cs.d&&["dd",o]||l<=1&&["M"]||l<cs.M&&["MM",l]||h<=1&&["y"]||["yy",h];return c[2]=e,c[3]=+t>0,c[4]=i,ar.apply(null,c)}function lr(t){return void 0===t?hs:"function"==typeof t&&(hs=t,!0)}function hr(t,e){return void 0!==cs[t]&&(void 0===e?cs[t]:(cs[t]=e,!0))}function cr(t){var e=this.localeData(),i=or(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function ur(){var t,e,i,r=us(this._milliseconds)/1e3,n=us(this._days),s=us(this._months);t=b(r/60),e=b(t/60),r%=60,t%=60,i=b(s/12),s%=12;var a=i,o=s,l=n,h=e,c=t,u=r,f=this.asSeconds();return f?(f<0?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(l?l+"D":"")+(h||c||u?"T":"")+(h?h+"H":"")+(c?c+"M":"")+(u?u+"S":""):"P0D"}var fr,dr;dr=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,r=0;r<i;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var pr=t.momentProperties=[],gr=!1,mr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var vr;vr=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)o(t,e)&&i.push(e);return i};var br,yr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},xr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},wr="Invalid date",_r="%d",Cr=/\d{1,2}/,Sr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Tr={},kr={},Or=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ar=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Mr={},Dr={},Nr=/\d/,Lr=/\d\d/,Fr=/\d{3}/,Ir=/\d{4}/,Er=/[+-]?\d{6}/,Pr=/\d\d?/,jr=/\d\d\d\d?/,Br=/\d\d\d\d\d\d?/,Rr=/\d{1,3}/,zr=/\d{1,4}/,Wr=/[+-]?\d{1,6}/,Gr=/\d+/,Yr=/[+-]?\d+/,Hr=/Z|[+-]\d\d:?\d\d/gi,Vr=/Z|[+-]\d\d(?::?\d\d)?/gi,Xr=/[+-]?\d+(\.\d{1,3})?/,Ur=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qr={},Zr={},$r=0,Kr=1,Jr=2,Qr=3,tn=4,en=5,rn=6,nn=7,sn=8;br=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),V("MMMM",0,0,function(t){return this.localeData().months(this,t)}),I("month","M"),j("month",8),$("M",Pr),$("MM",Pr,Lr),$("MMM",function(t,e){return e.monthsShortRegex(t)}),$("MMMM",function(t,e){return e.monthsRegex(t)}),tt(["M","MM"],function(t,e){e[Kr]=y(t)-1}),tt(["MMM","MMMM"],function(t,e,i,r){var n=i._locale.monthsParse(t,r,i._strict);null!=n?e[Kr]=n:u(i).invalidMonth=t});var an=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,on="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ln="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hn=Ur,cn=Ur;V("Y",0,0,function(){
var t=this.year();return t<=9999?""+t:"+"+t}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),I("year","y"),j("year",1),$("Y",Yr),$("YY",Pr,Lr),$("YYYY",zr,Ir),$("YYYYY",Wr,Er),$("YYYYYY",Wr,Er),tt(["YYYYY","YYYYYY"],$r),tt("YYYY",function(e,i){i[$r]=2===e.length?t.parseTwoDigitYear(e):y(e)}),tt("YY",function(e,i){i[$r]=t.parseTwoDigitYear(e)}),tt("Y",function(t,e){e[$r]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)};var un=R("FullYear",!0);V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),j("week",5),j("isoWeek",5),$("w",Pr),$("ww",Pr,Lr),$("W",Pr),$("WW",Pr,Lr),et(["w","ww","W","WW"],function(t,e,i,r){e[r.substr(0,1)]=y(t)});var fn={dow:0,doy:6};V("d",0,"do","day"),V("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),V("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),V("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),$("d",Pr),$("e",Pr),$("E",Pr),$("dd",function(t,e){return e.weekdaysMinRegex(t)}),$("ddd",function(t,e){return e.weekdaysShortRegex(t)}),$("dddd",function(t,e){return e.weekdaysRegex(t)}),et(["dd","ddd","dddd"],function(t,e,i,r){var n=i._locale.weekdaysParse(t,r,i._strict);null!=n?e.d=n:u(i).invalidWeekday=t}),et(["d","e","E"],function(t,e,i,r){e[r]=y(t)});var dn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),gn="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),mn=Ur,vn=Ur,bn=Ur;V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Gt),V("k",["kk",2],0,Yt),V("hmm",0,0,function(){return""+Gt.apply(this)+H(this.minutes(),2)}),V("hmmss",0,0,function(){return""+Gt.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),Ht("a",!0),Ht("A",!1),I("hour","h"),j("hour",13),$("a",Vt),$("A",Vt),$("H",Pr),$("h",Pr),$("HH",Pr,Lr),$("hh",Pr,Lr),$("hmm",jr),$("hmmss",Br),$("Hmm",jr),$("Hmmss",Br),tt(["H","HH"],Qr),tt(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),tt(["h","hh"],function(t,e,i){e[Qr]=y(t),u(i).bigHour=!0}),tt("hmm",function(t,e,i){var r=t.length-2;e[Qr]=y(t.substr(0,r)),e[tn]=y(t.substr(r)),u(i).bigHour=!0}),tt("hmmss",function(t,e,i){var r=t.length-4,n=t.length-2;e[Qr]=y(t.substr(0,r)),e[tn]=y(t.substr(r,2)),e[en]=y(t.substr(n)),u(i).bigHour=!0}),tt("Hmm",function(t,e,i){var r=t.length-2;e[Qr]=y(t.substr(0,r)),e[tn]=y(t.substr(r))}),tt("Hmmss",function(t,e,i){var r=t.length-4,n=t.length-2;e[Qr]=y(t.substr(0,r)),e[tn]=y(t.substr(r,2)),e[en]=y(t.substr(n))});var yn,xn=/[ap]\.?m?\.?/i,wn=R("Hours",!0),_n={calendar:yr,longDateFormat:xr,invalidDate:wr,ordinal:_r,ordinalParse:Cr,relativeTime:Sr,months:on,monthsShort:ln,week:fn,weekdays:dn,weekdaysMin:gn,weekdaysShort:pn,meridiemParse:xn},Cn={},Sn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Tn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,kn=/Z|[+-]\d\d(?::?\d\d)?/,On=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],An=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Mn=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=_("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Dn=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ve.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:d()}),Nn=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ve.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:d()}),Ln=function(){return Date.now?Date.now():+new Date};Ce("Z",":"),Ce("ZZ",""),$("Z",Vr),$("ZZ",Vr),tt(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Se(Vr,t)});var Fn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var In=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,En=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Be.fn=we.prototype;var Pn=Ye(1,"add"),jn=Ye(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Bn=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ci("gggg","weekYear"),Ci("ggggg","weekYear"),Ci("GGGG","isoWeekYear"),Ci("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),$("G",Yr),$("g",Yr),$("GG",Pr,Lr),$("gg",Pr,Lr),$("GGGG",zr,Ir),$("gggg",zr,Ir),$("GGGGG",Wr,Er),$("ggggg",Wr,Er),et(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,r){e[r.substr(0,2)]=y(t)}),et(["gg","GG"],function(e,i,r,n){i[n]=t.parseTwoDigitYear(e)}),V("Q",0,"Qo","quarter"),I("quarter","Q"),j("quarter",7),$("Q",Nr),tt("Q",function(t,e){e[Kr]=3*(y(t)-1)}),V("D",["DD",2],"Do","date"),I("date","D"),j("date",9),$("D",Pr),$("DD",Pr,Lr),$("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),tt(["D","DD"],Jr),tt("Do",function(t,e){e[Jr]=y(t.match(Pr)[0],10)});var Rn=R("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),j("dayOfYear",4),$("DDD",Rr),$("DDDD",Fr),tt(["DDD","DDDD"],function(t,e,i){i._dayOfYear=y(t)}),V("m",["mm",2],0,"minute"),I("minute","m"),j("minute",14),$("m",Pr),$("mm",Pr,Lr),tt(["m","mm"],tn);var zn=R("Minutes",!1);V("s",["ss",2],0,"second"),I("second","s"),j("second",15),$("s",Pr),$("ss",Pr,Lr),tt(["s","ss"],en);var Wn=R("Seconds",!1);V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return 10*this.millisecond()}),V(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),V(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),V(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),V(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),V(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),j("millisecond",16),$("S",Rr,Nr),$("SS",Rr,Lr),$("SSS",Rr,Fr);var Gn;for(Gn="SSSS";Gn.length<=9;Gn+="S")$(Gn,Gr);for(Gn="S";Gn.length<=9;Gn+="S")tt(Gn,Li);var Yn=R("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var Hn=m.prototype;Hn.add=Pn,Hn.calendar=Xe,Hn.clone=Ue,Hn.diff=ti,Hn.endOf=fi,Hn.format=ni,Hn.from=si,Hn.fromNow=ai,Hn.to=oi,Hn.toNow=li,Hn.get=G,Hn.invalidAt=wi,Hn.isAfter=qe,Hn.isBefore=Ze,Hn.isBetween=$e,Hn.isSame=Ke,Hn.isSameOrAfter=Je,Hn.isSameOrBefore=Qe,Hn.isValid=yi,Hn.lang=Bn,Hn.locale=hi,Hn.localeData=ci,Hn.max=Nn,Hn.min=Dn,Hn.parsingFlags=xi,Hn.set=Y,Hn.startOf=ui,Hn.subtract=jn,Hn.toArray=mi,Hn.toObject=vi,Hn.toDate=gi,Hn.toISOString=ri,Hn.toJSON=bi,Hn.toString=ii,Hn.unix=pi,Hn.valueOf=di,Hn.creationData=_i,Hn.year=un,Hn.isLeapYear=mt,Hn.weekYear=Si,Hn.isoWeekYear=Ti,Hn.quarter=Hn.quarters=Di,Hn.month=ht,Hn.daysInMonth=ct,Hn.week=Hn.weeks=kt,Hn.isoWeek=Hn.isoWeeks=Ot,Hn.weeksInYear=Oi,Hn.isoWeeksInYear=ki,Hn.date=Rn,Hn.day=Hn.days=Et,Hn.weekday=Pt,Hn.isoWeekday=jt,Hn.dayOfYear=Ni,Hn.hour=Hn.hours=wn,Hn.minute=Hn.minutes=zn,Hn.second=Hn.seconds=Wn,Hn.millisecond=Hn.milliseconds=Yn,Hn.utcOffset=Oe,Hn.utc=Me,Hn.local=De,Hn.parseZone=Ne,Hn.hasAlignedHourOffset=Le,Hn.isDST=Fe,Hn.isLocal=Ee,Hn.isUtcOffset=Pe,Hn.isUtc=je,Hn.isUTC=je,Hn.zoneAbbr=Fi,Hn.zoneName=Ii,Hn.dates=_("dates accessor is deprecated. Use date instead.",Rn),Hn.months=_("months accessor is deprecated. Use month instead",ht),Hn.years=_("years accessor is deprecated. Use year instead",un),Hn.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ae),Hn.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ie);var Vn=Hn,Xn=O.prototype;Xn.calendar=A,Xn.longDateFormat=M,Xn.invalidDate=D,Xn.ordinal=N,Xn.preparse=ji,Xn.postformat=ji,Xn.relativeTime=L,Xn.pastFuture=F,Xn.set=T,Xn.months=nt,Xn.monthsShort=st,Xn.monthsParse=ot,Xn.monthsRegex=ft,Xn.monthsShortRegex=ut,Xn.week=Ct,Xn.firstDayOfYear=Tt,Xn.firstDayOfWeek=St,Xn.weekdays=Dt,Xn.weekdaysMin=Lt,Xn.weekdaysShort=Nt,Xn.weekdaysParse=It,Xn.weekdaysRegex=Bt,Xn.weekdaysShortRegex=Rt,Xn.weekdaysMinRegex=zt,Xn.isPM=Xt,Xn.meridiem=Ut,Kt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=_("moment.lang is deprecated. Use moment.locale instead.",Kt),t.langData=_("moment.langData is deprecated. Use moment.localeData instead.",te);var Un=Math.abs,qn=ir("ms"),Zn=ir("s"),$n=ir("m"),Kn=ir("h"),Jn=ir("d"),Qn=ir("w"),ts=ir("M"),es=ir("y"),is=nr("milliseconds"),rs=nr("seconds"),ns=nr("minutes"),ss=nr("hours"),as=nr("days"),os=nr("months"),ls=nr("years"),hs=Math.round,cs={s:45,m:45,h:22,d:26,M:11},us=Math.abs,fs=we.prototype;fs.abs=Xi,fs.add=qi,fs.subtract=Zi,fs.as=tr,fs.asMilliseconds=qn,fs.asSeconds=Zn,fs.asMinutes=$n,fs.asHours=Kn,fs.asDays=Jn,fs.asWeeks=Qn,fs.asMonths=ts,fs.asYears=es,fs.valueOf=er,fs._bubble=Ki,fs.get=rr,fs.milliseconds=is,fs.seconds=rs,fs.minutes=ns,fs.hours=ss,fs.days=as,fs.weeks=sr,fs.months=os,fs.years=ls,fs.humanize=cr,fs.toISOString=ur,fs.toString=ur,fs.toJSON=ur,fs.locale=hi,fs.localeData=ci,fs.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ur),fs.lang=Bn,V("X",0,0,"unix"),V("x",0,0,"valueOf"),$("x",Yr),$("X",Xr),tt("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),tt("x",function(t,e,i){i._d=new Date(y(t))}),t.version="2.14.1",e(ve),t.fn=Vn,t.min=ye,t.max=xe,t.now=Ln,t.utc=h,t.unix=Ei,t.months=Wi,t.isDate=s,t.locale=Kt,t.invalid=d,t.duration=Be,t.isMoment=v,t.weekdays=Yi,t.parseZone=Pi,t.localeData=te,t.isDuration=_e,t.monthsShort=Gi,t.weekdaysMin=Vi,t.defineLocale=Jt,t.updateLocale=Qt,t.locales=ee,t.weekdaysShort=Hi,t.normalizeUnits=E,t.relativeTimeRounding=lr,t.relativeTimeThreshold=hr,t.calendarFormat=Ve,t.prototype=Vn;var ds=t;return ds}),function(){function t(t){this._value=t}function e(t,e,i,r){var n,s,a=Math.pow(10,e);return s=(i(t*a)/a).toFixed(e),r&&(n=new RegExp("0{1,"+r+"}$"),s=s.replace(n,"")),s}function i(t,e,i){var r;return r=e.indexOf("$")>-1?n(t,e,i):e.indexOf("%")>-1?s(t,e,i):e.indexOf(":")>-1?a(t,e):l(t._value,e,i)}function r(t,e){var i,r,n,s,a,l=e,h=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(e.indexOf(":")>-1)t._value=o(e);else if(e===m)t._value=0;else{for("."!==p[g].delimiters.decimal&&(e=e.replace(/\./g,"").replace(p[g].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+p[g].abbreviations.thousand+"(?:\\)|(\\"+p[g].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+p[g].abbreviations.million+"(?:\\)|(\\"+p[g].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+p[g].abbreviations.billion+"(?:\\)|(\\"+p[g].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+p[g].abbreviations.trillion+"(?:\\)|(\\"+p[g].currency.symbol+")?(?:\\))?)?$"),a=0;a<=h.length&&!(c=e.indexOf(h[a])>-1&&Math.pow(1024,a+1));a++);t._value=(c?c:1)*(l.match(i)?Math.pow(10,3):1)*(l.match(r)?Math.pow(10,6):1)*(l.match(n)?Math.pow(10,9):1)*(l.match(s)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=c?Math.ceil(t._value):t._value}return t._value}function n(t,e,i){var r,n,s=e.indexOf("$"),a=e.indexOf("("),o=e.indexOf("-"),h="";return e.indexOf(" $")>-1?(h=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(h=" ",e=e.replace("$ ","")):e=e.replace("$",""),n=l(t._value,e,i),s<=1?n.indexOf("(")>-1||n.indexOf("-")>-1?(n=n.split(""),r=1,(s<a||s<o)&&(r=0),n.splice(r,0,p[g].currency.symbol+h),n=n.join("")):n=p[g].currency.symbol+h+n:n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,h+p[g].currency.symbol),n=n.join("")):n=n+h+p[g].currency.symbol,n}function s(t,e,i){var r,n="",s=100*t._value;return e.indexOf(" %")>-1?(n=" ",e=e.replace(" %","")):e=e.replace("%",""),r=l(s,e,i),r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,n+"%"),r=r.join("")):r=r+n+"%",r}function a(t){var e=Math.floor(t._value/60/60),i=Math.floor((t._value-60*e*60)/60),r=Math.round(t._value-60*e*60-60*i);return e+":"+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)}function o(t){var e=t.split(":"),i=0;return 3===e.length?(i+=60*Number(e[0])*60,i+=60*Number(e[1]),i+=Number(e[2])):2===e.length&&(i+=60*Number(e[0]),i+=Number(e[1])),Number(i)}function l(t,i,r){var n,s,a,o,l,h,c=!1,u=!1,f=!1,d="",v=!1,b=!1,y=!1,x=!1,w=!1,_="",C="",S=Math.abs(t),T=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],k="",O=!1;if(0===t&&null!==m)return m;if(i.indexOf("(")>-1?(c=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(u=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(v=i.indexOf("aK")>=0,b=i.indexOf("aM")>=0,y=i.indexOf("aB")>=0,x=i.indexOf("aT")>=0,w=v||b||y||x,i.indexOf(" a")>-1?(d=" ",i=i.replace(" a","")):i=i.replace("a",""),S>=Math.pow(10,12)&&!w||x?(d+=p[g].abbreviations.trillion,t/=Math.pow(10,12)):S<Math.pow(10,12)&&S>=Math.pow(10,9)&&!w||y?(d+=p[g].abbreviations.billion,t/=Math.pow(10,9)):S<Math.pow(10,9)&&S>=Math.pow(10,6)&&!w||b?(d+=p[g].abbreviations.million,t/=Math.pow(10,6)):(S<Math.pow(10,6)&&S>=Math.pow(10,3)&&!w||v)&&(d+=p[g].abbreviations.thousand,t/=Math.pow(10,3))),i.indexOf("b")>-1)for(i.indexOf(" b")>-1?(_=" ",i=i.replace(" b","")):i=i.replace("b",""),a=0;a<=T.length;a++)if(n=Math.pow(1024,a),s=Math.pow(1024,a+1),t>=n&&t<s){_+=T[a],n>0&&(t/=n);break}return i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(C=" ",i=i.replace(" o","")):i=i.replace("o",""),C+=p[g].ordinal(t)),i.indexOf("[.]")>-1&&(f=!0,i=i.replace("[.]",".")),o=t.toString().split(".")[0],l=i.split(".")[1],h=i.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),k=e(t,l[0].length+l[1].length,r,l[1].length)):k=e(t,l.length,r),o=k.split(".")[0],k=k.split(".")[1].length?p[g].delimiters.decimal+k.split(".")[1]:"",f&&0===Number(k.slice(1))&&(k="")):o=e(t,null,r),o.indexOf("-")>-1&&(o=o.slice(1),O=!0),h>-1&&(o=o.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[g].delimiters.thousands)),0===i.indexOf(".")&&(o=""),(c&&O?"(":"")+(!c&&O?"-":"")+(!O&&u?"+":"")+o+k+(C?C:"")+(d?d:"")+(_?_:"")+(c&&O?")":"")}function h(t,e){p[t]=e}function c(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function u(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var i=c(t),r=c(e);return i>r?i:r},-(1/0))}var f,d="1.5.3",p={},g="en",m=null,v="0,0",b="undefined"!=typeof module&&module.exports;f=function(e){return f.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=f.fn.unformat(e)),new t(Number(e))},f.version=d,f.isNumeral=function(e){return e instanceof t},f.language=function(t,e){if(!t)return g;if(t&&!e){if(!p[t])throw new Error("Unknown language : "+t);g=t}return!e&&p[t]||h(t,e),f},f.languageData=function(t){if(!t)return p[g];if(!p[t])throw new Error("Unknown language : "+t);return p[t]},f.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),f.zeroFormat=function(t){m="string"==typeof t?t:null},f.defaultFormat=function(t){v="string"==typeof t?t:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var i,r,n=this.length>>>0,s=!1;for(1<arguments.length&&(r=e,s=!0),i=0;n>i;++i)this.hasOwnProperty(i)&&(s?r=t(r,this[i],i,this):(r=this[i],s=!0));if(!s)throw new TypeError("Reduce of empty array with no initial value");return r}),f.fn=t.prototype={clone:function(){return f(this)},format:function(t,e){return i(this,t?t:v,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:r(this,t?t:v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e,r,n){return t+i*e}var i=u.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/i,this},subtract:function(t){function e(t,e,r,n){return t-i*e}var i=u.call(null,this._value,t);return this._value=[t].reduce(e,this._value*i)/i,this},multiply:function(t){function e(t,e,i,r){var n=u(t,e);return t*n*(e*n)/(n*n)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e,i,r){var n=u(t,e);return t*n/(e*n)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(f(this._value).subtract(t).value())}},b&&(module.exports=f),"undefined"==typeof ender&&(this.numeral=f),"function"==typeof define&&define.amd&&define("numeral",[],function(){return f})}.call(this),function(t,e){"use strict";var i,r,n,s=t,a=s.document,o=s.navigator,l=s.setTimeout,h=s.clearTimeout,c=s.setInterval,u=s.clearInterval,f=s.getComputedStyle,d=s.encodeURIComponent,p=s.ActiveXObject,g=s.Error,m=s.Number.parseInt||s.parseInt,v=s.Number.parseFloat||s.parseFloat,b=s.Number.isNaN||s.isNaN,y=s.Date.now,x=s.Object.keys,w=s.Object.defineProperty,_=s.Object.prototype.hasOwnProperty,C=s.Array.prototype.slice,S=function(){var t=function(t){return t};if("function"==typeof s.wrap&&"function"==typeof s.unwrap)try{var e=a.createElement("div"),i=s.unwrap(e);1===e.nodeType&&i&&1===i.nodeType&&(t=s.unwrap)}catch(t){}return t}(),T=function(t){return C.call(t,0)},k=function(){var t,i,r,n,s,a,o=T(arguments),l=o[0]||{};for(t=1,i=o.length;t<i;t++)if(null!=(r=o[t]))for(n in r)_.call(r,n)&&(s=l[n],a=r[n],l!==a&&a!==e&&(l[n]=a));return l},O=function(t){var e,i,r,n;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if("number"==typeof t.length)for(e=[],i=0,r=t.length;i<r;i++)_.call(t,i)&&(e[i]=O(t[i]));else{e={};for(n in t)_.call(t,n)&&(e[n]=O(t[n]))}return e},A=function(t,e){for(var i={},r=0,n=e.length;r<n;r++)e[r]in t&&(i[e[r]]=t[e[r]]);return i},M=function(t,e){var i={};for(var r in t)e.indexOf(r)===-1&&(i[r]=t[r]);return i},D=function(t){if(t)for(var e in t)_.call(t,e)&&delete t[e];return t},N=function(t,e){if(t&&1===t.nodeType&&t.ownerDocument&&e&&(1===e.nodeType&&e.ownerDocument&&e.ownerDocument===t.ownerDocument||9===e.nodeType&&!e.ownerDocument&&e===t.ownerDocument))do{if(t===e)return!0;t=t.parentNode}while(t);return!1},L=function(t){var e;return"string"==typeof t&&t&&(e=t.split("#")[0].split("?")[0],e=t.slice(0,t.lastIndexOf("/")+1)),e},F=function(t){var e,i;return"string"==typeof t&&t&&(i=t.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),i&&i[1]?e=i[1]:(i=t.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),i&&i[1]&&(e=i[1]))),e},I=function(){var t,e;try{throw new g}catch(t){e=t}return e&&(t=e.sourceURL||e.fileName||F(e.stack)),t},E=function(){var t,i,r;if(a.currentScript&&(t=a.currentScript.src))return t;if(i=a.getElementsByTagName("script"),1===i.length)return i[0].src||e;if("readyState"in i[0])for(r=i.length;r--;)if("interactive"===i[r].readyState&&(t=i[r].src))return t;return"loading"===a.readyState&&(t=i[i.length-1].src)?t:(t=I())?t:e},P=function(){var t,i,r,n=a.getElementsByTagName("script");for(t=n.length;t--;){if(!(r=n[t].src)){i=null;break}if(r=L(r),null==i)i=r;else if(i!==r){i=null;break}}return i||e},j=function(){var t=L(E())||P()||"";return t+"ZeroClipboard.swf"},B=function(){return null==t.opener&&(!!t.top&&t!=t.top||!!t.parent&&t!=t.parent)}(),R={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},z="11.0.0",W={},G={},Y=null,H=0,V=0,X={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},U=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],q=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],Z=new RegExp("^flash-("+q.map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),$=new RegExp("^flash-("+q.slice(1).map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),K={swfPath:j(),trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},J=function(t){if("object"==typeof t&&null!==t)for(var e in t)if(_.call(t,e))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(e))K[e]=t[e];else if(null==R.bridge)if("containerId"===e||"swfObjectId"===e){if(!dt(t[e]))throw new Error("The specified `"+e+"` value is not valid as an HTML4 Element ID");K[e]=t[e]}else K[e]=t[e];{if("string"!=typeof t||!t)return O(K);if(_.call(K,t))return K[t]}},Q=function(){return Vt(),{browser:A(o,["userAgent","platform","appName"]),flash:M(R,["bridge"]),zeroclipboard:{version:Ut.version,config:Ut.config()}}},tt=function(){return!!(R.disabled||R.outdated||R.sandboxed||R.unavailable||R.degraded||R.deactivated)},et=function(t,r){var n,s,a,o={};if("string"==typeof t&&t)a=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof r)for(n in t)_.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&Ut.on(n,t[n]);if(a&&a.length){for(n=0,s=a.length;n<s;n++)t=a[n].replace(/^on/,""),o[t]=!0,W[t]||(W[t]=[]),W[t].push(r);if(o.ready&&R.ready&&Ut.emit({type:"ready"}),o.error){for(n=0,s=q.length;n<s;n++)if(R[q[n].replace(/^flash-/,"")]===!0){Ut.emit({type:"error",name:q[n]});break}i!==e&&Ut.version!==i&&Ut.emit({type:"error",name:"version-mismatch",jsVersion:Ut.version,swfVersion:i})}}return Ut},it=function(t,e){var i,r,n,s,a;if(0===arguments.length)s=x(W);else if("string"==typeof t&&t)s=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(i in t)_.call(t,i)&&"string"==typeof i&&i&&"function"==typeof t[i]&&Ut.off(i,t[i]);if(s&&s.length)for(i=0,r=s.length;i<r;i++)if(t=s[i].toLowerCase().replace(/^on/,""),a=W[t],a&&a.length)if(e)for(n=a.indexOf(e);n!==-1;)a.splice(n,1),n=a.indexOf(e,n);else a.length=0;return Ut},rt=function(t){var e;return e="string"==typeof t&&t?O(W[t])||null:O(W)},nt=function(t){var e,i,r;if(t=pt(t),t&&!wt(t))return"ready"===t.type&&R.overdue===!0?Ut.emit({type:"error",name:"flash-overdue"}):(e=k({},t),yt.call(this,e),"copy"===t.type&&(r=Mt(G),i=r.data,Y=r.formatMap),i)},st=function(){var t=R.sandboxed;if(Vt(),"boolean"!=typeof R.ready&&(R.ready=!1),R.sandboxed!==t&&R.sandboxed===!0)R.ready=!1,Ut.emit({type:"error",name:"flash-sandboxed"});else if(!Ut.isFlashUnusable()&&null===R.bridge){var e=K.flashLoadTimeout;"number"==typeof e&&e>=0&&(H=l(function(){"boolean"!=typeof R.deactivated&&(R.deactivated=!0),R.deactivated===!0&&Ut.emit({type:"error",name:"flash-deactivated"})},e)),R.overdue=!1,Ot()}},at=function(){Ut.clearData(),Ut.blur(),Ut.emit("destroy"),At(),Ut.off()},ot=function(t,e){var i;if("object"==typeof t&&t&&"undefined"==typeof e)i=t,Ut.clearData();else{if("string"!=typeof t||!t)return;i={},i[t]=e}for(var r in i)"string"==typeof r&&r&&_.call(i,r)&&"string"==typeof i[r]&&i[r]&&(G[r]=i[r])},lt=function(t){"undefined"==typeof t?(D(G),Y=null):"string"==typeof t&&_.call(G,t)&&delete G[t]},ht=function(t){return"undefined"==typeof t?O(G):"string"==typeof t&&_.call(G,t)?G[t]:void 0},ct=function(t){if(t&&1===t.nodeType){r&&(jt(r,K.activeClass),r!==t&&jt(r,K.hoverClass)),r=t,Pt(t,K.hoverClass);var e=t.getAttribute("title")||K.title;if("string"==typeof e&&e){var i=kt(R.bridge);i&&i.setAttribute("title",e)}var n=K.forceHandCursor===!0||"pointer"===Bt(t,"cursor");Yt(n),Gt()}},ut=function(){var t=kt(R.bridge);t&&(t.removeAttribute("title"),t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px"),r&&(jt(r,K.hoverClass),jt(r,K.activeClass),r=null)},ft=function(){return r||null},dt=function(t){return"string"==typeof t&&t&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(t)},pt=function(t){var e;if("string"==typeof t&&t?(e=t,t={}):"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(e=t.type),e){e=e.toLowerCase(),!t.target&&(/^(copy|aftercopy|_click)$/.test(e)||"error"===e&&"clipboard-error"===t.name)&&(t.target=n),k(t,{type:e,target:t.target||r||null,relatedTarget:t.relatedTarget||null,currentTarget:R&&R.bridge||null,timeStamp:t.timeStamp||y()||null});var i=X[t.type];return"error"===t.type&&t.name&&i&&(i=i[t.name]),i&&(t.message=i),"ready"===t.type&&k(t,{target:null,version:R.version}),"error"===t.type&&(Z.test(t.name)&&k(t,{target:null,minimumVersion:z}),$.test(t.name)&&k(t,{version:R.version})),"copy"===t.type&&(t.clipboardData={setData:Ut.setData,clearData:Ut.clearData}),"aftercopy"===t.type&&(t=Dt(t,Y)),t.target&&!t.relatedTarget&&(t.relatedTarget=gt(t.target)),mt(t)}},gt=function(t){var e=t&&t.getAttribute&&t.getAttribute("data-clipboard-target");return e?a.getElementById(e):null},mt=function(t){if(t&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type)){var i=t.target,r="_mouseover"===t.type&&t.relatedTarget?t.relatedTarget:e,n="_mouseout"===t.type&&t.relatedTarget?t.relatedTarget:e,o=Rt(i),l=s.screenLeft||s.screenX||0,h=s.screenTop||s.screenY||0,c=a.body.scrollLeft+a.documentElement.scrollLeft,u=a.body.scrollTop+a.documentElement.scrollTop,f=o.left+("number"==typeof t._stageX?t._stageX:0),d=o.top+("number"==typeof t._stageY?t._stageY:0),p=f-c,g=d-u,m=l+p,v=h+g,b="number"==typeof t.movementX?t.movementX:0,y="number"==typeof t.movementY?t.movementY:0;delete t._stageX,delete t._stageY,k(t,{srcElement:i,fromElement:r,toElement:n,screenX:m,screenY:v,pageX:f,pageY:d,clientX:p,clientY:g,x:p,y:g,movementX:b,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return t},vt=function(t){var e=t&&"string"==typeof t.type&&t.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(e)},bt=function(t,e,i,r){r?l(function(){t.apply(e,i)},0):t.apply(e,i)},yt=function(t){if("object"==typeof t&&t&&t.type){var e=vt(t),i=W["*"]||[],r=W[t.type]||[],n=i.concat(r);if(n&&n.length){var a,o,l,h,c,u=this;for(a=0,o=n.length;a<o;a++)l=n[a],h=u,"string"==typeof l&&"function"==typeof s[l]&&(l=s[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(h=l,l=l.handleEvent),"function"==typeof l&&(c=k({},t),bt(l,h,[c],e))}return this}},xt=function(t){var e=null;return(B===!1||t&&"error"===t.type&&t.name&&U.indexOf(t.name)!==-1)&&(e=!1),e},wt=function(t){var e=t.target||r||null,s="swf"===t._source;switch(delete t._source,t.type){case"error":var a="flash-sandboxed"===t.name||xt(t);"boolean"==typeof a&&(R.sandboxed=a),q.indexOf(t.name)!==-1?k(R,{disabled:"flash-disabled"===t.name,outdated:"flash-outdated"===t.name,unavailable:"flash-unavailable"===t.name,degraded:"flash-degraded"===t.name,deactivated:"flash-deactivated"===t.name,overdue:"flash-overdue"===t.name,ready:!1}):"version-mismatch"===t.name&&(i=t.swfVersion,k(R,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Wt();break;case"ready":i=t.swfVersion;var o=R.deactivated===!0;k(R,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:o,ready:!o}),Wt();break;case"beforecopy":n=e;break;case"copy":var l,h,c=t.relatedTarget;!G["text/html"]&&!G["text/plain"]&&c&&(h=c.value||c.outerHTML||c.innerHTML)&&(l=c.value||c.textContent||c.innerText)?(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",l),h!==l&&t.clipboardData.setData("text/html",h)):!G["text/plain"]&&t.target&&(l=t.target.getAttribute("data-clipboard-text"))&&(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",l));break;case"aftercopy":_t(t),Ut.clearData(),e&&e!==Et()&&e.focus&&e.focus();break;case"_mouseover":Ut.focus(e),K.bubbleEvents===!0&&s&&(e&&e!==t.relatedTarget&&!N(t.relatedTarget,e)&&Ct(k({},t,{type:"mouseenter",bubbles:!1,cancelable:!1})),Ct(k({},t,{type:"mouseover"})));break;case"_mouseout":Ut.blur(),K.bubbleEvents===!0&&s&&(e&&e!==t.relatedTarget&&!N(t.relatedTarget,e)&&Ct(k({},t,{type:"mouseleave",bubbles:!1,cancelable:!1})),Ct(k({},t,{type:"mouseout"})));break;case"_mousedown":Pt(e,K.activeClass),K.bubbleEvents===!0&&s&&Ct(k({},t,{type:t.type.slice(1)}));break;case"_mouseup":jt(e,K.activeClass),K.bubbleEvents===!0&&s&&Ct(k({},t,{type:t.type.slice(1)}));break;case"_click":n=null,K.bubbleEvents===!0&&s&&Ct(k({},t,{type:t.type.slice(1)}));break;case"_mousemove":K.bubbleEvents===!0&&s&&Ct(k({},t,{type:t.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type))return!0},_t=function(t){if(t.errors&&t.errors.length>0){var e=O(t);k(e,{type:"error",name:"clipboard-error"}),delete e.success,l(function(){Ut.emit(e)},0)}},Ct=function(t){if(t&&"string"==typeof t.type&&t){var e,i=t.target||null,r=i&&i.ownerDocument||a,n={view:r.defaultView||s,canBubble:!0,cancelable:!0,detail:"click"===t.type?1:0,button:"number"==typeof t.which?t.which-1:"number"==typeof t.button?t.button:r.createEvent?0:1},o=k(n,t);i&&r.createEvent&&i.dispatchEvent&&(o=[o.type,o.canBubble,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget],
e=r.createEvent("MouseEvents"),e.initMouseEvent&&(e.initMouseEvent.apply(e,o),e._source="js",i.dispatchEvent(e)))}},St=function(){var t=K.flashLoadTimeout;if("number"==typeof t&&t>=0){var e=Math.min(1e3,t/10),i=K.swfObjectId+"_fallbackContent";V=c(function(){var t=a.getElementById(i);zt(t)&&(Wt(),R.deactivated=null,Ut.emit({type:"error",name:"swf-not-found"}))},e)}},Tt=function(){var t=a.createElement("div");return t.id=K.containerId,t.className=K.containerClass,t.style.position="absolute",t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px",t.style.zIndex=""+Ht(K.zIndex),t},kt=function(t){for(var e=t&&t.parentNode;e&&"OBJECT"===e.nodeName&&e.parentNode;)e=e.parentNode;return e||null},Ot=function(){var t,e=R.bridge,i=kt(e);if(!e){var r=It(s.location.host,K),n="never"===r?"none":"all",o=Lt(k({jsVersion:Ut.version},K)),l=K.swfPath+Nt(K.swfPath,K);i=Tt();var h=a.createElement("div");i.appendChild(h),a.body.appendChild(i);var c=a.createElement("div"),u="activex"===R.pluginType;c.innerHTML='<object id="'+K.swfObjectId+'" name="'+K.swfObjectId+'" width="100%" height="100%" '+(u?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(u?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+r+'"/><param name="allowNetworking" value="'+n+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+o+'"/><div id="'+K.swfObjectId+'_fallbackContent">&nbsp;</div></object>',e=c.firstChild,c=null,S(e).ZeroClipboard=Ut,i.replaceChild(e,h),St()}return e||(e=a[K.swfObjectId],e&&(t=e.length)&&(e=e[t-1]),!e&&i&&(e=i.firstChild)),R.bridge=e||null,e},At=function(){var t=R.bridge;if(t){var r=kt(t);r&&("activex"===R.pluginType&&"readyState"in t?(t.style.display="none",function e(){if(4===t.readyState){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode&&t.parentNode.removeChild(t),r.parentNode&&r.parentNode.removeChild(r)}else l(e,10)}()):(t.parentNode&&t.parentNode.removeChild(t),r.parentNode&&r.parentNode.removeChild(r))),Wt(),R.ready=null,R.bridge=null,R.deactivated=null,i=e}},Mt=function(t){var e={},i={};if("object"==typeof t&&t){for(var r in t)if(r&&_.call(t,r)&&"string"==typeof t[r]&&t[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":e.text=t[r],i.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":e.html=t[r],i.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":e.rtf=t[r],i.rtf=r}return{data:e,formatMap:i}}},Dt=function(t,e){if("object"!=typeof t||!t||"object"!=typeof e||!e)return t;var i={};for(var r in t)if(_.call(t,r))if("errors"===r){i[r]=t[r]?t[r].slice():[];for(var n=0,s=i[r].length;n<s;n++)i[r][n].format=e[i[r][n].format]}else if("success"!==r&&"data"!==r)i[r]=t[r];else{i[r]={};var a=t[r];for(var o in a)o&&_.call(a,o)&&_.call(e,o)&&(i[r][e[o]]=a[o])}return i},Nt=function(t,e){var i=null==e||e&&e.cacheBust===!0;return i?(t.indexOf("?")===-1?"?":"&")+"noCache="+y():""},Lt=function(t){var e,i,r,n,a="",o=[];if(t.trustedDomains&&("string"==typeof t.trustedDomains?n=[t.trustedDomains]:"object"==typeof t.trustedDomains&&"length"in t.trustedDomains&&(n=t.trustedDomains)),n&&n.length)for(e=0,i=n.length;e<i;e++)if(_.call(n,e)&&n[e]&&"string"==typeof n[e]){if(r=Ft(n[e]),!r)continue;if("*"===r){o.length=0,o.push(r);break}o.push.apply(o,[r,"//"+r,s.location.protocol+"//"+r])}return o.length&&(a+="trustedOrigins="+d(o.join(","))),t.forceEnhancedClipboard===!0&&(a+=(a?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof t.swfObjectId&&t.swfObjectId&&(a+=(a?"&":"")+"swfObjectId="+d(t.swfObjectId)),"string"==typeof t.jsVersion&&t.jsVersion&&(a+=(a?"&":"")+"jsVersion="+d(t.jsVersion)),a},Ft=function(t){if(null==t||""===t)return null;if(t=t.replace(/^\s+|\s+$/g,""),""===t)return null;var e=t.indexOf("//");t=e===-1?t:t.slice(e+2);var i=t.indexOf("/");return t=i===-1?t:e===-1||0===i?null:t.slice(0,i),t&&".swf"===t.slice(-4).toLowerCase()?null:t||null},It=function(){var t=function(t){var e,i,r,n=[];if("string"==typeof t&&(t=[t]),"object"!=typeof t||!t||"number"!=typeof t.length)return n;for(e=0,i=t.length;e<i;e++)if(_.call(t,e)&&(r=Ft(t[e]))){if("*"===r){n.length=0,n.push("*");break}n.indexOf(r)===-1&&n.push(r)}return n};return function(e,i){var r=Ft(i.swfPath);null===r&&(r=e);var n=t(i.trustedDomains),s=n.length;if(s>0){if(1===s&&"*"===n[0])return"always";if(n.indexOf(e)!==-1)return 1===s&&e===r?"sameDomain":"always"}return"never"}}(),Et=function(){try{return a.activeElement}catch(t){return null}},Pt=function(t,e){var i,r,n,s=[];if("string"==typeof e&&e&&(s=e.split(/\s+/)),t&&1===t.nodeType&&s.length>0)if(t.classList)for(i=0,r=s.length;i<r;i++)t.classList.add(s[i]);else if(t.hasOwnProperty("className")){for(n=" "+t.className+" ",i=0,r=s.length;i<r;i++)n.indexOf(" "+s[i]+" ")===-1&&(n+=s[i]+" ");t.className=n.replace(/^\s+|\s+$/g,"")}return t},jt=function(t,e){var i,r,n,s=[];if("string"==typeof e&&e&&(s=e.split(/\s+/)),t&&1===t.nodeType&&s.length>0)if(t.classList&&t.classList.length>0)for(i=0,r=s.length;i<r;i++)t.classList.remove(s[i]);else if(t.className){for(n=(" "+t.className+" ").replace(/[\r\n\t]/g," "),i=0,r=s.length;i<r;i++)n=n.replace(" "+s[i]+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")}return t},Bt=function(t,e){var i=f(t,null).getPropertyValue(e);return"cursor"!==e||i&&"auto"!==i||"A"!==t.nodeName?i:"pointer"},Rt=function(t){var e={left:0,top:0,width:0,height:0};if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),r=s.pageXOffset,n=s.pageYOffset,o=a.documentElement.clientLeft||0,l=a.documentElement.clientTop||0,h=0,c=0;if("relative"===Bt(a.body,"position")){var u=a.body.getBoundingClientRect(),f=a.documentElement.getBoundingClientRect();h=u.left-f.left||0,c=u.top-f.top||0}e.left=i.left+r-o-h,e.top=i.top+n-l-c,e.width="width"in i?i.width:i.right-i.left,e.height="height"in i?i.height:i.bottom-i.top}return e},zt=function(t){if(!t)return!1;var e=f(t,null),i=v(e.height)>0,r=v(e.width)>0,n=v(e.top)>=0,s=v(e.left)>=0,a=i&&r&&n&&s,o=a?null:Rt(t),l="none"!==e.display&&"collapse"!==e.visibility&&(a||!!o&&(i||o.height>0)&&(r||o.width>0)&&(n||o.top>=0)&&(s||o.left>=0));return l},Wt=function(){h(H),H=0,u(V),V=0},Gt=function(){var t;if(r&&(t=kt(R.bridge))){var e=Rt(r);k(t.style,{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",zIndex:""+Ht(K.zIndex)})}},Yt=function(t){R.ready===!0&&(R.bridge&&"function"==typeof R.bridge.setHandCursor?R.bridge.setHandCursor(t):R.ready=!1)},Ht=function(t){if(/^(?:auto|inherit)$/.test(t))return t;var e;return"number"!=typeof t||b(t)?"string"==typeof t&&(e=Ht(m(t,10))):e=t,"number"==typeof e?e:"auto"},Vt=function(e){var i,r,n,s=R.sandboxed,a=null;if(e=e===!0,B===!1)a=!1;else{try{r=t.frameElement||null}catch(t){n={name:t.name,message:t.message}}if(r&&1===r.nodeType&&"IFRAME"===r.nodeName)try{a=r.hasAttribute("sandbox")}catch(t){a=null}else{try{i=document.domain||null}catch(t){i=null}(null===i||n&&"SecurityError"===n.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(n.message.toLowerCase()))&&(a=!0)}}return R.sandboxed=a,s===a||e||Xt(p),a},Xt=function(t){function e(t){var e=t.match(/[\d]+/g);return e.length=3,e.join(".")}function i(t){return!!t&&(t=t.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(t)||"chrome.plugin"===t.slice(-13))}function r(t){t&&(l=!0,t.version&&(u=e(t.version)),!u&&t.description&&(u=e(t.description)),t.filename&&(c=i(t.filename)))}var n,s,a,l=!1,h=!1,c=!1,u="";if(o.plugins&&o.plugins.length)n=o.plugins["Shockwave Flash"],r(n),o.plugins["Shockwave Flash 2.0"]&&(l=!0,u="2.0.0.11");else if(o.mimeTypes&&o.mimeTypes.length)a=o.mimeTypes["application/x-shockwave-flash"],n=a&&a.enabledPlugin,r(n);else if("undefined"!=typeof t){h=!0;try{s=new t("ShockwaveFlash.ShockwaveFlash.7"),l=!0,u=e(s.GetVariable("$version"))}catch(i){try{s=new t("ShockwaveFlash.ShockwaveFlash.6"),l=!0,u="6.0.21"}catch(i){try{s=new t("ShockwaveFlash.ShockwaveFlash"),l=!0,u=e(s.GetVariable("$version"))}catch(t){h=!1}}}}R.disabled=l!==!0,R.outdated=u&&v(u)<v(z),R.version=u||"0.0.0",R.pluginType=c?"pepper":h?"activex":l?"netscape":"unknown"};Xt(p),Vt(!0);var Ut=function(){return this instanceof Ut?void("function"==typeof Ut._createClient&&Ut._createClient.apply(this,T(arguments))):new Ut};w(Ut,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Ut.config=function(){return J.apply(this,T(arguments))},Ut.state=function(){return Q.apply(this,T(arguments))},Ut.isFlashUnusable=function(){return tt.apply(this,T(arguments))},Ut.on=function(){return et.apply(this,T(arguments))},Ut.off=function(){return it.apply(this,T(arguments))},Ut.handlers=function(){return rt.apply(this,T(arguments))},Ut.emit=function(){return nt.apply(this,T(arguments))},Ut.create=function(){return st.apply(this,T(arguments))},Ut.destroy=function(){return at.apply(this,T(arguments))},Ut.setData=function(){return ot.apply(this,T(arguments))},Ut.clearData=function(){return lt.apply(this,T(arguments))},Ut.getData=function(){return ht.apply(this,T(arguments))},Ut.focus=Ut.activate=function(){return ct.apply(this,T(arguments))},Ut.blur=Ut.deactivate=function(){return ut.apply(this,T(arguments))},Ut.activeElement=function(){return ft.apply(this,T(arguments))};var qt=0,Zt={},$t=0,Kt={},Jt={};k(K,{autoActivate:!0});var Qt=function(t){var e=this;e.id=""+qt++,Zt[e.id]={instance:e,elements:[],handlers:{}},t&&e.clip(t),Ut.on("*",function(t){return e.emit(t)}),Ut.on("destroy",function(){e.destroy()}),Ut.create()},te=function(t,r){var n,s,a,o={},l=Zt[this.id],h=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof t&&t)a=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof r)for(n in t)_.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&this.on(n,t[n]);if(a&&a.length){for(n=0,s=a.length;n<s;n++)t=a[n].replace(/^on/,""),o[t]=!0,h[t]||(h[t]=[]),h[t].push(r);if(o.ready&&R.ready&&this.emit({type:"ready",client:this}),o.error){for(n=0,s=q.length;n<s;n++)if(R[q[n].replace(/^flash-/,"")]){this.emit({type:"error",name:q[n],client:this});break}i!==e&&Ut.version!==i&&this.emit({type:"error",name:"version-mismatch",jsVersion:Ut.version,swfVersion:i})}}return this},ee=function(t,e){var i,r,n,s,a,o=Zt[this.id],l=o&&o.handlers;if(!l)return this;if(0===arguments.length)s=x(l);else if("string"==typeof t&&t)s=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(i in t)_.call(t,i)&&"string"==typeof i&&i&&"function"==typeof t[i]&&this.off(i,t[i]);if(s&&s.length)for(i=0,r=s.length;i<r;i++)if(t=s[i].toLowerCase().replace(/^on/,""),a=l[t],a&&a.length)if(e)for(n=a.indexOf(e);n!==-1;)a.splice(n,1),n=a.indexOf(e,n);else a.length=0;return this},ie=function(t){var e=null,i=Zt[this.id]&&Zt[this.id].handlers;return i&&(e="string"==typeof t&&t?i[t]?i[t].slice(0):[]:O(i)),e},re=function(t){if(le.call(this,t)){"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(t=k({},t));var e=k({},pt(t),{client:this});he.call(this,e)}return this},ne=function(t){if(!Zt[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");t=ce(t);for(var e=0;e<t.length;e++)if(_.call(t,e)&&t[e]&&1===t[e].nodeType){t[e].zcClippingId?Kt[t[e].zcClippingId].indexOf(this.id)===-1&&Kt[t[e].zcClippingId].push(this.id):(t[e].zcClippingId="zcClippingId_"+$t++,Kt[t[e].zcClippingId]=[this.id],K.autoActivate===!0&&ue(t[e]));var i=Zt[this.id]&&Zt[this.id].elements;i.indexOf(t[e])===-1&&i.push(t[e])}return this},se=function(t){var e=Zt[this.id];if(!e)return this;var i,r=e.elements;t="undefined"==typeof t?r.slice(0):ce(t);for(var n=t.length;n--;)if(_.call(t,n)&&t[n]&&1===t[n].nodeType){for(i=0;(i=r.indexOf(t[n],i))!==-1;)r.splice(i,1);var s=Kt[t[n].zcClippingId];if(s){for(i=0;(i=s.indexOf(this.id,i))!==-1;)s.splice(i,1);0===s.length&&(K.autoActivate===!0&&fe(t[n]),delete t[n].zcClippingId)}}return this},ae=function(){var t=Zt[this.id];return t&&t.elements?t.elements.slice(0):[]},oe=function(){Zt[this.id]&&(this.unclip(),this.off(),delete Zt[this.id])},le=function(t){if(!t||!t.type)return!1;if(t.client&&t.client!==this)return!1;var e=Zt[this.id],i=e&&e.elements,r=!!i&&i.length>0,n=!t.target||r&&i.indexOf(t.target)!==-1,s=t.relatedTarget&&r&&i.indexOf(t.relatedTarget)!==-1,a=t.client&&t.client===this;return!(!e||!(n||s||a))},he=function(t){var e=Zt[this.id];if("object"==typeof t&&t&&t.type&&e){var i=vt(t),r=e&&e.handlers["*"]||[],n=e&&e.handlers[t.type]||[],a=r.concat(n);if(a&&a.length){var o,l,h,c,u,f=this;for(o=0,l=a.length;o<l;o++)h=a[o],c=f,"string"==typeof h&&"function"==typeof s[h]&&(h=s[h]),"object"==typeof h&&h&&"function"==typeof h.handleEvent&&(c=h,h=h.handleEvent),"function"==typeof h&&(u=k({},t),bt(h,c,[u],i))}}},ce=function(t){return"string"==typeof t&&(t=[]),"number"!=typeof t.length?[t]:t},ue=function(t){if(t&&1===t.nodeType){var e=function(t){(t||(t=s.event))&&("js"!==t._source&&(t.stopImmediatePropagation(),t.preventDefault()),delete t._source)},i=function(i){(i||(i=s.event))&&(e(i),Ut.focus(t))};t.addEventListener("mouseover",i,!1),t.addEventListener("mouseout",e,!1),t.addEventListener("mouseenter",e,!1),t.addEventListener("mouseleave",e,!1),t.addEventListener("mousemove",e,!1),Jt[t.zcClippingId]={mouseover:i,mouseout:e,mouseenter:e,mouseleave:e,mousemove:e}}},fe=function(t){if(t&&1===t.nodeType){var e=Jt[t.zcClippingId];if("object"==typeof e&&e){for(var i,r,n=["move","leave","enter","out","over"],s=0,a=n.length;s<a;s++)i="mouse"+n[s],r=e[i],"function"==typeof r&&t.removeEventListener(i,r,!1);delete Jt[t.zcClippingId]}}};Ut._createClient=function(){Qt.apply(this,T(arguments))},Ut.prototype.on=function(){return te.apply(this,T(arguments))},Ut.prototype.off=function(){return ee.apply(this,T(arguments))},Ut.prototype.handlers=function(){return ie.apply(this,T(arguments))},Ut.prototype.emit=function(){return re.apply(this,T(arguments))},Ut.prototype.clip=function(){return ne.apply(this,T(arguments))},Ut.prototype.unclip=function(){return se.apply(this,T(arguments))},Ut.prototype.elements=function(){return ae.apply(this,T(arguments))},Ut.prototype.destroy=function(){return oe.apply(this,T(arguments))},Ut.prototype.setText=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData("text/plain",t),this},Ut.prototype.setHtml=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData("text/html",t),this},Ut.prototype.setRichText=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData("application/rtf",t),this},Ut.prototype.setData=function(){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData.apply(this,T(arguments)),this},Ut.prototype.clearData=function(){if(!Zt[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.clearData.apply(this,T(arguments)),this},Ut.prototype.getData=function(){if(!Zt[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.getData.apply(this,T(arguments))},"function"==typeof define&&define.amd?define("zeroclipboard",[],function(){return Ut}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Ut:t.ZeroClipboard=Ut}(function(){return this||window}()),define("aurelia-fetch-client",["exports"],function(t){"use strict";function e(t){return new Blob([JSON.stringify(t)],{type:"application/json"})}function i(t){if(!t.ok)throw t;return t}function r(){this.isRequesting=!!++this.activeRequestCount}function n(){this.isRequesting=!!--this.activeRequestCount}function s(t){var e=n.bind(this);return t.then(e,e),t}function a(t){var e={};for(var i in t||{})t.hasOwnProperty(i)&&(e[i]="function"==typeof t[i]?t[i]():t[i]);return e}function o(t,e){var i=this.defaults||{},r=void 0,n=void 0,s=void 0,o=a(i.headers);if(Request.prototype.isPrototypeOf(t))r=t,s=new Headers(r.headers).get("Content-Type");else{e||(e={}),n=e.body;var c=n?{body:n}:null,u=Object.assign({},i,{headers:{}},e,c);s=new Headers(u.headers).get("Content-Type"),r=new Request(l(this.baseUrl,t),u)}return!s&&new Headers(o).has("content-type")&&r.headers.set("Content-Type",new Headers(o).get("content-type")),h(r.headers,o),n&&Blob.prototype.isPrototypeOf(n)&&n.type&&r.headers.set("Content-Type",n.type),r}function l(t,e){return v.test(e)?e:(t||"")+e}function h(t,e){for(var i in e||{})e.hasOwnProperty(i)&&!t.has(i)&&t.set(i,e[i])}function c(t,e){return f(t,e,"request","requestError")}function u(t,e,i){return f(t,e,"response","responseError",i)}function f(t,e,i,r){for(var n=arguments.length,s=Array(n>4?n-4:0),a=4;a<n;a++)s[a-4]=arguments[a];return(e||[]).reduce(function(t,e){var n=e[i],a=e[r];return t.then(n&&function(t){return n.call.apply(n,[e,t].concat(s))}||d,a&&function(t){return a.call.apply(a,[e,t].concat(s))}||p)},Promise.resolve(t))}function d(t){return t}function p(t){throw t}Object.defineProperty(t,"__esModule",{value:!0}),t.json=e;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},m=t.HttpClientConfiguration=function(){function t(){this.baseUrl="",this.defaults={},this.interceptors=[]}return t.prototype.withBaseUrl=function(t){return this.baseUrl=t,this},t.prototype.withDefaults=function(t){return this.defaults=t,this},t.prototype.withInterceptor=function(t){return this.interceptors.push(t),this},t.prototype.useStandardConfiguration=function(){var t={credentials:"same-origin"};return Object.assign(this.defaults,t,this.defaults),this.rejectErrorResponses()},t.prototype.rejectErrorResponses=function(){return this.withInterceptor({response:i})},t}(),v=(t.HttpClient=function(){function t(){if(this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[],"undefined"==typeof fetch)throw new Error("HttpClient requires a Fetch API implementation, but the current environment doesn't support it. You may need to load a polyfill such as https://github.com/github/fetch.")}return t.prototype.configure=function(t){var e,i=void 0;if("object"===("undefined"==typeof t?"undefined":g(t)))i={defaults:t};else{if("function"!=typeof t)throw new Error("invalid config");i=new m;var r=t(i);m.prototype.isPrototypeOf(r)&&(i=r)}var n=i.defaults;if(n&&Headers.prototype.isPrototypeOf(n.headers))throw new Error("Default headers must be a plain object.");return this.baseUrl=i.baseUrl,this.defaults=n,(e=this.interceptors).push.apply(e,i.interceptors||[]),this.isConfigured=!0,this},t.prototype.fetch=function(t){function e(e,i){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var i=this;r.call(this);var n=Promise.resolve().then(function(){return o.call(i,t,e,i.defaults)}),a=c(n,this.interceptors).then(function(t){var e=null;if(Response.prototype.isPrototypeOf(t))e=t;else{if(!Request.prototype.isPrototypeOf(t))throw new Error("An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got ["+t+"]");n=Promise.resolve(t),e=fetch(t)}return n.then(function(t){return u(e,i.interceptors,t)})});return s.call(this,a)}),t}(),/^([a-z][a-z0-9+\-.]*:)?\/\//i)}),define("kramed/kramed",["require","exports","module","./utils","./lex/block","./lex/inline","./parser","./renderer"],function(t,e,i){function r(t,e,i){if(i||"function"==typeof e){i||(i=e,e=null),e=s({},r.defaults,e||{});var n,o,h=e.highlight,c=0;try{n=a.lex(t,e)}catch(t){return i(t)}console.log(n),o=n.length;var u=function(t){if(console.log(t),t)return e.highlight=h,i(t);var r;try{r=l.parse(n,e)}catch(e){t=e}return e.highlight=h,t?i(t):i(null,r)};if(!h||h.length<3)return u();if(delete e.highlight,!o)return u();for(;c<n.length;c++)!function(t){return"code"!==t.type?--o||u():h(t.text,t.lang,function(e,i){return e?u(e):null==i||i===t.text?--o||u():(t.text=i,t.escaped=!0,void(--o||u()))})}(n[c])}else try{return e&&(e=s({},r.defaults,e)),l.parse(a.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/GitbookIO/kramed.",(e||r.defaults).silent)return"<p>An error occured:</p><pre>"+escape(t.message+"",!0)+"</pre>";throw t}}var n=t("./utils"),s=n.merge,a=t("./lex/block"),o=t("./lex/inline"),l=t("./parser"),h=t("./renderer");r.options=r.setOptions=function(t){return s(r.defaults,t),r},r.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,mathjax:!0,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",headerAutoId:!0,xhtml:!1,renderer:new h},r.Parser=l,r.parser=l.parse,r.Renderer=h,r.Lexer=a,r.lexer=a.lex,r.InlineLexer=o,r.inlineLexer=o.output,r.parse=r,i.exports=r}),define("kramed",["kramed/kramed"],function(t){return t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("intl/intl",e):t.IntlPolyfill=e()}(this,function(){"use strict";function t(t){if("function"==typeof Math.log10)return Math.floor(Math.log10(t));var e=Math.round(Math.log(t)*Math.LOG10E);return e-(Number("1e"+e)>t)}function e(t){for(var i in t)(t instanceof e||et.call(t,i))&&it(this,i,{value:t[i],enumerable:!0,writable:!0,configurable:!0})}function i(){it(this,"length",{writable:!0,value:0}),arguments.length&&ot.apply(this,st.call(arguments))}function r(){for(var t=/[.?*+^$[\]\\(){}|-]/g,e=RegExp.lastMatch||"",r=RegExp.multiline?"m":"",n={input:RegExp.input},s=new i,a=!1,o={},l=1;l<=9;l++)a=(o["$"+l]=RegExp["$"+l])||a;if(e=e.replace(t,"\\$&"),a)for(var h=1;h<=9;h++){var c=o["$"+h];c?(c=c.replace(t,"\\$&"),e=e.replace(c,"("+c+")")):e="()"+e,ot.call(s,e.slice(0,e.indexOf("(")+1)),e=e.slice(e.indexOf("(")+1)}return n.exp=new RegExp(lt.call(s,"")+e,r),n}function n(t){if(null===t)throw new TypeError("Cannot convert null or undefined to object");return Object(t)}function s(t){return et.call(t,"__getInternalProperties")?t.__getInternalProperties(ft):nt(null)}function a(t){Mt=t}function o(t){for(var e=t.length;e--;){var i=t.charAt(e);i>="a"&&i<="z"&&(t=t.slice(0,e)+i.toUpperCase()+t.slice(e+1))}return t}function l(t){return!!Tt.test(t)&&(!kt.test(t)&&!Ot.test(t))}function h(t){var e=void 0,i=void 0;t=t.toLowerCase(),i=t.split("-");for(var r=1,n=i.length;r<n;r++)if(2===i[r].length)i[r]=i[r].toUpperCase();else if(4===i[r].length)i[r]=i[r].charAt(0).toUpperCase()+i[r].slice(1);else if(1===i[r].length&&"x"!==i[r])break;t=lt.call(i,"-"),(e=t.match(At))&&e.length>1&&(e.sort(),t=t.replace(RegExp("(?:"+At.source+")+","i"),lt.call(e,""))),et.call(Dt.tags,t)&&(t=Dt.tags[t]),i=t.split("-");for(var s=1,a=i.length;s<a;s++)et.call(Dt.subtags,i[s])?i[s]=Dt.subtags[i[s]]:et.call(Dt.extLang,i[s])&&(i[s]=Dt.extLang[i[s]][0],1===s&&Dt.extLang[i[1]][1]===i[0]&&(i=st.call(i,s++),a-=1));return lt.call(i,"-")}function c(){return Mt}function u(t){var e=String(t),i=o(e);return Nt.test(i)!==!1}function f(t){if(void 0===t)return new i;var e=new i;t="string"==typeof t?[t]:t;for(var r=n(t),s=r.length,a=0;a<s;){var o=String(a),c=o in r;if(c){var u=r[o];if(null===u||"string"!=typeof u&&"object"!==("undefined"==typeof u?"undefined":J.typeof(u)))throw new TypeError("String or Object type expected");var f=String(u);if(!l(f))throw new RangeError("'"+f+"' is not a structurally valid language tag");f=h(f),rt.call(e,f)===-1&&ot.call(e,f)}a++}return e}function d(t,e){for(var i=e;i;){if(rt.call(t,i)>-1)return i;var r=i.lastIndexOf("-");if(r<0)return;r>=2&&"-"===i.charAt(r-2)&&(r-=2),i=i.substring(0,r)}}function p(t,i){for(var r=0,n=i.length,s=void 0,a=void 0,o=void 0;r<n&&!s;)a=i[r],o=String(a).replace(Lt,""),s=d(t,o),r++;var l=new e;if(void 0!==s){if(l["[[locale]]"]=s,String(a)!==String(o)){var h=a.match(Lt)[0],u=a.indexOf("-u-");l["[[extension]]"]=h,l["[[extensionIndex]]"]=u}}else l["[[locale]]"]=c();return l}function g(t,e){return p(t,e)}function m(t,i,r,n,s){if(0===t.length)throw new ReferenceError("No locale data has been provided for this object yet.");var a=r["[[localeMatcher]]"],o=void 0;o="lookup"===a?p(t,i):g(t,i);var l=o["[[locale]]"],c=void 0,u=void 0;if(et.call(o,"[[extension]]")){var f=o["[[extension]]"],d=String.prototype.split;c=d.call(f,"-"),u=c.length}var m=new e;m["[[dataLocale]]"]=l;for(var v="-u",b=0,y=n.length;b<y;){var x=n[b],w=s[l],_=w[x],C=_[0],S="",T=rt;if(void 0!==c){var k=T.call(c,x);if(k!==-1)if(k+1<u&&c[k+1].length>2){var O=c[k+1],A=T.call(_,O);A!==-1&&(C=O,S="-"+x+"-"+C)}else{var M=T(_,"true");M!==-1&&(C="true")}}if(et.call(r,"[["+x+"]]")){var D=r["[["+x+"]]"];T.call(_,D)!==-1&&D!==C&&(C=D,S="")}m["[["+x+"]]"]=C,v+=S,b++}if(v.length>2){var N=l.indexOf("-x-");if(N===-1)l+=v;else{var L=l.substring(0,N),F=l.substring(N);l=L+v+F}l=h(l)}return m["[[locale]]"]=l,m}function v(t,e){for(var r=e.length,n=new i,s=0;s<r;){var a=e[s],o=String(a).replace(Lt,""),l=d(t,o);void 0!==l&&ot.call(n,a),s++}var h=st.call(n);return h}function b(t,e){return v(t,e)}function y(t,i,r){var s=void 0,a=void 0;if(void 0!==r&&(r=new e(n(r)),s=r.localeMatcher,void 0!==s&&(s=String(s),"lookup"!==s&&"best fit"!==s)))throw new RangeError('matcher should be "lookup" or "best fit"');a=void 0===s||"best fit"===s?b(t,i):v(t,i);for(var o in a)et.call(a,o)&&it(a,o,{writable:!1,configurable:!1,value:a[o]});return it(a,"length",{writable:!1}),a}function x(t,e,i,r,n){var s=t[e];if(void 0!==s){if(s="boolean"===i?Boolean(s):"string"===i?String(s):s,void 0!==r&&rt.call(r,s)===-1)throw new RangeError("'"+s+"' is not an allowed value for `"+e+"`");return s}return n}function w(t,e,i,r,n){var s=t[e];if(void 0!==s){if(s=Number(s),isNaN(s)||s<i||s>r)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(s)}return n}function _(){var t=arguments[0],e=arguments[1];return this&&this!==Ft?C(n(this),t,e):new Ft.NumberFormat(t,e)}function C(t,a,o){var l=s(t),h=r();if(l["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");it(t,"__getInternalProperties",{value:function(){if(arguments[0]===ft)return l}}),l["[[initializedIntlObject]]"]=!0;var c=f(a);o=void 0===o?{}:n(o);var d=new e,p=x(o,"localeMatcher","string",new i("lookup","best fit"),"best fit");d["[[localeMatcher]]"]=p;var g=ut.NumberFormat["[[localeData]]"],v=m(ut.NumberFormat["[[availableLocales]]"],c,d,ut.NumberFormat["[[relevantExtensionKeys]]"],g);l["[[locale]]"]=v["[[locale]]"],l["[[numberingSystem]]"]=v["[[nu]]"],l["[[dataLocale]]"]=v["[[dataLocale]]"];var b=v["[[dataLocale]]"],y=x(o,"style","string",new i("decimal","percent","currency"),"decimal");l["[[style]]"]=y;var _=x(o,"currency","string");if(void 0!==_&&!u(_))throw new RangeError("'"+_+"' is not a valid currency code");if("currency"===y&&void 0===_)throw new TypeError("Currency code is required when style is currency");var C=void 0;"currency"===y&&(_=_.toUpperCase(),l["[[currency]]"]=_,C=S(_));var k=x(o,"currencyDisplay","string",new i("code","symbol","name"),"symbol");"currency"===y&&(l["[[currencyDisplay]]"]=k);var O=w(o,"minimumIntegerDigits",1,21,1);l["[[minimumIntegerDigits]]"]=O;var A="currency"===y?C:0,M=w(o,"minimumFractionDigits",0,20,A);l["[[minimumFractionDigits]]"]=M;var D="currency"===y?Math.max(M,C):"percent"===y?Math.max(M,0):Math.max(M,3),N=w(o,"maximumFractionDigits",M,20,D);l["[[maximumFractionDigits]]"]=N;var L=o.minimumSignificantDigits,F=o.maximumSignificantDigits;void 0===L&&void 0===F||(L=w(o,"minimumSignificantDigits",1,21,1),F=w(o,"maximumSignificantDigits",L,21,21),l["[[minimumSignificantDigits]]"]=L,l["[[maximumSignificantDigits]]"]=F);var I=x(o,"useGrouping","boolean",void 0,!0);l["[[useGrouping]]"]=I;var E=g[b],P=E.patterns,j=P[y];return l["[[positivePattern]]"]=j.positivePattern,l["[[negativePattern]]"]=j.negativePattern,l["[[boundFormat]]"]=void 0,l["[[initializedNumberFormat]]"]=!0,tt&&(t.format=T.call(t)),h.exp.test(h.input),t}function S(t){return void 0!==It[t]?It[t]:2}function T(){var t=null!==this&&"object"===J.typeof(this)&&s(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===t["[[boundFormat]]"]){var e=function(t){return A(this,Number(t))},i=ct.call(e,this);t["[[boundFormat]]"]=i}return t["[[boundFormat]]"]}function k(t,e){for(var i=O(t,e),r=[],n=0,s=0;i.length>s;s++){var a=i[s],o={};o.type=a["[[type]]"],o.value=a["[[value]]"],r[n]=o,n+=1}return r}function O(t,e){var r=s(t),n=r["[[dataLocale]]"],a=r["[[numberingSystem]]"],o=ut.NumberFormat["[[localeData]]"][n],l=o.symbols[a]||o.symbols.latn,h=void 0;!isNaN(e)&&e<0?(e=-e,h=r["[[negativePattern]]"]):h=r["[[positivePattern]]"];for(var c=new i,u=h.indexOf("{",0),f=0,d=0,p=h.length;u>-1&&u<p;){if(f=h.indexOf("}",u),f===-1)throw new Error;if(u>d){var g=h.substring(d,u);ot.call(c,{"[[type]]":"literal","[[value]]":g})}var m=h.substring(u+1,f);if("number"===m)if(isNaN(e)){var v=l.nan;ot.call(c,{"[[type]]":"nan","[[value]]":v})}else if(isFinite(e)){"percent"===r["[[style]]"]&&isFinite(e)&&(e*=100);var b=void 0;b=et.call(r,"[[minimumSignificantDigits]]")&&et.call(r,"[[maximumSignificantDigits]]")?M(e,r["[[minimumSignificantDigits]]"],r["[[maximumSignificantDigits]]"]):D(e,r["[[minimumIntegerDigits]]"],r["[[minimumFractionDigits]]"],r["[[maximumFractionDigits]]"]),Et[a]?!function(){var t=Et[a];b=String(b).replace(/\d/g,function(e){return t[e]})}():b=String(b);var y=void 0,x=void 0,w=b.indexOf(".",0);if(w>0?(y=b.substring(0,w),x=b.substring(w+1,w.length)):(y=b,x=void 0),r["[[useGrouping]]"]===!0){var _=l.group,C=[],S=o.patterns.primaryGroupSize||3,T=o.patterns.secondaryGroupSize||S;if(y.length>S){var k=y.length-S,O=k%T,A=y.slice(0,O);for(A.length&&ot.call(C,A);O<k;)ot.call(C,y.slice(O,O+T)),O+=T;ot.call(C,y.slice(k))}else ot.call(C,y);if(0===C.length)throw new Error;for(;C.length;){var N=ht.call(C);ot.call(c,{"[[type]]":"integer","[[value]]":N}),C.length&&ot.call(c,{"[[type]]":"group","[[value]]":_})}}else ot.call(c,{"[[type]]":"integer","[[value]]":y});if(void 0!==x){var L=l.decimal;ot.call(c,{"[[type]]":"decimal","[[value]]":L}),ot.call(c,{"[[type]]":"fraction","[[value]]":x})}}else{var F=l.infinity;ot.call(c,{"[[type]]":"infinity","[[value]]":F})}else if("plusSign"===m){var I=l.plusSign;ot.call(c,{"[[type]]":"plusSign","[[value]]":I})}else if("minusSign"===m){var E=l.minusSign;ot.call(c,{"[[type]]":"minusSign","[[value]]":E})}else if("percentSign"===m&&"percent"===r["[[style]]"]){var P=l.percentSign;ot.call(c,{"[[type]]":"literal","[[value]]":P})}else if("currency"===m&&"currency"===r["[[style]]"]){var j=r["[[currency]]"],B=void 0;"code"===r["[[currencyDisplay]]"]?B=j:"symbol"===r["[[currencyDisplay]]"]?B=o.currencies[j]||j:"name"===r["[[currencyDisplay]]"]&&(B=j),ot.call(c,{"[[type]]":"currency","[[value]]":B})}else{var R=h.substring(u,f);ot.call(c,{"[[type]]":"literal","[[value]]":R})}d=f+1,u=h.indexOf("{",d)}if(d<p){var z=h.substring(d,p);ot.call(c,{"[[type]]":"literal","[[value]]":z})}return c}function A(t,e){for(var i=O(t,e),r="",n=0;i.length>n;n++){var s=i[n];r+=s["[[value]]"]}return r}function M(e,i,r){var n=r,s=void 0,a=void 0;if(0===e)s=lt.call(Array(n+1),"0"),a=0;else{a=t(Math.abs(e));var o=Math.round(Math.exp(Math.abs(a-n+1)*Math.LN10));s=String(Math.round(a-n+1<0?e*o:e/o))}if(a>=n)return s+lt.call(Array(a-n+1+1),"0");if(a===n-1)return s;if(a>=0?s=s.slice(0,a+1)+"."+s.slice(a+1):a<0&&(s="0."+lt.call(Array(-(a+1)+1),"0")+s),s.indexOf(".")>=0&&r>i){for(var l=r-i;l>0&&"0"===s.charAt(s.length-1);)s=s.slice(0,-1),l--;"."===s.charAt(s.length-1)&&(s=s.slice(0,-1))}return s}function D(t,e,i,r){var n=r,s=Math.pow(10,n)*t,a=0===s?"0":s.toFixed(0),o=void 0,l=(o=a.indexOf("e"))>-1?a.slice(o+1):0;
l&&(a=a.slice(0,o).replace(".",""),a+=lt.call(Array(l-(a.length-1)+1),"0"));var h=void 0;if(0!==n){var c=a.length;if(c<=n){var u=lt.call(Array(n+1-c+1),"0");a=u+a,c=n+1}var f=a.substring(0,c-n),d=a.substring(c-n,a.length);a=f+"."+d,h=f.length}else h=a.length;for(var p=r-i;p>0&&"0"===a.slice(-1);)a=a.slice(0,-1),p--;if("."===a.slice(-1)&&(a=a.slice(0,-1)),h<e){var g=lt.call(Array(e-h+1),"0");a=g+a}return a}function N(t){for(var e=0;e<zt.length;e+=1)if(t.hasOwnProperty(zt[e]))return!1;return!0}function L(t){for(var e=0;e<Rt.length;e+=1)if(t.hasOwnProperty(Rt[e]))return!1;return!0}function F(t,e){for(var i={_:{}},r=0;r<Rt.length;r+=1)t[Rt[r]]&&(i[Rt[r]]=t[Rt[r]]),t._[Rt[r]]&&(i._[Rt[r]]=t._[Rt[r]]);for(var n=0;n<zt.length;n+=1)e[zt[n]]&&(i[zt[n]]=e[zt[n]]),e._[zt[n]]&&(i._[zt[n]]=e._[zt[n]]);return i}function I(t){return t.pattern12=t.extendedPattern.replace(/'([^']*)'/g,function(t,e){return e?e:"'"}),t.pattern=t.pattern12.replace("{ampm}","").replace(jt,""),t}function E(t,e){switch(t.charAt(0)){case"G":return e.era=["short","short","short","long","narrow"][t.length-1],"{era}";case"y":case"Y":case"u":case"U":case"r":return e.year=2===t.length?"2-digit":"numeric","{year}";case"Q":case"q":return e.quarter=["numeric","2-digit","short","long","narrow"][t.length-1],"{quarter}";case"M":case"L":return e.month=["numeric","2-digit","short","long","narrow"][t.length-1],"{month}";case"w":return e.week=2===t.length?"2-digit":"numeric","{weekday}";case"W":return e.week="numeric","{weekday}";case"d":return e.day=2===t.length?"2-digit":"numeric","{day}";case"D":case"F":case"g":return e.day="numeric","{day}";case"E":return e.weekday=["short","short","short","long","narrow","short"][t.length-1],"{weekday}";case"e":return e.weekday=["numeric","2-digit","short","long","narrow","short"][t.length-1],"{weekday}";case"c":return e.weekday=["numeric",void 0,"short","long","narrow","short"][t.length-1],"{weekday}";case"a":case"b":case"B":return e.hour12=!0,"{ampm}";case"h":case"H":return e.hour=2===t.length?"2-digit":"numeric","{hour}";case"k":case"K":return e.hour12=!0,e.hour=2===t.length?"2-digit":"numeric","{hour}";case"m":return e.minute=2===t.length?"2-digit":"numeric","{minute}";case"s":return e.second=2===t.length?"2-digit":"numeric","{second}";case"S":case"A":return e.second="numeric","{second}";case"z":case"Z":case"O":case"v":case"V":case"X":case"x":return e.timeZoneName=t.length<4?"short":"long","{timeZoneName}"}}function P(t,e){if(!Bt.test(e)){var i={originalPattern:e,_:{}};return i.extendedPattern=e.replace(Pt,function(t){return E(t,i._)}),t.replace(Pt,function(t){return E(t,i)}),I(i)}}function j(t){var e=t.availableFormats,i=t.timeFormats,r=t.dateFormats,n=[],s=void 0,a=void 0,o=void 0,l=void 0,h=void 0,c=[],u=[];for(s in e)e.hasOwnProperty(s)&&(a=e[s],o=P(s,a),o&&(n.push(o),N(o)?u.push(o):L(o)&&c.push(o)));for(s in i)i.hasOwnProperty(s)&&(a=i[s],o=P(s,a),o&&(n.push(o),c.push(o)));for(s in r)r.hasOwnProperty(s)&&(a=r[s],o=P(s,a),o&&(n.push(o),u.push(o)));for(l=0;l<c.length;l+=1)for(h=0;h<u.length;h+=1)a="long"===u[h].month?u[h].weekday?t.full:t.long:"short"===u[h].month?t.medium:t.short,o=F(u[h],c[l]),o.originalPattern=a,o.extendedPattern=a.replace("{0}",c[l].extendedPattern).replace("{1}",u[h].extendedPattern).replace(/^[,\s]+|[,\s]+$/gi,""),n.push(I(o));return n}function B(t,e,i,r,n){var s=t[e]&&t[e][i]?t[e][i]:t.gregory[i],a={narrow:["short","long"],short:["long","narrow"],long:["short","narrow"]},o=et.call(s,r)?s[r]:et.call(s,a[r][0])?s[a[r][0]]:s[a[r][1]];return null!==n?o[n]:o}function R(){var t=arguments[0],e=arguments[1];return this&&this!==Ft?z(n(this),t,e):new Ft.DateTimeFormat(t,e)}function z(t,n,a){var l=s(t),h=r();if(l["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");it(t,"__getInternalProperties",{value:function(){if(arguments[0]===ft)return l}}),l["[[initializedIntlObject]]"]=!0;var c=f(n);a=G(a,"any","date");var u=new e,d=x(a,"localeMatcher","string",new i("lookup","best fit"),"best fit");u["[[localeMatcher]]"]=d;var p=ut.DateTimeFormat,g=p["[[localeData]]"],v=m(p["[[availableLocales]]"],c,u,p["[[relevantExtensionKeys]]"],g);l["[[locale]]"]=v["[[locale]]"],l["[[calendar]]"]=v["[[ca]]"],l["[[numberingSystem]]"]=v["[[nu]]"],l["[[dataLocale]]"]=v["[[dataLocale]]"];var b=v["[[dataLocale]]"],y=a.timeZone;if(void 0!==y&&(y=o(y),"UTC"!==y))throw new RangeError("timeZone is not supported.");l["[[timeZone]]"]=y,u=new e;for(var w in Gt)if(et.call(Gt,w)){var _=x(a,w,"string",Gt[w]);u["[["+w+"]]"]=_}var C=void 0,S=g[b],T=W(S.formats);if(d=x(a,"formatMatcher","string",new i("basic","best fit"),"best fit"),S.formats=T,"basic"===d)C=Y(u,T);else{var k=x(a,"hour12","boolean");u.hour12=void 0===k?S.hour12:k,C=H(u,T)}for(var O in Gt)if(et.call(Gt,O)&&et.call(C,O)){var A=C[O];A=C._&&et.call(C._,O)?C._[O]:A,l["[["+O+"]]"]=A}var M=void 0,D=x(a,"hour12","boolean");if(l["[[hour]]"])if(D=void 0===D?S.hour12:D,l["[[hour12]]"]=D,D===!0){var N=S.hourNo0;l["[[hourNo0]]"]=N,M=C.pattern12}else M=C.pattern;else M=C.pattern;return l["[[pattern]]"]=M,l["[[boundFormat]]"]=void 0,l["[[initializedDateTimeFormat]]"]=!0,tt&&(t.format=V.call(t)),h.exp.test(h.input),t}function W(t){return"[object Array]"===Object.prototype.toString.call(t)?t:j(t)}function G(t,i,r){if(void 0===t)t=null;else{var s=n(t);t=new e;for(var a in s)t[a]=s[a]}var o=nt;t=o(t);var l=!0;return"date"!==i&&"any"!==i||void 0===t.weekday&&void 0===t.year&&void 0===t.month&&void 0===t.day||(l=!1),"time"!==i&&"any"!==i||void 0===t.hour&&void 0===t.minute&&void 0===t.second||(l=!1),!l||"date"!==r&&"all"!==r||(t.year=t.month=t.day="numeric"),!l||"time"!==r&&"all"!==r||(t.hour=t.minute=t.second="numeric"),t}function Y(t,e){for(var i=120,r=20,n=8,s=6,a=6,o=3,l=-(1/0),h=void 0,c=0,u=e.length;c<u;){var f=e[c],d=0;for(var p in Gt)if(et.call(Gt,p)){var g=t["[["+p+"]]"],m=et.call(f,p)?f[p]:void 0;if(void 0===g&&void 0!==m)d-=r;else if(void 0!==g&&void 0===m)d-=i;else{var v=["2-digit","numeric","narrow","short","long"],b=rt.call(v,g),y=rt.call(v,m),x=Math.max(Math.min(y-b,2),-2);2===x?d-=s:1===x?d-=o:x===-1?d-=a:x===-2&&(d-=n)}}d>l&&(l=d,h=f),c++}return h}function H(t,e){for(var i=120,r=20,n=8,s=6,a=6,o=3,l=1,h=-(1/0),c=void 0,u=0,f=e.length;u<f;){var d=e[u],p=0;for(var g in Gt)if(et.call(Gt,g)){var m=t["[["+g+"]]"],v=et.call(d,g)?d[g]:void 0;if(void 0===m&&void 0!==v)p-=r;else if(void 0!==m&&void 0===v)p-=i;else{var b=["2-digit","numeric","narrow","short","long"],y=rt.call(b,m),x=rt.call(b,v),w=Math.max(Math.min(x-y,2),-2);x<=1&&y>=2||x>=2&&y<=1?w>0?p-=s:w<0&&(p-=n):w>1?p-=o:w<-1&&(p-=a)}}d._.hour12!==t.hour12&&(p-=l),p>h&&(h=p,c=d),u++}return c}function V(){var t=null!==this&&"object"===J.typeof(this)&&s(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===t["[[boundFormat]]"]){var e=function(){var t=Number(0===arguments.length?Date.now():arguments[0]);return q(this,t)},i=ct.call(e,this);t["[[boundFormat]]"]=i}return t["[[boundFormat]]"]}function X(){var t=null!==this&&"object"===J.typeof(this)&&s(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.DateTimeFormat object.");if(void 0===t["[[boundFormatToParts]]"]){var e=function(){var t=Number(0===arguments.length?Date.now():arguments[0]);return Z(this,t)},i=ct.call(e,this);t["[[boundFormatToParts]]"]=i}return t["[[boundFormatToParts]]"]}function U(t,e){if(!isFinite(e))throw new RangeError("Invalid valid date passed to format");var n=t.__getInternalProperties(ft);r();for(var s=n["[[locale]]"],a=new Ft.NumberFormat([s],{useGrouping:!1}),o=new Ft.NumberFormat([s],{minimumIntegerDigits:2,useGrouping:!1}),l=$(e,n["[[calendar]]"],n["[[timeZone]]"]),h=n["[[pattern]]"],c=new i,u=0,f=h.indexOf("{"),d=0,p=n["[[dataLocale]]"],g=ut.DateTimeFormat["[[localeData]]"][p].calendars,m=n["[[calendar]]"];f!==-1;){var v=void 0;if(d=h.indexOf("}",f),d===-1)throw new Error("Unclosed pattern");f>u&&ot.call(c,{type:"literal",value:h.substring(u,f)});var b=h.substring(f+1,d);if(Gt.hasOwnProperty(b)){var y=n["[["+b+"]]"],x=l["[["+b+"]]"];if("year"===b&&x<=0?x=1-x:"month"===b?x++:"hour"===b&&n["[[hour12]]"]===!0&&(x%=12,0===x&&n["[[hourNo0]]"]===!0&&(x=12)),"numeric"===y)v=A(a,x);else if("2-digit"===y)v=A(o,x),v.length>2&&(v=v.slice(-2));else if(y in Wt)switch(b){case"month":v=B(g,m,"months",y,l["[["+b+"]]"]);break;case"weekday":try{v=B(g,m,"days",y,l["[["+b+"]]"])}catch(t){throw new Error("Could not find weekday data for locale "+s)}break;case"timeZoneName":v="";break;case"era":try{v=B(g,m,"eras",y,l["[["+b+"]]"])}catch(t){throw new Error("Could not find era data for locale "+s)}break;default:v=l["[["+b+"]]"]}ot.call(c,{type:b,value:v})}else if("ampm"===b){var w=l["[[hour]]"];v=B(g,m,"dayPeriods",w>11?"pm":"am",null),ot.call(c,{type:"dayPeriod",value:v})}else ot.call(c,{type:"literal",value:h.substring(f,d+1)});u=d+1,f=h.indexOf("{",u)}return d<h.length-1&&ot.call(c,{type:"literal",value:h.substr(d+1)}),c}function q(t,e){for(var i=U(t,e),r="",n=0;i.length>n;n++){var s=i[n];r+=s.value}return r}function Z(t,e){for(var i=U(t,e),r=[],n=0;i.length>n;n++){var s=i[n];r.push({type:s.type,value:s.value})}return r}function $(t,i,r){var n=new Date(t),s="get"+(r||"");return new e({"[[weekday]]":n[s+"Day"](),"[[era]]":+(n[s+"FullYear"]()>=0),"[[year]]":n[s+"FullYear"](),"[[month]]":n[s+"Month"](),"[[day]]":n[s+"Date"](),"[[hour]]":n[s+"Hours"](),"[[minute]]":n[s+"Minutes"](),"[[second]]":n[s+"Seconds"](),"[[inDST]]":!1})}function K(t,e){if(!t.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var i=void 0,r=[e],n=e.split("-");for(n.length>2&&4===n[1].length&&ot.call(r,n[0]+"-"+n[2]);i=ht.call(r);)ot.call(ut.NumberFormat["[[availableLocales]]"],i),ut.NumberFormat["[[localeData]]"][i]=t.number,t.date&&(t.date.nu=t.number.nu,ot.call(ut.DateTimeFormat["[[availableLocales]]"],i),ut.DateTimeFormat["[[localeData]]"][i]=t.date);void 0===Mt&&a(e)}var J={};J.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};var Q=function(){var t={};try{return Object.defineProperty(t,"a",{}),"a"in t}catch(t){return!1}}(),tt=!Q&&!Object.prototype.__defineGetter__,et=Object.prototype.hasOwnProperty,it=Q?Object.defineProperty:function(t,e,i){"get"in i&&t.__defineGetter__?t.__defineGetter__(e,i.get):(!et.call(t,e)||"value"in i)&&(t[e]=i.value)},rt=Array.prototype.indexOf||function(t){var e=this;if(!e.length)return-1;for(var i=arguments[1]||0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},nt=Object.create||function(t,e){function i(){}var r=void 0;i.prototype=t,r=new i;for(var n in e)et.call(e,n)&&it(r,n,e[n]);return r},st=Array.prototype.slice,at=Array.prototype.concat,ot=Array.prototype.push,lt=Array.prototype.join,ht=Array.prototype.shift,ct=Function.prototype.bind||function(t){var e=this,i=st.call(arguments,1);return 1===e.length?function(){return e.apply(t,at.call(i,st.call(arguments)))}:function(){return e.apply(t,at.call(i,st.call(arguments)))}},ut=nt(null),ft=Math.random();e.prototype=nt(null),i.prototype=nt(null);var dt="[a-z]{3}(?:-[a-z]{3}){0,2}",pt="(?:[a-z]{2,3}(?:-"+dt+")?|[a-z]{4}|[a-z]{5,8})",gt="[a-z]{4}",mt="(?:[a-z]{2}|\\d{3})",vt="(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3})",bt="[0-9a-wy-z]",yt=bt+"(?:-[a-z0-9]{2,8})+",xt="x(?:-[a-z0-9]{1,8})+",wt="(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))",_t="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))",Ct="(?:"+wt+"|"+_t+")",St=pt+"(?:-"+gt+")?(?:-"+mt+")?(?:-"+vt+")*(?:-"+yt+")*(?:-"+xt+")?",Tt=RegExp("^(?:"+St+"|"+xt+"|"+Ct+")$","i"),kt=RegExp("^(?!x).*?-("+vt+")-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),Ot=RegExp("^(?!x).*?-("+bt+")-(?:\\w+-(?!x-))*\\1\\b","i"),At=RegExp("-"+yt,"ig"),Mt=void 0,Dt={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",in:"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}},Nt=/^[A-Z]{3}$/,Lt=/-u(?:-[0-9a-z]{2,8})+/gi,Ft={};Ft.getCanonicalLocales=function(t){var e=f(t),i=[];for(var r in e)i.push(e[r]);return i};var It={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:4,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};it(Ft,"NumberFormat",{configurable:!0,writable:!0,value:_}),it(Ft.NumberFormat,"prototype",{writable:!1}),ut.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},it(Ft.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:ct.call(function(t){if(!et.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var e=r(),i=arguments[1],n=this["[[availableLocales]]"],s=f(t);return e.exp.test(e.input),y(n,s,i)},ut.NumberFormat)}),it(Ft.NumberFormat.prototype,"format",{configurable:!0,get:T}),Ft.NumberFormat.prototype.formatToParts=function(t){var e=null!==this&&"object"===J.typeof(this)&&s(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.NumberFormat object.");var i=Number(t);return k(this,i)};var Et={arab:["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],arabext:["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],bali:["᭐","᭑","᭒","᭓","᭔","᭕","᭖","᭗","᭘","᭙"],beng:["০","১","২","৩","৪","৫","৬","৭","৮","৯"],deva:["०","१","२","३","४","५","६","७","८","९"],fullwide:["０","１","２","３","４","５","６","７","８","９"],gujr:["૦","૧","૨","૩","૪","૫","૬","૭","૮","૯"],guru:["੦","੧","੨","੩","੪","੫","੬","੭","੮","੯"],hanidec:["〇","一","二","三","四","五","六","七","八","九"],khmr:["០","១","២","៣","៤","៥","៦","៧","៨","៩"],knda:["೦","೧","೨","೩","೪","೫","೬","೭","೮","೯"],laoo:["໐","໑","໒","໓","໔","໕","໖","໗","໘","໙"],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["᥆","᥇","᥈","᥉","᥊","᥋","᥌","᥍","᥎","᥏"],mlym:["൦","൧","൨","൩","൪","൫","൬","൭","൮","൯"],mong:["᠐","᠑","᠒","᠓","᠔","᠕","᠖","᠗","᠘","᠙"],mymr:["၀","၁","၂","၃","၄","၅","၆","၇","၈","၉"],orya:["୦","୧","୨","୩","୪","୫","୬","୭","୮","୯"],tamldec:["௦","௧","௨","௩","௪","௫","௬","௭","௮","௯"],telu:["౦","౧","౨","౩","౪","౫","౬","౭","౮","౯"],thai:["๐","๑","๒","๓","๔","๕","๖","๗","๘","๙"],tibt:["༠","༡","༢","༣","༤","༥","༦","༧","༨","༩"]};it(Ft.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var t=void 0,i=new e,r=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],n=null!==this&&"object"===J.typeof(this)&&s(this);if(!n||!n["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var a=0,o=r.length;a<o;a++)et.call(n,t="[["+r[a]+"]]")&&(i[r[a]]={value:n[t],writable:!0,configurable:!0,enumerable:!0});return nt({},i)}});var Pt=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,jt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Bt=/[rqQASjJgwWIQq]/,Rt=["weekday","era","year","month","day","weekday","quarter"],zt=["hour","minute","second","hour12","timeZoneName"],Wt=nt(null,{narrow:{},short:{},long:{}});it(Ft,"DateTimeFormat",{configurable:!0,writable:!0,value:R}),it(R,"prototype",{writable:!1});var Gt={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};ut.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},it(Ft.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:ct.call(function(t){if(!et.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var e=r(),i=arguments[1],n=this["[[availableLocales]]"],s=f(t);return e.exp.test(e.input),y(n,s,i)},ut.NumberFormat)}),it(Ft.DateTimeFormat.prototype,"format",{configurable:!0,get:V}),it(Ft.DateTimeFormat.prototype,"formatToParts",{configurable:!0,get:X}),it(Ft.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var t=void 0,i=new e,r=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],n=null!==this&&"object"===J.typeof(this)&&s(this);if(!n||!n["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var a=0,o=r.length;a<o;a++)et.call(n,t="[["+r[a]+"]]")&&(i[r[a]]={value:n[t],writable:!0,configurable:!0,enumerable:!0});return nt({},i)}});var Yt=Ft.__localeSensitiveProtos={Number:{},Date:{}};if(Yt.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return A(new _(arguments[0],arguments[1]),this)},Yt.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1];i=G(i,"any","all");var r=new R(e,i);return q(r,t)},Yt.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1];i=G(i,"date","date");var r=new R(e,i);return q(r,t)},Yt.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1];i=G(i,"time","time");var r=new R(e,i);return q(r,t)},it(Ft,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){it(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Yt.Number.toLocaleString}),it(Date.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Yt.Date.toLocaleString});for(var t in Yt.Date)et.call(Yt.Date,t)&&it(Date.prototype,t,{writable:!0,configurable:!0,value:Yt.Date[t]})}}),it(Ft,"__addLocaleData",{value:function(t){if(!l(t.locale))throw new Error("Object passed doesn't identify itself with a valid language tag");K(t,t.locale)}}),"undefined"==typeof Intl)try{window.Intl=Ft,Ft.__applyLocaleSensitivePrototypes()}catch(t){}return Ft}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("i18next/i18next",e):t.i18next=e()}(this,function(){"use strict";function t(t){return null==t?"":""+t}function e(t,e,i){t.forEach(function(t){e[t]&&(i[t]=e[t])})}function i(t,e,i){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}for(var n="string"!=typeof e?[].concat(e):e.split(".");n.length>1;){if(!t)return{};var s=r(n.shift());!t[s]&&i&&(t[s]=new i),t=t[s]}return t?{obj:t,k:r(n.shift())}:{}}function r(t,e,r){var n=i(t,e,Object),s=n.obj,a=n.k;s[a]=r}function n(t,e,r,n){var s=i(t,e,Object),a=s.obj,o=s.k;a[o]=a[o]||[],n&&(a[o]=a[o].concat(r)),n||a[o].push(r)}function s(t,e){var r=i(t,e),n=r.obj,s=r.k;if(n)return n[s]}function a(t,e,i){for(var r in e)r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?i&&(t[r]=e[r]):a(t[r],e[r],i):t[r]=e[r];return t}function o(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function l(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return M[t]}):t}function h(t){return t.interpolation={unescapeSuffix:"HTML"},t.interpolation.prefix=t.interpolationPrefix||"__",t.interpolation.suffix=t.interpolationSuffix||"__",t.interpolation.escapeValue=t.escapeInterpolation||!1,t.interpolation.nestingPrefix=t.reusePrefix||"$t(",t.interpolation.nestingSuffix=t.reuseSuffix||")",t}function c(t){return t.resStore&&(t.resources=t.resStore),t.ns&&t.ns.defaultNs?(t.defaultNS=t.ns.defaultNs,t.ns=t.ns.namespaces):t.defaultNS=t.ns||"translation",t.fallbackToDefaultNS&&t.defaultNS&&(t.fallbackNS=t.defaultNS),t.saveMissing=t.sendMissing,t.saveMissingTo=t.sendMissingTo||"current",t.returnNull=!t.fallbackOnNull,t.returnEmptyString=!t.fallbackOnEmpty,t.returnObjects=t.returnObjectTrees,t.joinArrays="\n",t.returnedObjectHandler=t.objectTreeKeyHandler,t.parseMissingKeyHandler=t.parseMissingKey,t.appendNamespaceToMissingKey=!0,t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,"sprintf"===t.shortcutFunction&&(t.overloadTranslationOptionHandler=function(t){for(var e=[],i=1;i<t.length;i++)e.push(t[i]);return{postProcess:"sprintf",sprintf:e}}),t.whitelist=t.lngWhitelist,t.preload=t.preload,"current"===t.load&&(t.load="currentOnly"),"unspecific"===t.load&&(t.load="languageOnly"),t.backend=t.backend||{},t.backend.loadPath=t.resGetPath||"locales/__lng__/__ns__.json",t.backend.addPath=t.resPostPath||"locales/add/__lng__/__ns__",t.backend.allowMultiLoading=t.dynamicLoad,t.cache=t.cache||{},t.cache.prefix="res_",t.cache.expirationTime=6048e5,t.cache.enabled=!!t.useLocalStorage,t=h(t),t.defaultVariables&&(t.interpolation.defaultVariables=t.defaultVariables),t}function u(t){return t=h(t),t.joinArrays="\n",t}function f(t){return(t.interpolationPrefix||t.interpolationSuffix||t.escapeInterpolation)&&(t=h(t)),t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,t.returnObjects=t.returnObjectTrees,t}function d(t){t.lng=function(){return O.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),t.services.languageUtils.toResolveHierarchy(t.language)[0]},t.preload=function(e,i){O.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),t.loadLanguages(e,i)},t.setLng=function(e,i,r){return O.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof i&&(r=i,i={}),i||(i={}),i.fixLng===!0&&r?r(null,t.getFixedT(e)):void t.changeLanguage(e,r)},t.addPostProcessor=function(e,i){O.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),t.use({type:"postProcessor",name:e,process:i})}}function p(t){return t.charAt(0).toUpperCase()+t.slice(1)}function g(){var t={};return I.forEach(function(e){e.lngs.forEach(function(i){return t[i]={numbers:e.nr,plurals:E[e.fc]}})}),t}function m(t,e){for(var i=t.indexOf(e);i!==-1;)t.splice(i,1),i=t.indexOf(e)}function v(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(t){return{defaultValue:t[1]}},interpolation:{escapeValue:!0,format:function(t,e,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function b(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&t.whitelist.push("cimode"),t}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},x=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},_=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},C=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},S=function(){function t(t,e){var i=[],r=!0,n=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T={type:"logger",log:function(t){this._output("log",t)},warn:function(t){this._output("warn",t)},error:function(t){this._output("error",t)},_output:function(t,e){console&&console[t]&&console[t].apply(console,Array.prototype.slice.call(e))}},k=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,t),this.subs=[],this.init(e,i)}return t.prototype.init=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=e.prefix||"i18next:",this.logger=t||T,this.options=e,this.debug=e.debug!==!1},t.prototype.setDebug=function(t){this.debug=t,this.subs.forEach(function(e){e.setDebug(t)})},t.prototype.log=function(){this.forward(arguments,"log","",!0)},t.prototype.warn=function(){this.forward(arguments,"warn","",!0)},t.prototype.error=function(){this.forward(arguments,"error","")},t.prototype.deprecate=function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)},t.prototype.forward=function(t,e,i,r){r&&!this.debug||("string"==typeof t[0]&&(t[0]=i+this.prefix+" "+t[0]),this.logger[e](t))},t.prototype.create=function(e){var i=new t(this.logger,w({prefix:this.prefix+":"+e+":"},this.options));return this.subs.push(i),i},t}(),O=new k,A=function(){function t(){x(this,t),this.observers={}}return t.prototype.on=function(t,e){var i=this;t.split(" ").forEach(function(t){i.observers[t]=i.observers[t]||[],i.observers[t].push(e)})},t.prototype.off=function(t,e){var i=this;this.observers[t]&&this.observers[t].forEach(function(){if(e){var r=i.observers[t].indexOf(e);r>-1&&i.observers[t].splice(r,1)}else delete i.observers[t]})},t.prototype.emit=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];
this.observers[t]&&this.observers[t].forEach(function(t){t.apply(void 0,i)}),this.observers["*"]&&this.observers["*"].forEach(function(e){var r;e.apply(e,(r=[t]).concat.apply(r,i))})},t}(),M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},D=function(t){function e(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];x(this,e);var n=C(this,t.call(this));return n.data=i,n.options=r,n}return _(e,t),e.prototype.addNamespaces=function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)},e.prototype.removeNamespaces=function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)},e.prototype.getResource=function(t,e,i){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],n=r.keySeparator||this.options.keySeparator;void 0===n&&(n=".");var a=[t,e];return i&&"string"!=typeof i&&(a=a.concat(i)),i&&"string"==typeof i&&(a=a.concat(n?i.split(n):i)),t.indexOf(".")>-1&&(a=t.split(".")),s(this.data,a)},e.prototype.addResource=function(t,e,i,n){var s=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],a=this.options.keySeparator;void 0===a&&(a=".");var o=[t,e];i&&(o=o.concat(a?i.split(a):i)),t.indexOf(".")>-1&&(o=t.split("."),n=e,e=o[1]),this.addNamespaces(e),r(this.data,o,n),s.silent||this.emit("added",t,e,i,n)},e.prototype.addResources=function(t,e,i){for(var r in i)"string"==typeof i[r]&&this.addResource(t,e,r,i[r],{silent:!0});this.emit("added",t,e,i)},e.prototype.addResourceBundle=function(t,e,i,n,o){var l=[t,e];t.indexOf(".")>-1&&(l=t.split("."),n=i,i=e,e=l[1]),this.addNamespaces(e);var h=s(this.data,l)||{};n?a(h,i,o):h=w({},h,i),r(this.data,l,h),this.emit("added",t,e,i)},e.prototype.removeResourceBundle=function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)},e.prototype.hasResourceBundle=function(t,e){return void 0!==this.getResource(t,e)},e.prototype.getResourceBundle=function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?w({},this.getResource(t,e)):this.getResource(t,e)},e.prototype.toJSON=function(){return this.data},e}(A),N={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,i,r,n){var s=this;return t.forEach(function(t){s.processors[t]&&(e=s.processors[t].process(e,i,r,n))}),e}},L=function(t){function i(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,i);var s=C(this,t.call(this));return e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],r,s),s.options=n,s.logger=O.create("translator"),s}return _(i,t),i.prototype.changeLanguage=function(t){t&&(this.language=t)},i.prototype.exists=function(t){var e=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(e=f(e)),void 0!==this.resolve(t,e)},i.prototype.extractFromKey=function(t,e){var i=e.nsSeparator||this.options.nsSeparator;void 0===i&&(i=":");var r=e.ns||this.options.defaultNS;if(i&&t.indexOf(i)>-1){var n=t.split(i);r=n[0],t=n[1]}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}},i.prototype.translate=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!==("undefined"==typeof e?"undefined":y(e))?e=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(e=f(e)),void 0===t||null===t||""===t)return"";"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=[t]);var i=e.lng||this.language;if(i&&"cimode"===i.toLowerCase())return t[t.length-1];var r=e.keySeparator||this.options.keySeparator||".",n=this.extractFromKey(t[t.length-1],e),s=n.key,a=n.namespaces,o=a[a.length-1],l=this.resolve(t,e),h=Object.prototype.toString.apply(l),c=["[object Number]","[object Function]","[object RegExp]"],u=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays;if(l&&"string"!=typeof l&&c.indexOf(h)<0&&(!u||"[object Array]"!==h)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(s,l,e):"key '"+s+" ("+this.language+")' returned an object instead of string.";var d="[object Array]"===h?[]:{};for(var p in l)d[p]=this.translate(""+s+r+p,w({joinArrays:!1,ns:a},e));l=d}else if(u&&"[object Array]"===h)l=l.join(u),l&&(l=this.extendTranslation(l,s,e));else{var g=!1,m=!1;if(this.isValidLookup(l)||void 0===e.defaultValue||(g=!0,l=e.defaultValue),this.isValidLookup(l)||(m=!0,l=s),m||g){this.logger.log("missingKey",i,o,s,l);var v=[];if("fallback"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var b=0;b<this.options.fallbackLng.length;b++)v.push(this.options.fallbackLng[b]);else"all"===this.options.saveMissingTo?v=this.languageUtils.toResolveHierarchy(e.lng||this.language):v.push(e.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(v,o,s,l):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(v,o,s,l)),this.emit("missingKey",v,o,s,l)}l=this.extendTranslation(l,s,e),m&&l===s&&this.options.appendNamespaceToMissingKey&&(l=o+":"+s),m&&this.options.parseMissingKeyHandler&&(l=this.options.parseMissingKeyHandler(l))}return l},i.prototype.extendTranslation=function(t,e,i){var r=this;i.interpolation&&this.interpolator.init(i);var n=i.replace&&"string"!=typeof i.replace?i.replace:i;this.options.interpolation.defaultVariables&&(n=w({},this.options.interpolation.defaultVariables,n)),t=this.interpolator.interpolate(t,n,this.language),t=this.interpolator.nest(t,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return r.translate.apply(r,e)},i),i.interpolation&&this.interpolator.reset();var s=i.postProcess||this.options.postProcess,a="string"==typeof s?[s]:s;return void 0!==t&&a&&a.length&&i.applyPostProcessor!==!1&&(t=N.handle(a,t,e,i,this)),t},i.prototype.resolve=function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=void 0;return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!e.isValidLookup(r)){var n=e.extractFromKey(t,i),s=n.key,a=n.namespaces;e.options.fallbackNS&&(a=a.concat(e.options.fallbackNS));var o=void 0!==i.count&&"string"!=typeof i.count,l=void 0!==i.context&&"string"==typeof i.context&&""!==i.context,h=i.lngs?i.lngs:e.languageUtils.toResolveHierarchy(i.lng||e.language);a.forEach(function(t){e.isValidLookup(r)||h.forEach(function(n){if(!e.isValidLookup(r)){var a=s,h=[a],c=void 0;o&&(c=e.pluralResolver.getSuffix(n,i.count)),o&&l&&h.push(a+c),l&&h.push(a+=""+e.options.contextSeparator+i.context),o&&h.push(a+=c);for(var u=void 0;u=h.pop();)e.isValidLookup(r)||(r=e.getResource(n,t,u,i))}})})}}),r},i.prototype.isValidLookup=function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)},i.prototype.getResource=function(t,e,i){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(t,e,i,r)},i}(A),F=function(){function t(e){x(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=O.create("languageUtils")}return t.prototype.getLanguagePartFromCode=function(t){if(t.indexOf("-")<0)return t;var e=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"],i=t.split("-");return this.formatLanguageCode(e.indexOf(t)>-1?i[1].toLowerCase():i[0])},t.prototype.formatLanguageCode=function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(t){return t.toLowerCase()}):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=p(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=p(i[1].toLowerCase())),e.indexOf(i[2].toLowerCase())>-1&&(i[2]=p(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t},t.prototype.isWhitelisted=function(t,e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist&&!e)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1},t.prototype.toResolveHierarchy=function(t,e){var i=this;e=e||this.options.fallbackLng||[],"string"==typeof e&&(e=[e]);var r=[],n=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];i.isWhitelisted(t,e)?r.push(t):i.logger.warn("rejecting non-whitelisted language code: "+t)};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(t),!0),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(t))):"string"==typeof t&&n(this.formatLanguageCode(t)),e.forEach(function(t){r.indexOf(t)<0&&n(i.formatLanguageCode(t))}),r},t}(),I=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],E={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}},P=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,t),this.languageUtils=e,this.options=i,this.logger=O.create("pluralResolver"),this.rules=g()}return t.prototype.addRule=function(t,e){this.rules[t]=e},t.prototype.getRule=function(t){return this.rules[this.languageUtils.getLanguagePartFromCode(t)]},t.prototype.needsPlural=function(t){var e=this.getRule(t);return!(e&&e.numbers.length<=1)},t.prototype.getSuffix=function(t,e){var i=this,r=this.getRule(t);if(!r)return this.logger.warn("no plural rule found for: "+t),"";var n=function(){if(1===r.numbers.length)return{v:""};var t=r.noAbs?r.plurals(e):r.plurals(Math.abs(e)),n=r.numbers[t];2===r.numbers.length&&1===r.numbers[0]&&(2===n?n="plural":1===n&&(n=""));var s=function(){return i.options.prepend&&n.toString()?i.options.prepend+n.toString():n.toString()};return"v1"===i.options.compatibilityJSON?1===n?{v:""}:"number"==typeof n?{v:"_plural_"+n.toString()}:{v:s()}:"v2"===i.options.compatibilityJSON||2===r.numbers.length&&1===r.numbers[0]?{v:s()}:2===r.numbers.length&&1===r.numbers[0]?{v:s()}:{v:i.options.prepend&&t.toString()?i.options.prepend+t.toString():t.toString()}}();return"object"===("undefined"==typeof n?"undefined":y(n))?n.v:void 0},t}(),j=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];x(this,e),this.logger=O.create("interpolator"),this.init(t,!0)}return e.prototype.init=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1];e&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t}),t.interpolation||(t.interpolation={escapeValue:!0});var i=t.interpolation;this.escapeValue=i.escapeValue,this.prefix=i.prefix?o(i.prefix):i.prefixEscaped||"{{",this.suffix=i.suffix?o(i.suffix):i.suffixEscaped||"}}",this.formatSeparator=i.formatSeparator?o(i.formatSeparator):i.formatSeparator||",",this.unescapePrefix=i.unescapeSuffix?"":i.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":i.unescapeSuffix||"",this.nestingPrefix=i.nestingPrefix?o(i.nestingPrefix):i.nestingPrefixEscaped||o("$t("),this.nestingSuffix=i.nestingSuffix?o(i.nestingSuffix):i.nestingSuffixEscaped||o(")");var r=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(r,"g");var n=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(n,"g");var s=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(s,"g")},e.prototype.reset=function(){this.options&&this.init(this.options)},e.prototype.interpolate=function(e,i,r){function n(t){return t.replace(/\$/g,"$$$$")}for(var a=this,o=void 0,h=void 0,c=function(t){if(t.indexOf(a.formatSeparator)<0)return s(i,t);var e=t.split(a.formatSeparator),n=e.shift().trim(),o=e.join(a.formatSeparator).trim();return a.format(s(i,n),o,r)};o=this.regexpUnescape.exec(e);){var u=c(o[1].trim());e=e.replace(o[0],u),this.regexpUnescape.lastIndex=0}for(;o=this.regexp.exec(e);)h=c(o[1].trim()),"string"!=typeof h&&(h=t(h)),h||(this.logger.warn("missed to pass in variable "+o[1]+" for interpolating "+e),h=""),h=n(this.escapeValue?l(h):h),e=e.replace(o[0],h),this.regexp.lastIndex=0;return e},e.prototype.nest=function(e,i){function r(t){return t.replace(/\$/g,"$$$$")}function n(t){if(t.indexOf(",")<0)return t;var e=t.split(",");t=e.shift();var i=e.join(",");i=this.interpolate(i,h);try{h=JSON.parse(i)}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=void 0,o=void 0,h=JSON.parse(JSON.stringify(s));for(h.applyPostProcessor=!1;a=this.nestingRegexp.exec(e);)o=i(n.call(this,a[1].trim()),h),"string"!=typeof o&&(o=t(o)),o||(this.logger.warn("missed to pass in variable "+a[1]+" for interpolating "+e),o=""),o=r(this.escapeValue?l(o):o),e=e.replace(a[0],o),this.regexp.lastIndex=0;return e},e}(),B=function(t){function e(i,r,n){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];x(this,e);var a=C(this,t.call(this));return a.backend=i,a.store=r,a.services=n,a.options=s,a.logger=O.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(n,s.backend,s),a}return _(e,t),e.prototype.queueLoad=function(t,e,i){var r=this,n=[],s=[],a=[],o=[];return t.forEach(function(t){var i=!0;e.forEach(function(e){var a=t+"|"+e;r.store.hasResourceBundle(t,e)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),n.indexOf(a)<0&&n.push(a),o.indexOf(e)<0&&o.push(e)))}),i||a.push(t)}),(n.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:n,pending:s,toLoadLanguages:a,toLoadNamespaces:o}},e.prototype.loaded=function(t,e,i){var r=this,s=t.split("|"),a=S(s,2),o=a[0],l=a[1];e&&this.emit("failedLoading",o,l,e),i&&this.store.addResourceBundle(o,l,i),this.state[t]=e?-1:2,this.queue.forEach(function(i){n(i.loaded,[o],l),m(i.pending,t),e&&i.errors.push(e),0!==i.pending.length||i.done||(i.errors.length?i.callback(i.errors):i.callback(),r.emit("loaded",i.loaded),i.done=!0)}),this.queue=this.queue.filter(function(t){return!t.done})},e.prototype.read=function(t,e,i,r,n,s){var a=this;return r||(r=0),n||(n=250),t.length?void this.backend[i](t,e,function(o,l){return o&&l&&r<5?void setTimeout(function(){a.read.call(a,t,e,i,++r,2*n,s)},n):void s(o,l)}):s(null,{})},e.prototype.load=function(t,e,i){var r=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();var n=w({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var a=this.queueLoad(t,e,i);return a.toLoad.length?void(n.allowMultiLoading&&this.backend.readMulti?this.read(a.toLoadLanguages,a.toLoadNamespaces,"readMulti",null,null,function(t,e){t&&r.logger.warn("loading namespaces "+a.toLoadNamespaces.join(", ")+" for languages "+a.toLoadLanguages.join(", ")+" via multiloading failed",t),!t&&e&&r.logger.log("loaded namespaces "+a.toLoadNamespaces.join(", ")+" for languages "+a.toLoadLanguages.join(", ")+" via multiloading",e),a.toLoad.forEach(function(i){var n=i.split("|"),a=S(n,2),o=a[0],l=a[1],h=s(e,[o,l]);if(h)r.loaded(i,t,h);else{var c="loading namespace "+l+" for language "+o+" via multiloading failed";r.loaded(i,c),r.logger.error(c)}})}):!function(){var t=function(t){var e=this,i=t.split("|"),r=S(i,2),n=r[0],s=r[1];this.read(n,s,"read",null,null,function(i,r){i&&e.logger.warn("loading namespace "+s+" for language "+n+" failed",i),!i&&r&&e.logger.log("loaded namespace "+s+" for language "+n,r),e.loaded(t,i,r)})};a.toLoad.forEach(function(e){t.call(r,e)})}()):void(a.pending.length||i())},e.prototype.reload=function(t,e){var i=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var r=w({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),r.allowMultiLoading&&this.backend.readMulti?this.read(t,e,"readMulti",null,null,function(r,n){r&&i.logger.warn("reloading namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",r),!r&&n&&i.logger.log("reloaded namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading",n),t.forEach(function(t){e.forEach(function(e){var a=s(n,[t,e]);if(a)i.loaded(t+"|"+e,r,a);else{var o="reloading namespace "+e+" for language "+t+" via multiloading failed";i.loaded(t+"|"+e,o),i.logger.error(o)}})})}):!function(){var r=function(t){var e=this,i=t.split("|"),r=S(i,2),n=r[0],s=r[1];this.read(n,s,"read",null,null,function(i,r){i&&e.logger.warn("reloading namespace "+s+" for language "+n+" failed",i),!i&&r&&e.logger.log("reloaded namespace "+s+" for language "+n,r),e.loaded(t,i,r)})};t.forEach(function(t){e.forEach(function(e){r.call(i,t+"|"+e)})})}()},e.prototype.saveMissing=function(t,e,i,r){this.backend&&this.backend.create&&this.backend.create(t,e,i,r),t&&t[0]&&this.store.addResource(t[0],e,i,r)},e}(A),R=function(t){function e(i,r,n){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];x(this,e);var a=C(this,t.call(this));return a.cache=i,a.store=r,a.services=n,a.options=s,a.logger=O.create("cacheConnector"),a.cache&&a.cache.init&&a.cache.init(n,s.cache,s),a}return _(e,t),e.prototype.load=function(t,e,i){var r=this;if(!this.cache)return i&&i();var n=w({},this.cache.options,this.options.cache);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),n.enabled?this.cache.load(t,function(e,n){if(e&&r.logger.error("loading languages "+t.join(", ")+" from cache failed",e),n)for(var s in n)for(var a in n[s])if("i18nStamp"!==a){var o=n[s][a];o&&r.store.addResourceBundle(s,a,o)}i&&i()}):i&&i()},e.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},e}(A),z=function(t){function e(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments[1];x(this,e);var n=C(this,t.call(this));return n.options=b(i),n.services={},n.logger=O,n.modules={},r&&!n.isInitialized&&n.init(i,r),n}return _(e,t),e.prototype.init=function(t,e){function i(t){if(t)return"function"==typeof t?new t:t}var r=this;if("function"==typeof t&&(e=t,t={}),t||(t={}),"v1"===t.compatibilityAPI?this.options=w({},v(),b(c(t)),{}):"v1"===t.compatibilityJSON?this.options=w({},v(),b(u(t)),{}):this.options=w({},v(),this.options,b(t)),e||(e=function(){}),!this.options.isClone){this.modules.logger?O.init(i(this.modules.logger),this.options):O.init(null,this.options);var n=new F(this.options);this.store=new D(this.options.resources,this.options);var s=this.services;s.logger=O,s.resourceStore=this.store,s.resourceStore.on("added removed",function(t,e){s.cacheConnector.save()}),s.languageUtils=n,s.pluralResolver=new P(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),s.interpolator=new j(this.options),s.backendConnector=new B(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.emit.apply(r,[t].concat(i))}),s.backendConnector.on("loaded",function(t){s.cacheConnector.save()}),s.cacheConnector=new R(i(this.modules.cache),s.resourceStore,s,this.options),s.cacheConnector.on("*",function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.emit.apply(r,[t].concat(i))}),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.translator=new L(this.services,this.options),this.translator.on("*",function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.emit.apply(r,[t].concat(i))})}var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];a.forEach(function(t){r[t]=function(){return this.store[t].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&d(this);var o=function(){r.changeLanguage(r.options.lng,function(t,i){r.emit("initialized",r.options),r.logger.log("initialized",r.options),e(t,i)})};return this.options.resources||!this.options.initImmediate?o():setTimeout(o,0),this},e.prototype.loadResources=function(t){var e=this;if(t||(t=function(){}),this.options.resources)t(null);else{var i=function(){if(e.language&&"cimode"===e.language.toLowerCase())return{v:t()};var i=[],r=function(t){var r=e.services.languageUtils.toResolveHierarchy(t);r.forEach(function(t){i.indexOf(t)<0&&i.push(t)})};r(e.language),e.options.preload&&e.options.preload.forEach(function(t){r(t)}),e.services.cacheConnector.load(i,e.options.ns,function(){e.services.backendConnector.load(i,e.options.ns,t)})}();if("object"===("undefined"==typeof i?"undefined":y(i)))return i.v}},e.prototype.reloadResources=function(t,e){t||(t=this.languages),e||(e=this.options.ns),this.services.backendConnector.reload(t,e)},e.prototype.use=function(t){return"backend"===t.type&&(this.modules.backend=t),"cache"===t.type&&(this.modules.cache=t),("logger"===t.type||t.log&&t.warn&&t.warn)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"postProcessor"===t.type&&N.addPostProcessor(t),this},e.prototype.changeLanguage=function(t,e){var i=this,r=function(r){t&&(i.emit("languageChanged",t),i.logger.log("languageChanged",t)),e&&e(r,function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i.t.apply(i,e)})};!t&&this.services.languageDetector&&(t=this.services.languageDetector.detect()),t&&(this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.translator.changeLanguage(t),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(t)),this.loadResources(function(t){r(t)})},e.prototype.getFixedT=function(t,e){var i=this,r=function t(e,r){return r=r||{},r.lng=r.lng||t.lng,r.ns=r.ns||t.ns,i.t(e,r)};return r.lng=t,r.ns=e,r},e.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},e.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},e.prototype.setDefaultNamespace=function(t){this.options.defaultNS=t},e.prototype.loadNamespaces=function(t,e){var i=this;return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach(function(t){i.options.ns.indexOf(t)<0&&i.options.ns.push(t)}),void this.loadResources(e)):e&&e()},e.prototype.loadLanguages=function(t,e){"string"==typeof t&&(t=[t]);var i=this.options.preload||[],r=t.filter(function(t){return i.indexOf(t)<0});return r.length?(this.options.preload=i.concat(r),void this.loadResources(e)):e()},e.prototype.dir=function(t){t||(t=this.language);var e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return e.indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr"},e.prototype.createInstance=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments[1];return new e(t,i)},e.prototype.cloneInstance=function(){var t=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments[1],n=new e(w({},i,this.options,{isClone:!0}),r),s=["store","translator","services","language"];return s.forEach(function(e){n[e]=t[e]}),n},e}(A),W=new z;return W}),define("i18next",["i18next/i18next"],function(t){return t}),define("highlight.js/index",["require","exports","module","./highlight","./languages/1c","./languages/abnf","./languages/accesslog","./languages/actionscript","./languages/ada","./languages/apache","./languages/applescript","./languages/cpp","./languages/arduino","./languages/armasm","./languages/xml","./languages/asciidoc","./languages/aspectj","./languages/autohotkey","./languages/autoit","./languages/avrasm","./languages/awk","./languages/axapta","./languages/bash","./languages/basic","./languages/bnf","./languages/brainfuck","./languages/cal","./languages/capnproto","./languages/ceylon","./languages/clojure","./languages/clojure-repl","./languages/cmake","./languages/coffeescript","./languages/coq","./languages/cos","./languages/crmsh","./languages/crystal","./languages/cs","./languages/csp","./languages/css","./languages/d","./languages/markdown","./languages/dart","./languages/delphi","./languages/diff","./languages/django","./languages/dns","./languages/dockerfile","./languages/dos","./languages/dsconfig","./languages/dts","./languages/dust","./languages/ebnf","./languages/elixir","./languages/elm","./languages/ruby","./languages/erb","./languages/erlang-repl","./languages/erlang","./languages/excel","./languages/fix","./languages/fortran","./languages/fsharp","./languages/gams","./languages/gauss","./languages/gcode","./languages/gherkin","./languages/glsl","./languages/go","./languages/golo","./languages/gradle","./languages/groovy","./languages/haml","./languages/handlebars","./languages/haskell","./languages/haxe","./languages/hsp","./languages/htmlbars","./languages/http","./languages/inform7","./languages/ini","./languages/irpf90","./languages/java","./languages/javascript","./languages/json","./languages/julia","./languages/kotlin","./languages/lasso","./languages/ldif","./languages/less","./languages/lisp","./languages/livecodeserver","./languages/livescript","./languages/lsl","./languages/lua","./languages/makefile","./languages/mathematica","./languages/matlab","./languages/maxima","./languages/mel","./languages/mercury","./languages/mipsasm","./languages/mizar","./languages/perl","./languages/mojolicious","./languages/monkey","./languages/moonscript","./languages/nginx","./languages/nimrod","./languages/nix","./languages/nsis","./languages/objectivec","./languages/ocaml","./languages/openscad","./languages/oxygene","./languages/parser3","./languages/pf","./languages/php","./languages/pony","./languages/powershell","./languages/processing","./languages/profile","./languages/prolog","./languages/protobuf","./languages/puppet","./languages/purebasic","./languages/python","./languages/q","./languages/qml","./languages/r","./languages/rib","./languages/roboconf","./languages/rsl","./languages/ruleslanguage","./languages/rust","./languages/scala","./languages/scheme","./languages/scilab","./languages/scss","./languages/smali","./languages/smalltalk","./languages/sml","./languages/sqf","./languages/sql","./languages/stan","./languages/stata","./languages/step21","./languages/stylus","./languages/subunit","./languages/swift","./languages/taggerscript","./languages/yaml","./languages/tap","./languages/tcl","./languages/tex","./languages/thrift","./languages/tp","./languages/twig","./languages/typescript","./languages/vala","./languages/vbnet","./languages/vbscript","./languages/vbscript-html","./languages/verilog","./languages/vhdl","./languages/vim","./languages/x86asm","./languages/xl","./languages/xquery","./languages/zephir"],function(t,e,i){var r=t("./highlight");r.registerLanguage("1c",t("./languages/1c")),r.registerLanguage("abnf",t("./languages/abnf")),r.registerLanguage("accesslog",t("./languages/accesslog")),r.registerLanguage("actionscript",t("./languages/actionscript")),r.registerLanguage("ada",t("./languages/ada")),r.registerLanguage("apache",t("./languages/apache")),r.registerLanguage("applescript",t("./languages/applescript")),r.registerLanguage("cpp",t("./languages/cpp")),r.registerLanguage("arduino",t("./languages/arduino")),r.registerLanguage("armasm",t("./languages/armasm")),r.registerLanguage("xml",t("./languages/xml")),r.registerLanguage("asciidoc",t("./languages/asciidoc")),r.registerLanguage("aspectj",t("./languages/aspectj")),r.registerLanguage("autohotkey",t("./languages/autohotkey")),r.registerLanguage("autoit",t("./languages/autoit")),r.registerLanguage("avrasm",t("./languages/avrasm")),r.registerLanguage("awk",t("./languages/awk")),r.registerLanguage("axapta",t("./languages/axapta")),r.registerLanguage("bash",t("./languages/bash")),r.registerLanguage("basic",t("./languages/basic")),r.registerLanguage("bnf",t("./languages/bnf")),r.registerLanguage("brainfuck",t("./languages/brainfuck")),r.registerLanguage("cal",t("./languages/cal")),r.registerLanguage("capnproto",t("./languages/capnproto")),r.registerLanguage("ceylon",t("./languages/ceylon")),r.registerLanguage("clojure",t("./languages/clojure")),r.registerLanguage("clojure-repl",t("./languages/clojure-repl")),r.registerLanguage("cmake",t("./languages/cmake")),r.registerLanguage("coffeescript",t("./languages/coffeescript")),r.registerLanguage("coq",t("./languages/coq")),r.registerLanguage("cos",t("./languages/cos")),r.registerLanguage("crmsh",t("./languages/crmsh")),r.registerLanguage("crystal",t("./languages/crystal")),r.registerLanguage("cs",t("./languages/cs")),r.registerLanguage("csp",t("./languages/csp")),r.registerLanguage("css",t("./languages/css")),r.registerLanguage("d",t("./languages/d")),r.registerLanguage("markdown",t("./languages/markdown")),
r.registerLanguage("dart",t("./languages/dart")),r.registerLanguage("delphi",t("./languages/delphi")),r.registerLanguage("diff",t("./languages/diff")),r.registerLanguage("django",t("./languages/django")),r.registerLanguage("dns",t("./languages/dns")),r.registerLanguage("dockerfile",t("./languages/dockerfile")),r.registerLanguage("dos",t("./languages/dos")),r.registerLanguage("dsconfig",t("./languages/dsconfig")),r.registerLanguage("dts",t("./languages/dts")),r.registerLanguage("dust",t("./languages/dust")),r.registerLanguage("ebnf",t("./languages/ebnf")),r.registerLanguage("elixir",t("./languages/elixir")),r.registerLanguage("elm",t("./languages/elm")),r.registerLanguage("ruby",t("./languages/ruby")),r.registerLanguage("erb",t("./languages/erb")),r.registerLanguage("erlang-repl",t("./languages/erlang-repl")),r.registerLanguage("erlang",t("./languages/erlang")),r.registerLanguage("excel",t("./languages/excel")),r.registerLanguage("fix",t("./languages/fix")),r.registerLanguage("fortran",t("./languages/fortran")),r.registerLanguage("fsharp",t("./languages/fsharp")),r.registerLanguage("gams",t("./languages/gams")),r.registerLanguage("gauss",t("./languages/gauss")),r.registerLanguage("gcode",t("./languages/gcode")),r.registerLanguage("gherkin",t("./languages/gherkin")),r.registerLanguage("glsl",t("./languages/glsl")),r.registerLanguage("go",t("./languages/go")),r.registerLanguage("golo",t("./languages/golo")),r.registerLanguage("gradle",t("./languages/gradle")),r.registerLanguage("groovy",t("./languages/groovy")),r.registerLanguage("haml",t("./languages/haml")),r.registerLanguage("handlebars",t("./languages/handlebars")),r.registerLanguage("haskell",t("./languages/haskell")),r.registerLanguage("haxe",t("./languages/haxe")),r.registerLanguage("hsp",t("./languages/hsp")),r.registerLanguage("htmlbars",t("./languages/htmlbars")),r.registerLanguage("http",t("./languages/http")),r.registerLanguage("inform7",t("./languages/inform7")),r.registerLanguage("ini",t("./languages/ini")),r.registerLanguage("irpf90",t("./languages/irpf90")),r.registerLanguage("java",t("./languages/java")),r.registerLanguage("javascript",t("./languages/javascript")),r.registerLanguage("json",t("./languages/json")),r.registerLanguage("julia",t("./languages/julia")),r.registerLanguage("kotlin",t("./languages/kotlin")),r.registerLanguage("lasso",t("./languages/lasso")),r.registerLanguage("ldif",t("./languages/ldif")),r.registerLanguage("less",t("./languages/less")),r.registerLanguage("lisp",t("./languages/lisp")),r.registerLanguage("livecodeserver",t("./languages/livecodeserver")),r.registerLanguage("livescript",t("./languages/livescript")),r.registerLanguage("lsl",t("./languages/lsl")),r.registerLanguage("lua",t("./languages/lua")),r.registerLanguage("makefile",t("./languages/makefile")),r.registerLanguage("mathematica",t("./languages/mathematica")),r.registerLanguage("matlab",t("./languages/matlab")),r.registerLanguage("maxima",t("./languages/maxima")),r.registerLanguage("mel",t("./languages/mel")),r.registerLanguage("mercury",t("./languages/mercury")),r.registerLanguage("mipsasm",t("./languages/mipsasm")),r.registerLanguage("mizar",t("./languages/mizar")),r.registerLanguage("perl",t("./languages/perl")),r.registerLanguage("mojolicious",t("./languages/mojolicious")),r.registerLanguage("monkey",t("./languages/monkey")),r.registerLanguage("moonscript",t("./languages/moonscript")),r.registerLanguage("nginx",t("./languages/nginx")),r.registerLanguage("nimrod",t("./languages/nimrod")),r.registerLanguage("nix",t("./languages/nix")),r.registerLanguage("nsis",t("./languages/nsis")),r.registerLanguage("objectivec",t("./languages/objectivec")),r.registerLanguage("ocaml",t("./languages/ocaml")),r.registerLanguage("openscad",t("./languages/openscad")),r.registerLanguage("oxygene",t("./languages/oxygene")),r.registerLanguage("parser3",t("./languages/parser3")),r.registerLanguage("pf",t("./languages/pf")),r.registerLanguage("php",t("./languages/php")),r.registerLanguage("pony",t("./languages/pony")),r.registerLanguage("powershell",t("./languages/powershell")),r.registerLanguage("processing",t("./languages/processing")),r.registerLanguage("profile",t("./languages/profile")),r.registerLanguage("prolog",t("./languages/prolog")),r.registerLanguage("protobuf",t("./languages/protobuf")),r.registerLanguage("puppet",t("./languages/puppet")),r.registerLanguage("purebasic",t("./languages/purebasic")),r.registerLanguage("python",t("./languages/python")),r.registerLanguage("q",t("./languages/q")),r.registerLanguage("qml",t("./languages/qml")),r.registerLanguage("r",t("./languages/r")),r.registerLanguage("rib",t("./languages/rib")),r.registerLanguage("roboconf",t("./languages/roboconf")),r.registerLanguage("rsl",t("./languages/rsl")),r.registerLanguage("ruleslanguage",t("./languages/ruleslanguage")),r.registerLanguage("rust",t("./languages/rust")),r.registerLanguage("scala",t("./languages/scala")),r.registerLanguage("scheme",t("./languages/scheme")),r.registerLanguage("scilab",t("./languages/scilab")),r.registerLanguage("scss",t("./languages/scss")),r.registerLanguage("smali",t("./languages/smali")),r.registerLanguage("smalltalk",t("./languages/smalltalk")),r.registerLanguage("sml",t("./languages/sml")),r.registerLanguage("sqf",t("./languages/sqf")),r.registerLanguage("sql",t("./languages/sql")),r.registerLanguage("stan",t("./languages/stan")),r.registerLanguage("stata",t("./languages/stata")),r.registerLanguage("step21",t("./languages/step21")),r.registerLanguage("stylus",t("./languages/stylus")),r.registerLanguage("subunit",t("./languages/subunit")),r.registerLanguage("swift",t("./languages/swift")),r.registerLanguage("taggerscript",t("./languages/taggerscript")),r.registerLanguage("yaml",t("./languages/yaml")),r.registerLanguage("tap",t("./languages/tap")),r.registerLanguage("tcl",t("./languages/tcl")),r.registerLanguage("tex",t("./languages/tex")),r.registerLanguage("thrift",t("./languages/thrift")),r.registerLanguage("tp",t("./languages/tp")),r.registerLanguage("twig",t("./languages/twig")),r.registerLanguage("typescript",t("./languages/typescript")),r.registerLanguage("vala",t("./languages/vala")),r.registerLanguage("vbnet",t("./languages/vbnet")),r.registerLanguage("vbscript",t("./languages/vbscript")),r.registerLanguage("vbscript-html",t("./languages/vbscript-html")),r.registerLanguage("verilog",t("./languages/verilog")),r.registerLanguage("vhdl",t("./languages/vhdl")),r.registerLanguage("vim",t("./languages/vim")),r.registerLanguage("x86asm",t("./languages/x86asm")),r.registerLanguage("xl",t("./languages/xl")),r.registerLanguage("xquery",t("./languages/xquery")),r.registerLanguage("zephir",t("./languages/zephir")),i.exports=r}),define("highlight.js",["highlight.js/index"],function(t){return t}),define("aurelia-i18n/aurelia-i18n",["exports","aurelia-logging","aurelia-event-aggregator","aurelia-templating","aurelia-loader","aurelia-templating-resources","./i18n","./relativeTime","./df","./nf","./rt","./t","./base-i18n"],function(t,e,i,r,n,s,a,o,l,h,c,u,f){"use strict";function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function p(t,e){var n=new a.I18N(t.container.get(i.EventAggregator),t.container.get(s.BindingSignaler));t.container.registerInstance(a.I18N,n);var o=e(n);return t.postTask(function(){var e=t.container.get(r.ViewResources),i=e.getAttribute("t"),s=e.getAttribute("t-params"),a=n.i18next.options.attributes;a||(a=["t","i18n"]),a.forEach(function(t){return e.registerAttribute(t,i,"t")}),a.forEach(function(t){return e.registerAttribute(t+"-params",s,"t-params")})}),o}function g(t,e){if(void 0===e||"function"!=typeof e){var i="You need to provide a callback method to properly configure the library";throw i}if(t.globalResources("./t"),t.globalResources("./nf"),t.globalResources("./df"),t.globalResources("./rt"),void 0===window.Intl){var r=function(){var i=m.getLogger("i18n");i.warn("Intl API is not available. Trying to load the polyfill.");var r=t.container.get(n.Loader),s="Failed to normalize {module} while loading the Intl polyfill.";return{v:r.normalize("aurelia-i18n").then(function(n){return r.normalize("intl",n).then(function(n){return r.loadModule(n).then(function(i){return window.Intl=i,p(t,e)},function(){return i.warn("Failed to load the Intl polyfill.")})},function(){return i.warn(s.replace("{module}","intl"))})},function(){return i.warn(s.replace("{module}","aurelia-i18n"))})}}();if("object"===("undefined"==typeof r?"undefined":v(r)))return r.v}return Promise.resolve(p(t,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.EventAggregator=t.BaseI18N=t.TParamsCustomAttribute=t.TCustomAttribute=t.TBindingBehavior=t.TValueConverter=t.RtValueConverter=t.NfValueConverter=t.DfValueConverter=t.RelativeTime=t.I18N=t.configure=void 0;var m=d(e),v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.configure=g,t.I18N=a.I18N,t.RelativeTime=o.RelativeTime,t.DfValueConverter=l.DfValueConverter,t.NfValueConverter=h.NfValueConverter,t.RtValueConverter=c.RtValueConverter,t.TValueConverter=u.TValueConverter,t.TBindingBehavior=u.TBindingBehavior,t.TCustomAttribute=u.TCustomAttribute,t.TParamsCustomAttribute=u.TParamsCustomAttribute,t.BaseI18N=f.BaseI18N,t.EventAggregator=i.EventAggregator}),define("aurelia-i18n",["aurelia-i18n/aurelia-i18n"],function(t){return t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("i18next-xhr-backend/i18nextXHRBackend",e):t.i18nextXHRBackend=e()}(this,function(){"use strict";function t(t){return n.call(s.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t}function e(t,e,i,r,n){if(r&&"object"===("undefined"==typeof r?"undefined":a(r))){var s="",o=encodeURIComponent;for(var l in r)s+="&"+o(l)+"="+o(r[l]);r=s.slice(1)+(n?"":"&_t="+new Date)}try{var h=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");h.open(r?"POST":"GET",t,1),e.crossDomain||h.setRequestHeader("X-Requested-With","XMLHttpRequest"),r&&h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onreadystatechange=function(){h.readyState>3&&i&&i(h.responseText,h)},h.send(r)}catch(t){window.console&&console.log(t)}}function i(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:e}}var r=[],n=r.forEach,s=r.slice,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),this.init(t,i),this.type="backend"}return l(e,[{key:"init",value:function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=e,this.options=t(r,this.options||{},i())}},{key:"readMulti",value:function(t,e,i){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath(t,e));var n=this.services.interpolator.interpolate(r,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(n,i)}},{key:"read",value:function(t,e,i){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath([t],[e]));var n=this.services.interpolator.interpolate(r,{lng:t,ns:e});this.loadUrl(n,i)}},{key:"loadUrl",value:function(t,e){var i=this;this.options.ajax(t,this.options,function(r,n){if(n.status>=500&&n.status<600)return e("failed loading "+t,!0);if(n.status>=400&&n.status<500)return e("failed loading "+t,!1);var s=void 0,a=void 0;try{s=i.options.parse(r,t)}catch(e){a="failed parsing "+t+" to json"}return a?e(a,!1):void e(null,s)})}},{key:"create",value:function(t,e,i,r){var n=this;"string"==typeof t&&(t=[t]);var s={};s[i]=r||"",t.forEach(function(t){var i=n.services.interpolator.interpolate(n.options.addPath,{lng:t,ns:e});n.options.ajax(i,n.options,function(t,e){},s)})}}]),e}();return h.type="backend",h}),define("i18next-xhr-backend",["i18next-xhr-backend/i18nextXHRBackend"],function(t){return t}),define("aurelia-validation/aurelia-validation",["require","exports","./validate-binding-behavior","./validate-trigger","./validation-controller","./validation-controller-factory","./validation-error","./validation-errors-custom-attribute","./validation-renderer-custom-attribute","./validator","./implementation/rules","./implementation/standard-validator","./implementation/validation-messages","./implementation/validation-parser","./implementation/validation-rules","./validator","./implementation/standard-validator","./implementation/validation-parser","./implementation/validation-rules"],function(t,e,i,r,n,s,a,o,l,h,c,u,f,d,p,g,m,v,b){"use strict";function y(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}function x(t,e){var i=t.container.get(v.ValidationParser);b.ValidationRules.initialize(i);var r=new w;e instanceof Function&&e(r),r.apply(t.container),t.globalResources("./validate-binding-behavior","./validation-errors-custom-attribute","./validation-renderer-custom-attribute")}y(i),y(r),y(n),y(s),y(a),y(o),y(l),y(h),y(c),y(u),y(f),y(d),y(p);var w=function(){function t(){this.validatorType=m.StandardValidator}return t.prototype.customValidator=function(t){this.validatorType=t},t.prototype.apply=function(t){var e=t.get(this.validatorType);t.registerInstance(g.Validator,e)},t}();e.AureliaValidationConfiguration=w,e.configure=x}),define("aurelia-validation",["aurelia-validation/aurelia-validation"],function(t){return t}),define("aurelia-ui-virtualization/aurelia-ui-virtualization",["exports","./virtual-repeat","./infinite-scroll-next"],function(t,e,i){"use strict";function r(t){t.globalResources("./virtual-repeat","./infinite-scroll-next")}Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteScrollNext=t.VirtualRepeat=void 0,t.configure=r,t.VirtualRepeat=e.VirtualRepeat,t.InfiniteScrollNext=i.InfiniteScrollNext}),define("aurelia-ui-virtualization",["aurelia-ui-virtualization/aurelia-ui-virtualization"],function(t){return t}),define("aurelia-ui-virtualization/virtual-repeat",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","aurelia-templating-resources","aurelia-pal","./utilities","./dom-helper","./virtual-repeat-strategy-locator","./template-strategy"],function(t,e,i,r,n,s,a,o,l,h){"use strict";function c(t,e,i,r){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t,e,i,r,n){var s={};return Object.keys(r).forEach(function(t){s[t]=r[t]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce(function(i,r){return r(t,e,i)||i},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,e,s),s=null),s}Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualRepeat=void 0;var p,g,m,v,b,y;t.VirtualRepeat=(p=(0,r.customAttribute)("virtual-repeat"),g=(0,e.inject)(s.DOM.Element,r.BoundViewFactory,r.TargetInstruction,r.ViewSlot,r.ViewResources,i.ObserverLocator,l.VirtualRepeatStrategyLocator,h.TemplateStrategyLocator,o.DomHelper),p(m=(0,r.templateController)(m=g((v=function(t){function e(e,i,r,s,a,o,l,h,f){var d=u(this,t.call(this,{local:"item",viewsRequireLifecycle:(0,n.viewsRequireLifecycle)(i)}));return d._first=0,d._previousFirst=0,d._viewsLength=0,d._lastRebind=0,d._topBufferHeight=0,d._bottomBufferHeight=0,d._bufferSize=5,d._scrollingDown=!1,d._scrollingUp=!1,d._switchedDirection=!1,d._isAttached=!1,d._ticking=!1,d._fixedHeightContainer=!1,d._hasCalculatedSizes=!1,d._isAtTop=!0,d._calledGetMore=!1,c(d,"items",b,d),c(d,"local",y,d),d.element=e,d.viewFactory=i,d.instruction=r,d.viewSlot=s,d.lookupFunctions=a.lookupFunctions,d.observerLocator=o,d.strategyLocator=l,d.templateStrategyLocator=h,d.sourceExpression=(0,n.getItemsSourceExpression)(d.instruction,"virtual-repeat.for"),d.isOneTime=(0,n.isOneTime)(d.sourceExpression),d.domHelper=f,d}return f(e,t),e.prototype.attached=function(){var t=this;this._isAttached=!0;var e=this.element;this._itemsLength=this.items.length,this.templateStrategy=this.templateStrategyLocator.getStrategy(e),this.scrollContainer=this.templateStrategy.getScrollContainer(e),this.topBuffer=this.templateStrategy.createTopBufferElement(e),this.bottomBuffer=this.templateStrategy.createBottomBufferElement(e),this.itemsChanged(),this.scrollListener=function(){return t._onScroll()},this.calcDistanceToTopInterval=setInterval(function(){var e=t.distanceToTop;t.distanceToTop=t.domHelper.getElementDistanceToTopOfDocument(t.topBuffer),t.distanceToTop+=t.topBufferDistance,e!==t.distanceToTop&&t._handleScroll()},500),this.distanceToTop=this.domHelper.getElementDistanceToTopOfDocument(this.templateStrategy.getFirstElement(this.topBuffer)),this.topBufferDistance=this.templateStrategy.getTopBufferDistance(this.topBuffer),this.domHelper.hasOverflowScroll(this.scrollContainer)?(this._fixedHeightContainer=!0,this.scrollContainer.addEventListener("scroll",this.scrollListener)):document.addEventListener("scroll",this.scrollListener)},e.prototype.bind=function(t,e){this.scope={bindingContext:t,overrideContext:e}},e.prototype.call=function(t,e){this[t](this.items,e)},e.prototype.detached=function(){this.scrollContainer.removeEventListener("scroll",this.scrollListener),this._first=0,this._previousFirst=0,this._viewsLength=0,this._lastRebind=0,this._topBufferHeight=0,this._bottomBufferHeight=0,this._scrollingDown=!1,this._scrollingUp=!1,this._switchedDirection=!1,this._isAttached=!1,this._ticking=!1,this._hasCalculatedSizes=!1,this.templateStrategy.removeBufferElements(this.element,this.topBuffer,this.bottomBuffer),this.isLastIndex=!1,this.scrollContainer=null,this.scrollContainerHeight=null,this.distanceToTop=null,this.removeAllViews(!0),this.scrollHandler&&this.scrollHandler.dispose(),this._unsubscribeCollection(),clearInterval(this.calcDistanceToTopInterval),this._sizeInterval&&clearInterval(this._sizeInterval)},e.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var t=this.items;this.strategy=this.strategyLocator.getStrategy(t),t.length>0&&0===this.viewCount()&&this.strategy.createFirstItem(this),this._calcInitialHeights(t.length),this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,t,this._viewsLength)}},e.prototype.unbind=function(){this.scope=null,this.items=null,this._itemsLength=null},e.prototype.handleCollectionMutated=function(t,e){this._handlingMutations=!0,this._itemsLength=t.length,this.strategy.instanceMutated(this,t,e)},e.prototype.handleInnerCollectionMutated=function(t,e){var i=this;if(!this.ignoreMutation){this.ignoreMutation=!0;var r=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return i.ignoreMutation=!1}),r===this.items?this.itemsChanged():this.items=r}},e.prototype._onScroll=function(){var t=this;this._ticking||this._handlingMutations||(requestAnimationFrame(function(){return t._handleScroll()}),this._ticking=!0),this._handlingMutations&&(this._handlingMutations=!1)},e.prototype._handleScroll=function(){if(this._isAttached){var t=this.itemHeight,e=this._fixedHeightContainer?this.scrollContainer.scrollTop:pageYOffset-this.distanceToTop;if(this._first=Math.floor(e/t),this._first=this._first<0?0:this._first,this._first>this.items.length-this.elementsInView&&(this._first=this.items.length-this.elementsInView),this._checkScrolling(),this._scrollingDown){var i=this._first-this._lastRebind;this._switchedDirection&&(i=this._isAtTop?this._first:this._bufferSize-(this._lastRebind-this._first)),this._isAtTop=!1,this._lastRebind=this._first;var r=this._moveViews(i),n=r<i?this._bottomBufferHeight:t*r;i>0&&this._getMore(),this._switchedDirection=!1,this._topBufferHeight=this._topBufferHeight+n,this._bottomBufferHeight=this._bottomBufferHeight-n,this._bottomBufferHeight>=0&&this._adjustBufferHeights()}else if(this._scrollingUp){var s=this._lastRebind-this._first,a=void 0===this.isLastIndex;this._switchedDirection&&(s=this.isLastIndex?this.items.length-this._first-this.elementsInView:this._bufferSize-(this._first-this._lastRebind)),this.isLastIndex=!1,this._lastRebind=this._first;var o=this._moveViews(s);this.movedViewsCount=o;var l=o<s?this._topBufferHeight:t*o;if(s>0){var h=!!(0===this.movedViewsCount&&a&&this._first<=0);this._getMore(h)}this._switchedDirection=!1,this._topBufferHeight=this._topBufferHeight-l,this._bottomBufferHeight=this._bottomBufferHeight+l,this._topBufferHeight>=0&&this._adjustBufferHeights()}this._previousFirst=this._first,this._ticking=!1}},e.prototype._getMore=function(t){var e=this;if((this.isLastIndex||0===this._first||t)&&!this._calledGetMore){var i=function(){e._calledGetMore=!0;var t=e.view(0)&&e.view(0).firstChild&&e.view(0).firstChild.au&&e.view(0).firstChild.au["infinite-scroll-next"]?e.view(0).firstChild.au["infinite-scroll-next"].instruction.attributes["infinite-scroll-next"]:void 0,i=e._first,r=0===e._bottomBufferHeight,n=e._isAtTop,s={topIndex:i,isAtBottom:r,isAtTop:n};if(e.scope.overrideContext.$scrollContext=s,void 0===t)return null;if("string"!=typeof t){if(t.sourceExpression)return e._calledGetMore=!1,t.sourceExpression.evaluate(e.scope);throw new Error("'infinite-scroll-next' must be a function or evaluate to one")}var a=e.view(0).firstChild.getAttribute("infinite-scroll-next"),o=e.scope.overrideContext.bindingContext[a];if("function"!=typeof o)throw new Error("'infinite-scroll-next' must be a function or evaluate to one");var l=o.call(e.scope.overrideContext.bindingContext,i,r,n);return l instanceof Promise?l.then(function(){e._calledGetMore=!1}):(e._calledGetMore=!1,null)};this.observerLocator.taskQueue.queueMicroTask(i)}},e.prototype._checkScrolling=function(){this._first>this._previousFirst&&(this._bottomBufferHeight>0||!this.isLastIndex)?(this._scrollingDown?this._switchedDirection=!1:(this._scrollingDown=!0,this._scrollingUp=!1,this._switchedDirection=!0),this._isScrolling=!0):this._first<this._previousFirst&&(this._topBufferHeight>=0||!this._isAtTop)?(this._scrollingUp?this._switchedDirection=!1:(this._scrollingDown=!1,this._scrollingUp=!0,this._switchedDirection=!0),this._isScrolling=!0):this._isScrolling=!1},e.prototype._adjustBufferHeights=function(){this.topBuffer.style.height=this._topBufferHeight+"px",this.bottomBuffer.style.height=this._bottomBufferHeight+"px"},e.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},e.prototype._moveViews=function(t){for(var e=this,i=this._scrollingDown?function(t,e){return t+e}:function(t,e){return t-e},r=function(){return e._scrollingDown?e.isLastIndex:e._isAtTop},n=this.viewCount(),s=this._scrollingDown?0:n-1,o=this.items,l=this._scrollingDown?this._getIndexOfLastView()+1:this._getIndexOfFirstView()-1,h=0,c=t-2*n;h<t&&!r();){var u=this.view(s),f=i(l,h);this.isLastIndex=f>=o.length-1,this._isAtTop=f<=0,r()&&n>=o.length||(h>c&&(0,a.rebindAndMoveView)(this,u,f,this._scrollingDown),h++)}return t-(t-h)},e.prototype._getIndexOfLastView=function(){var t=this.view(this.viewCount()-1);return t?t.overrideContext.$index:-1},e.prototype._getLastViewItem=function(){var t=this.viewSlot.children;if(t.length){var e=t[t.length-1].bindingContext[this.local];return e}},e.prototype._getIndexOfFirstView=function(){return this.view(0)?this.view(0).overrideContext.$index:-1},e.prototype._calcInitialHeights=function(t){var e=this;if(!(this._viewsLength>0&&this._itemsLength===t||t<=0)){this._hasCalculatedSizes=!0,this._itemsLength=t;var i=this.view(0).lastChild;if(this.itemHeight=(0,a.calcOuterHeight)(i),this.itemHeight<=0)return void(this._sizeInterval=setInterval(function(){var t=(0,a.calcOuterHeight)(i);t>0&&(clearInterval(e._sizeInterval),e.itemsChanged())},500));this.scrollContainerHeight=this._fixedHeightContainer?this._calcScrollHeight(this.scrollContainer):document.documentElement.clientHeight,this.elementsInView=Math.ceil(this.scrollContainerHeight/this.itemHeight)+1,this._viewsLength=2*this.elementsInView+this._bufferSize,this._bottomBufferHeight=this.itemHeight*t-this.itemHeight*this._viewsLength,this._bottomBufferHeight<0&&(this._bottomBufferHeight=0),this.bottomBuffer.style.height=this._bottomBufferHeight+"px",this._topBufferHeight=0,this.topBuffer.style.height=this._topBufferHeight+"px",this.scrollContainer.scrollTop=0,this._first=0}},e.prototype._calcScrollHeight=function(t){var e=void 0;return e=t.getBoundingClientRect().height,e-=(0,a.getStyleValue)(t,"borderTopWidth"),e-=(0,a.getStyleValue)(t,"borderBottomWidth")},e.prototype._observeInnerCollection=function(){var t=this._getInnerCollection(),e=this.strategyLocator.getStrategy(t);return!!e&&(this.collectionObserver=e.getCollectionObserver(this.observerLocator,t),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},e.prototype._getInnerCollection=function(){var t=(0,n.unwrapExpression)(this.sourceExpression);return t?t.evaluate(this.scope,null):null},e.prototype._observeCollection=function(){var t=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,t),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},e.prototype.viewCount=function(){return this.viewSlot.children.length},e.prototype.views=function(){return this.viewSlot.children},e.prototype.view=function(t){return this.viewSlot.children[t]},e.prototype.addView=function(t,e){var i=this.viewFactory.create();i.bind(t,e),this.viewSlot.add(i)},e.prototype.insertView=function(t,e,i){var r=this.viewFactory.create();r.bind(e,i),this.viewSlot.insert(t,r)},e.prototype.removeAllViews=function(t,e){return this.viewSlot.removeAll(t,e)},e.prototype.removeView=function(t,e,i){return this.viewSlot.removeAt(t,e,i)},e.prototype.updateBindings=function(t){for(var e=t.bindings.length;e--;)(0,n.updateOneTimeBinding)(t.bindings[e]);for(e=t.controllers.length;e--;)for(var i=t.controllers[e].boundProperties.length;i--;){var r=t.controllers[e].boundProperties[i].binding;(0,n.updateOneTimeBinding)(r)}},e}(n.AbstractRepeater),b=d(v.prototype,"items",[r.bindable],{enumerable:!0,initializer:null}),y=d(v.prototype,"local",[r.bindable],{enumerable:!0,initializer:null}),m=v))||m)||m)||m)}),define("aurelia-ui-virtualization/utilities",["exports","aurelia-templating-resources","aurelia-templating"],function(t,e,i){"use strict";function r(t){var e=void 0;return e=t.getBoundingClientRect().height,e+=o(t,"marginTop"),e+=o(t,"marginBottom")}function n(t,e){var i=e.parentElement||e.parentNode;i.insertBefore(t.lastChild,e)}function s(t,i){var r=t.viewSlot.children,n=r.length,s=t.items.length;i>0&&(i-=1);for(var a=t._topBufferHeight/t.itemHeight;i<n;++i)(0,e.updateOverrideContext)(r[i].overrideContext,i+a,s)}function a(t,i,r,n){var s=t.items,a=t.viewSlot;(0,e.updateOverrideContext)(i.overrideContext,r,s.length),i.bindingContext[t.local]=s[r],n?(a.children.push(a.children.shift()),t.templateStrategy.moveViewLast(i,t.bottomBuffer)):(a.children.unshift(a.children.splice(-1,1)[0]),t.templateStrategy.moveViewFirst(i,t.topBuffer))}function o(t,e){var i=void 0,r=void 0;return i=t.currentStyle||window.getComputedStyle(t),r=parseInt(i[e],10),Number.isNaN(r)?0:r}function l(t){return document.documentElement.clientHeight-t.getBoundingClientRect().bottom}function h(t){return t.getBoundingClientRect().top}Object.defineProperty(t,"__esModule",{value:!0}),t.calcOuterHeight=r,t.insertBeforeNode=n,t.updateVirtualOverrideContexts=s,t.rebindAndMoveView=a,t.getStyleValue=o,t.getElementDistanceToBottomViewPort=l,t.getElementDistanceToTopViewPort=h}),define("aurelia-ui-virtualization/dom-helper",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DomHelper=function(){function t(){}return t.prototype.getElementDistanceToTopOfDocument=function(t){var e=t.getBoundingClientRect(),i=document.documentElement,r=window.pageYOffset,n=i.clientTop,s=e.top+r-n;return Math.round(s)},t.prototype.hasOverflowScroll=function(t){var e=t.style;return"scroll"===e.overflowY||"scroll"===e.overflow||"auto"===e.overflowY||"auto"===e.overflow},t}()}),define("aurelia-ui-virtualization/virtual-repeat-strategy-locator",["exports","aurelia-templating-resources","./array-virtual-repeat-strategy"],function(t,e,i){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualRepeatStrategyLocator=void 0;t.VirtualRepeatStrategyLocator=function(t){function e(){var e=r(this,t.call(this));return e.matchers=[],e.strategies=[],e.addStrategy(function(t){return t instanceof Array},new i.ArrayVirtualRepeatStrategy),e}return n(e,t),e}(e.RepeatStrategyLocator)}),define("aurelia-ui-virtualization/array-virtual-repeat-strategy",["exports","aurelia-templating-resources","./utilities"],function(t,e,i){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayVirtualRepeatStrategy=void 0;t.ArrayVirtualRepeatStrategy=function(t){function s(){return r(this,t.apply(this,arguments))}return n(s,t),s.prototype.createFirstItem=function(t){var i=(0,e.createFullOverrideContext)(t,t.items[0],0,1);t.addView(i.bindingContext,i)},s.prototype.instanceChanged=function(t,e){this._inPlaceProcessItems(t,e)},s.prototype._standardProcessInstanceChanged=function(t,i){for(var r=1,n=t._viewsLength;r<n;++r){var s=(0,e.createFullOverrideContext)(t,i[r],r,n);t.addView(s.bindingContext,s)}},s.prototype._inPlaceProcessItems=function(t,i){for(var r=i.length,n=t.viewCount(),s=t._getIndexOfFirstView();n>r;)n--,t.removeView(n,!0);for(var a=t.local,o=0;o<n;o++){var l=t.view(o),h=o===r-1,c=0!==o&&!h;l.bindingContext[a]===i[o+s]&&l.overrideContext.$middle===c&&l.overrideContext.$last===h||(l.bindingContext[a]=i[o+s],l.overrideContext.$middle=c,
l.overrideContext.$last=h,t.updateBindings(l))}for(var u=Math.min(t._viewsLength,i.length),f=n;f<u;f++){var d=(0,e.createFullOverrideContext)(t,i[f],f,r);t.addView(d.bindingContext,d)}},s.prototype.instanceMutated=function(t,e,i){this._standardProcessInstanceMutated(t,e,i)},s.prototype._standardProcessInstanceMutated=function(t,e,i){var r=this;if(t.__queuedSplices){for(var n=0,s=i.length;n<s;++n){var a=i[n],o=a.index,l=a.removed,h=a.addedCount;mergeSplice(t.__queuedSplices,o,l,h)}return void(t.__array=e.slice(0))}var c=this._runSplices(t,e.slice(0),i);c instanceof Promise&&!function(){var e=t.__queuedSplices=[],i=function i(){if(!e.length)return delete t.__queuedSplices,void delete t.__array;var n=r._runSplices(t,t.__array,e)||Promise.resolve();n.then(i)};c.then(i)}()},s.prototype._runSplices=function(t,r,n){for(var s=this,a=0,o=[],l=!0,h=0;h<n.length;h++){var c=n[h];if(c.removed.length!==c.addedCount){l=!1;break}}if(l){for(var u=0;u<n.length;u++)for(var f=n[u],d=f.index;d<f.index+f.addedCount;d++)if(!this._isIndexBeforeViewSlot(t,t.viewSlot,d)&&!this._isIndexAfterViewSlot(t,t.viewSlot,d)){var p=this._getViewIndex(t,t.viewSlot,d),g=(0,e.createFullOverrideContext)(t,r[d],d,r.length);t.removeView(p,!0,!0),t.insertView(p,g.bindingContext,g)}}else{for(var m=0,v=n.length;m<v;++m){for(var b=n[m],y=b.removed,x=y.length,w=0,_=x;w<_;++w){var C=this._removeViewAt(t,b.index+a+o.length,!0,w,x);C instanceof Promise&&o.push(C)}a-=b.addedCount}if(o.length>0)return Promise.all(o).then(function(){s._handleAddedSplices(t,r,n),(0,i.updateVirtualOverrideContexts)(t,0)});this._handleAddedSplices(t,r,n),(0,i.updateVirtualOverrideContexts)(t,0)}},s.prototype._removeViewAt=function(t,r,n,s,a){var o=void 0,l=void 0,h=t.viewSlot,c=t.viewCount(),u=void 0,f=a>c;if(t._viewsLength<=s)return t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight,void t._adjustBufferHeights();if(this._isIndexBeforeViewSlot(t,h,r)||this._isIndexAfterViewSlot(t,h,r))this._isIndexBeforeViewSlot(t,h,r)?t._bottomBufferHeight>0?(t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight,(0,i.rebindAndMoveView)(t,t.view(0),t.view(0).overrideContext.$index,!0)):t._topBufferHeight=t._topBufferHeight-t.itemHeight:this._isIndexAfterViewSlot(t,h,r)&&(t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight);else{var d=this._getViewIndex(t,h,r);if(o=t.removeView(d,n),t.items.length>c){var p=void 0;if(t._bottomBufferHeight>t.itemHeight){if(u=c,f)p=s;else{var g=t._getLastViewItem();p=t.items.indexOf(g)+1}t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight}else t._topBufferHeight>0&&(u=0,p=t._getIndexOfFirstView()-1,t._topBufferHeight=t._topBufferHeight-t.itemHeight);var m=t.items[p];if(m){var v=(0,e.createFullOverrideContext)(t,m,p,t.items.length);l=t.viewFactory.create(),l.bind(v.bindingContext,v)}}}o instanceof Promise?o.then(function(){t.viewSlot.insert(u,l),t._adjustBufferHeights()}):l&&t.viewSlot.insert(u,l),t._adjustBufferHeights()},s.prototype._isIndexBeforeViewSlot=function(t,e,i){var r=this._getViewIndex(t,e,i);return r<0},s.prototype._isIndexAfterViewSlot=function(t,e,i){var r=this._getViewIndex(t,e,i);return r>t._viewsLength-1},s.prototype._getViewIndex=function(t,e,i){if(0===t.viewCount())return-1;var r=t._topBufferHeight/t.itemHeight;return i-r},s.prototype._handleAddedSplices=function(t,r,n){for(var s=r.length,a=t.viewSlot,o=0,l=n.length;o<l;++o)for(var h=n[o],c=h.index,u=h.index+h.addedCount;c<u;++c){var f=(0,i.getElementDistanceToBottomViewPort)(t.templateStrategy.getLastElement(t.bottomBuffer))>0;if(0===t.viewCount()||!this._isIndexBeforeViewSlot(t,a,c)&&!this._isIndexAfterViewSlot(t,a,c)||f){var d=(0,e.createFullOverrideContext)(t,r[c],c,s);t.insertView(c,d.bindingContext,d),t._hasCalculatedSizes?t.viewCount()>t._viewsLength&&(f?(t.removeView(0,!0,!0),t._topBufferHeight=t._topBufferHeight+t.itemHeight,t._adjustBufferHeights()):(t.removeView(t.viewCount()-1,!0,!0),t._bottomBufferHeight=t._bottomBufferHeight+t.itemHeight)):t._calcInitialHeights(1)}else this._isIndexBeforeViewSlot(t,a,c)?t._topBufferHeight=t._topBufferHeight+t.itemHeight:this._isIndexAfterViewSlot(t,a,c)&&(t._bottomBufferHeight=t._bottomBufferHeight+t.itemHeight,t.isLastIndex=!1)}t._adjustBufferHeights()},s}(e.ArrayRepeatStrategy)}),define("aurelia-ui-virtualization/template-strategy",["exports","aurelia-dependency-injection","aurelia-pal","aurelia-templating","./utilities","./dom-helper"],function(t,e,i,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTemplateStrategy=t.TableStrategy=t.TemplateStrategyLocator=void 0;var a,o,l,h,c=(t.TemplateStrategyLocator=(a=(0,e.inject)(e.Container),a(o=function(){function t(t){this.container=t}return t.prototype.getStrategy=function(t){return t.parentNode&&"tbody"===t.parentNode.localName?this.container.get(c):this.container.get(u)},t}())||o),t.TableStrategy=(l=(0,e.inject)(s.DomHelper),l(h=function(){function t(t){this.tableCssReset="    display: block;    width: auto;    height: auto;    margin: 0;    padding: 0;    border: none;    border-collapse: inherit;    border-spacing: 0;    background-color: transparent;    -webkit-border-horizontal-spacing: 0;    -webkit-border-vertical-spacing: 0;",this.domHelper=t}return t.prototype.getScrollContainer=function(t){return t.parentNode},t.prototype.moveViewFirst=function(t,e){var r=this._getTbodyElement(e.nextSibling),s=r.firstChild,a=i.DOM.nextElementSibling(s);(0,n.insertBeforeNode)(t,a)},t.prototype.moveViewLast=function(t,e){var i=this.getLastElement(e).nextSibling,r=8===i.nodeType&&"anchor"===i.data?i:i;(0,n.insertBeforeNode)(t,r)},t.prototype.createTopBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",r=i.DOM.createElement(e),n=t.parentNode.parentNode;return n.parentNode.insertBefore(r,n),r.innerHTML="&nbsp;",r},t.prototype.createBottomBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",r=i.DOM.createElement(e),n=t.parentNode.parentNode;return n.parentNode.insertBefore(r,n.nextSibling),r},t.prototype.removeBufferElements=function(t,e,i){e.parentNode.removeChild(e),i.parentNode.removeChild(i)},t.prototype.getFirstElement=function(t){var e=this._getTbodyElement(i.DOM.nextElementSibling(t)),r=e.firstChild;return i.DOM.nextElementSibling(r)},t.prototype.getLastElement=function(t){var e=this._getTbodyElement(t.previousSibling),i=e.children;return i[i.length-1]},t.prototype.getTopBufferDistance=function(t){var e=this._getTbodyElement(t.nextSibling);return this.domHelper.getElementDistanceToTopOfDocument(e)-this.domHelper.getElementDistanceToTopOfDocument(t)},t.prototype._getTbodyElement=function(t){for(var e=void 0,i=t.children,r=0,n=i.length;r<n;++r)if("tbody"===i[r].localName){e=i[r];break}return e},t}())||h)),u=t.DefaultTemplateStrategy=function(){function t(){}return t.prototype.getScrollContainer=function(t){return t.parentNode},t.prototype.moveViewFirst=function(t,e){(0,n.insertBeforeNode)(t,i.DOM.nextElementSibling(e))},t.prototype.moveViewLast=function(t,e){var i=e.previousSibling,r=8===i.nodeType&&"anchor"===i.data?i:e;(0,n.insertBeforeNode)(t,r)},t.prototype.createTopBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",r=i.DOM.createElement(e);return t.parentNode.insertBefore(r,t),r},t.prototype.createBottomBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",r=i.DOM.createElement(e);return t.parentNode.insertBefore(r,t.nextSibling),r},t.prototype.removeBufferElements=function(t,e,i){t.parentNode.removeChild(e),t.parentNode.removeChild(i)},t.prototype.getFirstElement=function(t){return i.DOM.nextElementSibling(t)},t.prototype.getLastElement=function(t){return t.previousElementSibling},t.prototype.getTopBufferDistance=function(t){return 0},t}()}),define("aurelia-ui-virtualization/infinite-scroll-next",["exports","aurelia-templating"],function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteScrollNext=void 0;var i,r;t.InfiniteScrollNext=(i=(0,e.customAttribute)("infinite-scroll-next"),i(r=function(){function t(){}return t.prototype.attached=function(){},t.prototype.bind=function(t,e){this.scope={bindingContext:t,overrideContext:e}},t}())||r)}),define("sigma-ui-framework/sigma-ui-framework",["require","exports","./utils/ui-constants","./utils/ui-utils","./utils/ui-validation","aurelia-validation","./utils/ui-event","./utils/ui-constants","./utils/ui-formatters","./utils/ui-application","./utils/ui-model","./utils/ui-dialog","./utils/ui-tree-models","./utils/ui-http-service","./utils/ui-validation","./utils/ui-utils","lodash","moment","numeral","kramed","./scripts/phonelib","./scripts/fileTypes","./scripts/countries","./scripts/currencies"],function(t,e,i,r,n,s,a,o,l,h,c,u,f,d,p,g){"use strict";function m(t,e){t.container.registerHandler("ui-validator",function(t){return t.get(n.UIValidationRenderer)}),t.globalResources("./core/ui-viewport"),t.globalResources("./core/ui-page"),t.globalResources("./core/ui-grid"),t.globalResources("./components/ui-menu"),t.globalResources("./components/ui-form"),t.globalResources("./components/ui-ribbon"),t.globalResources("./components/ui-panel"),t.globalResources("./components/ui-login"),t.globalResources("./components/ui-tree"),t.globalResources("./components/ui-datagrid"),t.globalResources("./components/ui-tab-panel"),t.globalResources("./inputs/ui-button"),t.globalResources("./inputs/ui-switch"),t.globalResources("./inputs/ui-option"),t.globalResources("./inputs/ui-display"),t.globalResources("./inputs/ui-input"),t.globalResources("./inputs/ui-file"),t.globalResources("./inputs/ui-phone"),t.globalResources("./inputs/ui-markdown"),t.globalResources("./inputs/ui-textarea"),t.globalResources("./inputs/ui-input-dual"),t.globalResources("./inputs/ui-combo"),t.globalResources("./inputs/ui-tags"),t.globalResources("./inputs/ui-language"),t.globalResources("./inputs/ui-date"),t.globalResources("./inputs/ui-date-view"),t.globalResources("./inputs/ui-reorder"),t.globalResources("./inputs/ui-list"),t.globalResources("./utils/ui-converters"),r.kramed.setOptions({gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(t){return hljs?(hljs.configure({useBR:!0,tabReplace:"    "}),hljs.highlightAuto(t).value):t}}),s.ValidationRules.customRule("phone",function(t,e){return null===t||void 0===t||PhoneLib.isValid(t)},"${$displayName } is not a valid phone number."),s.ValidationRules.customRule("integer",function(t,e,i,r){return null===t||void 0===t||Number.isInteger(t)&&t>=(i||Number.MIN_VALUE)&&t<=(r||Number.MAX_VALUE)},'${$displayName} must be an integer value between ${$config.min || "MIN_VALUE"} and ${$config.max || "MAX_VALUE"}.',function(t,e){return{min:t,max:e}}),s.ValidationRules.customRule("decimal",function(t,e,i,r){return null===t||void 0===t||0===Math.floor(t%1)&&t>=(i||Number.MIN_VALUE)&&t<=(r||Number.MAX_VALUE)},'${$displayName} must be a decimal value between ${$config.min || "MIN_VALUE"} and ${$config.max || "MAX_VALUE"}.',function(t,e){return{min:t,max:e}}),s.ValidationRules.customRule("language",function(t,e,i,r){if(!(r&&r.clearErrors&&r.addError))throw new Error("Language validation must have reference to ui-language");var n=[];return r.clearErrors(),_.forEach(t,function(t,e){n.push(i.validator.validateObject(t).then(function(t){return t.length>0&&r.addError(e),t.length>0?e:""}))}),Promise.all(n).then(function(t){return 0==t.join("").length})},"Some language entries contain invalid values");var a={title:function(t){return i.UIConstants.App.Title=t,a},version:function(t){return i.UIConstants.App.Version=t,a},appKey:function(t){return i.UIConstants.App.Key=t,a},apiUrl:function(t){return i.UIConstants.Http.BaseUrl=t,a},apiHeaders:function(t){return i.UIConstants.Http.Headers=t,a},addAuthHeader:function(t){return i.UIConstants.Http.AuthorizationHeader=t,a},loadCharts:function(){return t.globalResources("./components/ui-chart"),r.UIChartStatic.init(),a},languages:function(t){return i.UIConstants.Languages=t,a}};void 0!==e&&"function"==typeof e&&e(a)}e.configure=m,e.UIEvent=a.UIEvent,e.UIConstants=o.UIConstants,e.UIFormat=l.UIFormat,e.UIApplication=h.UIApplication,e.AuthInterceptor=h.AuthInterceptor,e.UIModel=c.UIModel,e.UIDialogService=u.UIDialogService,e.UIDialog=u.UIDialog,e.UITreeModel=f.UITreeModel,e.UITreeOptions=f.UITreeOptions,e.UIHttpService=d.UIHttpService,e.UIValidationRenderer=p.UIValidationRenderer,e.UIUtils=g.UIUtils,e.UIChartStatic=g.UIChartStatic,e._=g._,e.moment=g.moment,e.numeral=g.numeral,e.kramed=g.kramed}),define("sigma-ui-framework",["sigma-ui-framework/sigma-ui-framework"],function(t){return t});